apiVersion: v1
kind: ConfigMap
metadata:
  name: service-layer-config
data:
  # MarbleRun Coordinator addresses (full K8s DNS)
  # - Mesh API (2001): used by Marbles (EDG_MARBLE_COORDINATOR_ADDR)
  # - Client API (4433): used by MarbleRun CLI (marblerun *)
  COORDINATOR_MESH_ADDR: "coordinator-mesh-api.marblerun.svc.cluster.local:2001"
  COORDINATOR_CLIENT_ADDR: "coordinator-client-api.marblerun.svc.cluster.local:4433"
  # Default to SGX hardware mode; overlays can override (e.g. simulation).
  OE_SIMULATION: "0"
  # Application environment; overlays should set this to "production" for real deployments.
  MARBLE_ENV: "development"

  LOG_LEVEL: "info"
  LOG_FORMAT: "json"

  # Supabase Configuration
  # Public Supabase project URL (not a secret). Override per environment.
  SUPABASE_URL: "https://your-project.supabase.co"
  # Neo RPC (Testnet)
  NEO_RPC_URL: "https://testnet1.neo.coz.io:443"
  # Neo N3 network magic (Testnet). Mainnet: 860833102
  NEO_NETWORK_MAGIC: "894710606"
  # On-chain MiniApp platform contract hashes (0x-prefixed Uint160 strings).
  # Set these per environment after deploying contracts.
  CONTRACT_PAYMENTHUB_HASH: ""
  CONTRACT_GOVERNANCE_HASH: ""
  CONTRACT_PRICEFEED_HASH: ""
  CONTRACT_RANDOMNESSLOG_HASH: ""
  CONTRACT_APPREGISTRY_HASH: ""
  CONTRACT_AUTOMATIONANCHOR_HASH: ""
  # Oracle config
  ORACLE_HTTP_ALLOWLIST: "https://api.binance.com,https://api.coinbase.com,https://api.coingecko.com"
  # Optional Arbitrum RPC override for Chainlink (NeoFeeds). Defaults to https://arb1.arbitrum.io/rpc.
  ARBITRUM_RPC: "https://arb1.arbitrum.io/rpc"
  # NeoFlow webhook security (production/SGX): block private networks by default.
  NEOFLOW_WEBHOOK_ALLOW_PRIVATE_NETWORKS: "false"

  # Internal service endpoints (service-to-service clients)
  GLOBALSIGNER_SERVICE_URL: "https://globalsigner:8092"

  # TxProxy allowlist (JSON). Default deny-all when unset.
  TXPROXY_ALLOWLIST: ""
