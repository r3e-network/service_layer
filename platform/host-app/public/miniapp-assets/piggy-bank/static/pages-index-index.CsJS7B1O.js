import{c as e,r as a,t,i as n,a as l,b as o,d as s,o as i,e as c,f as r,g as d,n as u,h,w as p,j as f,k as g,l as m,m as w,p as b,F as v,q as _,s as y,u as k,v as z,x as N,y as C,z as S,A as T,B as P,C as A,D as B,E as I,G as D,H as O,S as F,I as E,J as R,K as x,L}from"./index-BaPSfdCQ.js";import"vite-plugin-node-polyfills/shims/global";import"vite-plugin-node-polyfills/shims/buffer";import"vite-plugin-node-polyfills/shims/process";const W=a([]),$=a(!1),K=a(null);var U,M;(M=U||(U={})).direct="direct",M.patchObject="patch object",M.patchFunction="patch function";const j={docBadge:{en:"Documentation",zh:"æ–‡æ¡£"},docFooter:{en:"NeoHub MiniApp Protocol v2.4.0",zh:"NeoHub MiniApp Protocol v2.4.0"}};function H(e){const t={...j,...e},n=a("undefined"==typeof window?"en":(navigator.language||navigator.userLanguage||"en").toLowerCase().startsWith("zh")?"zh":"en"),l=(e,a)=>{const l=t[e];if(!l)return String(e);let o="";return o="string"==typeof l?l:l[n.value]||l.en||l.zh||String(e),a?((e,a)=>e.replace(/\{(\w+)\}/g,(e,t)=>String(a[t]??`{${t}}`)))(o,a):o},o=e=>{n.value=(e=>e&&e.toLowerCase().startsWith("zh")?"zh":"en")(e)};if("undefined"!=typeof window){window.addEventListener("languageChange",e=>{var a;const t=null==(a=e.detail)?void 0:a.language;t&&o(t)});const e=(()=>{try{if(window.parent!==window&&document.referrer)return new URL(document.referrer).origin}catch{}return window.location.origin})();window.addEventListener("message",a=>{const t=a.source===window.parent;if(!(a.origin===e||a.origin===window.location.origin||t&&("null"===a.origin||"null"===e)))return;const n=a.data;if(!n||"object"!=typeof n)return;if("language-change"!==n.type)return;const l=String(n.language||n.locale||n.lang||"").trim();l&&o(l)})}return()=>({locale:n,t:l,setLocale:o})}const V=H({wrongChain:{en:"Wrong Network",zh:"ç½‘ç»œé”™è¯¯"},wrongChainMessage:{en:"Switch to Neo N3 Mainnet to continue.",zh:"åˆ‡æ¢åˆ° Neo N3 ä¸»ç½‘ä»¥ç»§ç»­ã€‚"},switchToNeo:{en:"Switch Network",zh:"åˆ‡æ¢ç½‘ç»œ"},connectWalletPrompt:{en:"Please connect your wallet",zh:"è¯·è¿æ¥é’±åŒ…"},contractUnavailable:{en:"Contract unavailable",zh:"åˆçº¦ä¸å¯ç”¨"},transactionFailed:{en:"Transaction failed",zh:"äº¤æ˜“å¤±è´¥"},insufficientBalance:{en:"Insufficient balance",zh:"ä½™é¢ä¸è¶³"},loading:{en:"Loading...",zh:"åŠ è½½ä¸­..."},error:{en:"Error",zh:"é”™è¯¯"},main:{en:"Main",zh:"ä¸»é¡µ"},game:{en:"Game",zh:"æ¸¸æˆ"},games:{en:"Games",zh:"æ¸¸æˆ"},stats:{en:"Stats",zh:"ç»Ÿè®¡"},docsTab:{en:"Docs",zh:"æ–‡æ¡£"},settings:{en:"Settings",zh:"è®¾ç½®"},about:{en:"About",zh:"å…³äº"},docSubtitle:{en:"Documentation",zh:"æ–‡æ¡£"},docDescription:{en:"Learn how to use this miniapp",zh:"äº†è§£å¦‚ä½•ä½¿ç”¨æ­¤è¿·ä½ åº”ç”¨"},docWhatItIs:{en:"What is it?",zh:"è¿™æ˜¯ä»€ä¹ˆï¼Ÿ"},docHowToUse:{en:"How to use",zh:"å¦‚ä½•ä½¿ç”¨"},docOnChainFeatures:{en:"On-Chain Features",zh:"é“¾ä¸Šç‰¹æ€§"},confirm:{en:"Confirm",zh:"ç¡®è®¤"},cancel:{en:"Cancel",zh:"å–æ¶ˆ"},close:{en:"Close",zh:"å…³é—­"},continue:{en:"Continue",zh:"ç»§ç»­"},retry:{en:"Retry",zh:"é‡è¯•"},back:{en:"Back",zh:"è¿”å›"},walletRequired:{en:"Wallet Required",zh:"éœ€è¦é’±åŒ…"},walletDescription:{en:"Please connect your wallet to continue.",zh:"è¯·è¿æ¥é’±åŒ…ä»¥ç»§ç»­ã€‚"},connectWallet:{en:"Connect Wallet",zh:"è¿æ¥é’±åŒ…"},wpTitle:{en:"Wallet Required",zh:"éœ€è¦é’±åŒ…"},wpDescription:{en:"Please connect your wallet to continue.",zh:"è¯·è¿æ¥é’±åŒ…ä»¥ç»§ç»­ã€‚"},wpConnect:{en:"Connect Wallet",zh:"è¿æ¥é’±åŒ…"},wpCancel:{en:"Cancel",zh:"å–æ¶ˆ"},success:{en:"Success",zh:"æˆåŠŸ"},failed:{en:"Failed",zh:"å¤±è´¥"},pending:{en:"Pending",zh:"å¤„ç†ä¸­"},completed:{en:"Completed",zh:"å·²å®Œæˆ"},buy:{en:"Buy",zh:"è´­ä¹°"},sell:{en:"Sell",zh:"å‡ºå”®"},swap:{en:"Swap",zh:"äº¤æ¢"},transfer:{en:"Transfer",zh:"è½¬è´¦"},claim:{en:"Claim",zh:"é¢†å–"},enterAmount:{en:"Enter amount",zh:"è¯·è¾“å…¥æ•°é‡"},selectOption:{en:"Select an option",zh:"è¯·é€‰æ‹©"},search:{en:"Search",zh:"æœç´¢"},docBadge:{en:"Documentation",zh:"æ–‡æ¡£"},docFooter:{en:"NeoHub MiniApp Protocol v2.4.0",zh:"NeoHub MiniApp Protocol v2.4.0"}}),G=H({"app.title":{en:"ZK Piggy Bank",zh:"é›¶çŸ¥è¯†å­˜é’±ç½"},"app.subtitle":{en:"Save with Privacy",zh:"éšç§å‚¨è“„"},"app.create":{en:"New Piggy Bank",zh:"æ–°å»ºå­˜é’±ç½"},"app.my_banks":{en:"My Piggy Banks",zh:"æˆ‘çš„å­˜é’±ç½"},"create.name_label":{en:"Name",zh:"åç§°"},"create.name_placeholder":{en:"e.g. Travel Fund",zh:"ä¾‹å¦‚ï¼šæ—…è¡ŒåŸºé‡‘"},"create.target_label":{en:"Target Amount",zh:"ç›®æ ‡é‡‘é¢"},"create.date_label":{en:"Unlock Date",zh:"å¼€ç½æ—¥æœŸ"},"create.purpose_label":{en:"Purpose",zh:"å­˜é’±ç›®çš„"},"create.create_btn":{en:"Create Piggy Bank",zh:"åˆ›å»ºå­˜é’±ç½"},"create.create_success":{en:"Piggy Bank Created!",zh:"å­˜é’±ç½å·²åˆ›å»ºï¼"},"create.invalid_date":{en:"Unlock date must be in the future",zh:"å¼€ç½æ—¥æœŸå¿…é¡»æ™šäºå½“å‰æ—¶é—´"},"create.select_date":{en:"Select Date",zh:"é€‰æ‹©æ—¥æœŸ"},"create.select_token":{en:"Select Token",zh:"é€‰æ‹©ä»£å¸"},"create.custom_token":{en:"Add Custom Token",zh:"æ·»åŠ è‡ªå®šä¹‰ä»£å¸"},"create.popular_tokens":{en:"Popular Tokens",zh:"å¸¸ç”¨ä»£å¸"},"detail.locked":{en:"Locked",zh:"é”å®šä¸­"},"detail.unlocked":{en:"Ready to Smash",zh:"å¯ç ¸ç¢"},"detail.deposit":{en:"Deposit",zh:"å­˜å…¥"},"detail.deposits":{en:"Deposits",zh:"å­˜æ¬¾è®°å½•"},"detail.smash":{en:"Smash & Withdraw",zh:"ç ¸ç¢å–æ¬¾"},"detail.check_goal":{en:"Check Goal (ZK)",zh:"éªŒè¯ç›®æ ‡ (ZK)"},"detail.balance_hidden":{en:"Balance Hidden",zh:"ä½™é¢å·²éšè—"},"detail.unlocks_on":{en:"Unlocks on {date}",zh:"è§£é”æ—¶é—´ {date}"},"detail.deposit_success":{en:"Deposit Successful!",zh:"å­˜å…¥æˆåŠŸï¼"},"detail.smash_success":{en:"Withdrawn Successfully!",zh:"å–æ¬¾æˆåŠŸï¼"},"detail.goal_reached":{en:"Goal Reached! ğŸ‰",zh:"ç›®æ ‡è¾¾æˆï¼ğŸ‰"},"detail.goal_not_reached":{en:"Keep Saving! ğŸ’ª",zh:"ç»§ç»­åŠ æ²¹ï¼ğŸ’ª"},"detail.goal":{en:"Goal",zh:"ç›®æ ‡"},"wallet.connect":{en:"Connect Wallet",zh:"è¿æ¥é’±åŒ…"},"wallet.not_connected":{en:"Wallet not connected",zh:"é’±åŒ…æœªè¿æ¥"},"wallet.connect_failed":{en:"Wallet connection failed",zh:"é’±åŒ…è¿æ¥å¤±è´¥"},"wallet.wrong_network":{en:"Please switch to the bank's network",zh:"è¯·åˆ‡æ¢åˆ°å­˜é’±ç½æ‰€å±ç½‘ç»œ"},"wallet.switch_network":{en:"Switch Network",zh:"åˆ‡æ¢ç½‘ç»œ"},"settings.title":{en:"MiniApp Settings",zh:"åº”ç”¨è®¾ç½®"},"settings.network":{en:"Network",zh:"ç½‘ç»œ"},"settings.select_network":{en:"Select network",zh:"é€‰æ‹©ç½‘ç»œ"},"settings.alchemy_key":{en:"RPC API Key",zh:"RPC API Key"},"settings.alchemy_placeholder":{en:"Paste your RPC key",zh:"ç²˜è´´ä½ çš„ RPC å¯†é’¥"},"settings.walletconnect":{en:"WalletConnect Project ID",zh:"WalletConnect é¡¹ç›® ID"},"settings.walletconnect_placeholder":{en:"Optional for QR wallet connect",zh:"å¯é€‰ï¼Œç”¨äºæ‰«ç è¿æ¥é’±åŒ…"},"settings.contract_address":{en:"Piggy Bank Contract",zh:"å­˜é’±ç½åˆçº¦åœ°å€"},"settings.missing_config":{en:"Configuration required",zh:"éœ€è¦è¡¥å……é…ç½®"},"settings.issue_alchemy":{en:"RPC API key missing",zh:"ç¼ºå°‘ RPC API Key"},"settings.issue_contract":{en:"Contract address missing",zh:"ç¼ºå°‘åˆçº¦åœ°å€"},"common.confirm":{en:"Confirm",zh:"ç¡®è®¤"},"common.cancel":{en:"Cancel",zh:"å–æ¶ˆ"},"common.loading":{en:"Processing...",zh:"å¤„ç†ä¸­..."},tabMain:{en:"My Banks",zh:"æˆ‘çš„å­˜é’±ç½"},tabSettings:{en:"Settings",zh:"è®¾ç½®"},tabDocs:{en:"Docs",zh:"æ–‡æ¡£"},"empty.banks":{en:"No Piggy Banks yet.",zh:"è¿˜æ²¡æœ‰å­˜é’±ç½ã€‚"},docSubtitle:{en:"Private goal-based savings vaults on Neo N3",zh:"Neo N3 é“¾ä¸Šçš„éšç§ç›®æ ‡å­˜é’±ç½"},docDescription:{en:"ZK Piggy Bank lets you save NEP-17 tokens toward a target and lock them until a chosen date. Zero-knowledge proofs keep balances private until you decide to smash the bank. Connect a Neo N3 wallet and configure your RPC access before use.",zh:"é›¶çŸ¥è¯†å­˜é’±ç½å…è®¸æ‚¨ä¸ºç›®æ ‡å­˜å…¥ NEP-17 ä»£å¸ï¼Œå¹¶é”å®šè‡³æŒ‡å®šæ—¥æœŸã€‚é›¶çŸ¥è¯†è¯æ˜å¯åœ¨æ‚¨ç ¸ç¢å­˜é’±ç½å‰éšè—ä½™é¢ã€‚ä½¿ç”¨å‰è¯·è¿æ¥ Neo N3 é’±åŒ…å¹¶é…ç½® RPCã€‚"},docStep1:{en:"Connect a Neo N3 wallet and select mainnet or testnet.",zh:"è¿æ¥ Neo N3 é’±åŒ…å¹¶é€‰æ‹©ä¸»ç½‘æˆ–æµ‹è¯•ç½‘ã€‚"},docStep2:{en:"Create a new Piggy Bank with a token, target amount, and unlock date.",zh:"åˆ›å»ºå­˜é’±ç½ï¼Œè®¾ç½®ä»£å¸ã€ç›®æ ‡é‡‘é¢ä¸è§£é”æ—¥æœŸã€‚"},docStep3:{en:"Deposit NEP-17 tokens (popular or custom contract address).",zh:"å­˜å…¥ NEP-17 ä»£å¸ï¼ˆå¯é€‰å¸¸ç”¨æˆ–è‡ªå®šä¹‰åˆçº¦åœ°å€ï¼‰ã€‚"},docStep4:{en:"Use ZK Verify to check goal progress without revealing balances.",zh:"ä½¿ç”¨ ZK éªŒè¯åœ¨ä¸æš´éœ²ä½™é¢çš„æƒ…å†µä¸‹æ£€æŸ¥ç›®æ ‡è¿›åº¦ã€‚"},docStep5:{en:"Smash the Piggy Bank after unlock to withdraw funds.",zh:"åˆ°æœŸåç ¸ç¢å­˜é’±ç½å¹¶æå–èµ„é‡‘ã€‚"},docFeature1Name:{en:"Zero-knowledge privacy",zh:"é›¶çŸ¥è¯†éšç§"},docFeature1Desc:{en:"Balances remain hidden until withdrawal.",zh:"ä½™é¢åœ¨æå–å‰ä¿æŒéšè—ã€‚"},docFeature2Name:{en:"Any NEP-17",zh:"æ”¯æŒä»»æ„ NEP-17"},docFeature2Desc:{en:"Deposit NEO, GAS, or any supported token contract.",zh:"æ”¯æŒ NEOã€GAS æˆ–ä»»æ„ä»£å¸åˆçº¦ã€‚"},docFeature3Name:{en:"Time-locked vaults",zh:"æ—¶é—´é”å®š"},docFeature3Desc:{en:"Funds are locked until your chosen unlock date.",zh:"èµ„é‡‘åœ¨æŒ‡å®šæ—¥æœŸå‰æ— æ³•æå–ã€‚"},docFeature4Name:{en:"Network ready",zh:"ç½‘ç»œå…¼å®¹"},docFeature4Desc:{en:"Works on Neo N3 mainnet/testnet with RPC config.",zh:"æ”¯æŒ Neo N3 ä¸»ç½‘/æµ‹è¯•ç½‘å¹¶å¯é…ç½® RPCã€‚"},docFeature5Name:{en:"Local secrets",zh:"æœ¬åœ°å¯†é’¥"},docFeature5Desc:{en:"Savings secrets stay on your device for safety.",zh:"å­˜æ¬¾å¯†é’¥ä¿å­˜åœ¨æœ¬åœ°è®¾å¤‡ä»¥ç¡®ä¿å®‰å…¨ã€‚"},docFeature6Name:{en:"Goal verification",zh:"ç›®æ ‡éªŒè¯"},docFeature6Desc:{en:"Check target progress without exposing amounts.",zh:"åœ¨ä¸æš´éœ²é‡‘é¢çš„æƒ…å†µä¸‹éªŒè¯ç›®æ ‡è¿›åº¦ã€‚"},docBadge:{en:"DOCUMENTATION",zh:"æ–‡æ¡£"},docWhatItIs:{en:"WHAT IS IT?",zh:"è¿™æ˜¯ä»€ä¹ˆï¼Ÿ"},docHowToUse:{en:"HOW TO USE",zh:"å¦‚ä½•ä½¿ç”¨"},docOnChainFeatures:{en:"ON-CHAIN FEATURES",zh:"é“¾ä¸Šç‰¹æ€§"},docFooter:{en:"SECURED BY ZERO KNOWLEDGE PROOFS",zh:"ç”±é›¶çŸ¥è¯†è¯æ˜ä¿æŠ¤"},wrongChain:{en:"Wrong Network",zh:"ç½‘ç»œé”™è¯¯"},wrongChainMessage:{en:"This app requires Neo N3 network.",zh:"æ­¤åº”ç”¨éœ€ Neo N3 ç½‘ç»œã€‚"},switchToNeo:{en:"Switch to Neo N3",zh:"åˆ‡æ¢åˆ° Neo N3"},error:{en:"Error",zh:"é”™è¯¯"}});function Z(e,a=6,t=4){const n=(e??"").trim();return n?n.length<=a+t+3?n:`${n.slice(0,a)}...${n.slice(-t)}`:"--"}const q=(e,a)=>{const t=e.__vccOpts||e;for(const[n,l]of a)t[n]=l;return t},J=q(s({__name:"AppIcon",props:{name:{},size:{default:20},label:{},decorative:{type:Boolean,default:!0}},setup(a){const t=a,n={home:"ğŸ ",settings:"âš™ï¸",user:"ğŸ‘¤",wallet:"ğŸ’¼",book:"ğŸ“–",trophy:"ğŸ†",star:"â­",heart:"â¤ï¸",check:"âœ“",clock:"ğŸ•",plus:"â•",add:"â•",close:"âœ•",x:"âœ•",menu:"â˜°",trending:"ğŸ“ˆ",chart:"ğŸ“Š",calendar:"ğŸ“…",search:"ğŸ”",filter:"ğŸ”½",edit:"âœï¸",delete:"ğŸ—‘ï¸",copy:"ğŸ“‹",share:"ğŸ“¤",download:"â¬‡ï¸",upload:"â¬†ï¸",success:"âœ“",error:"âœ•",warning:"âš ï¸",info:"â„¹ï¸",loading:"â³",neo:"ğŸ’",gas:"â›½",contract:"ğŸ“œ",chain:"â›“ï¸",block:"ğŸ§±",helpful:"ğŸ¤",generous:"ğŸ",verified:"âœ“",contributor:"â­",champion:"ğŸ†",legend:"ğŸ‘‘",game:"ğŸ®",stats:"ğŸ“Š",docs:"ğŸ“„",about:"â„¹ï¸",contact:"âœ‰ï¸"},l={logout:"â†ª",back:"â†",forward:"â†’",arrowUp:"â†‘",arrowDown:"â†“",arrowLeft:"â†",arrowRight:"â†’",refresh:"â†»"},o=e(()=>{if(!t.label)return t.decorative?"true":void 0}),s=e(()=>t.decorative?"presentation":void 0),w=e(()=>t.label?t.label:t.decorative?void 0:`${t.name} icon`),b=e(()=>t.size<=16?"icon-sm":t.size<=20?"icon-md":t.size<=24?"icon-lg":"icon-xl"),v=e(()=>{if(!b.value||"icon-md"===b.value)return{};const e=t.size;return{width:`${e}px`,height:`${e}px`,fontSize:.6*e+"px"}}),_=e(()=>n[t.name]),y=e(()=>l[t.name]);return i(()=>{const e=t.name in n,a=t.name in l;e||a||console.warn(`[AppIcon] Unknown icon name "${t.name}". Using fallback (first letter). Available icons: ${[...Object.keys(n),...Object.keys(l)].sort().join(", ")}`)}),(e,a)=>{const t=f,n=d;return c(),r(n,{class:h(["app-icon",`icon-${e.name}`,b.value]),style:u(v.value),"aria-hidden":o.value,"aria-label":w.value,role:s.value},{default:p(()=>[_.value?(c(),r(t,{key:0,class:"icon-emoji","aria-hidden":!0},{default:p(()=>[g(m(_.value),1)]),_:1})):y.value?(c(),r(t,{key:1,class:"icon-text","aria-hidden":!0},{default:p(()=>[g(m(y.value),1)]),_:1})):(c(),r(t,{key:2,class:"icon-fallback","aria-label":`Icon: ${e.name}`},{default:p(()=>[g(m(e.name.charAt(0).toUpperCase()),1)]),_:1},8,["aria-label"]))]),_:1},8,["class","style","aria-hidden","aria-label","role"])}}}),[["__scopeId","data-v-108e0d9d"]]),Q=q(s({__name:"NavBar",props:{tabs:{},activeTab:{}},emits:["change"],setup(e,{emit:a}){const t=e,n=a,l=e=>{n("change",e)};return i(()=>{if(!t.tabs||0===t.tabs.length)return void console.warn("[NavBar] No tabs provided - navigation will be empty");t.tabs.some((e,a)=>t.tabs.findIndex(a=>a.id===e.id)!==a)&&console.error("[NavBar] Duplicate tab IDs detected - navigation may not work correctly");!t.tabs.some(e=>e.id===t.activeTab)&&t.activeTab&&console.warn(`[NavBar] Active tab "${t.activeTab}" not found in tabs array. Available tabs: ${t.tabs.map(e=>e.id).join(", ")}`)}),(e,a)=>{const t=d,n=f;return c(),r(t,{class:"navbar",role:"navigation","aria-label":"Bottom navigation"},{default:p(()=>[(c(!0),w(v,null,b(e.tabs,a=>(c(),r(t,{key:a.id,class:h(["nav-item",e.activeTab===a.id&&"active"]),role:"menuitem",tabindex:e.activeTab===a.id?0:-1,"aria-label":a.label,"aria-selected":e.activeTab===a.id,onClick:e=>l(a.id),onKeydown:[_(e=>l(a.id),["enter"]),_(y(e=>l(a.id),["prevent"]),["space"])]},{default:p(()=>[k(t,{class:"nav-icon","aria-hidden":"true"},{default:p(()=>[k(J,{name:a.icon,size:22},null,8,["name"])]),_:2},1024),k(n,{class:"nav-label"},{default:p(()=>[g(m(a.label),1)]),_:2},1024)]),_:2},1032,["class","tabindex","aria-label","aria-selected","onClick","onKeydown"]))),128))]),_:1})}}}),[["__scopeId","data-v-80051b5c"]]),Y=q(s({__name:"TopNavBar",props:{title:{},showBack:{type:Boolean}},emits:["back"],setup:e=>(e,a)=>{const t=d,n=f;return c(),r(t,{class:"top-navbar"},{default:p(()=>[k(t,{class:"nav-left"},{default:p(()=>[e.showBack?(c(),r(t,{key:0,class:"nav-btn",onClick:a[0]||(a[0]=a=>e.$emit("back"))},{default:p(()=>[k(J,{name:"arrow-left",size:20})]),_:1})):z("",!0)]),_:1}),k(t,{class:"nav-center"},{default:p(()=>[k(n,{class:"nav-title"},{default:p(()=>[g(m(e.title),1)]),_:1})]),_:1}),k(t,{class:"nav-right"},{default:p(()=>[N(e.$slots,"right",{},void 0,!0)]),_:3})]),_:3})}}),[["__scopeId","data-v-58bca89c"]]),X=q(s({__name:"AppLayout",props:{title:{default:""},showTopNav:{type:Boolean,default:!1},showBack:{type:Boolean,default:!1},tabs:{default:()=>[]},activeTab:{default:""},allowScroll:{type:Boolean,default:!0},theme:{default:""}},emits:["back","tab-change"],setup(a,{emit:t}){const n="undefined"!=typeof window&&"1"===new URLSearchParams(window.location.search).get("embedded"),l=a,o=t,s=e(()=>l.activeTab||""),u=()=>{o("back");const e=S();e&&e.length>1&&T({delta:1})};return i(()=>{if(l.tabs&&l.tabs.length>0&&l.activeTab){l.tabs.some(e=>e.id===l.activeTab)||console.warn(`[AppLayout] Active tab "${l.activeTab}" not found in tabs array. Available tabs: ${l.tabs.map(e=>e.id).join(", ")}`)}n&&console.log("[AppLayout] Running in embedded mode")}),(e,a)=>{const t=d;return c(),r(t,{class:h(["mobile-container",C(n)&&"embedded"])},{default:p(()=>[k(t,{class:"aspect-wrapper"},{default:p(()=>[k(t,{class:"app-layout",role:"application","aria-label":"Application layout"},{default:p(()=>[e.showTopNav?(c(),r(Y,{key:0,title:e.title??"","show-back":e.showBack,onBack:u},null,8,["title","show-back"])):z("",!0),k(t,{class:h(["app-content",!e.allowScroll&&"no-scroll"]),tabindex:e.allowScroll?-1:0},{default:p(()=>[N(e.$slots,"default",{},void 0,!0)]),_:3},8,["class","tabindex"]),e.tabs&&e.tabs.length>0?(c(),r(Q,{key:1,tabs:e.tabs,"active-tab":s.value,onChange:a[0]||(a[0]=a=>e.$emit("tab-change",a))},null,8,["tabs","active-tab"])):z("",!0)]),_:3})]),_:3})]),_:3},8,["class"])}}}),[["__scopeId","data-v-636fa10f"]]),ee=100,ae=["https://neomini.app","https://miniapp.neo.org","https://testnet.miniapp.neo.org"];const te=new class{constructor(){this.dynamicOrigins=new Set,this.baseOrigins=new Set([...ae])}getSelfOrigin(){if("undefined"==typeof window)return null;try{const e=new URL(window.location.href);if("null"===e.origin)return null;if("http:"===e.protocol||"https:"===e.protocol)return e.origin}catch{}return null}getReferrerOrigin(){if("undefined"==typeof document||!document.referrer)return null;try{return new URL(document.referrer).origin}catch{return null}}getAllowedOrigins(){const e=new Set(this.baseOrigins);this.dynamicOrigins.forEach(a=>e.add(a));const a=this.getReferrerOrigin();a&&this.baseOrigins.has(a)&&e.add(a);const t=this.getSelfOrigin();if(t&&e.add(t),"undefined"!=typeof window){const a=window.location.hostname;"localhost"!==a&&"127.0.0.1"!==a||e.add(window.location.origin)}return e}isValid(e){return!(!e||"null"===e)&&this.getAllowedOrigins().has(e)}getTargetOrigin(){var e;const a=this.getReferrerOrigin();if(a&&this.baseOrigins.has(a))return a;try{if("undefined"!=typeof window&&window.parent!==window&&(null==(e=window.location.ancestorOrigins)?void 0:e.length)>0){const e=window.location.ancestorOrigins[0];if(this.baseOrigins.has(e))return e}}catch{}const t=this.getSelfOrigin();if(t)return t;if("undefined"!=typeof window){const e=window.location.hostname;if("localhost"===e||"127.0.0.1"===e)return window.location.origin}throw new Error("Cannot determine safe target origin - no valid origin found")}getSafeTargetOrigin(){try{const e=this.getTargetOrigin();if(e&&"null"!==e)return e}catch{}if("undefined"!=typeof window&&window.parent!==window){const e=window.__MINIAPP_PARENT_ORIGIN__;if("string"==typeof e&&e&&this.baseOrigins.has(e))return e;throw new Error("Cannot communicate securely with parent - origin unknown. Ensure host app sets __MINIAPP_PARENT_ORIGIN__ or uses a supported browser.")}throw new Error("Cannot determine safe target origin - origin is null or undefined")}addDynamicOrigin(e){e&&"null"!==e&&this.dynamicOrigins.add(e)}},ne=new Set;let le={connected:!1,address:null,balance:null},oe=null,se=!1;"undefined"!=typeof window&&("undefined"!=typeof window&&(se&&oe||(oe=e=>{if(e.source!==window.parent)return;if(!te.isValid(e.origin))return;const a=e.data;a&&"object"==typeof a&&("miniapp_config"!==a.type?"miniapp_wallet_state_change"===a.type&&(le={connected:Boolean(a.connected),address:a.address||null,chainId:a.chainId??null,chainType:a.chainType??null,balance:a.balance||a.multiChainBalance||null,balances:a.balances||void 0},ne.forEach(e=>{try{e(le)}catch(a){console.error("[MiniApp SDK] Wallet state listener error:",a)}})):a.config&&"object"==typeof a.config&&a.config)},window.addEventListener("message",oe),se=!0)),setTimeout(function(){if("undefined"==typeof window)return;const e=te.getSafeTargetOrigin();try{window.parent.postMessage({type:"miniapp_ready"},e)}catch{}},ee)),a("en");const ie=q(s({__name:"DesktopLayout",props:{title:{default:""},tabs:{default:()=>[]},activeTab:{default:""},allowScroll:{type:Boolean,default:!0},theme:{default:""}},emits:["tab-change"],setup(a,{emit:t}){const n=a,l=t,o=e(()=>n.theme?`theme-${n.theme}`:""),s=e=>{l("tab-change",e)};return(()=>{if(!n.tabs||0===n.tabs.length)return console.warn("[DesktopLayout] No tabs provided - navigation will be hidden"),!1;!n.tabs.some((e,a)=>n.tabs.findIndex(a=>a.id===e.id)!==a)||console.error("[DesktopLayout] Duplicate tab IDs detected - navigation may not work correctly")})(),(e,a)=>{const t=f,n=d;return c(),r(n,{class:h(["desktop-container",o.value])},{default:p(()=>[k(n,{class:"sidebar",role:"navigation","aria-label":"Main navigation"},{default:p(()=>[k(n,{class:"sidebar-header"},{default:p(()=>[k(t,{class:"brand-name"},{default:p(()=>[g("NeoHub")]),_:1}),k(t,{class:"brand-tagline"},{default:p(()=>[g("Miniapps")]),_:1})]),_:1}),k(n,{class:"sidebar-nav",role:"menubar","aria-label":"Navigation menu"},{default:p(()=>[(c(!0),w(v,null,b(e.tabs,a=>(c(),r(n,{key:a.id,class:h(["nav-item",e.activeTab===a.id&&"active"]),role:"menuitem",tabindex:e.activeTab===a.id?0:-1,"aria-label":a.label,"aria-current":e.activeTab===a.id?"page":void 0,onClick:e=>s(a.id),onKeydown:[_(e=>s(a.id),["enter"]),_(y(e=>s(a.id),["prevent"]),["space"])]},{default:p(()=>[k(n,{class:"nav-icon-wrapper"},{default:p(()=>[k(J,{name:a.icon,size:20},null,8,["name"])]),_:2},1024),k(t,{class:"nav-label"},{default:p(()=>[g(m(a.label),1)]),_:2},1024),e.activeTab===a.id?(c(),r(n,{key:0,class:"nav-indicator","aria-hidden":"true"})):z("",!0)]),_:2},1032,["class","tabindex","aria-label","aria-current","onClick","onKeydown"]))),128))]),_:1}),k(n,{class:"sidebar-footer"},{default:p(()=>[k(n,{class:"footer-status",role:"status","aria-live":"polite"},{default:p(()=>[k(n,{class:"status-dot online","aria-hidden":"true"}),k(t,{class:"status-text"},{default:p(()=>[g("Connected")]),_:1})]),_:1})]),_:1})]),_:1}),k(n,{class:"main-content-wrapper",role:"main"},{default:p(()=>[k(n,{class:"top-bar"},{default:p(()=>[k(n,{class:"top-bar-left"},{default:p(()=>[e.title?(c(),r(t,{key:0,class:"page-title"},{default:p(()=>[g(m(e.title),1)]),_:1})):z("",!0)]),_:1}),k(n,{class:"top-bar-right"},{default:p(()=>[N(e.$slots,"top-bar-actions",{},void 0,!0)]),_:3})]),_:3}),k(n,{class:h(["content-area",!e.allowScroll&&"no-scroll"]),tabindex:e.allowScroll?-1:0},{default:p(()=>[N(e.$slots,"default",{},void 0,!0)]),_:3},8,["class","tabindex"])]),_:3})]),_:3},8,["class"])}}}),[["__scopeId","data-v-e3550c9f"]]),ce=s({__name:"ResponsiveLayout",props:{title:{default:""},tabs:{default:()=>[]},activeTab:{default:""},allowScroll:{type:Boolean,default:!0},theme:{default:""},showTopNav:{type:Boolean,default:!1},showBack:{type:Boolean,default:!1},desktopBreakpoint:{default:1024}},emits:["back","tab-change"],setup(t,{emit:n}){const l=t,o=a(!1),s=a(!1),d=()=>{if(!s.value)return;const e=window.innerWidth;o.value=e>=l.desktopBreakpoint};let u;const h=()=>{clearTimeout(u),u=window.setTimeout(()=>{d()},150)},f=e(()=>o.value?ie:X);return P(o,(e,a)=>{a!==e&&s.value&&console.log(`[ResponsiveLayout] Layout mode changed: ${e?"desktop":"mobile"} (${window.innerWidth}px)`)}),i(()=>{s.value="undefined"!=typeof window,s.value&&(d(),window.addEventListener("resize",h))}),A(()=>{s.value&&(window.removeEventListener("resize",h),clearTimeout(u))}),(e,a)=>(c(),r(B(f.value),{title:e.title,tabs:e.tabs,"active-tab":e.activeTab,"allow-scroll":e.allowScroll,theme:e.theme,"show-top-nav":e.showTopNav,"show-back":e.showBack,onTabChange:a[0]||(a[0]=a=>e.$emit("tab-change",a)),onBack:a[1]||(a[1]=a=>e.$emit("back"))},{"top-bar-actions":p(()=>[N(e.$slots,"top-bar-actions")]),default:p(()=>[N(e.$slots,"default")]),_:3},40,["title","tabs","active-tab","allow-scroll","theme","show-top-nav","show-back"]))}}),re=q(s({__name:"ScrollReveal",props:{animation:{default:"fade-up"},delay:{default:0},duration:{default:800},threshold:{default:.1},offset:{default:-50},reversible:{type:Boolean,default:!1}},setup(e,{expose:t}){const n=e,l=a(!1),o=D();let s=null;return i(()=>{setTimeout(()=>{o&&(setTimeout(()=>{l.value||(l.value=!0)},500),s=I(o),s.relativeToViewport({bottom:n.offset}).observe(".scroll-reveal",e=>{e.intersectionRatio>0?(l.value=!0,n.reversible||s.disconnect()):n.reversible&&(l.value=!1)}))},100)}),t({isVisible:l}),A(()=>{s&&s.disconnect()}),(e,a)=>{const t=d;return c(),r(t,{class:h(["scroll-reveal",[e.animation,{"is-visible":l.value}]]),style:u({transitionDelay:e.delay+"ms",transitionDuration:e.duration+"ms"})},{default:p(()=>[N(e.$slots,"default",{},void 0,!0)]),_:3},8,["class","style"])}}}),[["__scopeId","data-v-0c69cb0a"]]),de=q(s({__name:"NeoDoc",props:{title:{},subtitle:{},description:{},steps:{},features:{}},setup(e){const{t:a}=V();return(e,t)=>{const n=d,l=f;return c(),r(n,{class:"neo-doc"},{default:p(()=>[k(n,{class:"doc-header"},{default:p(()=>[k(re,{animation:"fade-down",duration:1e3},{default:p(()=>[k(n,{class:"title-row"},{default:p(()=>[k(n,{class:"doc-badge"},{default:p(()=>[g(m(C(a)("docBadge")),1)]),_:1})]),_:1}),k(l,{class:"doc-title"},{default:p(()=>[g(m(e.title),1)]),_:1}),k(l,{class:"doc-subtitle"},{default:p(()=>[g(m(e.subtitle),1)]),_:1})]),_:1})]),_:1}),k(n,{class:"doc-content"},{default:p(()=>[k(n,{class:"doc-section"},{default:p(()=>[k(re,{animation:"fade-up",delay:200},{default:p(()=>[k(l,{class:"section-label"},{default:p(()=>[g(m(C(a)("docWhatItIs")),1)]),_:1}),k(l,{class:"section-text"},{default:p(()=>[g(m(e.description),1)]),_:1})]),_:1})]),_:1}),k(n,{class:"doc-section"},{default:p(()=>[k(re,{animation:"fade-up",delay:300},{default:p(()=>[k(l,{class:"section-label"},{default:p(()=>[g(m(C(a)("docHowToUse")),1)]),_:1})]),_:1}),k(n,{class:"steps-list"},{default:p(()=>[(c(!0),w(v,null,b(e.steps,(e,a)=>(c(),r(re,{key:a,delay:400+100*a,animation:"slide-left"},{default:p(()=>[k(n,{class:"step-item"},{default:p(()=>[k(n,{class:"step-number"},{default:p(()=>[g(m(a+1),1)]),_:2},1024),k(l,{class:"step-text"},{default:p(()=>[g(m(e),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["delay"]))),128))]),_:1})]),_:1}),k(n,{class:"doc-section"},{default:p(()=>[k(re,{animation:"fade-up",delay:400},{default:p(()=>[k(l,{class:"section-label"},{default:p(()=>[g(m(C(a)("docOnChainFeatures")),1)]),_:1})]),_:1}),k(n,{class:"features-grid"},{default:p(()=>[(c(!0),w(v,null,b(e.features,(e,a)=>(c(),r(re,{key:e.name,delay:500+100*a,animation:"scale-in",reversible:""},{default:p(()=>[k(n,{class:"feature-card"},{default:p(()=>[k(l,{class:"feature-name"},{default:p(()=>[g(m(e.name),1)]),_:2},1024),k(l,{class:"feature-desc"},{default:p(()=>[g(m(e.desc),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["delay"]))),128))]),_:1})]),_:1})]),_:1}),k(n,{class:"doc-footer"},{default:p(()=>[k(re,{animation:"fade-up",delay:800},{default:p(()=>[k(l,{class:"footer-text"},{default:p(()=>[g(m(C(a)("docFooter")),1)]),_:1})]),_:1})]),_:1})]),_:1})}}}),[["__scopeId","data-v-445ca862"]]),ue=q(s({__name:"index",setup(s){const{t:_}=G(),y=function(){const a=e(()=>W.value.reduce((e,a)=>e+Number(a.currentAmount),0)),t=e(()=>W.value.filter(e=>!e.withdrawn)),n=e(()=>W.value.filter(e=>e.completed&&!e.withdrawn));return{piggyBanks:W,isLoading:$,error:K,totalSaved:a,activeBanks:t,completedBanks:n,addPiggyBank:e=>{W.value=[...W.value,e]},updatePiggyBank:(e,a)=>{W.value=W.value.map(t=>t.id===e?{...t,...a}:t)},removePiggyBank:e=>{W.value=W.value.filter(a=>a.id!==e)},setPiggyBanks:e=>{W.value=e},setLoading:e=>{$.value=e},setError:e=>{K.value=e},reset:()=>{W.value=[],$.value=!1,K.value=null}}}(),{piggyBanks:N,currentChainId:S,alchemyApiKey:T,walletConnectProjectId:P,userAddress:B,isConnected:I}=function(a){{const s=t(a),i={};for(const t in s){const c=s[t];c.effect?i[t]=e({get:()=>a[t],set(e){a[t]=e}}):(n(c)||l(c))&&(i[t]=o(a,t))}return i}}(y),D=a("main"),U=e(()=>[{id:"main",icon:"game",label:_("tabMain")},{id:"settings",icon:"setting",label:_("tabSettings")},{id:"docs",icon:"book",label:_("tabDocs")}]),M=e(()=>y.EVM_CHAINS),j=e(()=>M.value.find(e=>e.id===S.value)),H=e(()=>M.value.find(e=>e.id===q.value.chainId)),V=e(()=>Math.max(0,M.value.findIndex(e=>e.id===q.value.chainId))),q=a({chainId:S.value,alchemyApiKey:T.value,walletConnectProjectId:P.value,contractAddress:y.getContractAddress(S.value)}),J=e(()=>{const e=[];return T.value||e.push(_("settings.issue_alchemy")),y.getContractAddress(S.value)||e.push(_("settings.issue_contract")),e}),Q=e(()=>[_("docStep1"),_("docStep2"),_("docStep3"),_("docStep4"),_("docStep5")]),Y=e(()=>[{name:_("docFeature1Name"),desc:_("docFeature1Desc")},{name:_("docFeature2Name"),desc:_("docFeature2Desc")},{name:_("docFeature3Name"),desc:_("docFeature3Desc")},{name:_("docFeature4Name"),desc:_("docFeature4Desc")},{name:_("docFeature5Name"),desc:_("docFeature5Desc")},{name:_("docFeature6Name"),desc:_("docFeature6Desc")}]),X=e=>Date.now()/1e3<e.unlockTime,ee=e=>{const a=Number(e.detail.value),t=M.value[a];t&&(q.value.chainId=t.id,q.value.contractAddress=y.getContractAddress(t.id))},ae=async()=>{try{y.setAlchemyApiKey(q.value.alchemyApiKey),y.setWalletConnectProjectId(q.value.walletConnectProjectId),y.setContractAddress(q.value.chainId,q.value.contractAddress),await y.switchChain(q.value.chainId),x({title:"Settings saved",icon:"success"})}catch(e){x({title:(null==e?void 0:e.message)||"Settings error",icon:"none"})}},te=async()=>{try{await y.connectWallet()}catch(e){x({title:(null==e?void 0:e.message)||_("wallet.connect_failed"),icon:"none"})}},ne=()=>{L({url:"/pages/create/create"})},le=a(window.innerWidth);e(()=>le.value<768),e(()=>le.value>=1024);const oe=()=>{le.value=window.innerWidth};return i(()=>window.addEventListener("resize",oe)),A(()=>window.removeEventListener("resize",oe)),(e,a)=>{const t=f,n=d,l=O,o=F,s=E,i=R;return c(),r(C(ce),{"desktop-breakpoint":1024,class:"theme-piggy-bank",tabs:U.value,"active-tab":D.value,onTabChange:a[3]||(a[3]=e=>D.value=e),"\x3c!--":"",Desktop:"",Sidebar:"","--":""},{"desktop-sidebar":p(()=>[k(n,{class:"desktop-sidebar"},{default:p(()=>[k(t,{class:"sidebar-title"},{default:p(()=>[g(m(C(_)("overview")),1)]),_:1})]),_:1})]),default:p(()=>[g(" > "),"main"===D.value?(c(),r(n,{key:0,class:"tab-content"},{default:p(()=>[k(n,{class:"header"},{default:p(()=>[k(n,{class:"title-row"},{default:p(()=>[k(t,{class:"title"},{default:p(()=>[g(m(C(_)("app.title")),1)]),_:1}),k(t,{class:"subtitle"},{default:p(()=>[g(m(C(_)("app.subtitle")),1)]),_:1})]),_:1}),k(n,{class:"status-row"},{default:p(()=>[k(t,{class:"status-chip"},{default:p(()=>{var e;return[g(m((null==(e=j.value)?void 0:e.shortName)||"Neo N3"),1)]}),_:1}),k(t,{class:h(["status-chip",{connected:C(I)}])},{default:p(()=>[g(m(C(I)?C(Z)(C(B)):C(_)("wallet.not_connected")),1)]),_:1},8,["class"]),C(I)?z("",!0):(c(),r(l,{key:0,class:"connect-btn",onClick:te},{default:p(()=>[g(m(C(_)("wallet.connect")),1)]),_:1}))]),_:1})]),_:1}),J.value.length>0?(c(),r(n,{key:0,class:"config-warning"},{default:p(()=>[k(t,{class:"warning-title"},{default:p(()=>[g(m(C(_)("settings.missing_config")),1)]),_:1}),(c(!0),w(v,null,b(J.value,e=>(c(),r(t,{key:e,class:"warning-item"},{default:p(()=>[g(" â€¢ "+m(e),1)]),_:2},1024))),128))]),_:1})):z("",!0),0===C(N).length?(c(),r(o,{key:1,"scroll-y":"",class:"empty-state"},{default:p(()=>[k(t,{class:"empty-text"},{default:p(()=>[g(m(C(_)("empty.banks")),1)]),_:1}),k(l,{class:"create-btn",onClick:ne},{default:p(()=>[g(m(C(_)("create.create_btn")),1)]),_:1})]),_:1})):(c(),r(o,{key:2,"scroll-y":"",class:"banks-list"},{default:p(()=>[k(n,{class:"grid"},{default:p(()=>[(c(!0),w(v,null,b(C(N),e=>(c(),r(n,{key:e.id,class:"card",onClick:a=>{return t=e.id,void L({url:`/pages/detail/detail?id=${t}`});var t},style:u({borderColor:e.themeColor,boxShadow:`0 0 10px ${e.themeColor}40`})},{default:p(()=>[k(n,{class:"card-header"},{default:p(()=>[k(t,{class:"bank-name"},{default:p(()=>[g(m(e.name),1)]),_:2},1024),k(n,{class:h(["status-badge",{locked:X(e)}])},{default:p(()=>[g(m(X(e)?"ğŸ”’":"ğŸ”“"),1)]),_:2},1032,["class"])]),_:2},1024),k(t,{class:"purpose"},{default:p(()=>[g(m(e.purpose),1)]),_:2},1024),k(n,{class:"progress-section"},{default:p(()=>[k(t,{class:"label"},{default:p(()=>[g(m(C(_)("create.target_label"))+": "+m(e.targetAmount)+" "+m(e.targetToken.symbol),1)]),_:2},1024),k(n,{class:"progress-bar-bg"},{default:p(()=>[k(n,{class:"progress-bar-fill unknown"})]),_:1})]),_:2},1024),k(t,{class:"date-info"},{default:p(()=>[g(m(new Date(1e3*e.unlockTime).toLocaleDateString()),1)]),_:2},1024)]),_:2},1032,["onClick","style"]))),128))]),_:1})]),_:1})),C(N).length>0?(c(),r(n,{key:3,class:"fab",onClick:ne},{default:p(()=>[k(t,{class:"fab-icon"},{default:p(()=>[g("+")]),_:1})]),_:1})):z("",!0)]),_:1})):z("",!0),"settings"===D.value?(c(),r(n,{key:1,class:"tab-content"},{default:p(()=>[k(n,{class:"settings-container"},{default:p(()=>[k(n,{class:"form-group"},{default:p(()=>[k(t,{class:"label"},{default:p(()=>[g(m(C(_)("settings.network")),1)]),_:1}),k(s,{mode:"selector",value:V.value,range:M.value,"range-key":"name",onChange:ee},{default:p(()=>[k(n,{class:"picker-view"},{default:p(()=>{var e;return[g(m((null==(e=H.value)?void 0:e.name)||C(_)("settings.select_network")),1)]}),_:1})]),_:1},8,["value","range"])]),_:1}),k(n,{class:"form-group"},{default:p(()=>[k(t,{class:"label"},{default:p(()=>[g(m(C(_)("settings.alchemy_key")),1)]),_:1}),k(i,{class:"input-field",type:"password",modelValue:q.value.alchemyApiKey,"onUpdate:modelValue":a[0]||(a[0]=e=>q.value.alchemyApiKey=e),placeholder:C(_)("settings.alchemy_placeholder"),"placeholder-class":"placeholder"},null,8,["modelValue","placeholder"])]),_:1}),k(n,{class:"form-group"},{default:p(()=>[k(t,{class:"label"},{default:p(()=>[g(m(C(_)("settings.walletconnect")),1)]),_:1}),k(i,{class:"input-field",modelValue:q.value.walletConnectProjectId,"onUpdate:modelValue":a[1]||(a[1]=e=>q.value.walletConnectProjectId=e),placeholder:C(_)("settings.walletconnect_placeholder"),"placeholder-class":"placeholder"},null,8,["modelValue","placeholder"])]),_:1}),k(n,{class:"form-group"},{default:p(()=>[k(t,{class:"label"},{default:p(()=>[g(m(C(_)("settings.contract_address")),1)]),_:1}),k(i,{class:"input-field",modelValue:q.value.contractAddress,"onUpdate:modelValue":a[2]||(a[2]=e=>q.value.contractAddress=e),placeholder:"0x...","placeholder-class":"placeholder"},null,8,["modelValue"])]),_:1}),k(n,{class:"settings-actions"},{default:p(()=>[k(l,{class:"save-btn",onClick:ae},{default:p(()=>[g(m(C(_)("common.confirm")),1)]),_:1})]),_:1})]),_:1})]),_:1})):z("",!0),"docs"===D.value?(c(),r(n,{key:2,class:"tab-content scrollable"},{default:p(()=>[k(C(de),{title:C(_)("app.title"),subtitle:C(_)("docSubtitle"),description:C(_)("docDescription"),steps:Q.value,features:Y.value},null,8,["title","subtitle","description","steps","features"])]),_:1})):z("",!0)]),_:1},8,["tabs","active-tab"])}}}),[["__scopeId","data-v-2f23b69a"]]);export{ue as default};
