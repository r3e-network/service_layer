import{r as e,a,o as t,b as l,c as n,d as s,e as r,f as o,i,w as u,g as c,h as d,j as v,t as f,k as p,u as m,l as y,m as h,n as g,p as b,q as _,s as w,v as k,F as C,x as $,y as A,z as I,A as T,B as x,C as E,D as S}from"./index-J8w-8tID.js";import{A as M,s as K,w as N,g as D,a as R,_ as F}from"./MiniAppTemplate.vue_vue_type_style_index_0_scoped_07ef5641_lang.CohrrOPV.js";import{_ as B}from"./NeoDoc.vue_vue_type_style_index_0_scoped_b60f38ea_lang.BZKJTd4i.js";import{N as P,u as j}from"./useI18n.CCMLyFk4.js";function W(e){return e instanceof Error?e:"string"==typeof e?new Error(e):new Error(String(e))}class q extends Error{constructor(e,a){super(e),this.statusCode=a,this.name="HttpError"}}const U={maxRetries:3,baseDelayMs:1e3,maxDelayMs:1e4};function L(e,a){return Math.min(a.baseDelayMs*Math.pow(2,e),a.maxDelayMs)*(.75+.5*Math.random())}function G(e,a){if(a&&a>=500)return!0;if(429===a)return!0;if(e instanceof Error){const a=e.message.toLowerCase();return a.includes("network")||a.includes("timeout")||a.includes("abort")}return!1}async function H(a,t){var l;if("undefined"!=typeof uni&&"function"==typeof e)return new Promise((l,n)=>{const s=(e=>{if(e){if(e instanceof Headers){const a={};return e.forEach((e,t)=>{a[t]=e}),a}return Array.isArray(e)?Object.fromEntries(e):e}})(t.headers),r=String((null==s?void 0:s["Content-Type"])||(null==s?void 0:s["content-type"])||"");let o=t.body;if("string"==typeof o&&r.includes("application/json"))try{o=JSON.parse(o)}catch{}e({url:a,method:t.method||"GET",data:o,header:s,success:e=>{if((e.statusCode??0)>=200&&(e.statusCode??0)<300)l(e.data);else{const a=e.data,t=null==a?void 0:a.error,l=("string"==typeof(null==t?void 0:t.message)?t.message:null)||`Request failed: ${e.statusCode}`;n(new q(l,e.statusCode??0))}},fail:e=>{n(new Error(e.errMsg||"Network error"))}})});const n="undefined"!=typeof window&&a.startsWith(window.location.origin),s=await fetch(a,{credentials:n?"include":"same-origin",...t});if(!s.ok){const e=await s.json().catch(()=>({}));throw new q((null==(l=e.error)?void 0:l.message)||`Request failed: ${a}`,s.status)}return s.json()}async function O(e){return async function(e,a={}){var t,l;const n=e.startsWith("http")?e:`${M}${e}`,s={...U,...a.retryConfig};let r=null;for(let i=0;i<=s.maxRetries;i++){if(null==(t=a.signal)?void 0:t.aborted)throw new Error("Request cancelled");try{return await H(n,a)}catch(o){r=o instanceof Error?o:new Error(String(o));const e=o instanceof q?o.statusCode:void 0;if(null==(l=a.signal)?void 0:l.aborted)throw r;if(i>=s.maxRetries)break;if(!G(o,e))break;const t=L(i,s);await new Promise(e=>setTimeout(e,t))}}throw r||new Error("Request failed")}(e,{method:"GET"})}let z=null,V=null;function Z(){const e=a(null),n=a({}),s=a(null),r=a(null),o=a(null),i=a([]),u=a(!1),c=a(!1),d=a(null),v=a(!1),f=a(null),p=a=>{a.connected&&a.address?(e.value=a.address,u.value=!0):(e.value=null,u.value=!1),s.value=a.chainId??null,r.value=a.chainType??null,n.value=(e=>{if(!e)return{};if(e.balances&&Object.keys(e.balances).length>0)return{...e.balances};if(e.balance){const a={};return a[e.balance.nativeSymbol||("neo-n3"===e.chainType?"GAS":"NATIVE")]=e.balance.native||"0",(e.balance.governance||e.balance.governanceSymbol)&&(a[e.balance.governanceSymbol||("neo-n3"===e.chainType?"NEO":"GOV")]=e.balance.governance||"0"),a}return{}})(a)},m=e=>{e&&(o.value=e.chainId??null,i.value=Array.isArray(e.supportedChains)?e.supportedChains:[])},y=async()=>{var e;const a=await N(),t=null==(e=a.getConfig)?void 0:e.call(a);return m(t),t},h=async e=>{const a=await N();if(!a.wallet.switchChain)throw new Error("switchChain not supported by SDK");await a.wallet.switchChain(e),s.value=e};let g=null;return t(()=>{const a=R();p(a),g=K(e=>{p(e)});const t=D();(null==t?void 0:t.getConfig)&&m(t.getConfig()),t&&!u.value&&(e=>e?(z&&V!==e&&(z=null,V=null),z||(V=e,z=e.wallet.getAddress().then(e=>e||null).catch(e=>{const a=e instanceof Error?e.message:String(e);return console.debug("[MiniApp SDK] Fallback wallet connection failed:",a),null}).finally(()=>{z=null,V=null})),z):Promise.resolve(null))(t).then(a=>{var l;if(!u.value&&a){e.value=a,u.value=!0;const n=null==(l=t.getConfig)?void 0:l.call(t);s.value=(null==n?void 0:n.chainId)??null,r.value=(null==n?void 0:n.chainType)??null,m(n)}}),N().then(e=>{var a;return m(null==(a=e.getConfig)?void 0:a.call(e))}).catch(()=>{})}),l(()=>{g&&g()}),{address:e,chainId:s,chainType:r,appChainId:o,supportedChains:i,balances:n,isConnected:u,isLoading:c,error:d,showConnectionPrompt:v,connectionPromptMessage:f,connect:async()=>{var a;c.value=!0,d.value=null;try{const t=await N(),l=await t.wallet.getAddress();if(!l)throw new Error("wallet returned empty address");e.value=l,u.value=!0;const n=null==(a=t.getConfig)?void 0:a.call(t);s.value=(null==n?void 0:n.chainId)??null,r.value=(null==n?void 0:n.chainType)??null,m(n)}catch(t){d.value=W(t)}finally{c.value=!1}},invokeIntent:async e=>{var a;const t=D();if(!(null==(a=null==t?void 0:t.wallet)?void 0:a.invokeIntent))throw new Error("invokeIntent not available");return t.wallet.invokeIntent(e)},invokeContract:async e=>{var a;const t=await N(),l=null==(a=t.getConfig)?void 0:a.call(t),n=e.contractAddress||e.scriptHash||e.contractHash,s=e.method||e.operation;if(!n||!s)throw new Error("contract address and method required");return t.invoke("invokeFunction",{contract:n,method:s,args:e.args,chainId:null==l?void 0:l.chainId,chainType:null==l?void 0:l.chainType})},invokeRead:async e=>{var a;const t=await N(),l=null==(a=t.getConfig)?void 0:a.call(t),n=e.contractAddress||e.scriptHash||e.contractHash||(null==l?void 0:l.contractAddress),s=e.method||e.operation;if(!n)throw new Error("contract address not configured");if(!s)throw new Error("method required");return t.invoke("invokeRead",{contract:n,method:s,args:e.args||[],chainId:e.chainId||(null==l?void 0:l.chainId),chainType:e.chainType||(null==l?void 0:l.chainType)})},getContractAddress:async()=>{var e,a,t,l,n;const s=await N(),r=null==(e=s.getConfig)?void 0:e.call(s);if(null==r?void 0:r.contractAddress)return r.contractAddress;if((null==r?void 0:r.chainId)&&(null==(t=null==(a=null==r?void 0:r.chainContracts)?void 0:a[r.chainId])?void 0:t.address))return r.chainContracts[r.chainId].address||null;if(s.invoke)try{const e=await s.invoke("getConfig");if(null==e?void 0:e.contractAddress)return e.contractAddress;if((null==e?void 0:e.chainId)&&(null==(n=null==(l=null==e?void 0:e.chainContracts)?void 0:l[e.chainId])?void 0:n.address))return e.chainContracts[e.chainId].address||null}catch{}return null},getAppConfig:y,getAddress:async()=>(await N()).wallet.getAddress(),signMessage:async e=>{var a;const t=await N();if(!(null==(a=t.wallet)?void 0:a.signMessage))throw new Error("signMessage not available");return t.wallet.signMessage(e)},switchChain:h,switchToAppChain:async e=>{const a=await y(),t=(null==a?void 0:a.chainId)||(Array.isArray(null==a?void 0:a.supportedChains)&&a.supportedChains.length>0?a.supportedChains[0]:null)||e||null;if(!t)throw new Error("app chain not configured");await h(t)},getBalance:async e=>{var a;c.value=!0,d.value=null;try{const t=await N(),l=null==(a=t.getConfig)?void 0:a.call(t),r=(null==l?void 0:l.chainId)||s.value,o=r?`?chain_id=${encodeURIComponent(r)}`:"",i=await O(`/wallet-balance${o}`),u=(null==i?void 0:i.balances)??{};return n.value=u,e?u[e]||"0":u}catch(t){throw d.value=W(t),t}finally{c.value=!1}},getTransactions:async(e=20)=>{var a;c.value=!0,d.value=null;try{const t=Number.isNaN(e)||e<1?20:Math.min(e,100),l=await N(),n=null==(a=l.getConfig)?void 0:a.call(l),r=(null==n?void 0:n.chainId)||s.value,o=new URLSearchParams({limit:String(t)});r&&o.set("chain_id",r);const i=await O(`/wallet-transactions?${o.toString()}`);return(null==i?void 0:i.transactions)??[]}catch(t){throw d.value=W(t),t}finally{c.value=!1}},invoke:async(e,a)=>(await N()).invoke(e,a),requireConnection:(e={})=>{const{showPrompt:a=!0,errorMessage:t}=e;return!!u.value||(a&&(f.value=t||null,v.value=!0),!1)},closeConnectionPrompt:()=>{v.value=!1,f.value=null},clearError:()=>{d.value=null}}}function J(){const{switchToAppChain:e}=Z(),a=n(()=>!1),t=async()=>{try{await e()}catch(a){throw console.error("[useChainValidation] Failed to switch chain:",a),a}},l=n(()=>({show:a.value,onSwitch:t}));return{showWarning:a,switchToAppChain:t,chainWarningProps:l}}const Q=B(s({__name:"ChainWarning",props:{title:{default:"Wrong Network"},message:{default:"Switch to Neo N3 Mainnet to continue."},buttonText:{default:"Switch Network"},show:{type:Boolean,default:void 0}},emits:["switch","switch-complete","switch-error"],setup(e,{emit:t}){const l=e,s=t,{showWarning:y,switchToAppChain:h}=J(),g=a(!1),b=n(()=>void 0!==l.show?l.show:y.value),_=async()=>{if(!g.value){g.value=!0,s("switch");try{await h(),s("switch-complete")}catch(e){const a=e instanceof Error?e:new Error(String(e));s("switch-error",a),console.error("[ChainWarning] Failed to switch chain:",a)}finally{g.value=!1}}};return(e,a)=>{const t=d,l=i;return b.value?(r(),o(l,{key:0,class:"chain-warning mb-4 px-4",role:"alert","aria-live":"assertive"},{default:u(()=>[c(m(X),{variant:"danger"},{default:u(()=>[c(l,{class:"flex flex-col items-center gap-2 py-1"},{default:u(()=>[c(t,{class:"text-center font-bold text-red-400"},{default:u(()=>[v(f(e.title),1)]),_:1}),e.message?(r(),o(t,{key:0,class:"text-center text-xs text-white opacity-80"},{default:u(()=>[v(f(e.message),1)]),_:1})):p("",!0),c(m(Y),{size:"sm",variant:"secondary",class:"mt-2",loading:g.value,onClick:_},{default:u(()=>[v(f(e.buttonText),1)]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})):p("",!0)}}}),[["__scopeId","data-v-8876cefe"]]),X=B(s({__name:"NeoCard",props:{title:{default:void 0},variant:{default:"default"},hoverable:{type:Boolean,default:!1},flat:{type:Boolean,default:!1},ariaLabel:{default:void 0}},emits:["click"],setup:e=>(e,a)=>{const t=d,l=i;return r(),o(l,{class:g(["neo-card",`neo-card--${e.variant}`,{"neo-card--hoverable":e.hoverable,"neo-card--flat":e.flat}]),role:e.hoverable?"button":"region",tabindex:e.hoverable?0:void 0,"aria-label":e.ariaLabel||e.title||void 0,onClick:a[0]||(a[0]=a=>e.hoverable&&e.$emit("click",a)),onKeydown:[a[1]||(a[1]=y(a=>e.hoverable&&e.$emit("click",a),["enter"])),a[2]||(a[2]=y(h(a=>e.hoverable&&e.$emit("click",a),["prevent"]),["space"]))]},{default:u(()=>[e.title||e.$slots.header?(r(),o(l,{key:0,class:"neo-card__header"},{default:u(()=>[e.title?(r(),o(t,{key:0,class:"neo-card__title"},{default:u(()=>[v(f(e.title),1)]),_:1})):p("",!0),b(e.$slots,"header",{},void 0,!0)]),_:3})):p("",!0),c(l,{class:"neo-card__body"},{default:u(()=>[b(e.$slots,"default",{},void 0,!0)]),_:3}),e.$slots.footer?(r(),o(l,{key:1,class:"neo-card__footer"},{default:u(()=>[b(e.$slots,"footer",{},void 0,!0)]),_:3})):p("",!0)]),_:3},8,["class","role","tabindex","aria-label"])}}),[["__scopeId","data-v-301259a2"]]),Y=B(s({__name:"NeoButton",props:{variant:{default:"primary"},size:{default:"md"},block:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},ariaLabel:{default:void 0}},emits:["click"],setup:e=>(e,a)=>{const t=i,l=_;return r(),o(l,{class:g(["neo-btn",`neo-btn--${e.variant}`,`neo-btn--${e.size}`,{"neo-btn--block":e.block,"neo-btn--loading":e.loading}]),disabled:e.disabled||e.loading,"aria-busy":e.loading,"aria-disabled":e.disabled||e.loading,"aria-label":e.ariaLabel,onClick:a[0]||(a[0]=a=>e.$emit("click",a))},{default:u(()=>[e.loading?(r(),o(t,{key:0,class:"neo-btn__spinner"})):b(e.$slots,"default",{key:1},void 0,!0)]),_:3},8,["class","disabled","aria-busy","aria-disabled","aria-label"])}}),[["__scopeId","data-v-1fa13096"]]),ee=B(s({__name:"NeoStats",props:{stats:{}},setup:e=>(e,a)=>{const t=d,l=i;return r(),o(l,{class:"neo-stats",role:"list","aria-label":"Statistics"},{default:u(()=>[(r(!0),w(C,null,k(e.stats,e=>(r(),o(l,{key:e.label,class:g(["neo-stats__item",`neo-stats__item--${e.variant||"default"}`]),role:"listitem","aria-label":`${e.label}: ${e.value}`},{default:u(()=>[c(t,{class:"neo-stats__value","aria-hidden":"true"},{default:u(()=>[v(f(e.value),1)]),_:2},1024),c(t,{class:"neo-stats__label","aria-hidden":"true"},{default:u(()=>[v(f(e.label),1)]),_:2},1024)]),_:2},1032,["class","aria-label"]))),128))]),_:1})}}),[["__scopeId","data-v-46509ca9"]]),ae=B(s({__name:"ErrorBoundary",props:{showDetails:{type:Boolean,default:!1},onError:{},fallback:{}},emits:["retry","reset","error"],setup(e,{expose:t,emit:l}){const n=e,s=l,m=a(!1),y=a(null),h=a(""),g=e=>({errorTitle:"Something went wrong",retry:"Try Again",reset:"Reset"}[e]||e);$(e=>{var a;const t=e instanceof Error?e:new Error(String(e));return y.value=t,h.value=n.fallback||t.message||"An unexpected error occurred",m.value=!0,s("error",t),null==(a=n.onError)||a.call(n,t),!1});const _=()=>{m.value=!1,y.value=null,s("retry")},w=()=>{m.value=!1,y.value=null,h.value="",s("reset")};return t({setError:e=>{const a=e instanceof Error?e:new Error(e);y.value=a,h.value=a.message,m.value=!0,s("error",a)},clearError:w}),(e,a)=>{const t=d,l=i;return m.value?(r(),o(l,{key:0,class:"error-boundary",role:"alert","aria-live":"assertive"},{default:u(()=>[c(l,{class:"error-container"},{default:u(()=>[c(t,{class:"error-icon"},{default:u(()=>[v("âš ï¸")]),_:1}),c(t,{class:"error-title"},{default:u(()=>[v(f(g("errorTitle")||"Something went wrong"),1)]),_:1}),c(t,{class:"error-message"},{default:u(()=>[v(f(h.value),1)]),_:1}),c(l,{class:"error-actions"},{default:u(()=>[c(Y,{variant:"primary",onClick:_},{default:u(()=>[v(f(g("retry")||"Try Again"),1)]),_:1}),c(Y,{variant:"secondary",onClick:w},{default:u(()=>[v(f(g("reset")||"Reset"),1)]),_:1})]),_:1}),e.showDetails?(r(),o(l,{key:0,class:"error-details"},{default:u(()=>[c(t,{class:"error-stack"},{default:u(()=>{var e,a;return[v(f((null==(e=y.value)?void 0:e.stack)||(null==(a=y.value)?void 0:a.message)),1)]}),_:1})]),_:1})):p("",!0)]),_:1})]),_:1})):b(e.$slots,"default",{key:1},void 0,!0)}}}),[["__scopeId","data-v-34155aa3"]]),te=B(s({__name:"Fireworks",props:{active:{type:Boolean,default:!1},duration:{default:3e3}},emits:["complete"],setup(e,{emit:a}){const t=e,n=a;let s=null;const d=e=>{const a=["#ff6b6b","#ffd93d","#6bcb77","#4d96ff","#ff6bd6","#a855f7"];return{left:`${10+80*Math.random()}%`,top:`${10+60*Math.random()}%`,animationDelay:`${.5*Math.random()}s`,"--firework-color":a[(e-1)%a.length]}};return A(()=>t.active,e=>{e&&(s=setTimeout(()=>{n("complete")},t.duration))}),l(()=>{s&&clearTimeout(s)}),(e,a)=>{const t=i;return e.active?(r(),o(t,{key:0,class:"fireworks-container","aria-hidden":"true"},{default:u(()=>[(r(),w(C,null,k(12,e=>c(t,{key:e,class:g(`firework firework-${e}`),style:I(d(e))},{default:u(()=>[(r(),w(C,null,k(8,e=>c(t,{key:e,class:g(`spark spark-${e}`)},null,8,["class"])),64))]),_:2},1032,["class","style"])),64))]),_:1})):p("",!0)}}}),[["__scopeId","data-v-8a253f7e"]]),le=B(s({__name:"SidebarPanel",props:{title:{default:""},description:{default:""},items:{default:()=>[]}},setup:e=>(e,a)=>{const t=d,l=i;return r(),o(l,{class:"sidebar-panel-content"},{default:u(()=>[e.title?(r(),o(t,{key:0,class:"sidebar-title"},{default:u(()=>[v(f(e.title),1)]),_:1})):p("",!0),e.description?(r(),o(t,{key:1,class:"sidebar-desc"},{default:u(()=>[v(f(e.description),1)]),_:1})):p("",!0),e.items.length?(r(),o(l,{key:2,class:"sidebar-items"},{default:u(()=>[(r(!0),w(C,null,k(e.items,e=>(r(),o(l,{key:e.label,class:"sidebar-item"},{default:u(()=>[c(t,{class:"sidebar-item-label"},{default:u(()=>[v(f(e.label),1)]),_:2},1024),c(t,{class:"sidebar-value"},{default:u(()=>[v(f(e.value),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})):p("",!0),b(e.$slots,"default",{},void 0,!0)]),_:3})}}),[["__scopeId","data-v-0f03dbb3"]]),ne=B(s({__name:"game-board",emits:["ready"],setup:e=>(e,a)=>{const t=i;return r(),o(t,{class:"game-board-slot"},{default:u(()=>[c(t,{class:"game-arena"},{default:u(()=>[b(e.$slots,"default",{},void 0,!0)]),_:3})]),_:3})}}),[["__scopeId","data-v-865ce7b3"]]),se=B(s({__name:"market-list",emits:["ready"],setup:e=>(e,a)=>{const t=i;return r(),o(t,{class:"market-list-slot"},{default:u(()=>[e.$slots.filters?(r(),o(t,{key:0,class:"list-filters"},{default:u(()=>[b(e.$slots,"filters",{},void 0,!0)]),_:3})):p("",!0),c(t,{class:"list-container"},{default:u(()=>[b(e.$slots,"default",{},void 0,!0)]),_:3})]),_:3})}}),[["__scopeId","data-v-7bb016db"]]),re=B(s({__name:"form-panel",emits:["ready"],setup:e=>(e,a)=>{const t=i;return r(),o(t,{class:"form-panel-slot"},{default:u(()=>[c(t,{class:"form-card"},{default:u(()=>[b(e.$slots,"default",{},void 0,!0)]),_:3}),e.$slots.footer?(r(),o(t,{key:0,class:"form-footer"},{default:u(()=>[b(e.$slots,"footer",{},void 0,!0)]),_:3})):p("",!0)]),_:3})}}),[["__scopeId","data-v-dc99375e"]]),oe=B(s({__name:"dashboard",emits:["ready"],setup:e=>(e,a)=>{const t=i;return r(),o(t,{class:"dashboard-slot"},{default:u(()=>[e.$slots.hero?(r(),o(t,{key:0,class:"dashboard-hero"},{default:u(()=>[b(e.$slots,"hero",{},void 0,!0)]),_:3})):p("",!0),c(t,{class:"dashboard-panels"},{default:u(()=>[b(e.$slots,"default",{},void 0,!0)]),_:3})]),_:3})}}),[["__scopeId","data-v-094f7c79"]]),ie=B(s({__name:"swap-interface",emits:["ready"],setup:e=>(e,a)=>{const t=i;return r(),o(t,{class:"swap-interface-slot"},{default:u(()=>[c(t,{class:"swap-container"},{default:u(()=>[b(e.$slots,"default",{},void 0,!0)]),_:3})]),_:3})}}),[["__scopeId","data-v-172c680c"]]),ue=B(s({__name:"timer-hero",emits:["ready"],setup:e=>(e,a)=>{const t=i;return r(),o(t,{class:"timer-hero-slot"},{default:u(()=>[c(t,{class:"timer-display"},{default:u(()=>[b(e.$slots,"timer",{},void 0,!0)]),_:3}),c(t,{class:"timer-action"},{default:u(()=>[b(e.$slots,"default",{},void 0,!0)]),_:3})]),_:3})}}),[["__scopeId","data-v-b3a2b09d"]]),ce=B(s({__name:"two-column",emits:["ready"],setup(e){const a=T(),t=n(()=>!!a.operation);return(e,a)=>{const l=i;return r(),o(l,{class:g(["two-column-slot",{"single-column":!t.value}])},{default:u(()=>[c(l,{class:"two-column-info"},{default:u(()=>[b(e.$slots,"default",{},void 0,!0)]),_:3}),t.value?(r(),o(l,{key:0,class:"two-column-operation"},{default:u(()=>[b(e.$slots,"operation",{},void 0,!0)]),_:3})):p("",!0)]),_:3},8,["class"])}}}),[["__scopeId","data-v-34a617ab"]]),de=B(s({__name:"MiniAppTemplate",props:{config:{},state:{},t:{type:Function},statusMessage:{},fireworksActive:{type:Boolean}},emits:["tab-change"],setup(e,{emit:t}){const l=e,s=t,y=T(),{showWarning:h}=J(),g=n(()=>{var e;return!1!==(null==(e=l.config.features)?void 0:e.chainWarning)&&h.value}),_=n(()=>{var e;const a=l.config.tabs.find(e=>e.default);return(null==a?void 0:a.key)??(null==(e=l.config.tabs[0])?void 0:e.key)??""}),$=a(_.value),A=n(()=>l.config.tabs.map(e=>({id:e.key,label:l.t(e.labelKey),icon:e.icon??""}))),I=n(()=>l.config.tabs.filter(e=>e.key!==_.value)),E=e=>{$.value=e,s("tab-change",e)},S={"game-board":ne,"market-list":se,"form-panel":re,dashboard:oe,"swap-interface":ie,"timer-hero":ue,"two-column":ce,custom:"view"},M=n(()=>S[l.config.contentType]??"view"),K=n(()=>{var e;return((null==(e=l.config.stats)?void 0:e.length)??0)>0}),N=(e,a)=>{const t=a??0;switch(e.format){case"currency":return`${Number(t).toFixed(2)} GAS`;case"percent":return`${Number(t).toFixed(1)}%`;case"duration":return String(t);default:return"number"==typeof t?t:Number(t)||0}},D=n(()=>(l.config.stats??[]).map(e=>({label:l.t(e.labelKey),value:N(e,l.state[e.valueKey]),variant:e.variant??"default"}))),R=n(()=>{var e;return null==(e=l.config.features)?void 0:e.docs}),B=n(()=>!!R.value),j=n(()=>{var e;return((null==(e=R.value)?void 0:e.stepKeys)??[]).map(e=>l.t(e))}),W=n(()=>{var e;return((null==(e=R.value)?void 0:e.featureKeys)??[]).map(e=>({name:l.t(e.nameKey),desc:l.t(e.descKey)}))}),q=n(()=>{var e;return!1!==(null==(e=l.config.features)?void 0:e.fireworks)}),U=n(()=>{var e;return!1!==(null==(e=l.config.features)?void 0:e.statusMessages)}),L=e=>!!y[e];return(e,a)=>{const t=d,l=i;return r(),o(m(F),{"desktop-breakpoint":1024,tabs:A.value,"active-tab":$.value,onTabChange:E},{"desktop-sidebar":u(()=>[b(e.$slots,"desktop-sidebar",{},void 0,!0)]),default:u(()=>[g.value?(r(),o(m(Q),{key:0,title:e.t("wrongChain"),message:e.t("wrongChainMessage"),"button-text":e.t("switchToNeo")},null,8,["title","message","button-text"])):p("",!0),U.value&&e.statusMessage?(r(),o(m(X),{key:1,variant:"error"===e.statusMessage.type?"danger":"erobo-neo",class:"template-status mb-4"},{default:u(()=>[c(t,{class:"text-center font-bold"},{default:u(()=>[v(f(e.statusMessage.msg),1)]),_:1})]),_:1},8,["variant"])):p("",!0),$.value===_.value?(r(),o(l,{key:2,class:"tab-content",role:"tabpanel",id:`tabpanel-${_.value}`,"aria-labelledby":`tab-${_.value}`},{default:u(()=>[(r(),o(x(M.value),null,{operation:u(()=>[b(e.$slots,"operation",{},void 0,!0)]),default:u(()=>[b(e.$slots,"content",{},void 0,!0)]),_:3}))]),_:3},8,["id","aria-labelledby"])):p("",!0),(r(!0),w(C,null,k(I.value,a=>(r(),w(C,{key:a.key},[$.value===a.key?(r(),o(l,{key:0,class:"tab-content scrollable",role:"tabpanel",id:`tabpanel-${a.key}`,"aria-labelledby":`tab-${a.key}`},{default:u(()=>["stats"===a.key&&K.value&&!L("tab-stats")?(r(),o(m(X),{key:0,variant:"erobo"},{default:u(()=>[c(m(ee),{stats:D.value},null,8,["stats"])]),_:1})):"docs"===a.key&&B.value&&!L("tab-docs")?(r(),o(m(P),{key:1,title:e.t(R.value.titleKey),subtitle:R.value.subtitleKey?e.t(R.value.subtitleKey):void 0,steps:j.value,features:W.value},null,8,["title","subtitle","steps","features"])):b(e.$slots,`tab-${a.key}`,{key:2},void 0,!0)]),_:2},1032,["id","aria-labelledby"])):p("",!0)],64))),128)),q.value?(r(),o(te,{key:3,active:e.fireworksActive,duration:3e3},null,8,["active"])):p("",!0)]),_:3},8,["tabs","active-tab"])}}}),[["__scopeId","data-v-07ef5641"]]);const ve={articles:[{id:"nnt-001",title:"Neo Council Publishes Q1 Ecosystem Priorities",summary:"A new roadmap highlights grants, infrastructure reliability, and developer onboarding improvements.",pubDate:"2026-02-06T15:00:00.000Z",imageUrl:"",link:"https://neonewstoday.com/general/neo-council-q1-priorities"},{id:"nnt-002",title:"GrantShares Community Roundup: February",summary:"An overview of active proposals, voting outcomes, and upcoming DAO milestones.",pubDate:"2026-02-05T12:30:00.000Z",imageUrl:"",link:"https://neonewstoday.com/general/grantshares-roundup-february"},{id:"nnt-003",title:"Tooling Updates Improve Smart Contract Testing",summary:"New updates streamline local testing workflows and improve transaction trace visibility.",pubDate:"2026-02-03T09:20:00.000Z",imageUrl:"",link:"https://neonewstoday.com/development/tooling-updates-testing"}]},fe="undefined"!=typeof window&&["127.0.0.1","localhost"].includes(window.location.hostname);const pe=B(s({__name:"index",setup(e){const{t:l}=j(),{status:s}=function(e=4e3){const t=a(null);return{status:t,setStatus:(a,l)=>{t.value={msg:a,type:l},setTimeout(()=>{var e;(null==(e=t.value)?void 0:e.msg)===a&&(t.value=null)},e)},clearStatus:()=>{t.value=null}}}(),{loading:y,articles:h,errorMessage:g,fetchArticles:b,formatDate:_,openArticle:$}=function(e){const t=a(!0),l=a([]),n=a("");return{loading:t,articles:l,errorMessage:n,fetchArticles:async function(){t.value=!0,n.value="";try{let a=null;if(fe)a=ve;else{const t=await fetch("/api/nnt-news?limit=20");if(!t.ok)throw new Error(e("loadFailed"));a=await t.json()}const t=Array.isArray(a.articles)?a.articles:[];l.value=t.map(e=>({id:String(e.id||""),title:String(e.title||""),excerpt:String(e.summary||e.excerpt||""),date:String(e.pubDate||e.date||""),image:e.imageUrl||e.image||void 0,url:String(e.link||e.url||"")})).filter(e=>e.id&&e.title&&e.url)}catch(a){l.value=[],n.value=e("loadFailed")}finally{t.value=!1}},formatDate:function(e){return e?new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):""},openArticle:function(e){const a=e.url;a&&E({url:`/pages/detail/index?url=${encodeURIComponent(a)}`})}}}(l),A={contentType:"two-column",tabs:[{key:"news",labelKey:"news",icon:"ðŸ“°",default:!0},{key:"docs",labelKey:"docs",icon:"ðŸ“–"}],features:{chainWarning:!0,statusMessages:!0,docs:{titleKey:"title",subtitleKey:"docSubtitle",descriptionKey:"docDescription",stepKeys:["step1","step2","step3","step4"],featureKeys:[{nameKey:"feature1Name",descKey:"feature1Desc"},{nameKey:"feature2Name",descKey:"feature2Desc"}]}}},I=a("news"),T=n(()=>({articleCount:h.value.length,loading:y.value})),x=n(()=>[{label:l("articles"),value:h.value.length},{label:l("latest"),value:h.value.length>0?_(h.value[0].date):"â€”"},{label:l("status"),value:y.value?l("loading"):l("ready")}]),M=n(()=>[{label:l("articles"),value:h.value.length},{label:l("latest"),value:h.value.length>0?_(h.value[0].date):"â€”"},{label:l("status"),value:y.value?l("loading"):l("ready")}]);t(async()=>{await b()});const K=e=>{console.error("[neo-news-today] boundary error:",e)},N=async()=>{await b()};return(e,a)=>{const t=i,n=d,E=S;return r(),o(t,{class:"theme-neo-news"},{default:u(()=>[c(m(de),{config:A,state:T.value,t:m(l),"status-message":m(s),onTabChange:a[0]||(a[0]=e=>I.value=e)},{"desktop-sidebar":u(()=>[c(m(le),{title:m(l)("overview"),items:x.value},null,8,["title","items"])]),content:u(()=>[c(m(ae),{onError:K,onRetry:N,"fallback-message":m(l)("errorFallback")},{default:u(()=>[m(y)?(r(),o(t,{key:0,class:"nnt-loading"},{default:u(()=>[c(t,{class:"nnt-spinner"}),c(n,{class:"nnt-loading-text"},{default:u(()=>[v(f(m(l)("loading")),1)]),_:1})]),_:1})):(r(),o(t,{key:1,class:"nnt-articles"},{default:u(()=>[m(g)?(r(),o(m(X),{key:0,variant:"danger",class:"nnt-empty-card"},{default:u(()=>[c(n,{class:"nnt-empty-text"},{default:u(()=>[v(f(m(g)),1)]),_:1})]),_:1})):(r(),w(C,{key:1},[(r(!0),w(C,null,k(m(h),e=>(r(),o(m(X),{key:e.id,variant:"erobo",class:"nnt-article-card",onClick:a=>m($)(e)},{default:u(()=>[c(t,{class:"article-inner"},{default:u(()=>[e.image?(r(),o(E,{key:0,src:e.image,class:"nnt-article-image",mode:"aspectFill",alt:e.title||m(l)("articleImage")},null,8,["src","alt"])):p("",!0),c(t,{class:"nnt-article-content"},{default:u(()=>[c(n,{class:"nnt-article-title-glass"},{default:u(()=>[v(f(e.title),1)]),_:2},1024),c(t,{class:"nnt-meta mb-2"},{default:u(()=>[c(n,{class:"nnt-article-date-glass"},{default:u(()=>[v(f(m(_)(e.date)),1)]),_:2},1024)]),_:2},1024),c(n,{class:"nnt-article-excerpt-glass"},{default:u(()=>[v(f(e.excerpt),1)]),_:2},1024),c(t,{class:"read-more mt-3"},{default:u(()=>[c(n,{class:"read-more-text"},{default:u(()=>[v(f(m(l)("readMore"))+" â†’",1)]),_:1})]),_:1})]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128)),0===m(h).length?(r(),o(m(X),{key:0,variant:"erobo",class:"nnt-empty-card"},{default:u(()=>[c(n,{class:"nnt-empty-text"},{default:u(()=>[v(f(m(l)("noArticles")),1)]),_:1})]),_:1})):p("",!0)],64))]),_:1}))]),_:1},8,["fallback-message"])]),operation:u(()=>[c(m(X),{variant:"erobo",title:m(l)("feedStatus")},{default:u(()=>[c(m(ee),{stats:M.value},null,8,["stats"]),c(m(Y),{size:"sm",variant:"primary",class:"op-btn",disabled:m(y),onClick:m(b)},{default:u(()=>[v(f(m(l)("refreshFeed")),1)]),_:1},8,["disabled","onClick"])]),_:1},8,["title"])]),_:1},8,["state","t","status-message"])]),_:1})}}}),[["__scopeId","data-v-8ea114a6"]]);export{pe as default};
