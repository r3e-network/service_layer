import{r as e,a,o as t,b as n,c as l,d as i,e as o,f as s,i as r,w as c,g as d,h as u,j as v,t as h,k as f,u as p,l as w,m as g,n as m,p as y,q as b,s as _,F as k,v as C,x,y as I}from"./index-DJwc5VYS.js";import{A,s as E,w as T,g as S,a as $,_ as N}from"./Fireworks.vue_vue_type_style_index_0_scoped_4da74fd1_lang.DhVCXKOK.js";import{_ as M}from"./NeoDoc.vue_vue_type_style_index_0_scoped_445ca862_lang.C2wqaHwg.js";import{u as D,N as R}from"./useI18n.Ck-k7gkr.js";class j extends Error{constructor(e,a){super(e),this.statusCode=a,this.name="HttpError"}}const F={maxRetries:3,baseDelayMs:1e3,maxDelayMs:1e4};function P(e,a){return Math.min(a.baseDelayMs*Math.pow(2,e),a.maxDelayMs)*(.75+.5*Math.random())}function q(e,a){if(a&&a>=500)return!0;if(429===a)return!0;if(e instanceof Error){const a=e.message.toLowerCase();return a.includes("network")||a.includes("timeout")||a.includes("abort")}return!1}async function U(a,t){var n;if("undefined"!=typeof uni&&"function"==typeof e)return new Promise((n,l)=>{const i=(e=>{if(e){if(e instanceof Headers){const a={};return e.forEach((e,t)=>{a[t]=e}),a}return Array.isArray(e)?Object.fromEntries(e):e}})(t.headers),o=String((null==i?void 0:i["Content-Type"])||(null==i?void 0:i["content-type"])||"");let s=t.body;if("string"==typeof s&&o.includes("application/json"))try{s=JSON.parse(s)}catch{}e({url:a,method:t.method||"GET",data:s,header:i,success:e=>{var a,t;if((e.statusCode??0)>=200&&(e.statusCode??0)<300)n(e.data);else{const n=(null==(t=null==(a=e.data)?void 0:a.error)?void 0:t.message)||`Request failed: ${e.statusCode}`;l(new j(n,e.statusCode??0))}},fail:e=>{l(new Error(e.errMsg||"Network error"))}})});const l="undefined"!=typeof window&&a.startsWith(window.location.origin),i=await fetch(a,{credentials:l?"include":"same-origin",...t});if(!i.ok){const e=await i.json().catch(()=>({}));throw new j((null==(n=e.error)?void 0:n.message)||`Request failed: ${a}`,i.status)}return i.json()}async function W(e){return async function(e,a={}){var t,n;const l=e.startsWith("http")?e:`${A}${e}`,i={...F,...a.retryConfig};let o=null;for(let r=0;r<=i.maxRetries;r++){if(null==(t=a.signal)?void 0:t.aborted)throw new Error("Request cancelled");try{return await U(l,a)}catch(s){o=s instanceof Error?s:new Error(String(s));const e=s instanceof j?s.statusCode:void 0;if(null==(n=a.signal)?void 0:n.aborted)throw o;if(r>=i.maxRetries)break;if(!q(s,e))break;const t=P(r,i);await new Promise(e=>setTimeout(e,t))}}throw o||new Error("Request failed")}(e,{method:"GET"})}let B=null;function L(){const e=a(null),l=a({}),i=a(null),o=a(null),s=a(null),r=a([]),c=a(!1),d=a(!1),u=a(null),v=a(!1),h=a(null),f=a=>{a.connected&&a.address?(e.value=a.address,c.value=!0):(e.value=null,c.value=!1),i.value=a.chainId??null,o.value=a.chainType??null,l.value=(e=>{if(!e)return{};if(e.balances&&Object.keys(e.balances).length>0)return{...e.balances};if(e.balance){const a={};return a[e.balance.nativeSymbol||("neo-n3"===e.chainType?"GAS":"NATIVE")]=e.balance.native||"0",(e.balance.governance||e.balance.governanceSymbol)&&(a[e.balance.governanceSymbol||("neo-n3"===e.chainType?"NEO":"GOV")]=e.balance.governance||"0"),a}return{}})(a)},p=e=>{e&&(s.value=e.chainId??null,r.value=Array.isArray(e.supportedChains)?e.supportedChains:[])},w=async()=>{var e;const a=await T(),t=null==(e=a.getConfig)?void 0:e.call(a);return p(t),t},g=async e=>{const a=await T();if(!a.wallet.switchChain)throw new Error("switchChain not supported by SDK");await a.wallet.switchChain(e),i.value=e};let m=null;return t(()=>{const a=$();f(a),m=E(e=>{f(e)});const t=S();(null==t?void 0:t.getConfig)&&p(t.getConfig()),t&&!c.value&&(e=>e?(B||(B=e.wallet.getAddress().then(e=>e||null).catch(e=>{const a=e instanceof Error?e.message:String(e);return console.debug("[MiniApp SDK] Fallback wallet connection failed:",a),null}).finally(()=>{B=null})),B):Promise.resolve(null))(t).then(a=>{var n;if(!c.value&&a){e.value=a,c.value=!0;const l=null==(n=t.getConfig)?void 0:n.call(t);i.value=(null==l?void 0:l.chainId)??null,o.value=(null==l?void 0:l.chainType)??null,p(l)}}),T().then(e=>{var a;return p(null==(a=e.getConfig)?void 0:a.call(e))}).catch(()=>{})}),n(()=>{m&&m()}),{address:e,chainId:i,chainType:o,appChainId:s,supportedChains:r,balances:l,isConnected:c,isLoading:d,error:u,showConnectionPrompt:v,connectionPromptMessage:h,connect:async()=>{var a;d.value=!0,u.value=null;try{const t=await T(),n=await t.wallet.getAddress();if(!n)throw new Error("wallet returned empty address");e.value=n,c.value=!0;const l=null==(a=t.getConfig)?void 0:a.call(t);i.value=(null==l?void 0:l.chainId)??null,o.value=(null==l?void 0:l.chainType)??null,p(l)}catch(t){u.value=t}finally{d.value=!1}},invokeIntent:async e=>{var a;const t=S();if(!(null==(a=null==t?void 0:t.wallet)?void 0:a.invokeIntent))throw new Error("invokeIntent not available");return t.wallet.invokeIntent(e)},invokeContract:async e=>{var a;const t=await T(),n=null==(a=t.getConfig)?void 0:a.call(t),l=e.contractAddress||e.scriptHash||e.contractHash,i=e.method||e.operation;if(!l||!i)throw new Error("contract address and method required");return t.invoke("invokeFunction",{contract:l,method:i,args:e.args,chainId:null==n?void 0:n.chainId,chainType:null==n?void 0:n.chainType})},invokeRead:async e=>{var a;const t=await T(),n=null==(a=t.getConfig)?void 0:a.call(t),l=e.contractAddress||e.scriptHash||e.contractHash||(null==n?void 0:n.contractAddress),i=e.method||e.operation;if(!l)throw new Error("contract address not configured");if(!i)throw new Error("method required");return t.invoke("invokeRead",{contract:l,method:i,args:e.args||[],chainId:e.chainId||(null==n?void 0:n.chainId),chainType:e.chainType||(null==n?void 0:n.chainType)})},getContractAddress:async()=>{var e,a,t,n,l;const i=await T(),o=null==(e=i.getConfig)?void 0:e.call(i);if(null==o?void 0:o.contractAddress)return o.contractAddress;if((null==o?void 0:o.chainId)&&(null==(t=null==(a=null==o?void 0:o.chainContracts)?void 0:a[o.chainId])?void 0:t.address))return o.chainContracts[o.chainId].address||null;if(i.invoke)try{const e=await i.invoke("getConfig");if(null==e?void 0:e.contractAddress)return e.contractAddress;if((null==e?void 0:e.chainId)&&(null==(l=null==(n=null==e?void 0:e.chainContracts)?void 0:n[e.chainId])?void 0:l.address))return e.chainContracts[e.chainId].address||null}catch{}return null},getAppConfig:w,getAddress:async()=>(await T()).wallet.getAddress(),signMessage:async e=>{var a;const t=await T();if(!(null==(a=t.wallet)?void 0:a.signMessage))throw new Error("signMessage not available");return t.wallet.signMessage(e)},switchChain:g,switchToAppChain:async e=>{const a=await w(),t=(null==a?void 0:a.chainId)||(Array.isArray(null==a?void 0:a.supportedChains)&&a.supportedChains.length>0?a.supportedChains[0]:null)||e||null;if(!t)throw new Error("app chain not configured");await g(t)},getBalance:async e=>{var a;d.value=!0,u.value=null;try{const t=await T(),n=null==(a=t.getConfig)?void 0:a.call(t),o=(null==n?void 0:n.chainId)||i.value,s=o?`?chain_id=${encodeURIComponent(o)}`:"",r=await W(`/wallet-balance${s}`),c=(null==r?void 0:r.balances)??{};return l.value=c,e?c[e]||"0":c}catch(t){throw u.value=t,t}finally{d.value=!1}},getTransactions:async(e=20)=>{var a;d.value=!0,u.value=null;try{const t=Number.isNaN(e)||e<1?20:Math.min(e,100),n=await T(),l=null==(a=n.getConfig)?void 0:a.call(n),o=(null==l?void 0:l.chainId)||i.value,s=new URLSearchParams({limit:String(t)});o&&s.set("chain_id",o);const r=await W(`/wallet-transactions?${s.toString()}`);return(null==r?void 0:r.transactions)??[]}catch(t){throw u.value=t,t}finally{d.value=!1}},invoke:async(e,a)=>(await T()).invoke(e,a),requireConnection:(e={})=>{const{showPrompt:a=!0,errorMessage:t}=e;return!!c.value||(a&&(h.value=t||null,v.value=!0),!1)},closeConnectionPrompt:()=>{v.value=!1,h.value=null},clearError:()=>{u.value=null}}}const H=M(i({__name:"ChainWarning",props:{title:{default:"Wrong Network"},message:{default:"Switch to Neo N3 Mainnet to continue."},buttonText:{default:"Switch Network"},show:{type:Boolean,default:void 0}},emits:["switch","switch-complete","switch-error"],setup(e,{emit:t}){const n=e,i=t,{showWarning:w,switchToAppChain:g}=function(){const{switchToAppChain:e}=L();return{showWarning:l(()=>!1),switchToAppChain:async()=>{try{await e()}catch(a){throw console.error("[useChainValidation] Failed to switch chain:",a),a}}}}(),m=a(!1),y=l(()=>void 0!==n.show?n.show:w.value),b=async()=>{if(!m.value){m.value=!0,i("switch");try{await g(),i("switch-complete")}catch(e){const a=e instanceof Error?e:new Error(String(e));i("switch-error",a),console.error("[ChainWarning] Failed to switch chain:",a)}finally{m.value=!1}}};return(e,a)=>{const t=u,n=r;return y.value?(o(),s(n,{key:0,class:"chain-warning px-4 mb-4"},{default:c(()=>[d(p(O),{variant:"danger"},{default:c(()=>[d(n,{class:"flex flex-col items-center gap-2 py-1"},{default:c(()=>[d(t,{class:"text-center font-bold text-red-400"},{default:c(()=>[v(h(e.title),1)]),_:1}),e.message?(o(),s(t,{key:0,class:"text-xs text-center opacity-80 text-white"},{default:c(()=>[v(h(e.message),1)]),_:1})):f("",!0),d(p(z),{size:"sm",variant:"secondary",class:"mt-2",loading:m.value,onClick:b},{default:c(()=>[v(h(e.buttonText),1)]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})):f("",!0)}}}),[["__scopeId","data-v-3dc811c7"]]),O=M(i({__name:"NeoCard",props:{title:{default:void 0},variant:{default:"default"},hoverable:{type:Boolean,default:!1},flat:{type:Boolean,default:!1}},emits:["click"],setup:e=>(e,a)=>{const t=u,n=r;return o(),s(n,{class:m(["neo-card",`neo-card--${e.variant}`,{"neo-card--hoverable":e.hoverable,"neo-card--flat":e.flat}]),role:e.hoverable?"button":void 0,tabindex:e.hoverable?0:void 0,onClick:a[0]||(a[0]=a=>e.hoverable&&e.$emit("click",a)),onKeydown:[a[1]||(a[1]=w(a=>e.hoverable&&e.$emit("click",a),["enter"])),a[2]||(a[2]=w(g(a=>e.hoverable&&e.$emit("click",a),["prevent"]),["space"]))]},{default:c(()=>[e.title||e.$slots.header?(o(),s(n,{key:0,class:"neo-card__header"},{default:c(()=>[e.title?(o(),s(t,{key:0,class:"neo-card__title"},{default:c(()=>[v(h(e.title),1)]),_:1})):f("",!0),y(e.$slots,"header",{},void 0,!0)]),_:3})):f("",!0),d(n,{class:"neo-card__body"},{default:c(()=>[y(e.$slots,"default",{},void 0,!0)]),_:3}),e.$slots.footer?(o(),s(n,{key:1,class:"neo-card__footer"},{default:c(()=>[y(e.$slots,"footer",{},void 0,!0)]),_:3})):f("",!0)]),_:3},8,["class","role","tabindex"])}}),[["__scopeId","data-v-3f370003"]]),z=M(i({__name:"NeoButton",props:{variant:{default:"primary"},size:{default:"md"},block:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},ariaLabel:{default:void 0}},emits:["click"],setup:e=>(e,a)=>{const t=r,n=b;return o(),s(n,{class:m(["neo-btn",`neo-btn--${e.variant}`,`neo-btn--${e.size}`,{"neo-btn--block":e.block,"neo-btn--loading":e.loading}]),disabled:e.disabled||e.loading,"aria-busy":e.loading,"aria-disabled":e.disabled||e.loading,"aria-label":e.ariaLabel,onClick:a[0]||(a[0]=a=>e.$emit("click",a))},{default:c(()=>[e.loading?(o(),s(t,{key:0,class:"neo-btn__spinner"})):y(e.$slots,"default",{key:1},void 0,!0)]),_:3},8,["class","disabled","aria-busy","aria-disabled","aria-label"])}}),[["__scopeId","data-v-4b6100e3"]]),G=M(i({__name:"index",setup(e){const i=a(window.innerWidth);l(()=>i.value<768),l(()=>i.value>=1024);const w=()=>{i.value=window.innerWidth};t(()=>window.addEventListener("resize",w)),n(()=>window.removeEventListener("resize",w));const{t:g}=D(),m=l(()=>[{id:"news",icon:"news",label:g("news")},{id:"docs",icon:"book",label:g("docs")}]),y=a("news"),b=l(()=>[g("step1"),g("step2"),g("step3"),g("step4")]),A=l(()=>[{name:g("feature1Name"),desc:g("feature1Desc")},{name:g("feature2Name"),desc:g("feature2Desc")}]),E=a(!0),T=a([]),S=a(""),$="undefined"!=typeof window&&["127.0.0.1","localhost"].includes(window.location.hostname),M={articles:[{id:"nnt-001",title:"Neo Council Publishes Q1 Ecosystem Priorities",summary:"A new roadmap highlights grants, infrastructure reliability, and developer onboarding improvements.",pubDate:"2026-02-06T15:00:00.000Z",imageUrl:"",link:"https://neonewstoday.com/general/neo-council-q1-priorities"},{id:"nnt-002",title:"GrantShares Community Roundup: February",summary:"An overview of active proposals, voting outcomes, and upcoming DAO milestones.",pubDate:"2026-02-05T12:30:00.000Z",imageUrl:"",link:"https://neonewstoday.com/general/grantshares-roundup-february"},{id:"nnt-003",title:"Tooling Updates Improve Smart Contract Testing",summary:"New updates streamline local testing workflows and improve transaction trace visibility.",pubDate:"2026-02-03T09:20:00.000Z",imageUrl:"",link:"https://neonewstoday.com/development/tooling-updates-testing"}]};function j(e){if(!e)return"";return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}return t(async()=>{await async function(){E.value=!0,S.value="";try{let e=null;if($)e=M;else{const a=await fetch("/api/nnt-news?limit=20");if(!a.ok)throw new Error(g("loadFailed"));e=await a.json()}const a=Array.isArray(e.articles)?e.articles:[];T.value=a.map(e=>({id:String(e.id||""),title:String(e.title||""),excerpt:String(e.summary||e.excerpt||""),date:String(e.pubDate||e.date||""),image:e.imageUrl||e.image||void 0,url:String(e.link||e.url||"")})).filter(e=>e.id&&e.title&&e.url)}catch(e){T.value=[],S.value=g("loadFailed")}finally{E.value=!1}}()}),(e,a)=>{const t=u,n=r,l=x;return o(),s(p(N),{"desktop-breakpoint":1024,tabs:m.value,"active-tab":y.value,onTabChange:a[0]||(a[0]=e=>y.value=e)},{"desktop-sidebar":c(()=>[d(n,{class:"desktop-sidebar"},{default:c(()=>[d(t,{class:"sidebar-title"},{default:c(()=>[v(h(p(g)("overview")),1)]),_:1})]),_:1})]),default:c(()=>[d(p(H),{title:p(g)("wrongChain"),message:p(g)("wrongChainMessage"),"button-text":p(g)("switchToNeo")},null,8,["title","message","button-text"]),"news"===y.value?(o(),s(n,{key:0,class:"nnt-container theme-neo-news"},{default:c(()=>[E.value?(o(),s(n,{key:0,class:"nnt-loading"},{default:c(()=>[d(n,{class:"nnt-spinner"}),d(t,{class:"nnt-loading-text"},{default:c(()=>[v(h(p(g)("loading")),1)]),_:1})]),_:1})):(o(),s(n,{key:1,class:"nnt-articles"},{default:c(()=>[S.value?(o(),s(p(O),{key:0,variant:"danger",class:"nnt-empty-card"},{default:c(()=>[d(t,{class:"nnt-empty-text"},{default:c(()=>[v(h(S.value),1)]),_:1})]),_:1})):(o(),_(k,{key:1},[(o(!0),_(k,null,C(T.value,e=>(o(),s(p(O),{key:e.id,variant:"erobo",class:"nnt-article-card",onClick:a=>function(e){const a=e.url;a&&I({url:`/pages/detail/index?url=${encodeURIComponent(a)}`})}(e)},{default:c(()=>[d(n,{class:"article-inner"},{default:c(()=>[e.image?(o(),s(l,{key:0,src:e.image,class:"nnt-article-image",mode:"aspectFill",alt:e.title||p(g)("articleImage")},null,8,["src","alt"])):f("",!0),d(n,{class:"nnt-article-content"},{default:c(()=>[d(t,{class:"nnt-article-title-glass"},{default:c(()=>[v(h(e.title),1)]),_:2},1024),d(n,{class:"nnt-meta mb-2"},{default:c(()=>[d(t,{class:"nnt-article-date-glass"},{default:c(()=>[v(h(j(e.date)),1)]),_:2},1024)]),_:2},1024),d(t,{class:"nnt-article-excerpt-glass"},{default:c(()=>[v(h(e.excerpt),1)]),_:2},1024),d(n,{class:"read-more mt-3"},{default:c(()=>[d(t,{class:"read-more-text"},{default:c(()=>[v(h(p(g)("readMore"))+" â†’",1)]),_:1})]),_:1})]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128)),0===T.value.length?(o(),s(p(O),{key:0,variant:"erobo",class:"nnt-empty-card"},{default:c(()=>[d(t,{class:"nnt-empty-text"},{default:c(()=>[v(h(p(g)("noArticles")),1)]),_:1})]),_:1})):f("",!0)],64))]),_:1}))]),_:1})):f("",!0),"docs"===y.value?(o(),s(n,{key:1,class:"tab-content scrollable"},{default:c(()=>[d(p(R),{title:p(g)("title"),subtitle:p(g)("docSubtitle"),description:p(g)("docDescription"),steps:b.value,features:A.value},null,8,["title","subtitle","description","steps","features"])]),_:1})):f("",!0)]),_:1},8,["tabs","active-tab"])}}}),[["__scopeId","data-v-ee60a2c1"]]);export{G as default};
