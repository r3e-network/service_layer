import{r as e,a as t,o as n,b as a,d as o,c as i,e as r,f as l,i as s,n as c,g as d,w as u,h as p,j as v,t as f,k as h,l as w,F as m,m as g,p as y,q as b,s as _,u as k,v as C,x as A,y as S,z as E,A as I,B as z,C as T,D as N,I as x,E as M,G as P,H as $}from"./index--Kn071C4.js";const O=5e3,D=1e4,R=100,L=["https://neomini.app","https://miniapp.neo.org","https://testnet.miniapp.neo.org"];const B=new class{constructor(){this.dynamicOrigins=new Set,this.baseOrigins=new Set([...L])}getSelfOrigin(){if("undefined"==typeof window)return null;try{const e=new URL(window.location.href);if("null"===e.origin)return null;if("http:"===e.protocol||"https:"===e.protocol)return e.origin}catch{}return null}getReferrerOrigin(){if("undefined"==typeof document||!document.referrer)return null;try{return new URL(document.referrer).origin}catch{return null}}getAllowedOrigins(){const e=new Set(this.baseOrigins);this.dynamicOrigins.forEach(t=>e.add(t));const t=this.getReferrerOrigin();t&&this.baseOrigins.has(t)&&e.add(t);const n=this.getSelfOrigin();if(n&&e.add(n),"undefined"!=typeof window){const t=window.location.hostname;"localhost"!==t&&"127.0.0.1"!==t||e.add(window.location.origin)}return e}isValid(e){return!(!e||"null"===e)&&this.getAllowedOrigins().has(e)}getTargetOrigin(){var e;const t=this.getReferrerOrigin();if(t&&this.baseOrigins.has(t))return t;try{if("undefined"!=typeof window&&window.parent!==window&&(null==(e=window.location.ancestorOrigins)?void 0:e.length)>0){const e=window.location.ancestorOrigins[0];if(this.baseOrigins.has(e))return e}}catch{}const n=this.getSelfOrigin();if(n)return n;if("undefined"!=typeof window){const e=window.location.hostname;if("localhost"===e||"127.0.0.1"===e)return window.location.origin}throw new Error("Cannot determine safe target origin - no valid origin found")}getSafeTargetOrigin(){try{const e=this.getTargetOrigin();if(e&&"null"!==e)return e}catch{}if("undefined"!=typeof window&&window.parent!==window){const e=window.__MINIAPP_PARENT_ORIGIN__;if("string"==typeof e&&e&&this.baseOrigins.has(e))return e;throw new Error("Cannot communicate securely with parent - origin unknown. Ensure host app sets __MINIAPP_PARENT_ORIGIN__ or uses a supported browser.")}throw new Error("Cannot determine safe target origin - origin is null or undefined")}addDynamicOrigin(e){e&&"null"!==e&&this.dynamicOrigins.add(e)}};let G=null;function U(e){const t=null==e?void 0:e.layout;if("web"===t||"mobile"===t)return t;if("undefined"!=typeof window){const e=new URLSearchParams(window.location.search).get("layout");if("web"===e||"mobile"===e)return e;if(window.ReactNativeWebView)return"mobile"}return"web"}function H(e){if(!e||"object"!=typeof e)return!1;const t="function"==typeof e.invoke&&"function"==typeof e.getConfig,n="object"==typeof e.wallet||"object"==typeof e.payments;return t||n}function F(e=O){return new Promise((t,n)=>{if("undefined"==typeof window)return void n(new Error("SDK not available in SSR"));if(window.MiniAppSDK)return H(window.MiniAppSDK)?void t(window.MiniAppSDK):void n(new Error("SDK validation failed"));const a=setTimeout(()=>{if(window.removeEventListener("miniapp-sdk-ready",o),window.parent!==window){const e=function(){const e=B.getSafeTargetOrigin();let t=0;const n=(n,...a)=>new Promise((o,i)=>{const r="undefined"!=typeof crypto&&crypto.getRandomValues?Array.from(crypto.getRandomValues(new Uint8Array(4)),e=>e.toString(16).padStart(2,"0")).join(""):Math.random().toString(36).slice(2,10),l=`sdk-${++t}-${Date.now()}-${r}`,s=setTimeout(()=>{window.removeEventListener("message",c),i(new Error("SDK invoke timeout"))},D),c=e=>{var t,n;B.isValid(e.origin)&&e.source===window.parent&&"miniapp_sdk_response"===(null==(t=e.data)?void 0:t.type)&&(null==(n=e.data)?void 0:n.id)===l&&(clearTimeout(s),window.removeEventListener("message",c),e.data.ok?o(e.data.result):i(new Error(e.data.error||"SDK call failed")))};window.addEventListener("message",c),window.parent.postMessage({type:"miniapp_sdk_request",id:l,method:n,params:a},e)});return{invoke:n,getConfig:()=>G?{...G,layout:U(G)}:"undefined"!=typeof window&&window.__MINIAPP_CONFIG__?(G=window.__MINIAPP_CONFIG__,{...G,layout:U(G??void 0)}):{appId:"",contractAddress:null,chainId:null,chainType:void 0,supportedChains:[],layout:U(),debug:!1},getAddress:()=>n("getAddress"),wallet:{getAddress:()=>n("wallet.getAddress"),switchChain:e=>n("wallet.switchChain",e),invokeIntent:e=>n("wallet.invokeIntent",e),signMessage:e=>n("wallet.signMessage",e)},payments:{payGAS:(e,t,a)=>n("payments.payGAS",e,t,a),payGASAndInvoke:(e,t,a)=>n("payments.payGASAndInvoke",e,t,a)},governance:{vote:(e,t,a,o)=>n("governance.vote",e,t,a,o),voteAndInvoke:(e,t,a,o)=>n("governance.voteAndInvoke",e,t,a,o),getCandidates:()=>n("governance.getCandidates")},rng:{requestRandom:e=>n("rng.requestRandom",e)},datafeed:{getPrice:e=>n("datafeed.getPrice",e),getPrices:()=>n("datafeed.getPrices"),getNetworkStats:()=>n("datafeed.getNetworkStats"),getRecentTransactions:e=>n("datafeed.getRecentTransactions",e)},stats:{getMyUsage:(e,t)=>n("stats.getMyUsage",e,t)},events:{list:e=>n("events.list",e),emit:(e,t)=>n("events.emit",e,t)},transactions:{list:e=>n("transactions.list",e)},automation:{register:(e,t,a,o)=>n("automation.register",e,t,a,o),unregister:e=>n("automation.unregister",e),status:e=>n("automation.status",e),list:()=>n("automation.list"),update:(e,t,a)=>n("automation.update",e,t,a),enable:e=>n("automation.enable",e),disable:e=>n("automation.disable",e),logs:(e,t)=>n("automation.logs",e,t)},share:{openModal:e=>n("share.openModal",e),getUrl:e=>n("share.getUrl",e),copy:e=>n("share.copy",e)}}}();window.MiniAppSDK=e,e.invoke("getConfig").then(e=>{e&&"object"==typeof e&&(G=e)}).catch(()=>{}),t(e)}else n(new Error("SDK timeout"))},e),o=()=>{if(clearTimeout(a),window.removeEventListener("miniapp-sdk-ready",o),window.MiniAppSDK){if(!H(window.MiniAppSDK))return void n(new Error("SDK validation failed"));t(window.MiniAppSDK)}else n(new Error("SDK not found"))};window.addEventListener("miniapp-sdk-ready",o)})}function K(){return"undefined"==typeof window?null:window.MiniAppSDK??null}const V=new Set;let W={connected:!1,address:null,balance:null},j=null,q=!1;function J(t){const n=e(!1),a=e(null);return{isLoading:n,error:a,execute:async(...e)=>{n.value=!0,a.value=null;try{return await t(...e)}catch(o){throw a.value=o,o}finally{n.value=!1}}}}"undefined"!=typeof window&&("undefined"!=typeof window&&(q&&j||(j=e=>{if(e.source!==window.parent)return;if(!B.isValid(e.origin))return;const t=e.data;t&&"object"==typeof t&&("miniapp_config"!==t.type?"miniapp_wallet_state_change"===t.type&&(W={connected:Boolean(t.connected),address:t.address||null,chainId:t.chainId??null,chainType:t.chainType??null,balance:t.balance||t.multiChainBalance||null,balances:t.balances||void 0},V.forEach(e=>{try{e(W)}catch(t){console.error("[MiniApp SDK] Wallet state listener error:",t)}})):t.config&&"object"==typeof t.config&&(G=t.config))},window.addEventListener("message",j),q=!0)),setTimeout(function(){if("undefined"==typeof window)return;const e=B.getSafeTargetOrigin();try{window.parent.postMessage({type:"miniapp_ready"},e)}catch{}},R));let X=class extends Error{constructor(e,t){super(e),this.statusCode=t,this.name="HttpError"}};const Y={maxRetries:3,baseDelayMs:1e3,maxDelayMs:1e4};function Q(e,t){return Math.min(t.baseDelayMs*Math.pow(2,e),t.maxDelayMs)*(.75+.5*Math.random())}function Z(e,t){if(t&&t>=500)return!0;if(429===t)return!0;if(e instanceof Error){const t=e.message.toLowerCase();return t.includes("network")||t.includes("timeout")||t.includes("abort")}return!1}async function ee(e,n){var a;if("undefined"!=typeof uni&&"function"==typeof t)return new Promise((a,o)=>{const i=(e=>{if(e){if(e instanceof Headers){const t={};return e.forEach((e,n)=>{t[n]=e}),t}return Array.isArray(e)?Object.fromEntries(e):e}})(n.headers),r=String((null==i?void 0:i["Content-Type"])||(null==i?void 0:i["content-type"])||"");let l=n.body;if("string"==typeof l&&r.includes("application/json"))try{l=JSON.parse(l)}catch{}t({url:e,method:n.method||"GET",data:l,header:i,success:e=>{var t,n;if((e.statusCode??0)>=200&&(e.statusCode??0)<300)a(e.data);else{const a=(null==(n=null==(t=e.data)?void 0:t.error)?void 0:n.message)||`Request failed: ${e.statusCode}`;o(new X(a,e.statusCode??0))}},fail:e=>{o(new Error(e.errMsg||"Network error"))}})});const o="undefined"!=typeof window&&e.startsWith(window.location.origin),i=await fetch(e,{credentials:o?"include":"same-origin",...n});if(!i.ok){const t=await i.json().catch(()=>({}));throw new X((null==(a=t.error)?void 0:a.message)||`Request failed: ${e}`,i.status)}return i.json()}async function te(e){return async function(e,t={}){var n,a;const o=e.startsWith("http")?e:`https://api.neo-service-layer.io${e}`,i={...Y,...t.retryConfig};let r=null;for(let s=0;s<=i.maxRetries;s++){if(null==(n=t.signal)?void 0:n.aborted)throw new Error("Request cancelled");try{return await ee(o,t)}catch(l){r=l instanceof Error?l:new Error(String(l));const e=l instanceof X?l.statusCode:void 0;if(null==(a=t.signal)?void 0:a.aborted)throw r;if(s>=i.maxRetries)break;if(!Z(l,e))break;const n=Q(s,i);await new Promise(e=>setTimeout(e,n))}}throw r||new Error("Request failed")}(e,{method:"GET"})}let ne=null;function ae(){const t=e(null),o=e({}),i=e(null),r=e(null),l=e(null),s=e([]),c=e(!1),d=e(!1),u=e(null),p=e(!1),v=e(null),f=e=>{e.connected&&e.address?(t.value=e.address,c.value=!0):(t.value=null,c.value=!1),i.value=e.chainId??null,r.value=e.chainType??null,o.value=(e=>{if(!e)return{};if(e.balances&&Object.keys(e.balances).length>0)return{...e.balances};if(e.balance){const t={};return t[e.balance.nativeSymbol||("neo-n3"===e.chainType?"GAS":"NATIVE")]=e.balance.native||"0",(e.balance.governance||e.balance.governanceSymbol)&&(t[e.balance.governanceSymbol||("neo-n3"===e.chainType?"NEO":"GOV")]=e.balance.governance||"0"),t}return{}})(e)},h=e=>{e&&(l.value=e.chainId??null,s.value=Array.isArray(e.supportedChains)?e.supportedChains:[])},w=async()=>{var e;const t=await F(),n=null==(e=t.getConfig)?void 0:e.call(t);return h(n),n},m=async e=>{const t=await F();if(!t.wallet.switchChain)throw new Error("switchChain not supported by SDK");await t.wallet.switchChain(e),i.value=e};let g=null;return n(()=>{var e;f(W),e=e=>{f(e)},V.add(e),e(W),g=()=>V.delete(e);const n=K();(null==n?void 0:n.getConfig)&&h(n.getConfig()),n&&!c.value&&(e=>e?(ne||(ne=e.wallet.getAddress().then(e=>e||null).catch(e=>{const t=e instanceof Error?e.message:String(e);return console.debug("[MiniApp SDK] Fallback wallet connection failed:",t),null}).finally(()=>{ne=null})),ne):Promise.resolve(null))(n).then(e=>{var a;if(!c.value&&e){t.value=e,c.value=!0;const o=null==(a=n.getConfig)?void 0:a.call(n);i.value=(null==o?void 0:o.chainId)??null,r.value=(null==o?void 0:o.chainType)??null,h(o)}}),F().then(e=>{var t;return h(null==(t=e.getConfig)?void 0:t.call(e))}).catch(()=>{})}),a(()=>{g&&g()}),{address:t,chainId:i,chainType:r,appChainId:l,supportedChains:s,balances:o,isConnected:c,isLoading:d,error:u,showConnectionPrompt:p,connectionPromptMessage:v,connect:async()=>{var e;d.value=!0,u.value=null;try{const n=await F(),a=await n.wallet.getAddress();if(!a)throw new Error("wallet returned empty address");t.value=a,c.value=!0;const o=null==(e=n.getConfig)?void 0:e.call(n);i.value=(null==o?void 0:o.chainId)??null,r.value=(null==o?void 0:o.chainType)??null,h(o)}catch(n){u.value=n}finally{d.value=!1}},invokeIntent:async e=>{var t;const n=K();if(!(null==(t=null==n?void 0:n.wallet)?void 0:t.invokeIntent))throw new Error("invokeIntent not available");return n.wallet.invokeIntent(e)},invokeContract:async e=>{var t;const n=await F(),a=null==(t=n.getConfig)?void 0:t.call(n),o=e.contractAddress||e.scriptHash||e.contractHash,i=e.method||e.operation;if(!o||!i)throw new Error("contract address and method required");return n.invoke("invokeFunction",{contract:o,method:i,args:e.args,chainId:null==a?void 0:a.chainId,chainType:null==a?void 0:a.chainType})},invokeRead:async e=>{var t;const n=await F(),a=null==(t=n.getConfig)?void 0:t.call(n),o=e.contractAddress||e.scriptHash||e.contractHash||(null==a?void 0:a.contractAddress),i=e.method||e.operation;if(!o)throw new Error("contract address not configured");if(!i)throw new Error("method required");return n.invoke("invokeRead",{contract:o,method:i,args:e.args||[],chainId:e.chainId||(null==a?void 0:a.chainId),chainType:e.chainType||(null==a?void 0:a.chainType)})},getContractAddress:async()=>{var e,t,n,a,o;const i=await F(),r=null==(e=i.getConfig)?void 0:e.call(i);if(null==r?void 0:r.contractAddress)return r.contractAddress;if((null==r?void 0:r.chainId)&&(null==(n=null==(t=null==r?void 0:r.chainContracts)?void 0:t[r.chainId])?void 0:n.address))return r.chainContracts[r.chainId].address||null;if(i.invoke)try{const e=await i.invoke("getConfig");if(null==e?void 0:e.contractAddress)return e.contractAddress;if((null==e?void 0:e.chainId)&&(null==(o=null==(a=null==e?void 0:e.chainContracts)?void 0:a[e.chainId])?void 0:o.address))return e.chainContracts[e.chainId].address||null}catch{}return null},getAppConfig:w,getAddress:async()=>(await F()).wallet.getAddress(),signMessage:async e=>{var t;const n=await F();if(!(null==(t=n.wallet)?void 0:t.signMessage))throw new Error("signMessage not available");return n.wallet.signMessage(e)},switchChain:m,switchToAppChain:async e=>{const t=await w(),n=(null==t?void 0:t.chainId)||(Array.isArray(null==t?void 0:t.supportedChains)&&t.supportedChains.length>0?t.supportedChains[0]:null)||e||null;if(!n)throw new Error("app chain not configured");await m(n)},getBalance:async e=>{var t;d.value=!0,u.value=null;try{const n=await F(),a=null==(t=n.getConfig)?void 0:t.call(n),r=(null==a?void 0:a.chainId)||i.value,l=r?`?chain_id=${encodeURIComponent(r)}`:"",s=await te(`/wallet-balance${l}`),c=(null==s?void 0:s.balances)??{};return o.value=c,e?c[e]||"0":c}catch(n){throw u.value=n,n}finally{d.value=!1}},getTransactions:async(e=20)=>{var t;d.value=!0,u.value=null;try{const n=Number.isNaN(e)||e<1?20:Math.min(e,100),a=await F(),o=null==(t=a.getConfig)?void 0:t.call(a),r=(null==o?void 0:o.chainId)||i.value,l=new URLSearchParams({limit:String(n)});r&&l.set("chain_id",r);const s=await te(`/wallet-transactions?${l.toString()}`);return(null==s?void 0:s.transactions)??[]}catch(n){throw u.value=n,n}finally{d.value=!1}},invoke:async(e,t)=>(await F()).invoke(e,t),requireConnection:(e={})=>{const{showPrompt:t=!0,errorMessage:n}=e;return!!c.value||(t&&(v.value=n||null,p.value=!0),!1)},closeConnectionPrompt:()=>{p.value=!1,v.value=null},clearError:()=>{u.value=null}}}function oe(){const e=J(async(e={})=>{var t;const n=await F();if(!(null==(t=n.events)?void 0:t.list))throw new Error("events.list not available");return await n.events.list(e)}),t=J(async(e,t)=>{var n;const a=String(e||"").trim();if(!a)throw new Error("eventName required");const o=await F();if(!(null==(n=o.events)?void 0:n.emit))throw new Error("events.emit not available");return await o.events.emit(a,t||{})});return{isLoading:e.isLoading,error:e.error,list:e.execute,isEmitting:t.isLoading,emitError:t.error,emit:t.execute}}e("en");const ie={docBadge:{en:"Documentation",zh:"æ–‡æ¡£"},docFooter:{en:"NeoHub MiniApp Protocol v2.4.0",zh:"NeoHub MiniApp Protocol v2.4.0"}};function re(t){const n={...ie,...t},a=e("undefined"==typeof window?"en":(navigator.language||navigator.userLanguage||"en").toLowerCase().startsWith("zh")?"zh":"en"),o=(e,t)=>{const o=n[e];if(!o)return String(e);let i="";return i="string"==typeof o?o:o[a.value]||o.en||o.zh||String(e),t?((e,t)=>e.replace(/\{(\w+)\}/g,(e,n)=>String(t[n]??`{${n}}`)))(i,t):i},i=e=>{a.value=(e=>e&&e.toLowerCase().startsWith("zh")?"zh":"en")(e)};if("undefined"!=typeof window){window.addEventListener("languageChange",e=>{var t;const n=null==(t=e.detail)?void 0:t.language;n&&i(n)});const e=(()=>{try{if(window.parent!==window&&document.referrer)return new URL(document.referrer).origin}catch{}return window.location.origin})();window.addEventListener("message",t=>{const n=t.source===window.parent;if(!(t.origin===e||t.origin===window.location.origin||n&&("null"===t.origin||"null"===e)))return;const a=t.data;if(!a||"object"!=typeof a)return;if("language-change"!==a.type)return;const o=String(a.language||a.locale||a.lang||"").trim();o&&i(o)})}return()=>({locale:a,t:o,setLocale:i})}const le=re({wrongChain:{en:"Wrong Network",zh:"ç½‘ç»œé”™è¯¯"},wrongChainMessage:{en:"Switch to Neo N3 Mainnet to continue.",zh:"åˆ‡æ¢åˆ° Neo N3 ä¸»ç½‘ä»¥ç»§ç»­ã€‚"},switchToNeo:{en:"Switch Network",zh:"åˆ‡æ¢ç½‘ç»œ"},connectWalletPrompt:{en:"Please connect your wallet",zh:"è¯·è¿æ¥é’±åŒ…"},contractUnavailable:{en:"Contract unavailable",zh:"åˆçº¦ä¸å¯ç”¨"},transactionFailed:{en:"Transaction failed",zh:"äº¤æ˜“å¤±è´¥"},insufficientBalance:{en:"Insufficient balance",zh:"ä½™é¢ä¸è¶³"},loading:{en:"Loading...",zh:"åŠ è½½ä¸­..."},error:{en:"Error",zh:"é”™è¯¯"},main:{en:"Main",zh:"ä¸»é¡µ"},game:{en:"Game",zh:"æ¸¸æˆ"},games:{en:"Games",zh:"æ¸¸æˆ"},stats:{en:"Stats",zh:"ç»Ÿè®¡"},docsTab:{en:"Docs",zh:"æ–‡æ¡£"},settings:{en:"Settings",zh:"è®¾ç½®"},about:{en:"About",zh:"å…³äº"},docSubtitle:{en:"Documentation",zh:"æ–‡æ¡£"},docDescription:{en:"Learn how to use this miniapp",zh:"äº†è§£å¦‚ä½•ä½¿ç”¨æ­¤è¿·ä½ åº”ç”¨"},docWhatItIs:{en:"What is it?",zh:"è¿™æ˜¯ä»€ä¹ˆï¼Ÿ"},docHowToUse:{en:"How to use",zh:"å¦‚ä½•ä½¿ç”¨"},docOnChainFeatures:{en:"On-Chain Features",zh:"é“¾ä¸Šç‰¹æ€§"},confirm:{en:"Confirm",zh:"ç¡®è®¤"},cancel:{en:"Cancel",zh:"å–æ¶ˆ"},close:{en:"Close",zh:"å…³é—­"},continue:{en:"Continue",zh:"ç»§ç»­"},retry:{en:"Retry",zh:"é‡è¯•"},back:{en:"Back",zh:"è¿”å›"},walletRequired:{en:"Wallet Required",zh:"éœ€è¦é’±åŒ…"},walletDescription:{en:"Please connect your wallet to continue.",zh:"è¯·è¿æ¥é’±åŒ…ä»¥ç»§ç»­ã€‚"},connectWallet:{en:"Connect Wallet",zh:"è¿æ¥é’±åŒ…"},wpTitle:{en:"Wallet Required",zh:"éœ€è¦é’±åŒ…"},wpDescription:{en:"Please connect your wallet to continue.",zh:"è¯·è¿æ¥é’±åŒ…ä»¥ç»§ç»­ã€‚"},wpConnect:{en:"Connect Wallet",zh:"è¿æ¥é’±åŒ…"},wpCancel:{en:"Cancel",zh:"å–æ¶ˆ"},success:{en:"Success",zh:"æˆåŠŸ"},failed:{en:"Failed",zh:"å¤±è´¥"},pending:{en:"Pending",zh:"å¤„ç†ä¸­"},completed:{en:"Completed",zh:"å·²å®Œæˆ"},buy:{en:"Buy",zh:"è´­ä¹°"},sell:{en:"Sell",zh:"å‡ºå”®"},swap:{en:"Swap",zh:"äº¤æ¢"},transfer:{en:"Transfer",zh:"è½¬è´¦"},claim:{en:"Claim",zh:"é¢†å–"},enterAmount:{en:"Enter amount",zh:"è¯·è¾“å…¥æ•°é‡"},selectOption:{en:"Select an option",zh:"è¯·é€‰æ‹©"},search:{en:"Search",zh:"æœç´¢"},docBadge:{en:"Documentation",zh:"æ–‡æ¡£"},docFooter:{en:"NeoHub MiniApp Protocol v2.4.0",zh:"NeoHub MiniApp Protocol v2.4.0"}}),se=re({title:{en:"Red Envelope",zh:"çº¢åŒ…"},subtitle:{en:"Lucky red packets",zh:"å¹¸è¿çº¢åŒ…"},createTab:{en:"Create",zh:"åˆ›å»º"},claimTab:{en:"Claim",zh:"é¢†å–"},createEnvelope:{en:"Create Envelope",zh:"åˆ›å»ºçº¢åŒ…"},namePlaceholder:{en:"Envelope name (optional)",zh:"çº¢åŒ…åç§°ï¼ˆå¯é€‰ï¼‰"},descriptionPlaceholder:{en:"Blessing message",zh:"ç¥ç¦è¯­"},totalGasPlaceholder:{en:"Total GAS",zh:"æ€» GAS"},packetsPlaceholder:{en:"Number of packets",zh:"çº¢åŒ…æ•°é‡"},expiryPlaceholder:{en:"Expiry (hours)",zh:"è¿‡æœŸæ—¶é•¿ (å°æ—¶)"},creating:{en:"Creating...",zh:"åˆ›å»ºä¸­..."},sendRedEnvelope:{en:"Send Red Envelope",zh:"å‘é€çº¢åŒ…"},availableEnvelopes:{en:"Available Envelopes",zh:"å¯ç”¨çº¢åŒ…"},from:{en:"From {0}",zh:"æ¥è‡ª {0}"},fromPrefix:{en:"From",zh:"æ¥è‡ª"},remaining:{en:"{0}/{1} left",zh:"å‰©ä½™ {0}/{1}"},envelopeSent:{en:"Envelope sent!",zh:"çº¢åŒ…å·²å‘é€ï¼"},claimedFrom:{en:"Claimed from {0}!",zh:"å·²é¢†å–æ¥è‡ª {0} çš„çº¢åŒ…ï¼"},congratulations:{en:"Congratulations",zh:"æ­å–œå‘è´¢"},error:{en:"Error",zh:"é”™è¯¯"},docs:{en:"Docs",zh:"æ–‡æ¡£"},connectWallet:{en:"Connect wallet",zh:"è¯·è¿æ¥é’±åŒ…"},contractUnavailable:{en:"Contract unavailable",zh:"åˆçº¦ä¸å¯ç”¨"},receiptMissing:{en:"Payment receipt missing",zh:"æ”¯ä»˜å‡­è¯ç¼ºå¤±"},envelopePending:{en:"Envelope pending on-chain",zh:"çº¢åŒ…åˆ›å»ºç¡®è®¤ä¸­"},claimPending:{en:"Claim pending",zh:"é¢†å–ç¡®è®¤ä¸­"},envelopeNotReady:{en:"Envelope not ready yet",zh:"çº¢åŒ…å°šæœªå‡†å¤‡å¥½"},envelopeExpired:{en:"Envelope expired",zh:"çº¢åŒ…å·²è¿‡æœŸ"},envelopeEmpty:{en:"Envelope is empty",zh:"çº¢åŒ…å·²é¢†å®Œ"},alreadyClaimed:{en:"You already claimed this envelope",zh:"ä½ å·²é¢†å–è¿‡è¯¥çº¢åŒ…"},invalidAmount:{en:"Enter at least 0.1 GAS",zh:"è‡³å°‘ 0.1 GAS"},invalidPackets:{en:"Enter 1-100 packets",zh:"è¯·è¾“å…¥ 1-100 ä¸ªçº¢åŒ…"},invalidPerPacket:{en:"Each packet must be at least 0.01 GAS",zh:"æ¯ä¸ªçº¢åŒ…è‡³å°‘ 0.01 GAS"},invalidExpiry:{en:"Enter a valid expiry in hours",zh:"è¯·è¾“å…¥æœ‰æ•ˆçš„è¿‡æœŸå°æ—¶æ•°"},ready:{en:"Ready",zh:"å¯é¢†å–"},notReady:{en:"Preparing",zh:"å‡†å¤‡ä¸­"},expired:{en:"Expired",zh:"å·²è¿‡æœŸ"},confirm:{en:"Confirm",zh:"ç¡®è®¤"},loadingEnvelopes:{en:"Loading envelopes...",zh:"åŠ è½½çº¢åŒ…ä¸­..."},noEnvelopes:{en:"No envelopes available yet",zh:"æš‚æ— å¯é¢†å–çº¢åŒ…"},bestLuck:{en:"Best Luck",zh:"æ‰‹æ°”æœ€ä½³"},copied:{en:"Link copied!",zh:"é“¾æ¥å·²å¤åˆ¶ï¼"},docSubtitle:{en:"Randomized GAS envelopes for social gifting",zh:"ç¤¾äº¤éšæœº GAS çº¢åŒ…"},docDescription:{en:"Red Envelope lets you send GAS as lucky packets with random distribution. NeoHub RNG ensures fair splits, and recipients claim directly to their wallets until the envelope is empty or expires.",zh:"çº¢åŒ…æ”¯æŒå°† GAS ä»¥éšæœºä»½é¢åˆ†å‘ã€‚NeoHub éšæœºæ•°ä¿è¯å…¬å¹³åˆ†é…ï¼Œæ¥æ”¶è€…å¯ç›´æ¥é¢†å–åˆ°é’±åŒ…ï¼Œç›´åˆ°çº¢åŒ…é¢†å®Œæˆ–è¿‡æœŸã€‚"},step1:{en:"Enter the total GAS and number of packets to create.",zh:"è¾“å…¥è¦åˆ›å»ºçš„æ€» GAS å’Œçº¢åŒ…æ•°é‡ã€‚"},step2:{en:"Click 'Send Red Envelope' to authorize the payment.",zh:"ç‚¹å‡»ã€Œå‘é€çº¢åŒ…ã€æˆæƒæ”¯ä»˜ã€‚"},step3:{en:"Recipients can claim their portion randomly until empty!",zh:"æ¥æ”¶è€…å¯ä»¥éšæœºé¢†å–ä»–ä»¬çš„ä»½é¢ï¼Œç›´åˆ°é¢†å®Œä¸ºæ­¢ï¼"},step4:{en:"Share the envelope ID with friends to let them claim.",zh:"ä¸æœ‹å‹åˆ†äº«çº¢åŒ… ID è®©ä»–ä»¬é¢†å–ã€‚"},feature1Name:{en:"Secure Distribution",zh:"å®‰å…¨åˆ†é…"},feature1Desc:{en:"Random amounts are calculated on-chain/TEE for fairness.",zh:"éšæœºé‡‘é¢åœ¨é“¾ä¸Š/TEE ä¸­è®¡ç®—ä»¥ç¡®ä¿å…¬å¹³ã€‚"},feature2Name:{en:"Instant Claim",zh:"å³æ—¶é¢†å–"},feature2Desc:{en:"GAS is transferred directly to your Neo wallet.",zh:"GAS ç›´æ¥è½¬ç§»åˆ°ä½ çš„ Neo é’±åŒ…ã€‚"},feature3Name:{en:"Shareable Links",zh:"å¯åˆ†äº«é“¾æ¥"},feature3Desc:{en:"Share an envelope ID for friends to claim.",zh:"åˆ†äº«çº¢åŒ… ID è®©å¥½å‹é¢†å–ã€‚"},wrongChain:{en:"Wrong Chain",zh:"é“¾é”™è¯¯"},wrongChainMessage:{en:"This app requires Neo N3. Please switch networks.",zh:"æ­¤åº”ç”¨éœ€è¦ Neo N3 ç½‘ç»œï¼Œè¯·åˆ‡æ¢ç½‘ç»œã€‚"},switchToNeo:{en:"Switch to Neo N3",zh:"åˆ‡æ¢åˆ° Neo N3"},defaultBlessing:{en:"Best Wishes",zh:"å¤§å‰å¤§åˆ©"},open:{en:"Open",zh:"æ‰“å¼€"},fromLabel:{en:"From {name}",zh:"æ¥è‡ª {name}"},luckyPacket:{en:"Lucky Packet",zh:"å¹¸è¿çº¢åŒ…"},connectAndOpen:{en:"Connect Wallet & Open",zh:"è¿æ¥é’±åŒ…å¹¶æ‰“å¼€"},opening:{en:"Opening...",zh:"å¼€å¯ä¸­..."},openNow:{en:"Open Now",zh:"ç«‹å³æ‰“å¼€"},wpTitle:{en:"Wallet Required",zh:"éœ€è¦é’±åŒ…"},wpDescription:{en:"Please connect your wallet to continue.",zh:"è¯·è¿æ¥é’±åŒ…ä»¥ç»§ç»­ã€‚"},wpConnect:{en:"Connect Wallet",zh:"è¿æ¥é’±åŒ…"},wpCancel:{en:"Cancel",zh:"å–æ¶ˆ"},docWhatItIs:{en:"What is it?",zh:"è¿™æ˜¯ä»€ä¹ˆï¼Ÿ"},docHowToUse:{en:"How to use",zh:"å¦‚ä½•ä½¿ç”¨"},docOnChainFeatures:{en:"On-Chain Features",zh:"é“¾ä¸Šç‰¹æ€§"}});function ce(e){return function(e){const t=Number("bigint"==typeof e?e:e??0);return Number.isFinite(t)?t/1e8:0}(e)}function de(e){return function(e,t){if(!Number.isFinite(t)||t<0)return"0";const n=String(e).trim();if(!n||n.startsWith("-"))return"0";const a=n.split(".");if(a.length>2)return"0";const o=a[0]||"0",i=a[1]||"";return!/^\d+$/.test(o)||i&&!/^\d+$/.test(i)?"0":`${o}${(i+"0".repeat(t)).slice(0,t)}`.replace(/^0+/,"")||"0"}(e,8)}function ue(e,t=6,n=4){const a=String(e||"").trim();return a?a.length<=t+n+3?a:`${a.slice(0,t)}...${a.slice(-n)}`:""}function pe(e){if(null==e)return null;if("object"==typeof e&&"type"in e){const t=e;switch(t.type){case"ByteArray":case"Buffer":case"InteropInterface":default:return t.value;case"Integer":return"string"==typeof t.value?t.value.startsWith("0x")?BigInt(t.value).toString():parseInt(t.value,10):Number(t.value);case"Array":case"Struct":return Array.isArray(t.value)?t.value.map(pe):t.value;case"Map":if(Array.isArray(t.value)){const e=new Map;for(const n of t.value)Array.isArray(n)&&2===n.length&&e.set(pe(n[0]),pe(n[1]));return Object.fromEntries(e)}return t.value;case"Boolean":return Boolean(t.value);case"String":case"Hash160":case"Hash256":return String(t.value)}}return Array.isArray(e)?e.map(pe):e}async function ve(e,t,n){const{timeoutMs:a=3e4,pollIntervalMs:o=1500,errorMessage:i="Event not found in time"}=n||{},r=Date.now();for(;Date.now()-r<a;){const n=(await e()).find(t);if(n)return n;await new Promise(e=>setTimeout(e,o))}throw new Error(i)}const fe=(e,t)=>{const n=e.__vccOpts||e;for(const[a,o]of t)n[a]=o;return n},he=fe(o({__name:"AppIcon",props:{name:{},size:{default:20},label:{},decorative:{type:Boolean,default:!0}},setup(e){const t=e,a={home:"ğŸ ",settings:"âš™ï¸",user:"ğŸ‘¤",wallet:"ğŸ’¼",book:"ğŸ“–",trophy:"ğŸ†",star:"â­",heart:"â¤ï¸",check:"âœ“",clock:"ğŸ•",plus:"â•",add:"â•",close:"âœ•",x:"âœ•",menu:"â˜°",activity:"ğŸ“¡",award:"ğŸ…",archive:"ğŸ—„ï¸",rocket:"ğŸš€",cart:"ğŸ›’",ticket:"ğŸŸï¸",bag:"ğŸ‘œ",trending:"ğŸ“ˆ",chart:"ğŸ“Š",calendar:"ğŸ“…",search:"ğŸ”",filter:"ğŸ”½",edit:"âœï¸",delete:"ğŸ—‘ï¸",copy:"ğŸ“‹",share:"ğŸ“¤",download:"â¬‡ï¸",upload:"â¬†ï¸",success:"âœ“",error:"âœ•",warning:"âš ï¸",info:"â„¹ï¸",loading:"â³",neo:"ğŸ’",gas:"â›½",contract:"ğŸ“œ",chain:"â›“ï¸",block:"ğŸ§±",helpful:"ğŸ¤",generous:"ğŸ",verified:"âœ“",contributor:"â­",champion:"ğŸ†",legend:"ğŸ‘‘",game:"ğŸ®",stats:"ğŸ“Š",docs:"ğŸ“„",about:"â„¹ï¸",contact:"âœ‰ï¸"},o={logout:"â†ª",back:"â†",forward:"â†’",arrowUp:"â†‘",arrowDown:"â†“",arrowLeft:"â†",arrowRight:"â†’",refresh:"â†»"},h=i(()=>{if(!t.label)return t.decorative?"true":void 0}),w=i(()=>t.decorative?"presentation":void 0),m=i(()=>t.label?t.label:t.decorative?void 0:`${t.name} icon`),g=i(()=>t.size<=16?"icon-sm":t.size<=20?"icon-md":t.size<=24?"icon-lg":"icon-xl"),y=i(()=>{if(!g.value||"icon-md"===g.value)return{};const e=t.size;return{width:`${e}px`,height:`${e}px`,fontSize:.6*e+"px"}}),b=i(()=>a[t.name]),_=i(()=>o[t.name]);return n(()=>{const e=t.name in a,n=t.name in o;e||n||console.warn(`[AppIcon] Unknown icon name "${t.name}". Using fallback (first letter). Available icons: ${[...Object.keys(a),...Object.keys(o)].sort().join(", ")}`)}),(e,t)=>{const n=p,a=s;return r(),l(a,{class:d(["app-icon",`icon-${e.name}`,g.value]),style:c(y.value),"aria-hidden":h.value,"aria-label":m.value,role:w.value},{default:u(()=>[b.value?(r(),l(n,{key:0,class:"icon-emoji","aria-hidden":!0},{default:u(()=>[v(f(b.value),1)]),_:1})):_.value?(r(),l(n,{key:1,class:"icon-text","aria-hidden":!0},{default:u(()=>[v(f(_.value),1)]),_:1})):(r(),l(n,{key:2,class:"icon-fallback","aria-label":`Icon: ${e.name}`},{default:u(()=>[v(f(e.name.charAt(0).toUpperCase()),1)]),_:1},8,["aria-label"]))]),_:1},8,["class","style","aria-hidden","aria-label","role"])}}}),[["__scopeId","data-v-07cee3d4"]]),we=fe(o({__name:"NavBar",props:{tabs:{},activeTab:{}},emits:["change"],setup(e,{emit:t}){const a=e,o=t,i=e=>{o("change",e)};return n(()=>{if(!a.tabs||0===a.tabs.length)return void console.warn("[NavBar] No tabs provided - navigation will be empty");a.tabs.some((e,t)=>a.tabs.findIndex(t=>t.id===e.id)!==t)&&console.error("[NavBar] Duplicate tab IDs detected - navigation may not work correctly");!a.tabs.some(e=>e.id===a.activeTab)&&a.activeTab&&console.warn(`[NavBar] Active tab "${a.activeTab}" not found in tabs array. Available tabs: ${a.tabs.map(e=>e.id).join(", ")}`)}),(e,t)=>{const n=s,a=p;return r(),l(n,{class:"navbar",role:"navigation","aria-label":"Bottom navigation"},{default:u(()=>[(r(!0),h(m,null,w(e.tabs,t=>(r(),l(n,{key:t.id,class:d(["nav-item",e.activeTab===t.id&&"active"]),role:"menuitem",tabindex:e.activeTab===t.id?0:-1,"aria-label":t.label,"aria-selected":e.activeTab===t.id,onClick:e=>i(t.id),onKeydown:[g(e=>i(t.id),["enter"]),g(y(e=>i(t.id),["prevent"]),["space"])]},{default:u(()=>[b(n,{class:"nav-icon","aria-hidden":"true"},{default:u(()=>[b(he,{name:t.icon,size:22},null,8,["name"])]),_:2},1024),b(a,{class:"nav-label"},{default:u(()=>[v(f(t.label),1)]),_:2},1024)]),_:2},1032,["class","tabindex","aria-label","aria-selected","onClick","onKeydown"]))),128))]),_:1})}}}),[["__scopeId","data-v-80051b5c"]]),me=fe(o({__name:"TopNavBar",props:{title:{},showBack:{type:Boolean}},emits:["back"],setup:e=>(e,t)=>{const n=s,a=p;return r(),l(n,{class:"top-navbar",role:"navigation","aria-label":e.title},{default:u(()=>[b(n,{class:"nav-left"},{default:u(()=>[e.showBack?(r(),l(n,{key:0,class:"nav-btn",role:"button",tabindex:"0","aria-label":"Go back",onClick:t[0]||(t[0]=t=>e.$emit("back")),onKeydown:[t[1]||(t[1]=g(t=>e.$emit("back"),["enter"])),t[2]||(t[2]=g(y(t=>e.$emit("back"),["prevent"]),["space"]))]},{default:u(()=>[b(he,{name:"arrow-left",size:20})]),_:1})):_("",!0)]),_:1}),b(n,{class:"nav-center"},{default:u(()=>[b(a,{class:"nav-title"},{default:u(()=>[v(f(e.title),1)]),_:1})]),_:1}),b(n,{class:"nav-right"},{default:u(()=>[k(e.$slots,"right",{},void 0,!0)]),_:3})]),_:3},8,["aria-label"])}}),[["__scopeId","data-v-eddb2273"]]),ge=fe(o({__name:"AppLayout",props:{title:{default:""},showTopNav:{type:Boolean,default:!1},showBack:{type:Boolean,default:!1},tabs:{default:()=>[]},activeTab:{default:""},allowScroll:{type:Boolean,default:!0},theme:{default:""}},emits:["back","tab-change"],setup(t,{emit:a}){const o=e(!1),c=t,p=a,v=i(()=>c.activeTab||""),f=()=>{p("back");const e=C();e&&e.length>1&&A({delta:1})};return n(()=>{if(o.value="undefined"!=typeof window&&"1"===new URLSearchParams(window.location.search).get("embedded"),c.tabs&&c.tabs.length>0&&c.activeTab){c.tabs.some(e=>e.id===c.activeTab)||console.warn(`[AppLayout] Active tab "${c.activeTab}" not found in tabs array. Available tabs: ${c.tabs.map(e=>e.id).join(", ")}`)}o.value&&console.log("[AppLayout] Running in embedded mode")}),(e,t)=>{const n=s;return r(),l(n,{class:d(["mobile-container",o.value&&"embedded"])},{default:u(()=>[b(n,{class:"aspect-wrapper"},{default:u(()=>[b(n,{class:"app-layout",role:"application","aria-label":"Application layout"},{default:u(()=>[e.showTopNav?(r(),l(me,{key:0,title:e.title??"","show-back":e.showBack,onBack:f},null,8,["title","show-back"])):_("",!0),b(n,{class:d(["app-content",!e.allowScroll&&"no-scroll"]),tabindex:e.allowScroll?-1:0},{default:u(()=>[k(e.$slots,"default",{},void 0,!0)]),_:3},8,["class","tabindex"]),e.tabs&&e.tabs.length>0?(r(),l(we,{key:1,tabs:e.tabs,"active-tab":v.value,onChange:t[0]||(t[0]=t=>e.$emit("tab-change",t))},null,8,["tabs","active-tab"])):_("",!0)]),_:3})]),_:3})]),_:3},8,["class"])}}}),[["__scopeId","data-v-2af4ca89"]]),ye=5e3,be=1e4,_e=100,ke=["https://neomini.app","https://miniapp.neo.org","https://testnet.miniapp.neo.org"];const Ce=new class{constructor(){this.dynamicOrigins=new Set,this.baseOrigins=new Set([...ke])}getSelfOrigin(){if("undefined"==typeof window)return null;try{const e=new URL(window.location.href);if("null"===e.origin)return null;if("http:"===e.protocol||"https:"===e.protocol)return e.origin}catch{}return null}getReferrerOrigin(){if("undefined"==typeof document||!document.referrer)return null;try{return new URL(document.referrer).origin}catch{return null}}getAllowedOrigins(){const e=new Set(this.baseOrigins);this.dynamicOrigins.forEach(t=>e.add(t));const t=this.getReferrerOrigin();t&&this.baseOrigins.has(t)&&e.add(t);const n=this.getSelfOrigin();if(n&&e.add(n),"undefined"!=typeof window){const t=window.location.hostname;"localhost"!==t&&"127.0.0.1"!==t||e.add(window.location.origin)}return e}isValid(e){return!(!e||"null"===e)&&this.getAllowedOrigins().has(e)}getTargetOrigin(){var e;const t=this.getReferrerOrigin();if(t&&this.baseOrigins.has(t))return t;try{if("undefined"!=typeof window&&window.parent!==window&&(null==(e=window.location.ancestorOrigins)?void 0:e.length)>0){const e=window.location.ancestorOrigins[0];if(this.baseOrigins.has(e))return e}}catch{}const n=this.getSelfOrigin();if(n)return n;if("undefined"!=typeof window){const e=window.location.hostname;if("localhost"===e||"127.0.0.1"===e)return window.location.origin}throw new Error("Cannot determine safe target origin - no valid origin found")}getSafeTargetOrigin(){try{const e=this.getTargetOrigin();if(e&&"null"!==e)return e}catch{}if("undefined"!=typeof window&&window.parent!==window){const e=window.__MINIAPP_PARENT_ORIGIN__;if("string"==typeof e&&e&&this.baseOrigins.has(e))return e;throw new Error("Cannot communicate securely with parent - origin unknown. Ensure host app sets __MINIAPP_PARENT_ORIGIN__ or uses a supported browser.")}throw new Error("Cannot determine safe target origin - origin is null or undefined")}addDynamicOrigin(e){e&&"null"!==e&&this.dynamicOrigins.add(e)}};let Ae=null;function Se(e){const t=null==e?void 0:e.layout;if("web"===t||"mobile"===t)return t;if("undefined"!=typeof window){const e=new URLSearchParams(window.location.search).get("layout");if("web"===e||"mobile"===e)return e;if(window.ReactNativeWebView)return"mobile"}return"web"}function Ee(e){if(!e||"object"!=typeof e)return!1;const t="function"==typeof e.invoke&&"function"==typeof e.getConfig,n="object"==typeof e.wallet||"object"==typeof e.payments;return t||n}function Ie(e=ye){return new Promise((t,n)=>{if("undefined"==typeof window)return void n(new Error("SDK not available in SSR"));if(window.MiniAppSDK)return Ee(window.MiniAppSDK)?void t(window.MiniAppSDK):void n(new Error("SDK validation failed"));const a=setTimeout(()=>{if(window.removeEventListener("miniapp-sdk-ready",o),window.parent!==window){const e=function(){const e=Ce.getSafeTargetOrigin();let t=0;const n=(n,...a)=>new Promise((o,i)=>{const r="undefined"!=typeof crypto&&crypto.getRandomValues?Array.from(crypto.getRandomValues(new Uint8Array(4)),e=>e.toString(16).padStart(2,"0")).join(""):Math.random().toString(36).slice(2,10),l=`sdk-${++t}-${Date.now()}-${r}`,s=setTimeout(()=>{window.removeEventListener("message",c),i(new Error("SDK invoke timeout"))},be),c=e=>{var t,n;Ce.isValid(e.origin)&&e.source===window.parent&&"miniapp_sdk_response"===(null==(t=e.data)?void 0:t.type)&&(null==(n=e.data)?void 0:n.id)===l&&(clearTimeout(s),window.removeEventListener("message",c),e.data.ok?o(e.data.result):i(new Error(e.data.error||"SDK call failed")))};window.addEventListener("message",c),window.parent.postMessage({type:"miniapp_sdk_request",id:l,method:n,params:a},e)});return{invoke:n,getConfig:()=>Ae?{...Ae,layout:Se(Ae)}:"undefined"!=typeof window&&window.__MINIAPP_CONFIG__?(Ae=window.__MINIAPP_CONFIG__,{...Ae,layout:Se(Ae??void 0)}):{appId:"",contractAddress:null,chainId:null,chainType:void 0,supportedChains:[],layout:Se(),debug:!1},getAddress:()=>n("getAddress"),wallet:{getAddress:()=>n("wallet.getAddress"),switchChain:e=>n("wallet.switchChain",e),invokeIntent:e=>n("wallet.invokeIntent",e),signMessage:e=>n("wallet.signMessage",e)},payments:{payGAS:(e,t,a)=>n("payments.payGAS",e,t,a),payGASAndInvoke:(e,t,a)=>n("payments.payGASAndInvoke",e,t,a)},governance:{vote:(e,t,a,o)=>n("governance.vote",e,t,a,o),voteAndInvoke:(e,t,a,o)=>n("governance.voteAndInvoke",e,t,a,o),getCandidates:()=>n("governance.getCandidates")},rng:{requestRandom:e=>n("rng.requestRandom",e)},datafeed:{getPrice:e=>n("datafeed.getPrice",e),getPrices:()=>n("datafeed.getPrices"),getNetworkStats:()=>n("datafeed.getNetworkStats"),getRecentTransactions:e=>n("datafeed.getRecentTransactions",e)},stats:{getMyUsage:(e,t)=>n("stats.getMyUsage",e,t)},events:{list:e=>n("events.list",e),emit:(e,t)=>n("events.emit",e,t)},transactions:{list:e=>n("transactions.list",e)},automation:{register:(e,t,a,o)=>n("automation.register",e,t,a,o),unregister:e=>n("automation.unregister",e),status:e=>n("automation.status",e),list:()=>n("automation.list"),update:(e,t,a)=>n("automation.update",e,t,a),enable:e=>n("automation.enable",e),disable:e=>n("automation.disable",e),logs:(e,t)=>n("automation.logs",e,t)},share:{openModal:e=>n("share.openModal",e),getUrl:e=>n("share.getUrl",e),copy:e=>n("share.copy",e)}}}();window.MiniAppSDK=e,e.invoke("getConfig").then(e=>{e&&"object"==typeof e&&(Ae=e)}).catch(()=>{}),t(e)}else n(new Error("SDK timeout"))},e),o=()=>{if(clearTimeout(a),window.removeEventListener("miniapp-sdk-ready",o),window.MiniAppSDK){if(!Ee(window.MiniAppSDK))return void n(new Error("SDK validation failed"));t(window.MiniAppSDK)}else n(new Error("SDK not found"))};window.addEventListener("miniapp-sdk-ready",o)})}function ze(){return"undefined"==typeof window?null:window.MiniAppSDK??null}const Te=new Set;let Ne={connected:!1,address:null,balance:null},xe=null,Me=!1;function Pe(t){const n=e(!1),a=e(null);return{isLoading:n,error:a,execute:async(...e)=>{n.value=!0,a.value=null;try{return await t(...e)}catch(o){throw a.value=o,o}finally{n.value=!1}}}}"undefined"!=typeof window&&("undefined"!=typeof window&&(Me&&xe||(xe=e=>{if(e.source!==window.parent)return;if(!Ce.isValid(e.origin))return;const t=e.data;t&&"object"==typeof t&&("miniapp_config"!==t.type?"miniapp_wallet_state_change"===t.type&&(Ne={connected:Boolean(t.connected),address:t.address||null,chainId:t.chainId??null,chainType:t.chainType??null,balance:t.balance||t.multiChainBalance||null,balances:t.balances||void 0},Te.forEach(e=>{try{e(Ne)}catch(t){console.error("[MiniApp SDK] Wallet state listener error:",t)}})):t.config&&"object"==typeof t.config&&(Ae=t.config))},window.addEventListener("message",xe),Me=!0)),setTimeout(function(){if("undefined"==typeof window)return;const e=Ce.getSafeTargetOrigin();try{window.parent.postMessage({type:"miniapp_ready"},e)}catch{}},_e));class $e extends Error{constructor(e,t){super(e),this.statusCode=t,this.name="HttpError"}}const Oe={maxRetries:3,baseDelayMs:1e3,maxDelayMs:1e4};function De(e,t){return Math.min(t.baseDelayMs*Math.pow(2,e),t.maxDelayMs)*(.75+.5*Math.random())}function Re(e,t){if(t&&t>=500)return!0;if(429===t)return!0;if(e instanceof Error){const t=e.message.toLowerCase();return t.includes("network")||t.includes("timeout")||t.includes("abort")}return!1}async function Le(e,n){var a;if("undefined"!=typeof uni&&"function"==typeof t)return new Promise((a,o)=>{const i=(e=>{if(e){if(e instanceof Headers){const t={};return e.forEach((e,n)=>{t[n]=e}),t}return Array.isArray(e)?Object.fromEntries(e):e}})(n.headers),r=String((null==i?void 0:i["Content-Type"])||(null==i?void 0:i["content-type"])||"");let l=n.body;if("string"==typeof l&&r.includes("application/json"))try{l=JSON.parse(l)}catch{}t({url:e,method:n.method||"GET",data:l,header:i,success:e=>{var t,n;if((e.statusCode??0)>=200&&(e.statusCode??0)<300)a(e.data);else{const a=(null==(n=null==(t=e.data)?void 0:t.error)?void 0:n.message)||`Request failed: ${e.statusCode}`;o(new $e(a,e.statusCode??0))}},fail:e=>{o(new Error(e.errMsg||"Network error"))}})});const o="undefined"!=typeof window&&e.startsWith(window.location.origin),i=await fetch(e,{credentials:o?"include":"same-origin",...n});if(!i.ok){const t=await i.json().catch(()=>({}));throw new $e((null==(a=t.error)?void 0:a.message)||`Request failed: ${e}`,i.status)}return i.json()}async function Be(e){return async function(e,t={}){var n,a;const o=e.startsWith("http")?e:`https://api.neo-service-layer.io${e}`,i={...Oe,...t.retryConfig};let r=null;for(let s=0;s<=i.maxRetries;s++){if(null==(n=t.signal)?void 0:n.aborted)throw new Error("Request cancelled");try{return await Le(o,t)}catch(l){r=l instanceof Error?l:new Error(String(l));const e=l instanceof $e?l.statusCode:void 0;if(null==(a=t.signal)?void 0:a.aborted)throw r;if(s>=i.maxRetries)break;if(!Re(l,e))break;const n=De(s,i);await new Promise(e=>setTimeout(e,n))}}throw r||new Error("Request failed")}(e,{method:"GET"})}let Ge=null;function Ue(){const t=e(null),o=e({}),i=e(null),r=e(null),l=e(null),s=e([]),c=e(!1),d=e(!1),u=e(null),p=e(!1),v=e(null),f=e=>{e.connected&&e.address?(t.value=e.address,c.value=!0):(t.value=null,c.value=!1),i.value=e.chainId??null,r.value=e.chainType??null,o.value=(e=>{if(!e)return{};if(e.balances&&Object.keys(e.balances).length>0)return{...e.balances};if(e.balance){const t={};return t[e.balance.nativeSymbol||("neo-n3"===e.chainType?"GAS":"NATIVE")]=e.balance.native||"0",(e.balance.governance||e.balance.governanceSymbol)&&(t[e.balance.governanceSymbol||("neo-n3"===e.chainType?"NEO":"GOV")]=e.balance.governance||"0"),t}return{}})(e)},h=e=>{e&&(l.value=e.chainId??null,s.value=Array.isArray(e.supportedChains)?e.supportedChains:[])},w=async()=>{var e;const t=await Ie(),n=null==(e=t.getConfig)?void 0:e.call(t);return h(n),n},m=async e=>{const t=await Ie();if(!t.wallet.switchChain)throw new Error("switchChain not supported by SDK");await t.wallet.switchChain(e),i.value=e};let g=null;return n(()=>{var e;f(Ne),e=e=>{f(e)},Te.add(e),e(Ne),g=()=>Te.delete(e);const n=ze();(null==n?void 0:n.getConfig)&&h(n.getConfig()),n&&!c.value&&(e=>e?(Ge||(Ge=e.wallet.getAddress().then(e=>e||null).catch(e=>{const t=e instanceof Error?e.message:String(e);return console.debug("[MiniApp SDK] Fallback wallet connection failed:",t),null}).finally(()=>{Ge=null})),Ge):Promise.resolve(null))(n).then(e=>{var a;if(!c.value&&e){t.value=e,c.value=!0;const o=null==(a=n.getConfig)?void 0:a.call(n);i.value=(null==o?void 0:o.chainId)??null,r.value=(null==o?void 0:o.chainType)??null,h(o)}}),Ie().then(e=>{var t;return h(null==(t=e.getConfig)?void 0:t.call(e))}).catch(()=>{})}),a(()=>{g&&g()}),{address:t,chainId:i,chainType:r,appChainId:l,supportedChains:s,balances:o,isConnected:c,isLoading:d,error:u,showConnectionPrompt:p,connectionPromptMessage:v,connect:async()=>{var e;d.value=!0,u.value=null;try{const n=await Ie(),a=await n.wallet.getAddress();if(!a)throw new Error("wallet returned empty address");t.value=a,c.value=!0;const o=null==(e=n.getConfig)?void 0:e.call(n);i.value=(null==o?void 0:o.chainId)??null,r.value=(null==o?void 0:o.chainType)??null,h(o)}catch(n){u.value=n}finally{d.value=!1}},invokeIntent:async e=>{var t;const n=ze();if(!(null==(t=null==n?void 0:n.wallet)?void 0:t.invokeIntent))throw new Error("invokeIntent not available");return n.wallet.invokeIntent(e)},invokeContract:async e=>{var t;const n=await Ie(),a=null==(t=n.getConfig)?void 0:t.call(n),o=e.contractAddress||e.scriptHash||e.contractHash,i=e.method||e.operation;if(!o||!i)throw new Error("contract address and method required");return n.invoke("invokeFunction",{contract:o,method:i,args:e.args,chainId:null==a?void 0:a.chainId,chainType:null==a?void 0:a.chainType})},invokeRead:async e=>{var t;const n=await Ie(),a=null==(t=n.getConfig)?void 0:t.call(n),o=e.contractAddress||e.scriptHash||e.contractHash||(null==a?void 0:a.contractAddress),i=e.method||e.operation;if(!o)throw new Error("contract address not configured");if(!i)throw new Error("method required");return n.invoke("invokeRead",{contract:o,method:i,args:e.args||[],chainId:e.chainId||(null==a?void 0:a.chainId),chainType:e.chainType||(null==a?void 0:a.chainType)})},getContractAddress:async()=>{var e,t,n,a,o;const i=await Ie(),r=null==(e=i.getConfig)?void 0:e.call(i);if(null==r?void 0:r.contractAddress)return r.contractAddress;if((null==r?void 0:r.chainId)&&(null==(n=null==(t=null==r?void 0:r.chainContracts)?void 0:t[r.chainId])?void 0:n.address))return r.chainContracts[r.chainId].address||null;if(i.invoke)try{const e=await i.invoke("getConfig");if(null==e?void 0:e.contractAddress)return e.contractAddress;if((null==e?void 0:e.chainId)&&(null==(o=null==(a=null==e?void 0:e.chainContracts)?void 0:a[e.chainId])?void 0:o.address))return e.chainContracts[e.chainId].address||null}catch{}return null},getAppConfig:w,getAddress:async()=>(await Ie()).wallet.getAddress(),signMessage:async e=>{var t;const n=await Ie();if(!(null==(t=n.wallet)?void 0:t.signMessage))throw new Error("signMessage not available");return n.wallet.signMessage(e)},switchChain:m,switchToAppChain:async e=>{const t=await w(),n=(null==t?void 0:t.chainId)||(Array.isArray(null==t?void 0:t.supportedChains)&&t.supportedChains.length>0?t.supportedChains[0]:null)||e||null;if(!n)throw new Error("app chain not configured");await m(n)},getBalance:async e=>{var t;d.value=!0,u.value=null;try{const n=await Ie(),a=null==(t=n.getConfig)?void 0:t.call(n),r=(null==a?void 0:a.chainId)||i.value,l=r?`?chain_id=${encodeURIComponent(r)}`:"",s=await Be(`/wallet-balance${l}`),c=(null==s?void 0:s.balances)??{};return o.value=c,e?c[e]||"0":c}catch(n){throw u.value=n,n}finally{d.value=!1}},getTransactions:async(e=20)=>{var t;d.value=!0,u.value=null;try{const n=Number.isNaN(e)||e<1?20:Math.min(e,100),a=await Ie(),o=null==(t=a.getConfig)?void 0:t.call(a),r=(null==o?void 0:o.chainId)||i.value,l=new URLSearchParams({limit:String(n)});r&&l.set("chain_id",r);const s=await Be(`/wallet-transactions?${l.toString()}`);return(null==s?void 0:s.transactions)??[]}catch(n){throw u.value=n,n}finally{d.value=!1}},invoke:async(e,t)=>(await Ie()).invoke(e,t),requireConnection:(e={})=>{const{showPrompt:t=!0,errorMessage:n}=e;return!!c.value||(t&&(v.value=n||null,p.value=!0),!1)},closeConnectionPrompt:()=>{p.value=!1,v.value=null},clearError:()=>{u.value=null}}}e("en");const He=fe(o({__name:"ChainWarning",props:{title:{default:"Wrong Network"},message:{default:"Switch to Neo N3 Mainnet to continue."},buttonText:{default:"Switch Network"},show:{type:Boolean,default:void 0}},emits:["switch","switch-complete","switch-error"],setup(t,{emit:n}){const a=t,o=n,{showWarning:c,switchToAppChain:d}=function(){const{switchToAppChain:e}=Ue();return{showWarning:i(()=>!1),switchToAppChain:async()=>{try{await e()}catch(t){throw console.error("[useChainValidation] Failed to switch chain:",t),t}}}}(),h=e(!1),w=i(()=>void 0!==a.show?a.show:c.value),m=async()=>{if(!h.value){h.value=!0,o("switch");try{await d(),o("switch-complete")}catch(e){const t=e instanceof Error?e:new Error(String(e));o("switch-error",t),console.error("[ChainWarning] Failed to switch chain:",t)}finally{h.value=!1}}};return(e,t)=>{const n=p,a=s;return w.value?(r(),l(a,{key:0,class:"chain-warning px-4 mb-4"},{default:u(()=>[b(S(Ve),{variant:"danger"},{default:u(()=>[b(a,{class:"flex flex-col items-center gap-2 py-1"},{default:u(()=>[b(n,{class:"text-center font-bold text-red-400"},{default:u(()=>[v(f(e.title),1)]),_:1}),e.message?(r(),l(n,{key:0,class:"text-xs text-center opacity-80 text-white"},{default:u(()=>[v(f(e.message),1)]),_:1})):_("",!0),b(S(We),{size:"sm",variant:"secondary",class:"mt-2",loading:h.value,onClick:m},{default:u(()=>[v(f(e.buttonText),1)]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})):_("",!0)}}}),[["__scopeId","data-v-3dc811c7"]]),Fe=fe(o({__name:"DesktopLayout",props:{title:{default:""},tabs:{default:()=>[]},activeTab:{default:""},allowScroll:{type:Boolean,default:!0},theme:{default:""}},emits:["tab-change"],setup(e,{emit:t}){const n=e,a=t,o=i(()=>n.theme?`theme-${n.theme}`:""),c=E(),C=i(()=>Boolean(c["desktop-sidebar"])),A=e=>{a("tab-change",e)};return(()=>{if(!n.tabs||0===n.tabs.length)return console.warn("[DesktopLayout] No tabs provided - navigation will be hidden"),!1;!n.tabs.some((e,t)=>n.tabs.findIndex(t=>t.id===e.id)!==t)||console.error("[DesktopLayout] Duplicate tab IDs detected - navigation may not work correctly")})(),(e,t)=>{const n=p,a=s;return r(),l(a,{class:d(["desktop-container",o.value])},{default:u(()=>[b(a,{class:"sidebar",role:"navigation","aria-label":"Main navigation"},{default:u(()=>[b(a,{class:"sidebar-header"},{default:u(()=>[b(n,{class:"brand-name"},{default:u(()=>[v("NeoHub")]),_:1}),b(n,{class:"brand-tagline"},{default:u(()=>[v("Miniapps")]),_:1})]),_:1}),b(a,{class:"sidebar-nav",role:"menubar","aria-label":"Navigation menu"},{default:u(()=>[(r(!0),h(m,null,w(e.tabs,t=>(r(),l(a,{key:t.id,class:d(["nav-item",e.activeTab===t.id&&"active"]),role:"menuitem",tabindex:e.activeTab===t.id?0:-1,"aria-label":t.label,"aria-current":e.activeTab===t.id?"page":void 0,onClick:e=>A(t.id),onKeydown:[g(e=>A(t.id),["enter"]),g(y(e=>A(t.id),["prevent"]),["space"])]},{default:u(()=>[b(a,{class:"nav-icon-wrapper"},{default:u(()=>[b(he,{name:t.icon,size:20},null,8,["name"])]),_:2},1024),b(n,{class:"nav-label"},{default:u(()=>[v(f(t.label),1)]),_:2},1024),e.activeTab===t.id?(r(),l(a,{key:0,class:"nav-indicator","aria-hidden":"true"})):_("",!0)]),_:2},1032,["class","tabindex","aria-label","aria-current","onClick","onKeydown"]))),128))]),_:1}),C.value?(r(),l(a,{key:0,class:"sidebar-panel",role:"complementary","aria-label":"Sidebar details"},{default:u(()=>[k(e.$slots,"desktop-sidebar",{},void 0,!0)]),_:3})):_("",!0),b(a,{class:"sidebar-footer"},{default:u(()=>[b(a,{class:"footer-status",role:"status","aria-live":"polite"},{default:u(()=>[b(a,{class:"status-dot online","aria-hidden":"true"}),b(n,{class:"status-text"},{default:u(()=>[v("Connected")]),_:1})]),_:1})]),_:1})]),_:3}),b(a,{class:"main-content-wrapper",role:"main"},{default:u(()=>[b(a,{class:"top-bar"},{default:u(()=>[b(a,{class:"top-bar-left"},{default:u(()=>[e.title?(r(),l(n,{key:0,class:"page-title"},{default:u(()=>[v(f(e.title),1)]),_:1})):_("",!0)]),_:1}),b(a,{class:"top-bar-right"},{default:u(()=>[k(e.$slots,"top-bar-actions",{},void 0,!0)]),_:3})]),_:3}),b(a,{class:d(["content-area",!e.allowScroll&&"no-scroll"]),tabindex:e.allowScroll?-1:0},{default:u(()=>[k(e.$slots,"default",{},void 0,!0)]),_:3},8,["class","tabindex"])]),_:3})]),_:3},8,["class"])}}}),[["__scopeId","data-v-a78cf158"]]),Ke=o({__name:"ResponsiveLayout",props:{title:{default:""},tabs:{default:()=>[]},navItems:{default:()=>[]},activeTab:{default:""},allowScroll:{type:Boolean,default:!0},theme:{default:""},showTopNav:{type:Boolean,default:!1},showSidebar:{type:Boolean,default:!1},layout:{default:"default"},showBack:{type:Boolean,default:!1},desktopBreakpoint:{default:1024}},emits:["back","tab-change","navigate"],setup(t,{emit:o}){const s=t,c=o,d=e(!1),p=e(!1),v=()=>{if(!p.value)return;const e=window.innerWidth;d.value=e>=s.desktopBreakpoint};let f;const h=()=>{clearTimeout(f),f=window.setTimeout(()=>{v()},150)},w=i(()=>s.tabs&&s.tabs.length>0?s.tabs:s.navItems&&s.navItems.length>0?s.navItems.map(e=>({id:e.id??e.key??"",label:e.label,icon:e.icon})).filter(e=>Boolean(e.id)):[]),m=i(()=>d.value?Fe:ge),g=e=>{c("tab-change",e),c("navigate",e)};return I(d,(e,t)=>{t!==e&&p.value&&console.log(`[ResponsiveLayout] Layout mode changed: ${e?"desktop":"mobile"} (${window.innerWidth}px)`)}),n(()=>{p.value="undefined"!=typeof window,p.value&&(v(),window.addEventListener("resize",h))}),a(()=>{p.value&&(window.removeEventListener("resize",h),clearTimeout(f))}),(e,t)=>(r(),l(z(m.value),{title:e.title,tabs:w.value,"active-tab":e.activeTab,"allow-scroll":e.allowScroll,theme:e.theme,"show-top-nav":e.showTopNav,"show-back":e.showBack,onTabChange:g,onBack:t[0]||(t[0]=t=>e.$emit("back"))},{"top-bar-actions":u(()=>[k(e.$slots,"top-bar-actions")]),"desktop-sidebar":u(()=>[k(e.$slots,"desktop-sidebar")]),default:u(()=>[k(e.$slots,"default")]),_:3},40,["title","tabs","active-tab","allow-scroll","theme","show-top-nav","show-back"]))}}),Ve=fe(o({__name:"NeoCard",props:{title:{default:void 0},variant:{default:"default"},hoverable:{type:Boolean,default:!1},flat:{type:Boolean,default:!1}},emits:["click"],setup:e=>(e,t)=>{const n=p,a=s;return r(),l(a,{class:d(["neo-card",`neo-card--${e.variant}`,{"neo-card--hoverable":e.hoverable,"neo-card--flat":e.flat}]),role:e.hoverable?"button":void 0,tabindex:e.hoverable?0:void 0,onClick:t[0]||(t[0]=t=>e.hoverable&&e.$emit("click",t)),onKeydown:[t[1]||(t[1]=g(t=>e.hoverable&&e.$emit("click",t),["enter"])),t[2]||(t[2]=g(y(t=>e.hoverable&&e.$emit("click",t),["prevent"]),["space"]))]},{default:u(()=>[e.title||e.$slots.header?(r(),l(a,{key:0,class:"neo-card__header"},{default:u(()=>[e.title?(r(),l(n,{key:0,class:"neo-card__title"},{default:u(()=>[v(f(e.title),1)]),_:1})):_("",!0),k(e.$slots,"header",{},void 0,!0)]),_:3})):_("",!0),b(a,{class:"neo-card__body"},{default:u(()=>[k(e.$slots,"default",{},void 0,!0)]),_:3}),e.$slots.footer?(r(),l(a,{key:1,class:"neo-card__footer"},{default:u(()=>[k(e.$slots,"footer",{},void 0,!0)]),_:3})):_("",!0)]),_:3},8,["class","role","tabindex"])}}),[["__scopeId","data-v-3f370003"]]),We=fe(o({__name:"NeoButton",props:{variant:{default:"primary"},size:{default:"md"},block:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},ariaLabel:{default:void 0}},emits:["click"],setup:e=>(e,t)=>{const n=s,a=T;return r(),l(a,{class:d(["neo-btn",`neo-btn--${e.variant}`,`neo-btn--${e.size}`,{"neo-btn--block":e.block,"neo-btn--loading":e.loading}]),disabled:e.disabled||e.loading,"aria-busy":e.loading,"aria-disabled":e.disabled||e.loading,"aria-label":e.ariaLabel,onClick:t[0]||(t[0]=t=>e.$emit("click",t))},{default:u(()=>[e.loading?(r(),l(n,{key:0,class:"neo-btn__spinner"})):k(e.$slots,"default",{key:1},void 0,!0)]),_:3},8,["class","disabled","aria-busy","aria-disabled","aria-label"])}}),[["__scopeId","data-v-4b6100e3"]]),je=fe(o({__name:"NeoInput",props:{modelValue:{},type:{},label:{},placeholder:{},suffix:{},suffixIcon:{},hint:{},error:{},disabled:{type:Boolean}},emits:["update:modelValue","focus","blur"],setup(e){let t=0;const n="neo-input-"+ ++t;return(e,t)=>{const a=p,o=N,i=x,c=s;return r(),l(c,{class:d(["neo-input",{"neo-input--error":e.error,"neo-input--disabled":e.disabled}])},{default:u(()=>[e.label?(r(),l(a,{key:0,class:"neo-input__label"},{default:u(()=>[v(f(e.label),1)]),_:1})):_("",!0),b(c,{class:"neo-input__wrapper"},{default:u(()=>["textarea"===e.type?(r(),l(o,{key:0,value:e.modelValue,placeholder:e.placeholder,disabled:e.disabled,"aria-describedby":e.error?`${n}-error`:e.hint?`${n}-hint`:void 0,"aria-invalid":!!e.error,class:"neo-input__field neo-input__textarea",onInput:t[0]||(t[0]=t=>e.$emit("update:modelValue",t.target.value)),onFocus:t[1]||(t[1]=t=>e.$emit("focus",t)),onBlur:t[2]||(t[2]=t=>e.$emit("blur",t))},null,8,["value","placeholder","disabled","aria-describedby","aria-invalid"])):(r(),l(i,{key:1,value:e.modelValue,type:e.type,placeholder:e.placeholder,disabled:e.disabled,"aria-describedby":e.error?`${n}-error`:e.hint?`${n}-hint`:void 0,"aria-invalid":!!e.error,class:"neo-input__field",onInput:t[3]||(t[3]=t=>e.$emit("update:modelValue",t.target.value)),onFocus:t[4]||(t[4]=t=>e.$emit("focus",t)),onBlur:t[5]||(t[5]=t=>e.$emit("blur",t))},null,8,["value","type","placeholder","disabled","aria-describedby","aria-invalid"])),e.suffixIcon||e.suffix?(r(),l(c,{key:2,class:"neo-input__suffix"},{default:u(()=>[e.suffixIcon?(r(),l(S(he),{key:0,name:e.suffixIcon,size:18},null,8,["name"])):_("",!0),e.suffix?(r(),l(a,{key:1},{default:u(()=>[v(f(e.suffix),1)]),_:1})):_("",!0)]),_:1})):_("",!0)]),_:1}),e.error?(r(),l(a,{key:1,id:`${n}-error`,class:"neo-input__error",role:"alert"},{default:u(()=>[v(f(e.error),1)]),_:1},8,["id"])):e.hint?(r(),l(a,{key:2,id:`${n}-hint`,class:"neo-input__hint"},{default:u(()=>[v(f(e.hint),1)]),_:1},8,["id"])):_("",!0)]),_:1},8,["class"])}}}),[["__scopeId","data-v-fda1146f"]]),qe=fe(o({__name:"ScrollReveal",props:{animation:{default:"fade-up"},delay:{default:0},duration:{default:800},threshold:{default:.1},offset:{default:-50},reversible:{type:Boolean,default:!1}},setup(t,{expose:o}){const i=t,p=e(!1),v=P();let f=null;return n(()=>{setTimeout(()=>{v&&(setTimeout(()=>{p.value||(p.value=!0)},500),f=M(v),f.relativeToViewport({bottom:i.offset}).observe(".scroll-reveal",e=>{e.intersectionRatio>0?(p.value=!0,i.reversible||f.disconnect()):i.reversible&&(p.value=!1)}))},100)}),o({isVisible:p}),a(()=>{f&&f.disconnect()}),(e,t)=>{const n=s;return r(),l(n,{class:d(["scroll-reveal",[e.animation,{"is-visible":p.value}]]),style:c({transitionDelay:e.delay+"ms",transitionDuration:e.duration+"ms"})},{default:u(()=>[k(e.$slots,"default",{},void 0,!0)]),_:3},8,["class","style"])}}}),[["__scopeId","data-v-0c69cb0a"]]),Je=fe(o({__name:"NeoDoc",props:{title:{},subtitle:{},description:{},steps:{},features:{}},setup(e){const{t:t}=le();return(e,n)=>{const a=s,o=p;return r(),l(a,{class:"neo-doc"},{default:u(()=>[b(a,{class:"doc-header"},{default:u(()=>[b(qe,{animation:"fade-down",duration:1e3},{default:u(()=>[b(a,{class:"title-row"},{default:u(()=>[b(a,{class:"doc-badge"},{default:u(()=>[v(f(S(t)("docBadge")),1)]),_:1})]),_:1}),b(o,{class:"doc-title"},{default:u(()=>[v(f(e.title),1)]),_:1}),b(o,{class:"doc-subtitle"},{default:u(()=>[v(f(e.subtitle),1)]),_:1})]),_:1})]),_:1}),b(a,{class:"doc-content"},{default:u(()=>[b(a,{class:"doc-section"},{default:u(()=>[b(qe,{animation:"fade-up",delay:200},{default:u(()=>[b(o,{class:"section-label"},{default:u(()=>[v(f(S(t)("docWhatItIs")),1)]),_:1}),b(o,{class:"section-text"},{default:u(()=>[v(f(e.description),1)]),_:1})]),_:1})]),_:1}),b(a,{class:"doc-section"},{default:u(()=>[b(qe,{animation:"fade-up",delay:300},{default:u(()=>[b(o,{class:"section-label"},{default:u(()=>[v(f(S(t)("docHowToUse")),1)]),_:1})]),_:1}),b(a,{class:"steps-list"},{default:u(()=>[(r(!0),h(m,null,w(e.steps,(e,t)=>(r(),l(qe,{key:t,delay:400+100*t,animation:"slide-left"},{default:u(()=>[b(a,{class:"step-item"},{default:u(()=>[b(a,{class:"step-number"},{default:u(()=>[v(f(t+1),1)]),_:2},1024),b(o,{class:"step-text"},{default:u(()=>[v(f(e),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["delay"]))),128))]),_:1})]),_:1}),b(a,{class:"doc-section"},{default:u(()=>[b(qe,{animation:"fade-up",delay:400},{default:u(()=>[b(o,{class:"section-label"},{default:u(()=>[v(f(S(t)("docOnChainFeatures")),1)]),_:1})]),_:1}),b(a,{class:"features-grid"},{default:u(()=>[(r(!0),h(m,null,w(e.features,(e,t)=>(r(),l(qe,{key:e.name,delay:500+100*t,animation:"scale-in",reversible:""},{default:u(()=>[b(a,{class:"feature-card"},{default:u(()=>[b(o,{class:"feature-name"},{default:u(()=>[v(f(e.name),1)]),_:2},1024),b(o,{class:"feature-desc"},{default:u(()=>[v(f(e.desc),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["delay"]))),128))]),_:1})]),_:1})]),_:1}),b(a,{class:"doc-footer"},{default:u(()=>[b(qe,{animation:"fade-up",delay:800},{default:u(()=>[b(o,{class:"footer-text"},{default:u(()=>[v(f(S(t)("docFooter")),1)]),_:1})]),_:1})]),_:1})]),_:1})}}}),[["__scopeId","data-v-445ca862"]]),Xe=fe(o({__name:"Fireworks",props:{active:{type:Boolean,default:!1},duration:{default:3e3}},emits:["complete"],setup(e,{emit:t}){const n=e,o=t;let i=null;const p=e=>{const t=["#ff6b6b","#ffd93d","#6bcb77","#4d96ff","#ff6bd6","#a855f7"];return{left:`${10+80*Math.random()}%`,top:`${10+60*Math.random()}%`,animationDelay:`${.5*Math.random()}s`,"--firework-color":t[(e-1)%t.length]}};return I(()=>n.active,e=>{e&&(i=setTimeout(()=>{o("complete")},n.duration))}),a(()=>{i&&clearTimeout(i)}),(e,t)=>{const n=s;return e.active?(r(),l(n,{key:0,class:"fireworks-container"},{default:u(()=>[(r(),h(m,null,w(12,e=>b(n,{key:e,class:d(`firework firework-${e}`),style:c(p(e))},{default:u(()=>[(r(),h(m,null,w(8,e=>b(n,{key:e,class:d(`spark spark-${e}`)},null,8,["class"])),64))]),_:2},1032,["class","style"])),64))]),_:1})):_("",!0)}}}),[["__scopeId","data-v-4da74fd1"]]),Ye=new Set(["neo-n3","neo-n3-mainnet","neo-n3-testnet"]);function Qe(e,t,n,a){const o=function(e){if("string"==typeof e)return e;const t=null==e?void 0:e.value;return"string"==typeof t?t:""}(e);if(Ye.has(o))return!0;let i="";if(!i&&"function"==typeof t){const e=t("wrongChainMessage");i=e&&"wrongChainMessage"!==e?e:t("wrongChain")}i||(i="Wrong network");const r=globalThis.uni;return(null==r?void 0:r.showToast)&&r.showToast({title:i,icon:"none"}),!1}function Ze(t){const{payGAS:n}=function(e){const{isLoading:t,error:n,execute:a}=Pe(async(t,n)=>{const a=parseFloat(t);if(Number.isNaN(a)||a<=0)throw new Error("Invalid amount: must be a positive number");const o=await Ie();return o.payments.payGASAndInvoke?await o.payments.payGASAndInvoke(e,t,n):await o.payments.payGAS(e,t,n)});return{isLoading:t,error:n,payGAS:a}}(),{address:a,connect:o,invokeContract:i}=Ue(),{list:r}=function(){const e=Pe(async(e={})=>{var t;const n=await Ie();if(!(null==(t=n.events)?void 0:t.list))throw new Error("events.list not available");return await n.events.list(e)}),t=Pe(async(e,t)=>{var n;const a=String(e||"").trim();if(!a)throw new Error("eventName required");const o=await Ie();if(!(null==(n=o.events)?void 0:n.emit))throw new Error("events.emit not available");return await o.events.emit(a,t||{})});return{isLoading:e.isLoading,error:e.error,list:e.execute,isEmitting:t.isLoading,emitError:t.error,emit:t.execute}}(),l=e(!1),s=e(null);return{isProcessing:l,isLoading:l,error:s,processPayment:async(e,c)=>{try{if(a.value||await o(),!a.value)throw new Error("Wallet not connected");l.value=!0,s.value=null;const d=(await n(e,c)).receipt_id||"";return{receiptId:d,invoke:async(e,t,n)=>{let a,o,r;if("string"==typeof t&&Array.isArray(n))a=e,o=t,r=n;else{if(!Array.isArray(t)||"string"!=typeof n)throw new Error("Invalid invoke signature");o=e,r=t,a=n}const l=await i({scriptHash:a,operation:o,args:r});return{txid:l.txid||l.txHash||"",receiptId:d}},waitForEvent:async(e,n,a=3e4)=>ve(async()=>(await r({app_id:t,event_name:n,limit:20})).events||[],t=>t.tx_hash===e,{timeoutMs:a,errorMessage:`Event "${n}" not found for transaction ${e}`})}}catch(d){throw s.value=d instanceof Error?d:new Error(String(d)),d}finally{l.value=!1}}}}const et="miniapp-redenvelope",tt=1000000n;function nt(){const{t:t}=se(),{address:n,connect:a,chainType:o,getContractAddress:r}=ae(),{processPayment:l,isProcessing:s}=Ze(et),c=e(""),d=e(""),u=e(""),p=e(""),v=e("24"),f=e(null),h=i(()=>t("defaultBlessing")),w=(e,t)=>{const n=new Uint8Array(e.length+4);n.set(e),n[e.length]=255&t,n[e.length+1]=t>>8&255,n[e.length+2]=t>>16&255,n[e.length+3]=t>>24&255;let a=0n;for(let o=0;o<n.length;o++)a=(31n*a+BigInt(n[o]))%2n**256n;return a<0n?-a:a};return{name:c,description:d,amount:u,count:p,expiryHours:v,status:f,isLoading:s,defaultBlessing:h,ensureContractAddress:async()=>{if(!Qe(o,t))throw new Error(t("wrongChain"));const e=await r();if(!e)throw new Error(t("contractUnavailable"));return e},previewDistribution:(e,t)=>{if(t<=0||t>100)return[];const n=BigInt(de(e));if(n<BigInt(t)*tt)return[];const a=((e,t)=>{const n=`preview:${e}:${t}:${Date.now()}`,a=(new TextEncoder).encode(n),o=new Uint8Array(32);for(let i=0;i<a.length;i++)o[i%32]^=a[i];return o})(e.toString(),t.toString()),o=[];let i=n;for(let r=0;r<t-1;r++){const e=i-(BigInt(t-r)-1n)*tt,n=w(a,r),l=e-tt;let s=tt;l>0n&&(s=tt+n%l),o.push(s),i-=s}return o.push(i),o},calculateBestLuckBonus:e=>5n*e/100n,MIN_AMOUNT:10000000n,MAX_PACKETS:100,MIN_PER_PACKET:tt,BEST_LUCK_BONUS_RATE:5n,address:n,connect:a,processPayment:l,APP_ID:et}}const at="miniapp-redenvelope";function ot(){const{t:t}=se(),{address:n,connect:a,invokeContract:o,invokeRead:i,chainType:r,getContractAddress:l}=ae(),{list:s}=oe(),c=e([]),d=e(!1),u=e(null),p=async()=>{if(!Qe(r,t))throw new Error(t("wrongChain"));if(u.value||(u.value=await l()),!u.value)throw new Error(t("contractUnavailable"));return u.value},v=e=>e?Array.isArray(e)?{creator:String(e[0]??""),totalAmount:Number(e[1]??0),packetCount:Number(e[2]??0),claimedCount:Number(e[3]??0),remainingAmount:Number(e[4]??0),bestLuckAddress:String(e[5]??""),bestLuckAmount:Number(e[6]??0),ready:Boolean(e[7]),expiryTime:Number(e[8]??0)}:"object"==typeof e?{creator:String(e.creator??""),totalAmount:Number(e.totalAmount??0),packetCount:Number(e.packetCount??0),claimedCount:Number(e.claimedCount??0),remainingAmount:Number(e.remainingAmount??0),bestLuckAddress:String(e.bestLuckAddress??""),bestLuckAmount:Number(e.bestLuckAmount??0),ready:Boolean(e.ready??!1),expiryTime:Number(e.expiryTime??0)}:null:null,f=async(e,t,n)=>{try{const a=await i({scriptHash:e,operation:"GetEnvelope",args:[{type:"Integer",value:t}]}),o=v(function(e){if(!e)return null;if("object"==typeof e&&null!==e){const t=e;return"stack"in t&&Array.isArray(t.stack)?0===t.stack.length?null:1===t.stack.length?pe(t.stack[0]):t.stack.map(pe):"state"in t?pe(t.state):"txid"in t||"txHash"in t?e:pe(e)}return"string"==typeof e||"number"==typeof e||"boolean"==typeof e?e:pe(e)}(a));if(!o)return null;const r=Number(o.packetCount||(null==n?void 0:n.packetCount)||0),l=Number(o.claimedCount||0),s=Math.max(0,r-l),c=Boolean(o.ready),d=Number(o.expiryTime||0),u=d>0&&Date.now()>1e3*d,p=ce(o.totalAmount||(null==n?void 0:n.totalAmount)||0),f=c&&!u&&s>0,h=o.creator||(null==n?void 0:n.creator)||"";return{id:t,creator:h,from:ue(h),total:r,remaining:s,totalAmount:p,bestLuckAddress:o.bestLuckAddress||void 0,bestLuckAmount:o.bestLuckAmount||void 0,ready:c,expired:u,canClaim:f}}catch{return null}};return{envelopes:c,loadingEnvelopes:d,contractAddress:u,ensureContractAddress:p,fetchEnvelopeDetails:f,loadEnvelopes:async()=>{if(u.value||(u.value=await p()),u.value){d.value=!0;try{const e=await s({app_id:at,event_name:"EnvelopeCreated",limit:25}),t=new Set,n=await Promise.all(e.events.map(async e=>{const n=Array.isArray(null==e?void 0:e.state)?e.state.map(pe):[],a=String(n[0]??"");return!a||t.has(a)?null:(t.add(a),f(u.value,a,{creator:String(n[1]??""),totalAmount:Number(n[2]??0),packetCount:Number(n[3]??0)}))}));c.value=n.filter(Boolean).sort((e,t)=>Number(t.id)-Number(e.id))}catch(e){}finally{d.value=!1}}},parseEnvelopeData:v,address:n,connect:a,invokeContract:o,invokeRead:i,listEvents:s,APP_ID:at,t:t,fromFixed8:ce,parseStackItem:pe,pollForEvent:ve}}const it=fe(o({__name:"LuckyOverlay",props:{luckyMessage:{},t:{type:Function}},emits:["close"],setup:e=>(e,t)=>{const n=s,a=p;return e.luckyMessage?(r(),l(n,{key:0,class:"lucky-overlay",onClick:t[2]||(t[2]=t=>e.$emit("close"))},{default:u(()=>[b(n,{class:"lucky-card-glass",onClick:t[1]||(t[1]=y(()=>{},["stop"]))},{default:u(()=>[b(n,{class:"card-glow"}),b(n,{class:"lucky-content"},{default:u(()=>[b(a,{class:"lucky-header"},{default:u(()=>[v("ğŸ‰ "+f(e.t("congratulations"))+" ğŸ‰",1)]),_:1}),b(n,{class:"amount-circle"},{default:u(()=>[b(n,{class:"amount-inner"},{default:u(()=>[b(a,{class:"lucky-amount"},{default:u(()=>[v(f(e.luckyMessage.amount),1)]),_:1}),b(a,{class:"lucky-currency"},{default:u(()=>[v("GAS")]),_:1})]),_:1})]),_:1}),b(n,{class:"sender-pill"},{default:u(()=>[b(a,{class:"from-label"},{default:u(()=>[v(f(e.t("fromPrefix")),1)]),_:1}),b(a,{class:"from-address"},{default:u(()=>[v(f(e.luckyMessage.from),1)]),_:1})]),_:1}),b(S(We),{variant:"primary",size:"lg",block:"",class:"confirm-btn",onClick:t[0]||(t[0]=t=>e.$emit("close"))},{default:u(()=>[b(a,null,{default:u(()=>[v(f(e.t("confirm")),1)]),_:1})]),_:1})]),_:1}),b(n,{class:"coins-rain"},{default:u(()=>[(r(),h(m,null,w(15,e=>b(n,{key:e,class:"coin-item",style:c({animationDelay:2*Math.random()+"s",left:100*Math.random()+"%"})},{default:u(()=>[b(S(he),{name:"money",size:24,class:"text-gold"})]),_:2},1032,["style"])),64))]),_:1})]),_:1})]),_:1})):_("",!0)}}),[["__scopeId","data-v-1ce0e15b"]]),rt=fe(o({__name:"OpeningModal",props:{visible:{type:Boolean},envelope:{},isConnected:{type:Boolean},isOpening:{type:Boolean}},emits:["connect","open","close"],setup(e,{emit:t}){const n=e,{t:a}=se(),o=t,i=()=>{o("connect")},c=()=>{n.isConnected?o("open"):o("connect")};return(e,t)=>{const n=s,o=p;return e.visible?(r(),l(n,{key:0,class:"opening-overlay"},{default:u(()=>[b(n,{class:"envelope-stage"},{default:u(()=>[b(n,{class:d(["red-packet",{"is-opening":e.isOpening,"is-shaking":!e.isOpening}]),onClick:c},{default:u(()=>[b(n,{class:"packet-lid"}),b(n,{class:"packet-body"},{default:u(()=>[b(n,{class:"packet-seal"},{default:u(()=>[b(o,{class:"seal-text"},{default:u(()=>[v(f(S(a)("open")),1)]),_:1})]),_:1})]),_:1}),b(n,{class:"packet-content"},{default:u(()=>{var t;return[b(o,{class:"packet-msg"},{default:u(()=>{var t;return[v(f((null==(t=e.envelope)?void 0:t.from)?S(a)("fromLabel",{name:e.envelope.from}):S(a)("luckyPacket")),1)]}),_:1}),(null==(t=e.envelope)?void 0:t.description)?(r(),l(o,{key:0,class:"packet-note"},{default:u(()=>[v(f(e.envelope.description),1)]),_:1})):_("",!0)]}),_:1})]),_:1},8,["class"]),b(n,{class:"action-area"},{default:u(()=>[e.isConnected?(r(),l(S(We),{key:1,variant:"secondary",size:"lg",class:"action-btn",loading:e.isOpening,onClick:c},{default:u(()=>[v(f(e.isOpening?S(a)("opening"):S(a)("openNow")),1)]),_:1},8,["loading"])):(r(),l(S(We),{key:0,variant:"primary",size:"lg",class:"action-btn",onClick:i},{default:u(()=>[v(f(S(a)("connectAndOpen")),1)]),_:1}))]),_:1})]),_:1})]),_:1})):_("",!0)}}}),[["__scopeId","data-v-71fa51bc"]]),lt=fe(o({__name:"AppStatus",props:{status:{}},setup:e=>(e,t)=>{const n=p;return e.status?(r(),l(S(Ve),{key:0,variant:"success"===e.status.type?"success":"danger",class:"status-card"},{default:u(()=>[b(n,{class:"status-text"},{default:u(()=>[v(f(e.status.msg),1)]),_:1})]),_:1},8,["variant"])):_("",!0)}}),[["__scopeId","data-v-6919b74b"]]),st=fe(o({__name:"CreateEnvelopeForm",props:{name:{},description:{},amount:{},count:{},expiryHours:{},isLoading:{type:Boolean},t:{type:Function}},emits:["update:name","update:description","update:amount","update:count","update:expiryHours","create"],setup:e=>(e,t)=>{const n=s,a=p;return r(),l(S(Ve),{variant:"erobo-neo"},{default:u(()=>[b(n,{class:"input-group"},{default:u(()=>[b(S(je),{modelValue:e.name,"onUpdate:modelValue":t[0]||(t[0]=t=>e.$emit("update:name",t)),placeholder:e.t("namePlaceholder")},null,8,["modelValue","placeholder"]),b(S(je),{modelValue:e.description,"onUpdate:modelValue":t[1]||(t[1]=t=>e.$emit("update:description",t)),placeholder:e.t("defaultBlessing")},null,8,["modelValue","placeholder"]),b(S(je),{modelValue:e.amount,"onUpdate:modelValue":t[2]||(t[2]=t=>e.$emit("update:amount",t)),type:"number",placeholder:e.t("totalGasPlaceholder"),suffix:"GAS"},null,8,["modelValue","placeholder"]),b(S(je),{modelValue:e.count,"onUpdate:modelValue":t[3]||(t[3]=t=>e.$emit("update:count",t)),type:"number",placeholder:e.t("packetsPlaceholder")},null,8,["modelValue","placeholder"]),b(S(je),{modelValue:e.expiryHours,"onUpdate:modelValue":t[4]||(t[4]=t=>e.$emit("update:expiryHours",t)),type:"number",placeholder:e.t("expiryPlaceholder"),suffix:"h"},null,8,["modelValue","placeholder"])]),_:1}),b(S(We),{variant:"primary",size:"lg",block:"",loading:e.isLoading,onClick:t[5]||(t[5]=t=>e.$emit("create")),class:"send-button"},{default:u(()=>[b(n,{class:"btn-content"},{default:u(()=>[b(S(he),{name:"envelope",size:24}),b(a,{class:"button-text"},{default:u(()=>[v(f(e.t("sendRedEnvelope")),1)]),_:1})]),_:1})]),_:1},8,["loading"])]),_:1})}}),[["__scopeId","data-v-c1401314"]]),ct=o({__name:"CreateForm",props:{isLoading:{type:Boolean},t:{type:Function}},emits:["create","update:name","update:description","update:amount","update:count","update:expiryHours"],setup(t,{emit:n}){const a=n,o=e(""),i=e(""),c=e(""),d=e(""),p=e("24");return I(o,e=>a("update:name",e)),I(i,e=>a("update:description",e)),I(c,e=>a("update:amount",e)),I(d,e=>a("update:count",e)),I(p,e=>a("update:expiryHours",e)),(e,t)=>{const n=s;return r(),l(n,{class:"create-form"},{default:u(()=>[b(st,{name:o.value,"onUpdate:name":t[0]||(t[0]=e=>o.value=e),description:i.value,"onUpdate:description":t[1]||(t[1]=e=>i.value=e),amount:c.value,"onUpdate:amount":t[2]||(t[2]=e=>c.value=e),count:d.value,"onUpdate:count":t[3]||(t[3]=e=>d.value=e),expiryHours:p.value,"onUpdate:expiryHours":t[4]||(t[4]=e=>p.value=e),"is-loading":e.isLoading,t:e.t,onCreate:t[5]||(t[5]=t=>e.$emit("create"))},null,8,["name","description","amount","count","expiryHours","is-loading","t"])]),_:1})}}}),dt=fe(o({__name:"ClaimInterface",props:{envelopes:{},t:{type:Function}},emits:["select"],setup:e=>(e,t)=>{const n=p,a=s;return r(),l(a,{class:"claim-interface"},{default:u(()=>[b(a,{class:"claim-header"},{default:u(()=>[b(n,{class:"claim-title"},{default:u(()=>[v(f(e.t("claimRedEnvelope")),1)]),_:1})]),_:1}),b(a,{class:"envelope-grid"},{default:u(()=>[(r(!0),h(m,null,w(e.envelopes,t=>(r(),l(a,{key:t.id,class:d(["envelope-item",{"can-claim":t.canClaim,expired:t.expired}]),onClick:n=>e.$emit("select",t)},{default:u(()=>[b(n,{class:"envelope-icon"},{default:u(()=>[v("ğŸ§§")]),_:1}),b(n,{class:"envelope-from"},{default:u(()=>[v(f(t.from),1)]),_:2},1024),b(n,{class:"envelope-amount"},{default:u(()=>[v(f(t.totalAmount)+" GAS",1)]),_:2},1024),b(n,{class:"envelope-remaining"},{default:u(()=>[v(f(t.remaining)+"/"+f(t.total)+" "+f(e.t("remaining")),1)]),_:2},1024)]),_:2},1032,["class","onClick"]))),128))]),_:1})]),_:1})}}),[["__scopeId","data-v-1ba2a949"]]),ut=fe(o({__name:"index",setup(t){const{t:a}=se(),{address:o,connect:c,invokeContract:d,invokeRead:h}=ae(),{list:w}=oe(),m=e("create"),g=i(()=>[{id:"create",label:a("createTab"),icon:"envelope"},{id:"claim",label:a("claimTab"),icon:"gift"},{id:"docs",label:a("docs"),icon:"book"}]),y=i(()=>[a("step1"),a("step2"),a("step3"),a("step4")]),k=i(()=>[{name:a("feature1Name"),desc:a("feature1Desc")},{name:a("feature2Name"),desc:a("feature2Desc")}]),{name:C,description:A,amount:E,count:z,expiryHours:T,status:N,isLoading:x,defaultBlessing:M,ensureContractAddress:P,processPayment:O}=nt(),{envelopes:D,ensureContractAddress:R,fetchEnvelopeDetails:L,loadEnvelopes:B}=ot(),G=e(null),U=e(null),H=e(!1),F=e(null),K=async()=>{try{await c()}catch{}},V=async()=>{if(!x.value)try{if(N.value=null,o.value||await c(),!o.value)throw new Error(a("connectWallet"));const e=await P(),t=Number(E.value),n=Number(z.value);if(!Number.isFinite(t)||t<.1)throw new Error(a("invalidAmount"));if(!Number.isFinite(n)||n<1||n>100)throw new Error(a("invalidPackets"));if(t<.01*n)throw new Error(a("invalidPerPacket"));const i=Number(T.value);if(!Number.isFinite(i)||i<=0)throw new Error(a("invalidExpiry"));const r=Math.round(3600*i),{receiptId:l,invoke:s,waitForEvent:d}=await O(E.value,`redenvelope:${z.value}`);if(!l)throw new Error(a("receiptMissing"));const u=A.value.trim()||M.value,p=await s(e,"createEnvelope",[{type:"Hash160",value:o.value},{type:"String",value:C.value||""},{type:"String",value:u},{type:"Integer",value:de(E.value)},{type:"Integer",value:String(n)},{type:"Integer",value:String(r)},{type:"Integer",value:l}]),v=(null==p?void 0:p.txid)||"";if(!(v?await d(v,"EnvelopeCreated"):null))throw new Error(a("envelopePending"));N.value={msg:a("envelopeSent"),type:"success"},C.value="",A.value="",E.value="",z.value="",await B()}catch(e){N.value={msg:(null==e?void 0:e.message)||a("error"),type:"error"}}},W=e=>{F.value=e,H.value=!0};return n(async()=>{if(await B(),"undefined"!=typeof window){const e=new URLSearchParams(window.location.search).get("id");if(e){const t=D.value.find(t=>t.id===e);if(t)W(t),m.value="claim";else{const t=await R(),n=await L(t,e);n&&(F.value=n,H.value=!0,m.value="claim")}}}}),I(m,async e=>{"claim"===e&&await B()}),(e,t)=>{const n=p,i=s;return r(),l(S(Ke),{"desktop-breakpoint":1024,class:"theme-red-envelope",tabs:g.value,"active-tab":m.value,onTabChange:t[8]||(t[8]=e=>m.value=e)},{"desktop-sidebar":u(()=>[b(i,{class:"desktop-sidebar"},{default:u(()=>[b(n,{class:"sidebar-title"},{default:u(()=>[v(f(S(a)("overview")),1)]),_:1})]),_:1})]),default:u(()=>[b(S(He),{title:S(a)("wrongChain"),message:S(a)("wrongChainMessage"),"button-text":S(a)("switchToNeo")},null,8,["title","message","button-text"]),"create"===m.value||"claim"===m.value?(r(),l(i,{key:0,class:"app-container"},{default:u(()=>[b(it,{"lucky-message":G.value,t:S(a),onClose:t[0]||(t[0]=e=>G.value=null)},null,8,["lucky-message","t"]),b(S(Xe),{active:!!G.value,duration:3e3},null,8,["active"]),b(rt,{visible:H.value,envelope:F.value,"is-connected":!!S(o),"is-opening":!!U.value,onConnect:K,onOpen:t[1]||(t[1]=()=>F.value&&(async e=>{if(!U.value&&(o.value||(await c(),o.value)))try{N.value=null;const n=await R();if(e.expired)throw new Error(a("envelopeExpired"));if(!e.ready)throw new Error(a("envelopeNotReady"));if(e.remaining<=0)throw new Error(a("envelopeEmpty"));const i=await h({scriptHash:n,operation:"HasClaimed",args:[{type:"Integer",value:e.id},{type:"Hash160",value:o.value}]});if(Boolean((t=i)?"object"==typeof t&&null!==t&&"value"in t?t.value:t:null))throw new Error(a("alreadyClaimed"));U.value=e.id;const r=await d({scriptHash:n,operation:"Claim",args:[{type:"Integer",value:e.id},{type:"Hash160",value:o.value}]}),l=String((null==r?void 0:r.txid)||(null==r?void 0:r.txHash)||""),s=l?await ve(async()=>(await w({app_id:"miniapp-redenvelope",event_name:"EnvelopeClaimed",limit:25})).events||[],e=>e.tx_hash===l,{timeoutMs:3e4,errorMessage:a("claimPending")}):null;if(!s)throw new Error(a("claimPending"));const c=Array.isArray(null==s?void 0:s.state)?s.state.map(pe):[],u=ce(Number(c[2]??0)),p=Number(c[3]??e.remaining);H.value=!1,G.value={amount:Number(u.toFixed(2)),from:e.from},e.remaining=Math.max(0,p),e.canClaim=e.remaining>0&&e.ready&&!e.expired,N.value={msg:a("claimedFrom").replace("{0}",e.from),type:"success"},await B()}catch(n){N.value={msg:(null==n?void 0:n.message)||a("error"),type:"error"},H.value=!1}finally{U.value=null}var t})(F.value,!0)),onClose:t[2]||(t[2]=e=>H.value=!1)},null,8,["visible","envelope","is-connected","is-opening"]),b(lt,{status:S(N)},null,8,["status"]),"create"===m.value?(r(),l(i,{key:0,class:"tab-content"},{default:u(()=>[b(ct,{"is-loading":S(x),t:S(a),name:S(C),"onUpdate:name":t[3]||(t[3]=e=>$(C)?C.value=e:null),description:S(A),"onUpdate:description":t[4]||(t[4]=e=>$(A)?A.value=e:null),amount:S(E),"onUpdate:amount":t[5]||(t[5]=e=>$(E)?E.value=e:null),count:S(z),"onUpdate:count":t[6]||(t[6]=e=>$(z)?z.value=e:null),expiryHours:S(T),"onUpdate:expiryHours":t[7]||(t[7]=e=>$(T)?T.value=e:null),onCreate:V},null,8,["is-loading","t","name","description","amount","count","expiryHours"])]),_:1})):_("",!0),"claim"===m.value?(r(),l(i,{key:1,class:"tab-content"},{default:u(()=>[b(dt,{envelopes:S(D),t:S(a),onSelect:W},null,8,["envelopes","t"])]),_:1})):_("",!0)]),_:1})):_("",!0),"docs"===m.value?(r(),l(i,{key:1,class:"tab-content scrollable"},{default:u(()=>[b(S(Je),{title:S(a)("title"),subtitle:S(a)("docSubtitle"),description:S(a)("docDescription"),steps:y.value,features:k.value},null,8,["title","subtitle","description","steps","features"])]),_:1})):_("",!0)]),_:1},8,["tabs","active-tab"])}}}),[["__scopeId","data-v-18a39329"]]);export{ut as default};
