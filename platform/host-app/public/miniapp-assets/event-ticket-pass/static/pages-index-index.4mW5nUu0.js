import{r as e,a as t,o as n,b as a,d as o,c as i,e as r,i as l,n as s,f as c,w as u,g as d,h as f,t as p,j as g,k as h,F as v,l as w,m,p as y,q as b,s as k,u as _,v as I,x as C,y as A,z as E,A as T,B as S,C as M,D as N,I as B,E as R,G as x,H as P,J as $}from"./index-dvydCPfP.js";import L from"encode-utf8";import D from"dijkstrajs";import{_ as U,u as O,N as V}from"./NeoDoc.DmG0riIc.js";var K={},z={},F={};let j;const H=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];F.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return 4*e+17},F.getSymbolTotalCodewords=function(e){return H[e]},F.getBCHDigit=function(e){let t=0;for(;0!==e;)t++,e>>>=1;return t},F.setToSJISFunction=function(e){if("function"!=typeof e)throw new Error('"toSJISFunc" is not a valid function.');j=e},F.isKanjiModeEnabled=function(){return void 0!==j},F.toSJIS=function(e){return j(e)};var q,G={};function J(){this.buffer=[],this.length=0}(q=G).L={bit:1},q.M={bit:0},q.Q={bit:3},q.H={bit:2},q.isValid=function(e){return e&&void 0!==e.bit&&e.bit>=0&&e.bit<4},q.from=function(e,t){if(q.isValid(e))return e;try{return function(e){if("string"!=typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return q.L;case"m":case"medium":return q.M;case"q":case"quartile":return q.Q;case"h":case"high":return q.H;default:throw new Error("Unknown EC Level: "+e)}}(e)}catch(n){return t}},J.prototype={get:function(e){const t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(let n=0;n<t;n++)this.putBit(1==(e>>>t-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var W=J;function Y(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}Y.prototype.set=function(e,t,n,a){const o=e*this.size+t;this.data[o]=n,a&&(this.reservedBit[o]=!0)},Y.prototype.get=function(e,t){return this.data[e*this.size+t]},Y.prototype.xor=function(e,t,n){this.data[e*this.size+t]^=n},Y.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]};var Q=Y,Z={};!function(e){const t=F.getSymbolSize;e.getRowColCoords=function(e){if(1===e)return[];const n=Math.floor(e/7)+2,a=t(e),o=145===a?26:2*Math.ceil((a-13)/(2*n-2)),i=[a-7];for(let t=1;t<n-1;t++)i[t]=i[t-1]-o;return i.push(6),i.reverse()},e.getPositions=function(t){const n=[],a=e.getRowColCoords(t),o=a.length;for(let e=0;e<o;e++)for(let t=0;t<o;t++)0===e&&0===t||0===e&&t===o-1||e===o-1&&0===t||n.push([a[e],a[t]]);return n}}(Z);var X={};const ee=F.getSymbolSize;X.getPositions=function(e){const t=ee(e);return[[0,0],[t-7,0],[0,t-7]]};var te={};!function(e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t=3,n=3,a=40,o=10;function i(t,n,a){switch(t){case e.Patterns.PATTERN000:return(n+a)%2==0;case e.Patterns.PATTERN001:return n%2==0;case e.Patterns.PATTERN010:return a%3==0;case e.Patterns.PATTERN011:return(n+a)%3==0;case e.Patterns.PATTERN100:return(Math.floor(n/2)+Math.floor(a/3))%2==0;case e.Patterns.PATTERN101:return n*a%2+n*a%3==0;case e.Patterns.PATTERN110:return(n*a%2+n*a%3)%2==0;case e.Patterns.PATTERN111:return(n*a%3+(n+a)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}}e.isValid=function(e){return null!=e&&""!==e&&!isNaN(e)&&e>=0&&e<=7},e.from=function(t){return e.isValid(t)?parseInt(t,10):void 0},e.getPenaltyN1=function(e){const n=e.size;let a=0,o=0,i=0,r=null,l=null;for(let s=0;s<n;s++){o=i=0,r=l=null;for(let c=0;c<n;c++){let n=e.get(s,c);n===r?o++:(o>=5&&(a+=t+(o-5)),r=n,o=1),n=e.get(c,s),n===l?i++:(i>=5&&(a+=t+(i-5)),l=n,i=1)}o>=5&&(a+=t+(o-5)),i>=5&&(a+=t+(i-5))}return a},e.getPenaltyN2=function(e){const t=e.size;let a=0;for(let n=0;n<t-1;n++)for(let o=0;o<t-1;o++){const t=e.get(n,o)+e.get(n,o+1)+e.get(n+1,o)+e.get(n+1,o+1);4!==t&&0!==t||a++}return a*n},e.getPenaltyN3=function(e){const t=e.size;let n=0,o=0,i=0;for(let a=0;a<t;a++){o=i=0;for(let r=0;r<t;r++)o=o<<1&2047|e.get(a,r),r>=10&&(1488===o||93===o)&&n++,i=i<<1&2047|e.get(r,a),r>=10&&(1488===i||93===i)&&n++}return n*a},e.getPenaltyN4=function(e){let t=0;const n=e.data.length;for(let a=0;a<n;a++)t+=e.data[a];return Math.abs(Math.ceil(100*t/n/5)-10)*o},e.applyMask=function(e,t){const n=t.size;for(let a=0;a<n;a++)for(let o=0;o<n;o++)t.isReserved(o,a)||t.xor(o,a,i(e,o,a))},e.getBestMask=function(t,n){const a=Object.keys(e.Patterns).length;let o=0,i=1/0;for(let r=0;r<a;r++){n(r),e.applyMask(r,t);const a=e.getPenaltyN1(t)+e.getPenaltyN2(t)+e.getPenaltyN3(t)+e.getPenaltyN4(t);e.applyMask(r,t),a<i&&(i=a,o=r)}return o}}(te);var ne={};const ae=G,oe=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],ie=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];ne.getBlocksCount=function(e,t){switch(t){case ae.L:return oe[4*(e-1)+0];case ae.M:return oe[4*(e-1)+1];case ae.Q:return oe[4*(e-1)+2];case ae.H:return oe[4*(e-1)+3];default:return}},ne.getTotalCodewordsCount=function(e,t){switch(t){case ae.L:return ie[4*(e-1)+0];case ae.M:return ie[4*(e-1)+1];case ae.Q:return ie[4*(e-1)+2];case ae.H:return ie[4*(e-1)+3];default:return}};var re={},le={};const se=new Uint8Array(512),ce=new Uint8Array(256);!function(){let e=1;for(let t=0;t<255;t++)se[t]=e,ce[e]=t,e<<=1,256&e&&(e^=285);for(let t=255;t<512;t++)se[t]=se[t-255]}(),le.log=function(e){if(e<1)throw new Error("log("+e+")");return ce[e]},le.exp=function(e){return se[e]},le.mul=function(e,t){return 0===e||0===t?0:se[ce[e]+ce[t]]},function(e){const t=le;e.mul=function(e,n){const a=new Uint8Array(e.length+n.length-1);for(let o=0;o<e.length;o++)for(let i=0;i<n.length;i++)a[o+i]^=t.mul(e[o],n[i]);return a},e.mod=function(e,n){let a=new Uint8Array(e);for(;a.length-n.length>=0;){const e=a[0];for(let i=0;i<n.length;i++)a[i]^=t.mul(n[i],e);let o=0;for(;o<a.length&&0===a[o];)o++;a=a.slice(o)}return a},e.generateECPolynomial=function(n){let a=new Uint8Array([1]);for(let o=0;o<n;o++)a=e.mul(a,new Uint8Array([1,t.exp(o)]));return a}}(re);const ue=re;function de(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}de.prototype.initialize=function(e){this.degree=e,this.genPoly=ue.generateECPolynomial(this.degree)},de.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const t=new Uint8Array(e.length+this.degree);t.set(e);const n=ue.mod(t,this.genPoly),a=this.degree-n.length;if(a>0){const e=new Uint8Array(this.degree);return e.set(n,a),e}return n};var fe=de,pe={},ge={},he={isValid:function(e){return!isNaN(e)&&e>=1&&e<=40}},ve={};const we="[0-9]+";let me="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";me=me.replace(/u/g,"\\u");const ye="(?:(?![A-Z0-9 $%*+\\-./:]|"+me+")(?:.|[\r\n]))+";ve.KANJI=new RegExp(me,"g"),ve.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),ve.BYTE=new RegExp(ye,"g"),ve.NUMERIC=new RegExp(we,"g"),ve.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");const be=new RegExp("^"+me+"$"),ke=new RegExp("^"+we+"$"),_e=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");ve.testKanji=function(e){return be.test(e)},ve.testNumeric=function(e){return ke.test(e)},ve.testAlphanumeric=function(e){return _e.test(e)},function(e){const t=he,n=ve;e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(e,n){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!t.isValid(n))throw new Error("Invalid version: "+n);return n>=1&&n<10?e.ccBits[0]:n<27?e.ccBits[1]:e.ccBits[2]},e.getBestModeForData=function(t){return n.testNumeric(t)?e.NUMERIC:n.testAlphanumeric(t)?e.ALPHANUMERIC:n.testKanji(t)?e.KANJI:e.BYTE},e.toString=function(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")},e.isValid=function(e){return e&&e.bit&&e.ccBits},e.from=function(t,n){if(e.isValid(t))return t;try{return function(t){if("string"!=typeof t)throw new Error("Param is not a string");switch(t.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+t)}}(t)}catch(a){return n}}}(ge),function(e){const t=F,n=ne,a=G,o=ge,i=he,r=t.getBCHDigit(7973);function l(e,t){return o.getCharCountIndicator(e,t)+4}function s(e,t){let n=0;return e.forEach(function(e){const a=l(e.mode,t);n+=a+e.getBitsLength()}),n}e.from=function(e,t){return i.isValid(e)?parseInt(e,10):t},e.getCapacity=function(e,a,r){if(!i.isValid(e))throw new Error("Invalid QR Code version");void 0===r&&(r=o.BYTE);const s=8*(t.getSymbolTotalCodewords(e)-n.getTotalCodewordsCount(e,a));if(r===o.MIXED)return s;const c=s-l(r,e);switch(r){case o.NUMERIC:return Math.floor(c/10*3);case o.ALPHANUMERIC:return Math.floor(c/11*2);case o.KANJI:return Math.floor(c/13);case o.BYTE:default:return Math.floor(c/8)}},e.getBestVersionForData=function(t,n){let i;const r=a.from(n,a.M);if(Array.isArray(t)){if(t.length>1)return function(t,n){for(let a=1;a<=40;a++)if(s(t,a)<=e.getCapacity(a,n,o.MIXED))return a}(t,r);if(0===t.length)return 1;i=t[0]}else i=t;return function(t,n,a){for(let o=1;o<=40;o++)if(n<=e.getCapacity(o,a,t))return o}(i.mode,i.getLength(),r)},e.getEncodedBits=function(e){if(!i.isValid(e)||e<7)throw new Error("Invalid QR Code version");let n=e<<12;for(;t.getBCHDigit(n)-r>=0;)n^=7973<<t.getBCHDigit(n)-r;return e<<12|n}}(pe);var Ie={};const Ce=F,Ae=Ce.getBCHDigit(1335);Ie.getEncodedBits=function(e,t){const n=e.bit<<3|t;let a=n<<10;for(;Ce.getBCHDigit(a)-Ae>=0;)a^=1335<<Ce.getBCHDigit(a)-Ae;return 21522^(n<<10|a)};var Ee={};const Te=ge;function Se(e){this.mode=Te.NUMERIC,this.data=e.toString()}Se.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},Se.prototype.getLength=function(){return this.data.length},Se.prototype.getBitsLength=function(){return Se.getBitsLength(this.data.length)},Se.prototype.write=function(e){let t,n,a;for(t=0;t+3<=this.data.length;t+=3)n=this.data.substr(t,3),a=parseInt(n,10),e.put(a,10);const o=this.data.length-t;o>0&&(n=this.data.substr(t),a=parseInt(n,10),e.put(a,3*o+1))};var Me=Se;const Ne=ge,Be=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Re(e){this.mode=Ne.ALPHANUMERIC,this.data=e}Re.getBitsLength=function(e){return 11*Math.floor(e/2)+e%2*6},Re.prototype.getLength=function(){return this.data.length},Re.prototype.getBitsLength=function(){return Re.getBitsLength(this.data.length)},Re.prototype.write=function(e){let t;for(t=0;t+2<=this.data.length;t+=2){let n=45*Be.indexOf(this.data[t]);n+=Be.indexOf(this.data[t+1]),e.put(n,11)}this.data.length%2&&e.put(Be.indexOf(this.data[t]),6)};var xe=Re;const Pe=L,$e=ge;function Le(e){this.mode=$e.BYTE,"string"==typeof e&&(e=Pe(e)),this.data=new Uint8Array(e)}Le.getBitsLength=function(e){return 8*e},Le.prototype.getLength=function(){return this.data.length},Le.prototype.getBitsLength=function(){return Le.getBitsLength(this.data.length)},Le.prototype.write=function(e){for(let t=0,n=this.data.length;t<n;t++)e.put(this.data[t],8)};var De=Le;const Ue=ge,Oe=F;function Ve(e){this.mode=Ue.KANJI,this.data=e}Ve.getBitsLength=function(e){return 13*e},Ve.prototype.getLength=function(){return this.data.length},Ve.prototype.getBitsLength=function(){return Ve.getBitsLength(this.data.length)},Ve.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let n=Oe.toSJIS(this.data[t]);if(n>=33088&&n<=40956)n-=33088;else{if(!(n>=57408&&n<=60351))throw new Error("Invalid SJIS character: "+this.data[t]+"\nMake sure your charset is UTF-8");n-=49472}n=192*(n>>>8&255)+(255&n),e.put(n,13)}};var Ke=Ve;!function(e){const t=ge,n=Me,a=xe,o=De,i=Ke,r=ve,l=F,s=D;function c(e){return unescape(encodeURIComponent(e)).length}function u(e,t,n){const a=[];let o;for(;null!==(o=e.exec(n));)a.push({data:o[0],index:o.index,mode:t,length:o[0].length});return a}function d(e){const n=u(r.NUMERIC,t.NUMERIC,e),a=u(r.ALPHANUMERIC,t.ALPHANUMERIC,e);let o,i;l.isKanjiModeEnabled()?(o=u(r.BYTE,t.BYTE,e),i=u(r.KANJI,t.KANJI,e)):(o=u(r.BYTE_KANJI,t.BYTE,e),i=[]);return n.concat(a,o,i).sort(function(e,t){return e.index-t.index}).map(function(e){return{data:e.data,mode:e.mode,length:e.length}})}function f(e,r){switch(r){case t.NUMERIC:return n.getBitsLength(e);case t.ALPHANUMERIC:return a.getBitsLength(e);case t.KANJI:return i.getBitsLength(e);case t.BYTE:return o.getBitsLength(e)}}function p(e,r){let s;const c=t.getBestModeForData(e);if(s=t.from(r,c),s!==t.BYTE&&s.bit<c.bit)throw new Error('"'+e+'" cannot be encoded with mode '+t.toString(s)+".\n Suggested mode is: "+t.toString(c));switch(s!==t.KANJI||l.isKanjiModeEnabled()||(s=t.BYTE),s){case t.NUMERIC:return new n(e);case t.ALPHANUMERIC:return new a(e);case t.KANJI:return new i(e);case t.BYTE:return new o(e)}}e.fromArray=function(e){return e.reduce(function(e,t){return"string"==typeof t?e.push(p(t,null)):t.data&&e.push(p(t.data,t.mode)),e},[])},e.fromString=function(n,a){const o=function(e){const n=[];for(let a=0;a<e.length;a++){const o=e[a];switch(o.mode){case t.NUMERIC:n.push([o,{data:o.data,mode:t.ALPHANUMERIC,length:o.length},{data:o.data,mode:t.BYTE,length:o.length}]);break;case t.ALPHANUMERIC:n.push([o,{data:o.data,mode:t.BYTE,length:o.length}]);break;case t.KANJI:n.push([o,{data:o.data,mode:t.BYTE,length:c(o.data)}]);break;case t.BYTE:n.push([{data:o.data,mode:t.BYTE,length:c(o.data)}])}}return n}(d(n,l.isKanjiModeEnabled())),i=function(e,n){const a={},o={start:{}};let i=["start"];for(let r=0;r<e.length;r++){const l=e[r],s=[];for(let e=0;e<l.length;e++){const c=l[e],u=""+r+e;s.push(u),a[u]={node:c,lastCount:0},o[u]={};for(let e=0;e<i.length;e++){const r=i[e];a[r]&&a[r].node.mode===c.mode?(o[r][u]=f(a[r].lastCount+c.length,c.mode)-f(a[r].lastCount,c.mode),a[r].lastCount+=c.length):(a[r]&&(a[r].lastCount=c.length),o[r][u]=f(c.length,c.mode)+4+t.getCharCountIndicator(c.mode,n))}}i=s}for(let t=0;t<i.length;t++)o[i[t]].end=0;return{map:o,table:a}}(o,a),r=s.find_path(i.map,"start","end"),u=[];for(let e=1;e<r.length-1;e++)u.push(i.table[r[e]].node);return e.fromArray(function(e){return e.reduce(function(e,t){const n=e.length-1>=0?e[e.length-1]:null;return n&&n.mode===t.mode?(e[e.length-1].data+=t.data,e):(e.push(t),e)},[])}(u))},e.rawSplit=function(t){return e.fromArray(d(t,l.isKanjiModeEnabled()))}}(Ee);const ze=F,Fe=G,je=W,He=Q,qe=Z,Ge=X,Je=te,We=ne,Ye=fe,Qe=pe,Ze=Ie,Xe=ge,et=Ee;function tt(e,t,n){const a=e.size,o=Ze.getEncodedBits(t,n);let i,r;for(i=0;i<15;i++)r=1==(o>>i&1),i<6?e.set(i,8,r,!0):i<8?e.set(i+1,8,r,!0):e.set(a-15+i,8,r,!0),i<8?e.set(8,a-i-1,r,!0):i<9?e.set(8,15-i-1+1,r,!0):e.set(8,15-i-1,r,!0);e.set(a-8,8,1,!0)}function nt(e,t,n){const a=new je;n.forEach(function(t){a.put(t.mode.bit,4),a.put(t.getLength(),Xe.getCharCountIndicator(t.mode,e)),t.write(a)});const o=8*(ze.getSymbolTotalCodewords(e)-We.getTotalCodewordsCount(e,t));for(a.getLengthInBits()+4<=o&&a.put(0,4);a.getLengthInBits()%8!=0;)a.putBit(0);const i=(o-a.getLengthInBits())/8;for(let r=0;r<i;r++)a.put(r%2?17:236,8);return function(e,t,n){const a=ze.getSymbolTotalCodewords(t),o=We.getTotalCodewordsCount(t,n),i=a-o,r=We.getBlocksCount(t,n),l=a%r,s=r-l,c=Math.floor(a/r),u=Math.floor(i/r),d=u+1,f=c-u,p=new Ye(f);let g=0;const h=new Array(r),v=new Array(r);let w=0;const m=new Uint8Array(e.buffer);for(let I=0;I<r;I++){const e=I<s?u:d;h[I]=m.slice(g,g+e),v[I]=p.encode(h[I]),g+=e,w=Math.max(w,e)}const y=new Uint8Array(a);let b,k,_=0;for(b=0;b<w;b++)for(k=0;k<r;k++)b<h[k].length&&(y[_++]=h[k][b]);for(b=0;b<f;b++)for(k=0;k<r;k++)y[_++]=v[k][b];return y}(a,e,t)}function at(e,t,n,a){let o;if(Array.isArray(e))o=et.fromArray(e);else{if("string"!=typeof e)throw new Error("Invalid data");{let a=t;if(!a){const t=et.rawSplit(e);a=Qe.getBestVersionForData(t,n)}o=et.fromString(e,a||40)}}const i=Qe.getBestVersionForData(o,n);if(!i)throw new Error("The amount of data is too big to be stored in a QR Code");if(t){if(t<i)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+i+".\n")}else t=i;const r=nt(t,n,o),l=ze.getSymbolSize(t),s=new He(l);return function(e,t){const n=e.size,a=Ge.getPositions(t);for(let o=0;o<a.length;o++){const t=a[o][0],i=a[o][1];for(let a=-1;a<=7;a++)if(!(t+a<=-1||n<=t+a))for(let o=-1;o<=7;o++)i+o<=-1||n<=i+o||(a>=0&&a<=6&&(0===o||6===o)||o>=0&&o<=6&&(0===a||6===a)||a>=2&&a<=4&&o>=2&&o<=4?e.set(t+a,i+o,!0,!0):e.set(t+a,i+o,!1,!0))}}(s,t),function(e){const t=e.size;for(let n=8;n<t-8;n++){const t=n%2==0;e.set(n,6,t,!0),e.set(6,n,t,!0)}}(s),function(e,t){const n=qe.getPositions(t);for(let a=0;a<n.length;a++){const t=n[a][0],o=n[a][1];for(let n=-2;n<=2;n++)for(let a=-2;a<=2;a++)-2===n||2===n||-2===a||2===a||0===n&&0===a?e.set(t+n,o+a,!0,!0):e.set(t+n,o+a,!1,!0)}}(s,t),tt(s,n,0),t>=7&&function(e,t){const n=e.size,a=Qe.getEncodedBits(t);let o,i,r;for(let l=0;l<18;l++)o=Math.floor(l/3),i=l%3+n-8-3,r=1==(a>>l&1),e.set(o,i,r,!0),e.set(i,o,r,!0)}(s,t),function(e,t){const n=e.size;let a=-1,o=n-1,i=7,r=0;for(let l=n-1;l>0;l-=2)for(6===l&&l--;;){for(let n=0;n<2;n++)if(!e.isReserved(o,l-n)){let a=!1;r<t.length&&(a=1==(t[r]>>>i&1)),e.set(o,l-n,a),i--,-1===i&&(r++,i=7)}if(o+=a,o<0||n<=o){o-=a,a=-a;break}}}(s,r),isNaN(a)&&(a=Je.getBestMask(s,tt.bind(null,s,n))),Je.applyMask(a,s),tt(s,n,a),{modules:s,version:t,errorCorrectionLevel:n,maskPattern:a,segments:o}}z.create=function(e,t){if(void 0===e||""===e)throw new Error("No input text");let n,a,o=Fe.M;return void 0!==t&&(o=Fe.from(t.errorCorrectionLevel,Fe.M),n=Qe.from(t.version),a=Je.from(t.maskPattern),t.toSJISFunc&&ze.setToSJISFunction(t.toSJISFunc)),at(e,n,o,a)};var ot={},it={};!function(e){function t(e){if("number"==typeof e&&(e=e.toString()),"string"!=typeof e)throw new Error("Color should be defined as hex string");let t=e.slice().replace("#","").split("");if(t.length<3||5===t.length||t.length>8)throw new Error("Invalid hex color: "+e);3!==t.length&&4!==t.length||(t=Array.prototype.concat.apply([],t.map(function(e){return[e,e]}))),6===t.length&&t.push("F","F");const n=parseInt(t.join(""),16);return{r:n>>24&255,g:n>>16&255,b:n>>8&255,a:255&n,hex:"#"+t.slice(0,6).join("")}}e.getOptions=function(e){e||(e={}),e.color||(e.color={});const n=void 0===e.margin||null===e.margin||e.margin<0?4:e.margin,a=e.width&&e.width>=21?e.width:void 0,o=e.scale||4;return{width:a,scale:a?4:o,margin:n,color:{dark:t(e.color.dark||"#000000ff"),light:t(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}},e.getScale=function(e,t){return t.width&&t.width>=e+2*t.margin?t.width/(e+2*t.margin):t.scale},e.getImageWidth=function(t,n){const a=e.getScale(t,n);return Math.floor((t+2*n.margin)*a)},e.qrToImageData=function(t,n,a){const o=n.modules.size,i=n.modules.data,r=e.getScale(o,a),l=Math.floor((o+2*a.margin)*r),s=a.margin*r,c=[a.color.light,a.color.dark];for(let e=0;e<l;e++)for(let n=0;n<l;n++){let u=4*(e*l+n),d=a.color.light;if(e>=s&&n>=s&&e<l-s&&n<l-s){d=c[i[Math.floor((e-s)/r)*o+Math.floor((n-s)/r)]?1:0]}t[u++]=d.r,t[u++]=d.g,t[u++]=d.b,t[u]=d.a}}}(it),function(e){const t=it;e.render=function(e,n,a){let o=a,i=n;void 0!==o||n&&n.getContext||(o=n,n=void 0),n||(i=function(){try{return document.createElement("canvas")}catch(e){throw new Error("You need to specify a canvas element")}}()),o=t.getOptions(o);const r=t.getImageWidth(e.modules.size,o),l=i.getContext("2d"),s=l.createImageData(r,r);return t.qrToImageData(s.data,e,o),function(e,t,n){e.clearRect(0,0,t.width,t.height),t.style||(t.style={}),t.height=n,t.width=n,t.style.height=n+"px",t.style.width=n+"px"}(l,i,r),l.putImageData(s,0,0),i},e.renderToDataURL=function(t,n,a){let o=a;void 0!==o||n&&n.getContext||(o=n,n=void 0),o||(o={});const i=e.render(t,n,o),r=o.type||"image/png",l=o.rendererOpts||{};return i.toDataURL(r,l.quality)}}(ot);var rt={};const lt=it;function st(e,t){const n=e.a/255,a=t+'="'+e.hex+'"';return n<1?a+" "+t+'-opacity="'+n.toFixed(2).slice(1)+'"':a}function ct(e,t,n){let a=e+t;return void 0!==n&&(a+=" "+n),a}rt.render=function(e,t,n){const a=lt.getOptions(t),o=e.modules.size,i=e.modules.data,r=o+2*a.margin,l=a.color.light.a?"<path "+st(a.color.light,"fill")+' d="M0 0h'+r+"v"+r+'H0z"/>':"",s="<path "+st(a.color.dark,"stroke")+' d="'+function(e,t,n){let a="",o=0,i=!1,r=0;for(let l=0;l<e.length;l++){const s=Math.floor(l%t),c=Math.floor(l/t);s||i||(i=!0),e[l]?(r++,l>0&&s>0&&e[l-1]||(a+=i?ct("M",s+n,.5+c+n):ct("m",o,0),o=0,i=!1),s+1<t&&e[l+1]||(a+=ct("h",r),r=0)):o++}return a}(i,o,a.margin)+'"/>',c='viewBox="0 0 '+r+" "+r+'"',u='<svg xmlns="http://www.w3.org/2000/svg" '+(a.width?'width="'+a.width+'" height="'+a.width+'" ':"")+c+' shape-rendering="crispEdges">'+l+s+"</svg>\n";return"function"==typeof n&&n(null,u),u};const ut=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then},dt=z,ft=ot,pt=rt;function gt(e,t,n,a,o){const i=[].slice.call(arguments,1),r=i.length,l="function"==typeof i[r-1];if(!l&&!ut())throw new Error("Callback required as last argument");if(!l){if(r<1)throw new Error("Too few arguments provided");return 1===r?(n=t,t=a=void 0):2!==r||t.getContext||(a=n,n=t,t=void 0),new Promise(function(o,i){try{const i=dt.create(n,a);o(e(i,t,a))}catch(r){i(r)}})}if(r<2)throw new Error("Too few arguments provided");2===r?(o=n,n=t,t=a=void 0):3===r&&(t.getContext&&void 0===o?(o=a,a=void 0):(o=a,a=n,n=t,t=void 0));try{const i=dt.create(n,a);o(null,e(i,t,a))}catch(s){o(s)}}K.create=dt.create,K.toCanvas=gt.bind(null,ft.render),K.toDataURL=gt.bind(null,ft.renderToDataURL),K.toString=gt.bind(null,function(e,t,n){return pt.render(e,n)});const ht=5e3,vt=1e4,wt=100,mt=["https://neomini.app","https://miniapp.neo.org","https://testnet.miniapp.neo.org"];const yt=new class{constructor(){this.dynamicOrigins=new Set,this.baseOrigins=new Set([...mt])}getSelfOrigin(){if("undefined"==typeof window)return null;try{const e=new URL(window.location.href);if("null"===e.origin)return null;if("http:"===e.protocol||"https:"===e.protocol)return e.origin}catch{}return null}getReferrerOrigin(){if("undefined"==typeof document||!document.referrer)return null;try{return new URL(document.referrer).origin}catch{return null}}getAllowedOrigins(){const e=new Set(this.baseOrigins);this.dynamicOrigins.forEach(t=>e.add(t));const t=this.getReferrerOrigin();t&&this.baseOrigins.has(t)&&e.add(t);const n=this.getSelfOrigin();if(n&&e.add(n),"undefined"!=typeof window){const t=window.location.hostname;"localhost"!==t&&"127.0.0.1"!==t||e.add(window.location.origin)}return e}isValid(e){return!(!e||"null"===e)&&this.getAllowedOrigins().has(e)}getTargetOrigin(){var e;const t=this.getReferrerOrigin();if(t&&this.baseOrigins.has(t))return t;try{if("undefined"!=typeof window&&window.parent!==window&&(null==(e=window.location.ancestorOrigins)?void 0:e.length)>0){const e=window.location.ancestorOrigins[0];if(this.baseOrigins.has(e))return e}}catch{}const n=this.getSelfOrigin();if(n)return n;if("undefined"!=typeof window){const e=window.location.hostname;if("localhost"===e||"127.0.0.1"===e)return window.location.origin}throw new Error("Cannot determine safe target origin - no valid origin found")}getSafeTargetOrigin(){try{const e=this.getTargetOrigin();if(e&&"null"!==e)return e}catch{}if("undefined"!=typeof window&&window.parent!==window){const e=window.__MINIAPP_PARENT_ORIGIN__;if("string"==typeof e&&e&&this.baseOrigins.has(e))return e;throw new Error("Cannot communicate securely with parent - origin unknown. Ensure host app sets __MINIAPP_PARENT_ORIGIN__ or uses a supported browser.")}throw new Error("Cannot determine safe target origin - origin is null or undefined")}addDynamicOrigin(e){e&&"null"!==e&&this.dynamicOrigins.add(e)}};let bt=null;function kt(e){const t=null==e?void 0:e.layout;if("web"===t||"mobile"===t)return t;if("undefined"!=typeof window){const e=new URLSearchParams(window.location.search).get("layout");if("web"===e||"mobile"===e)return e;if(window.ReactNativeWebView)return"mobile"}return"web"}function _t(e){if(!e||"object"!=typeof e)return!1;const t="function"==typeof e.invoke&&"function"==typeof e.getConfig,n="object"==typeof e.wallet||"object"==typeof e.payments;return t||n}function It(e=ht){return new Promise((t,n)=>{if("undefined"==typeof window)return void n(new Error("SDK not available in SSR"));if(window.MiniAppSDK)return _t(window.MiniAppSDK)?void t(window.MiniAppSDK):void n(new Error("SDK validation failed"));const a=setTimeout(()=>{if(window.removeEventListener("miniapp-sdk-ready",o),window.parent!==window){const e=function(){const e=yt.getSafeTargetOrigin();let t=0;const n=(n,...a)=>new Promise((o,i)=>{const r="undefined"!=typeof crypto&&crypto.getRandomValues?Array.from(crypto.getRandomValues(new Uint8Array(4)),e=>e.toString(16).padStart(2,"0")).join(""):Math.random().toString(36).slice(2,10),l=`sdk-${++t}-${Date.now()}-${r}`,s=setTimeout(()=>{window.removeEventListener("message",c),i(new Error("SDK invoke timeout"))},vt),c=e=>{var t,n;yt.isValid(e.origin)&&e.source===window.parent&&"miniapp_sdk_response"===(null==(t=e.data)?void 0:t.type)&&(null==(n=e.data)?void 0:n.id)===l&&(clearTimeout(s),window.removeEventListener("message",c),e.data.ok?o(e.data.result):i(new Error(e.data.error||"SDK call failed")))};window.addEventListener("message",c),window.parent.postMessage({type:"miniapp_sdk_request",id:l,method:n,params:a},e)});return{invoke:n,getConfig:()=>bt?{...bt,layout:kt(bt)}:"undefined"!=typeof window&&window.__MINIAPP_CONFIG__?(bt=window.__MINIAPP_CONFIG__,{...bt,layout:kt(bt??void 0)}):{appId:"",contractAddress:null,chainId:null,chainType:void 0,supportedChains:[],layout:kt(),debug:!1},getAddress:()=>n("getAddress"),wallet:{getAddress:()=>n("wallet.getAddress"),switchChain:e=>n("wallet.switchChain",e),invokeIntent:e=>n("wallet.invokeIntent",e),signMessage:e=>n("wallet.signMessage",e)},payments:{payGAS:(e,t,a)=>n("payments.payGAS",e,t,a),payGASAndInvoke:(e,t,a)=>n("payments.payGASAndInvoke",e,t,a)},governance:{vote:(e,t,a,o)=>n("governance.vote",e,t,a,o),voteAndInvoke:(e,t,a,o)=>n("governance.voteAndInvoke",e,t,a,o),getCandidates:()=>n("governance.getCandidates")},rng:{requestRandom:e=>n("rng.requestRandom",e)},datafeed:{getPrice:e=>n("datafeed.getPrice",e),getPrices:()=>n("datafeed.getPrices"),getNetworkStats:()=>n("datafeed.getNetworkStats"),getRecentTransactions:e=>n("datafeed.getRecentTransactions",e)},stats:{getMyUsage:(e,t)=>n("stats.getMyUsage",e,t)},events:{list:e=>n("events.list",e),emit:(e,t)=>n("events.emit",e,t)},transactions:{list:e=>n("transactions.list",e)},automation:{register:(e,t,a,o)=>n("automation.register",e,t,a,o),unregister:e=>n("automation.unregister",e),status:e=>n("automation.status",e),list:()=>n("automation.list"),update:(e,t,a)=>n("automation.update",e,t,a),enable:e=>n("automation.enable",e),disable:e=>n("automation.disable",e),logs:(e,t)=>n("automation.logs",e,t)},share:{openModal:e=>n("share.openModal",e),getUrl:e=>n("share.getUrl",e),copy:e=>n("share.copy",e)}}}();window.MiniAppSDK=e,e.invoke("getConfig").then(e=>{e&&"object"==typeof e&&(bt=e)}).catch(()=>{}),t(e)}else n(new Error("SDK timeout"))},e),o=()=>{if(clearTimeout(a),window.removeEventListener("miniapp-sdk-ready",o),window.MiniAppSDK){if(!_t(window.MiniAppSDK))return void n(new Error("SDK validation failed"));t(window.MiniAppSDK)}else n(new Error("SDK not found"))};window.addEventListener("miniapp-sdk-ready",o)})}function Ct(){return"undefined"==typeof window?null:window.MiniAppSDK??null}const At=new Set;let Et={connected:!1,address:null,balance:null},Tt=null,St=!1;"undefined"!=typeof window&&("undefined"!=typeof window&&(St&&Tt||(Tt=e=>{if(e.source!==window.parent)return;if(!yt.isValid(e.origin))return;const t=e.data;t&&"object"==typeof t&&("miniapp_config"!==t.type?"miniapp_wallet_state_change"===t.type&&(Et={connected:Boolean(t.connected),address:t.address||null,chainId:t.chainId??null,chainType:t.chainType??null,balance:t.balance||t.multiChainBalance||null,balances:t.balances||void 0},At.forEach(e=>{try{e(Et)}catch(t){console.error("[MiniApp SDK] Wallet state listener error:",t)}})):t.config&&"object"==typeof t.config&&(bt=t.config))},window.addEventListener("message",Tt),St=!0)),setTimeout(function(){if("undefined"==typeof window)return;const e=yt.getSafeTargetOrigin();try{window.parent.postMessage({type:"miniapp_ready"},e)}catch{}},wt));let Mt=class extends Error{constructor(e,t){super(e),this.statusCode=t,this.name="HttpError"}};const Nt={maxRetries:3,baseDelayMs:1e3,maxDelayMs:1e4};function Bt(e,t){return Math.min(t.baseDelayMs*Math.pow(2,e),t.maxDelayMs)*(.75+.5*Math.random())}function Rt(e,t){if(t&&t>=500)return!0;if(429===t)return!0;if(e instanceof Error){const t=e.message.toLowerCase();return t.includes("network")||t.includes("timeout")||t.includes("abort")}return!1}async function xt(t,n){var a;if("undefined"!=typeof uni&&"function"==typeof e)return new Promise((a,o)=>{const i=(e=>{if(e){if(e instanceof Headers){const t={};return e.forEach((e,n)=>{t[n]=e}),t}return Array.isArray(e)?Object.fromEntries(e):e}})(n.headers),r=String((null==i?void 0:i["Content-Type"])||(null==i?void 0:i["content-type"])||"");let l=n.body;if("string"==typeof l&&r.includes("application/json"))try{l=JSON.parse(l)}catch{}e({url:t,method:n.method||"GET",data:l,header:i,success:e=>{var t,n;if((e.statusCode??0)>=200&&(e.statusCode??0)<300)a(e.data);else{const a=(null==(n=null==(t=e.data)?void 0:t.error)?void 0:n.message)||`Request failed: ${e.statusCode}`;o(new Mt(a,e.statusCode??0))}},fail:e=>{o(new Error(e.errMsg||"Network error"))}})});const o="undefined"!=typeof window&&t.startsWith(window.location.origin),i=await fetch(t,{credentials:o?"include":"same-origin",...n});if(!i.ok){const e=await i.json().catch(()=>({}));throw new Mt((null==(a=e.error)?void 0:a.message)||`Request failed: ${t}`,i.status)}return i.json()}async function Pt(e){return async function(e,t={}){var n,a;const o=e.startsWith("http")?e:`https://api.neo-service-layer.io${e}`,i={...Nt,...t.retryConfig};let r=null;for(let s=0;s<=i.maxRetries;s++){if(null==(n=t.signal)?void 0:n.aborted)throw new Error("Request cancelled");try{return await xt(o,t)}catch(l){r=l instanceof Error?l:new Error(String(l));const e=l instanceof Mt?l.statusCode:void 0;if(null==(a=t.signal)?void 0:a.aborted)throw r;if(s>=i.maxRetries)break;if(!Rt(l,e))break;const n=Bt(s,i);await new Promise(e=>setTimeout(e,n))}}throw r||new Error("Request failed")}(e,{method:"GET"})}let $t=null;function Lt(){const e=t(null),o=t({}),i=t(null),r=t(null),l=t(null),s=t([]),c=t(!1),u=t(!1),d=t(null),f=t(!1),p=t(null),g=t=>{t.connected&&t.address?(e.value=t.address,c.value=!0):(e.value=null,c.value=!1),i.value=t.chainId??null,r.value=t.chainType??null,o.value=(e=>{if(!e)return{};if(e.balances&&Object.keys(e.balances).length>0)return{...e.balances};if(e.balance){const t={};return t[e.balance.nativeSymbol||("neo-n3"===e.chainType?"GAS":"NATIVE")]=e.balance.native||"0",(e.balance.governance||e.balance.governanceSymbol)&&(t[e.balance.governanceSymbol||("neo-n3"===e.chainType?"NEO":"GOV")]=e.balance.governance||"0"),t}return{}})(t)},h=e=>{e&&(l.value=e.chainId??null,s.value=Array.isArray(e.supportedChains)?e.supportedChains:[])},v=async()=>{var e;const t=await It(),n=null==(e=t.getConfig)?void 0:e.call(t);return h(n),n},w=async e=>{const t=await It();if(!t.wallet.switchChain)throw new Error("switchChain not supported by SDK");await t.wallet.switchChain(e),i.value=e};let m=null;return n(()=>{var t;g(Et),t=e=>{g(e)},At.add(t),t(Et),m=()=>At.delete(t);const n=Ct();(null==n?void 0:n.getConfig)&&h(n.getConfig()),n&&!c.value&&(e=>e?($t||($t=e.wallet.getAddress().then(e=>e||null).catch(e=>{const t=e instanceof Error?e.message:String(e);return console.debug("[MiniApp SDK] Fallback wallet connection failed:",t),null}).finally(()=>{$t=null})),$t):Promise.resolve(null))(n).then(t=>{var a;if(!c.value&&t){e.value=t,c.value=!0;const o=null==(a=n.getConfig)?void 0:a.call(n);i.value=(null==o?void 0:o.chainId)??null,r.value=(null==o?void 0:o.chainType)??null,h(o)}}),It().then(e=>{var t;return h(null==(t=e.getConfig)?void 0:t.call(e))}).catch(()=>{})}),a(()=>{m&&m()}),{address:e,chainId:i,chainType:r,appChainId:l,supportedChains:s,balances:o,isConnected:c,isLoading:u,error:d,showConnectionPrompt:f,connectionPromptMessage:p,connect:async()=>{var t;u.value=!0,d.value=null;try{const n=await It(),a=await n.wallet.getAddress();if(!a)throw new Error("wallet returned empty address");e.value=a,c.value=!0;const o=null==(t=n.getConfig)?void 0:t.call(n);i.value=(null==o?void 0:o.chainId)??null,r.value=(null==o?void 0:o.chainType)??null,h(o)}catch(n){d.value=n}finally{u.value=!1}},invokeIntent:async e=>{var t;const n=Ct();if(!(null==(t=null==n?void 0:n.wallet)?void 0:t.invokeIntent))throw new Error("invokeIntent not available");return n.wallet.invokeIntent(e)},invokeContract:async e=>{var t;const n=await It(),a=null==(t=n.getConfig)?void 0:t.call(n),o=e.contractAddress||e.scriptHash||e.contractHash,i=e.method||e.operation;if(!o||!i)throw new Error("contract address and method required");return n.invoke("invokeFunction",{contract:o,method:i,args:e.args,chainId:null==a?void 0:a.chainId,chainType:null==a?void 0:a.chainType})},invokeRead:async e=>{var t;const n=await It(),a=null==(t=n.getConfig)?void 0:t.call(n),o=e.contractAddress||e.scriptHash||e.contractHash||(null==a?void 0:a.contractAddress),i=e.method||e.operation;if(!o)throw new Error("contract address not configured");if(!i)throw new Error("method required");return n.invoke("invokeRead",{contract:o,method:i,args:e.args||[],chainId:e.chainId||(null==a?void 0:a.chainId),chainType:e.chainType||(null==a?void 0:a.chainType)})},getContractAddress:async()=>{var e,t,n,a,o;const i=await It(),r=null==(e=i.getConfig)?void 0:e.call(i);if(null==r?void 0:r.contractAddress)return r.contractAddress;if((null==r?void 0:r.chainId)&&(null==(n=null==(t=null==r?void 0:r.chainContracts)?void 0:t[r.chainId])?void 0:n.address))return r.chainContracts[r.chainId].address||null;if(i.invoke)try{const e=await i.invoke("getConfig");if(null==e?void 0:e.contractAddress)return e.contractAddress;if((null==e?void 0:e.chainId)&&(null==(o=null==(a=null==e?void 0:e.chainContracts)?void 0:a[e.chainId])?void 0:o.address))return e.chainContracts[e.chainId].address||null}catch{}return null},getAppConfig:v,getAddress:async()=>(await It()).wallet.getAddress(),signMessage:async e=>{var t;const n=await It();if(!(null==(t=n.wallet)?void 0:t.signMessage))throw new Error("signMessage not available");return n.wallet.signMessage(e)},switchChain:w,switchToAppChain:async e=>{const t=await v(),n=(null==t?void 0:t.chainId)||(Array.isArray(null==t?void 0:t.supportedChains)&&t.supportedChains.length>0?t.supportedChains[0]:null)||e||null;if(!n)throw new Error("app chain not configured");await w(n)},getBalance:async e=>{var t;u.value=!0,d.value=null;try{const n=await It(),a=null==(t=n.getConfig)?void 0:t.call(n),r=(null==a?void 0:a.chainId)||i.value,l=r?`?chain_id=${encodeURIComponent(r)}`:"",s=await Pt(`/wallet-balance${l}`),c=(null==s?void 0:s.balances)??{};return o.value=c,e?c[e]||"0":c}catch(n){throw d.value=n,n}finally{u.value=!1}},getTransactions:async(e=20)=>{var t;u.value=!0,d.value=null;try{const n=Number.isNaN(e)||e<1?20:Math.min(e,100),a=await It(),o=null==(t=a.getConfig)?void 0:t.call(a),r=(null==o?void 0:o.chainId)||i.value,l=new URLSearchParams({limit:String(n)});r&&l.set("chain_id",r);const s=await Pt(`/wallet-transactions?${l.toString()}`);return(null==s?void 0:s.transactions)??[]}catch(n){throw d.value=n,n}finally{u.value=!1}},invoke:async(e,t)=>(await It()).invoke(e,t),requireConnection:(e={})=>{const{showPrompt:t=!0,errorMessage:n}=e;return!!c.value||(t&&(p.value=n||null,f.value=!0),!1)},closeConnectionPrompt:()=>{f.value=!1,p.value=null},clearError:()=>{d.value=null}}}t("en");const Dt=U(o({__name:"AppIcon",props:{name:{},size:{default:20},label:{},decorative:{type:Boolean,default:!0}},setup(e){const t=e,a={home:"ðŸ ",settings:"âš™ï¸",user:"ðŸ‘¤",wallet:"ðŸ’¼",book:"ðŸ“–",trophy:"ðŸ†",star:"â­",heart:"â¤ï¸",check:"âœ“",clock:"ðŸ•",plus:"âž•",add:"âž•",close:"âœ•",x:"âœ•",menu:"â˜°",activity:"ðŸ“¡",award:"ðŸ…",archive:"ðŸ—„ï¸",rocket:"ðŸš€",cart:"ðŸ›’",ticket:"ðŸŽŸï¸",bag:"ðŸ‘œ",trending:"ðŸ“ˆ",chart:"ðŸ“Š",calendar:"ðŸ“…",search:"ðŸ”",filter:"ðŸ”½",edit:"âœï¸",delete:"ðŸ—‘ï¸",copy:"ðŸ“‹",share:"ðŸ“¤",download:"â¬‡ï¸",upload:"â¬†ï¸",success:"âœ“",error:"âœ•",warning:"âš ï¸",info:"â„¹ï¸",loading:"â³",neo:"ðŸ’Ž",gas:"â›½",contract:"ðŸ“œ",chain:"â›“ï¸",block:"ðŸ§±",helpful:"ðŸ¤",generous:"ðŸŽ",verified:"âœ“",contributor:"â­",champion:"ðŸ†",legend:"ðŸ‘‘",game:"ðŸŽ®",stats:"ðŸ“Š",docs:"ðŸ“„",about:"â„¹ï¸",contact:"âœ‰ï¸"},o={logout:"â†ª",back:"â†",forward:"â†’",arrowUp:"â†‘",arrowDown:"â†“",arrowLeft:"â†",arrowRight:"â†’",refresh:"â†»"},h=i(()=>{if(!t.label)return t.decorative?"true":void 0}),v=i(()=>t.decorative?"presentation":void 0),w=i(()=>t.label?t.label:t.decorative?void 0:`${t.name} icon`),m=i(()=>t.size<=16?"icon-sm":t.size<=20?"icon-md":t.size<=24?"icon-lg":"icon-xl"),y=i(()=>{if(!m.value||"icon-md"===m.value)return{};const e=t.size;return{width:`${e}px`,height:`${e}px`,fontSize:.6*e+"px"}}),b=i(()=>a[t.name]),k=i(()=>o[t.name]);return n(()=>{const e=t.name in a,n=t.name in o;e||n||console.warn(`[AppIcon] Unknown icon name "${t.name}". Using fallback (first letter). Available icons: ${[...Object.keys(a),...Object.keys(o)].sort().join(", ")}`)}),(e,t)=>{const n=d,a=l;return g(),r(a,{class:c(["app-icon",`icon-${e.name}`,m.value]),style:s(y.value),"aria-hidden":h.value,"aria-label":w.value,role:v.value},{default:u(()=>[b.value?(g(),r(n,{key:0,class:"icon-emoji","aria-hidden":!0},{default:u(()=>[f(p(b.value),1)]),_:1})):k.value?(g(),r(n,{key:1,class:"icon-text","aria-hidden":!0},{default:u(()=>[f(p(k.value),1)]),_:1})):(g(),r(n,{key:2,class:"icon-fallback","aria-label":`Icon: ${e.name}`},{default:u(()=>[f(p(e.name.charAt(0).toUpperCase()),1)]),_:1},8,["aria-label"]))]),_:1},8,["class","style","aria-hidden","aria-label","role"])}}}),[["__scopeId","data-v-07cee3d4"]]),Ut=U(o({__name:"NavBar",props:{tabs:{},activeTab:{}},emits:["change"],setup(e,{emit:t}){const a=e,o=t,i=e=>{o("change",e)};return n(()=>{if(!a.tabs||0===a.tabs.length)return void console.warn("[NavBar] No tabs provided - navigation will be empty");a.tabs.some((e,t)=>a.tabs.findIndex(t=>t.id===e.id)!==t)&&console.error("[NavBar] Duplicate tab IDs detected - navigation may not work correctly");!a.tabs.some(e=>e.id===a.activeTab)&&a.activeTab&&console.warn(`[NavBar] Active tab "${a.activeTab}" not found in tabs array. Available tabs: ${a.tabs.map(e=>e.id).join(", ")}`)}),(e,t)=>{const n=l,a=d;return g(),r(n,{class:"navbar",role:"navigation","aria-label":"Bottom navigation"},{default:u(()=>[(g(!0),h(v,null,w(e.tabs,t=>(g(),r(n,{key:t.id,class:c(["nav-item",e.activeTab===t.id&&"active"]),role:"menuitem",tabindex:e.activeTab===t.id?0:-1,"aria-label":t.label,"aria-selected":e.activeTab===t.id,onClick:e=>i(t.id),onKeydown:[m(e=>i(t.id),["enter"]),m(y(e=>i(t.id),["prevent"]),["space"])]},{default:u(()=>[b(n,{class:"nav-icon","aria-hidden":"true"},{default:u(()=>[b(Dt,{name:t.icon,size:22},null,8,["name"])]),_:2},1024),b(a,{class:"nav-label"},{default:u(()=>[f(p(t.label),1)]),_:2},1024)]),_:2},1032,["class","tabindex","aria-label","aria-selected","onClick","onKeydown"]))),128))]),_:1})}}}),[["__scopeId","data-v-80051b5c"]]),Ot=U(o({__name:"TopNavBar",props:{title:{},showBack:{type:Boolean}},emits:["back"],setup:e=>(e,t)=>{const n=l,a=d;return g(),r(n,{class:"top-navbar",role:"navigation","aria-label":e.title},{default:u(()=>[b(n,{class:"nav-left"},{default:u(()=>[e.showBack?(g(),r(n,{key:0,class:"nav-btn",role:"button",tabindex:"0","aria-label":"Go back",onClick:t[0]||(t[0]=t=>e.$emit("back")),onKeydown:[t[1]||(t[1]=m(t=>e.$emit("back"),["enter"])),t[2]||(t[2]=m(y(t=>e.$emit("back"),["prevent"]),["space"]))]},{default:u(()=>[b(Dt,{name:"arrow-left",size:20})]),_:1})):k("",!0)]),_:1}),b(n,{class:"nav-center"},{default:u(()=>[b(a,{class:"nav-title"},{default:u(()=>[f(p(e.title),1)]),_:1})]),_:1}),b(n,{class:"nav-right"},{default:u(()=>[_(e.$slots,"right",{},void 0,!0)]),_:3})]),_:3},8,["aria-label"])}}),[["__scopeId","data-v-eddb2273"]]),Vt=U(o({__name:"AppLayout",props:{title:{default:""},showTopNav:{type:Boolean,default:!1},showBack:{type:Boolean,default:!1},tabs:{default:()=>[]},activeTab:{default:""},allowScroll:{type:Boolean,default:!0},theme:{default:""}},emits:["back","tab-change"],setup(e,{emit:a}){const o=t(!1),s=e,d=a,f=i(()=>s.activeTab||""),p=()=>{d("back");const e=I();e&&e.length>1&&C({delta:1})};return n(()=>{if(o.value="undefined"!=typeof window&&"1"===new URLSearchParams(window.location.search).get("embedded"),s.tabs&&s.tabs.length>0&&s.activeTab){s.tabs.some(e=>e.id===s.activeTab)||console.warn(`[AppLayout] Active tab "${s.activeTab}" not found in tabs array. Available tabs: ${s.tabs.map(e=>e.id).join(", ")}`)}o.value&&console.log("[AppLayout] Running in embedded mode")}),(e,t)=>{const n=l;return g(),r(n,{class:c(["mobile-container",o.value&&"embedded"])},{default:u(()=>[b(n,{class:"aspect-wrapper"},{default:u(()=>[b(n,{class:"app-layout",role:"application","aria-label":"Application layout"},{default:u(()=>[e.showTopNav?(g(),r(Ot,{key:0,title:e.title??"","show-back":e.showBack,onBack:p},null,8,["title","show-back"])):k("",!0),b(n,{class:c(["app-content",!e.allowScroll&&"no-scroll"]),tabindex:e.allowScroll?-1:0},{default:u(()=>[_(e.$slots,"default",{},void 0,!0)]),_:3},8,["class","tabindex"]),e.tabs&&e.tabs.length>0?(g(),r(Ut,{key:1,tabs:e.tabs,"active-tab":f.value,onChange:t[0]||(t[0]=t=>e.$emit("tab-change",t))},null,8,["tabs","active-tab"])):k("",!0)]),_:3})]),_:3})]),_:3},8,["class"])}}}),[["__scopeId","data-v-2af4ca89"]]),Kt=5e3,zt=1e4,Ft=100,jt=["https://neomini.app","https://miniapp.neo.org","https://testnet.miniapp.neo.org"];const Ht=new class{constructor(){this.dynamicOrigins=new Set,this.baseOrigins=new Set([...jt])}getSelfOrigin(){if("undefined"==typeof window)return null;try{const e=new URL(window.location.href);if("null"===e.origin)return null;if("http:"===e.protocol||"https:"===e.protocol)return e.origin}catch{}return null}getReferrerOrigin(){if("undefined"==typeof document||!document.referrer)return null;try{return new URL(document.referrer).origin}catch{return null}}getAllowedOrigins(){const e=new Set(this.baseOrigins);this.dynamicOrigins.forEach(t=>e.add(t));const t=this.getReferrerOrigin();t&&this.baseOrigins.has(t)&&e.add(t);const n=this.getSelfOrigin();if(n&&e.add(n),"undefined"!=typeof window){const t=window.location.hostname;"localhost"!==t&&"127.0.0.1"!==t||e.add(window.location.origin)}return e}isValid(e){return!(!e||"null"===e)&&this.getAllowedOrigins().has(e)}getTargetOrigin(){var e;const t=this.getReferrerOrigin();if(t&&this.baseOrigins.has(t))return t;try{if("undefined"!=typeof window&&window.parent!==window&&(null==(e=window.location.ancestorOrigins)?void 0:e.length)>0){const e=window.location.ancestorOrigins[0];if(this.baseOrigins.has(e))return e}}catch{}const n=this.getSelfOrigin();if(n)return n;if("undefined"!=typeof window){const e=window.location.hostname;if("localhost"===e||"127.0.0.1"===e)return window.location.origin}throw new Error("Cannot determine safe target origin - no valid origin found")}getSafeTargetOrigin(){try{const e=this.getTargetOrigin();if(e&&"null"!==e)return e}catch{}if("undefined"!=typeof window&&window.parent!==window){const e=window.__MINIAPP_PARENT_ORIGIN__;if("string"==typeof e&&e&&this.baseOrigins.has(e))return e;throw new Error("Cannot communicate securely with parent - origin unknown. Ensure host app sets __MINIAPP_PARENT_ORIGIN__ or uses a supported browser.")}throw new Error("Cannot determine safe target origin - origin is null or undefined")}addDynamicOrigin(e){e&&"null"!==e&&this.dynamicOrigins.add(e)}};let qt=null;function Gt(e){const t=null==e?void 0:e.layout;if("web"===t||"mobile"===t)return t;if("undefined"!=typeof window){const e=new URLSearchParams(window.location.search).get("layout");if("web"===e||"mobile"===e)return e;if(window.ReactNativeWebView)return"mobile"}return"web"}function Jt(e){if(!e||"object"!=typeof e)return!1;const t="function"==typeof e.invoke&&"function"==typeof e.getConfig,n="object"==typeof e.wallet||"object"==typeof e.payments;return t||n}function Wt(e=Kt){return new Promise((t,n)=>{if("undefined"==typeof window)return void n(new Error("SDK not available in SSR"));if(window.MiniAppSDK)return Jt(window.MiniAppSDK)?void t(window.MiniAppSDK):void n(new Error("SDK validation failed"));const a=setTimeout(()=>{if(window.removeEventListener("miniapp-sdk-ready",o),window.parent!==window){const e=function(){const e=Ht.getSafeTargetOrigin();let t=0;const n=(n,...a)=>new Promise((o,i)=>{const r="undefined"!=typeof crypto&&crypto.getRandomValues?Array.from(crypto.getRandomValues(new Uint8Array(4)),e=>e.toString(16).padStart(2,"0")).join(""):Math.random().toString(36).slice(2,10),l=`sdk-${++t}-${Date.now()}-${r}`,s=setTimeout(()=>{window.removeEventListener("message",c),i(new Error("SDK invoke timeout"))},zt),c=e=>{var t,n;Ht.isValid(e.origin)&&e.source===window.parent&&"miniapp_sdk_response"===(null==(t=e.data)?void 0:t.type)&&(null==(n=e.data)?void 0:n.id)===l&&(clearTimeout(s),window.removeEventListener("message",c),e.data.ok?o(e.data.result):i(new Error(e.data.error||"SDK call failed")))};window.addEventListener("message",c),window.parent.postMessage({type:"miniapp_sdk_request",id:l,method:n,params:a},e)});return{invoke:n,getConfig:()=>qt?{...qt,layout:Gt(qt)}:"undefined"!=typeof window&&window.__MINIAPP_CONFIG__?(qt=window.__MINIAPP_CONFIG__,{...qt,layout:Gt(qt??void 0)}):{appId:"",contractAddress:null,chainId:null,chainType:void 0,supportedChains:[],layout:Gt(),debug:!1},getAddress:()=>n("getAddress"),wallet:{getAddress:()=>n("wallet.getAddress"),switchChain:e=>n("wallet.switchChain",e),invokeIntent:e=>n("wallet.invokeIntent",e),signMessage:e=>n("wallet.signMessage",e)},payments:{payGAS:(e,t,a)=>n("payments.payGAS",e,t,a),payGASAndInvoke:(e,t,a)=>n("payments.payGASAndInvoke",e,t,a)},governance:{vote:(e,t,a,o)=>n("governance.vote",e,t,a,o),voteAndInvoke:(e,t,a,o)=>n("governance.voteAndInvoke",e,t,a,o),getCandidates:()=>n("governance.getCandidates")},rng:{requestRandom:e=>n("rng.requestRandom",e)},datafeed:{getPrice:e=>n("datafeed.getPrice",e),getPrices:()=>n("datafeed.getPrices"),getNetworkStats:()=>n("datafeed.getNetworkStats"),getRecentTransactions:e=>n("datafeed.getRecentTransactions",e)},stats:{getMyUsage:(e,t)=>n("stats.getMyUsage",e,t)},events:{list:e=>n("events.list",e),emit:(e,t)=>n("events.emit",e,t)},transactions:{list:e=>n("transactions.list",e)},automation:{register:(e,t,a,o)=>n("automation.register",e,t,a,o),unregister:e=>n("automation.unregister",e),status:e=>n("automation.status",e),list:()=>n("automation.list"),update:(e,t,a)=>n("automation.update",e,t,a),enable:e=>n("automation.enable",e),disable:e=>n("automation.disable",e),logs:(e,t)=>n("automation.logs",e,t)},share:{openModal:e=>n("share.openModal",e),getUrl:e=>n("share.getUrl",e),copy:e=>n("share.copy",e)}}}();window.MiniAppSDK=e,e.invoke("getConfig").then(e=>{e&&"object"==typeof e&&(qt=e)}).catch(()=>{}),t(e)}else n(new Error("SDK timeout"))},e),o=()=>{if(clearTimeout(a),window.removeEventListener("miniapp-sdk-ready",o),window.MiniAppSDK){if(!Jt(window.MiniAppSDK))return void n(new Error("SDK validation failed"));t(window.MiniAppSDK)}else n(new Error("SDK not found"))};window.addEventListener("miniapp-sdk-ready",o)})}function Yt(){return"undefined"==typeof window?null:window.MiniAppSDK??null}const Qt=new Set;let Zt={connected:!1,address:null,balance:null},Xt=null,en=!1;"undefined"!=typeof window&&("undefined"!=typeof window&&(en&&Xt||(Xt=e=>{if(e.source!==window.parent)return;if(!Ht.isValid(e.origin))return;const t=e.data;t&&"object"==typeof t&&("miniapp_config"!==t.type?"miniapp_wallet_state_change"===t.type&&(Zt={connected:Boolean(t.connected),address:t.address||null,chainId:t.chainId??null,chainType:t.chainType??null,balance:t.balance||t.multiChainBalance||null,balances:t.balances||void 0},Qt.forEach(e=>{try{e(Zt)}catch(t){console.error("[MiniApp SDK] Wallet state listener error:",t)}})):t.config&&"object"==typeof t.config&&(qt=t.config))},window.addEventListener("message",Xt),en=!0)),setTimeout(function(){if("undefined"==typeof window)return;const e=Ht.getSafeTargetOrigin();try{window.parent.postMessage({type:"miniapp_ready"},e)}catch{}},Ft));class tn extends Error{constructor(e,t){super(e),this.statusCode=t,this.name="HttpError"}}const nn={maxRetries:3,baseDelayMs:1e3,maxDelayMs:1e4};function an(e,t){return Math.min(t.baseDelayMs*Math.pow(2,e),t.maxDelayMs)*(.75+.5*Math.random())}function on(e,t){if(t&&t>=500)return!0;if(429===t)return!0;if(e instanceof Error){const t=e.message.toLowerCase();return t.includes("network")||t.includes("timeout")||t.includes("abort")}return!1}async function rn(t,n){var a;if("undefined"!=typeof uni&&"function"==typeof e)return new Promise((a,o)=>{const i=(e=>{if(e){if(e instanceof Headers){const t={};return e.forEach((e,n)=>{t[n]=e}),t}return Array.isArray(e)?Object.fromEntries(e):e}})(n.headers),r=String((null==i?void 0:i["Content-Type"])||(null==i?void 0:i["content-type"])||"");let l=n.body;if("string"==typeof l&&r.includes("application/json"))try{l=JSON.parse(l)}catch{}e({url:t,method:n.method||"GET",data:l,header:i,success:e=>{var t,n;if((e.statusCode??0)>=200&&(e.statusCode??0)<300)a(e.data);else{const a=(null==(n=null==(t=e.data)?void 0:t.error)?void 0:n.message)||`Request failed: ${e.statusCode}`;o(new tn(a,e.statusCode??0))}},fail:e=>{o(new Error(e.errMsg||"Network error"))}})});const o="undefined"!=typeof window&&t.startsWith(window.location.origin),i=await fetch(t,{credentials:o?"include":"same-origin",...n});if(!i.ok){const e=await i.json().catch(()=>({}));throw new tn((null==(a=e.error)?void 0:a.message)||`Request failed: ${t}`,i.status)}return i.json()}async function ln(e){return async function(e,t={}){var n,a;const o=e.startsWith("http")?e:`https://api.neo-service-layer.io${e}`,i={...nn,...t.retryConfig};let r=null;for(let s=0;s<=i.maxRetries;s++){if(null==(n=t.signal)?void 0:n.aborted)throw new Error("Request cancelled");try{return await rn(o,t)}catch(l){r=l instanceof Error?l:new Error(String(l));const e=l instanceof tn?l.statusCode:void 0;if(null==(a=t.signal)?void 0:a.aborted)throw r;if(s>=i.maxRetries)break;if(!on(l,e))break;const n=an(s,i);await new Promise(e=>setTimeout(e,n))}}throw r||new Error("Request failed")}(e,{method:"GET"})}let sn=null;function cn(){const e=t(null),o=t({}),i=t(null),r=t(null),l=t(null),s=t([]),c=t(!1),u=t(!1),d=t(null),f=t(!1),p=t(null),g=t=>{t.connected&&t.address?(e.value=t.address,c.value=!0):(e.value=null,c.value=!1),i.value=t.chainId??null,r.value=t.chainType??null,o.value=(e=>{if(!e)return{};if(e.balances&&Object.keys(e.balances).length>0)return{...e.balances};if(e.balance){const t={};return t[e.balance.nativeSymbol||("neo-n3"===e.chainType?"GAS":"NATIVE")]=e.balance.native||"0",(e.balance.governance||e.balance.governanceSymbol)&&(t[e.balance.governanceSymbol||("neo-n3"===e.chainType?"NEO":"GOV")]=e.balance.governance||"0"),t}return{}})(t)},h=e=>{e&&(l.value=e.chainId??null,s.value=Array.isArray(e.supportedChains)?e.supportedChains:[])},v=async()=>{var e;const t=await Wt(),n=null==(e=t.getConfig)?void 0:e.call(t);return h(n),n},w=async e=>{const t=await Wt();if(!t.wallet.switchChain)throw new Error("switchChain not supported by SDK");await t.wallet.switchChain(e),i.value=e};let m=null;return n(()=>{var t;g(Zt),t=e=>{g(e)},Qt.add(t),t(Zt),m=()=>Qt.delete(t);const n=Yt();(null==n?void 0:n.getConfig)&&h(n.getConfig()),n&&!c.value&&(e=>e?(sn||(sn=e.wallet.getAddress().then(e=>e||null).catch(e=>{const t=e instanceof Error?e.message:String(e);return console.debug("[MiniApp SDK] Fallback wallet connection failed:",t),null}).finally(()=>{sn=null})),sn):Promise.resolve(null))(n).then(t=>{var a;if(!c.value&&t){e.value=t,c.value=!0;const o=null==(a=n.getConfig)?void 0:a.call(n);i.value=(null==o?void 0:o.chainId)??null,r.value=(null==o?void 0:o.chainType)??null,h(o)}}),Wt().then(e=>{var t;return h(null==(t=e.getConfig)?void 0:t.call(e))}).catch(()=>{})}),a(()=>{m&&m()}),{address:e,chainId:i,chainType:r,appChainId:l,supportedChains:s,balances:o,isConnected:c,isLoading:u,error:d,showConnectionPrompt:f,connectionPromptMessage:p,connect:async()=>{var t;u.value=!0,d.value=null;try{const n=await Wt(),a=await n.wallet.getAddress();if(!a)throw new Error("wallet returned empty address");e.value=a,c.value=!0;const o=null==(t=n.getConfig)?void 0:t.call(n);i.value=(null==o?void 0:o.chainId)??null,r.value=(null==o?void 0:o.chainType)??null,h(o)}catch(n){d.value=n}finally{u.value=!1}},invokeIntent:async e=>{var t;const n=Yt();if(!(null==(t=null==n?void 0:n.wallet)?void 0:t.invokeIntent))throw new Error("invokeIntent not available");return n.wallet.invokeIntent(e)},invokeContract:async e=>{var t;const n=await Wt(),a=null==(t=n.getConfig)?void 0:t.call(n),o=e.contractAddress||e.scriptHash||e.contractHash,i=e.method||e.operation;if(!o||!i)throw new Error("contract address and method required");return n.invoke("invokeFunction",{contract:o,method:i,args:e.args,chainId:null==a?void 0:a.chainId,chainType:null==a?void 0:a.chainType})},invokeRead:async e=>{var t;const n=await Wt(),a=null==(t=n.getConfig)?void 0:t.call(n),o=e.contractAddress||e.scriptHash||e.contractHash||(null==a?void 0:a.contractAddress),i=e.method||e.operation;if(!o)throw new Error("contract address not configured");if(!i)throw new Error("method required");return n.invoke("invokeRead",{contract:o,method:i,args:e.args||[],chainId:e.chainId||(null==a?void 0:a.chainId),chainType:e.chainType||(null==a?void 0:a.chainType)})},getContractAddress:async()=>{var e,t,n,a,o;const i=await Wt(),r=null==(e=i.getConfig)?void 0:e.call(i);if(null==r?void 0:r.contractAddress)return r.contractAddress;if((null==r?void 0:r.chainId)&&(null==(n=null==(t=null==r?void 0:r.chainContracts)?void 0:t[r.chainId])?void 0:n.address))return r.chainContracts[r.chainId].address||null;if(i.invoke)try{const e=await i.invoke("getConfig");if(null==e?void 0:e.contractAddress)return e.contractAddress;if((null==e?void 0:e.chainId)&&(null==(o=null==(a=null==e?void 0:e.chainContracts)?void 0:a[e.chainId])?void 0:o.address))return e.chainContracts[e.chainId].address||null}catch{}return null},getAppConfig:v,getAddress:async()=>(await Wt()).wallet.getAddress(),signMessage:async e=>{var t;const n=await Wt();if(!(null==(t=n.wallet)?void 0:t.signMessage))throw new Error("signMessage not available");return n.wallet.signMessage(e)},switchChain:w,switchToAppChain:async e=>{const t=await v(),n=(null==t?void 0:t.chainId)||(Array.isArray(null==t?void 0:t.supportedChains)&&t.supportedChains.length>0?t.supportedChains[0]:null)||e||null;if(!n)throw new Error("app chain not configured");await w(n)},getBalance:async e=>{var t;u.value=!0,d.value=null;try{const n=await Wt(),a=null==(t=n.getConfig)?void 0:t.call(n),r=(null==a?void 0:a.chainId)||i.value,l=r?`?chain_id=${encodeURIComponent(r)}`:"",s=await ln(`/wallet-balance${l}`),c=(null==s?void 0:s.balances)??{};return o.value=c,e?c[e]||"0":c}catch(n){throw d.value=n,n}finally{u.value=!1}},getTransactions:async(e=20)=>{var t;u.value=!0,d.value=null;try{const n=Number.isNaN(e)||e<1?20:Math.min(e,100),a=await Wt(),o=null==(t=a.getConfig)?void 0:t.call(a),r=(null==o?void 0:o.chainId)||i.value,l=new URLSearchParams({limit:String(n)});r&&l.set("chain_id",r);const s=await ln(`/wallet-transactions?${l.toString()}`);return(null==s?void 0:s.transactions)??[]}catch(n){throw d.value=n,n}finally{u.value=!1}},invoke:async(e,t)=>(await Wt()).invoke(e,t),requireConnection:(e={})=>{const{showPrompt:t=!0,errorMessage:n}=e;return!!c.value||(t&&(p.value=n||null,f.value=!0),!1)},closeConnectionPrompt:()=>{f.value=!1,p.value=null},clearError:()=>{d.value=null}}}t("en");const un=U(o({__name:"ChainWarning",props:{title:{default:"Wrong Network"},message:{default:"Switch to Neo N3 Mainnet to continue."},buttonText:{default:"Switch Network"},show:{type:Boolean,default:void 0}},emits:["switch","switch-complete","switch-error"],setup(e,{emit:n}){const a=e,o=n,{showWarning:s,switchToAppChain:c}=function(){const{switchToAppChain:e}=cn();return{showWarning:i(()=>!1),switchToAppChain:async()=>{try{await e()}catch(t){throw console.error("[useChainValidation] Failed to switch chain:",t),t}}}}(),h=t(!1),v=i(()=>void 0!==a.show?a.show:s.value),w=async()=>{if(!h.value){h.value=!0,o("switch");try{await c(),o("switch-complete")}catch(e){const t=e instanceof Error?e:new Error(String(e));o("switch-error",t),console.error("[ChainWarning] Failed to switch chain:",t)}finally{h.value=!1}}};return(e,t)=>{const n=d,a=l;return v.value?(g(),r(a,{key:0,class:"chain-warning px-4 mb-4"},{default:u(()=>[b(A(pn),{variant:"danger"},{default:u(()=>[b(a,{class:"flex flex-col items-center gap-2 py-1"},{default:u(()=>[b(n,{class:"text-center font-bold text-red-400"},{default:u(()=>[f(p(e.title),1)]),_:1}),e.message?(g(),r(n,{key:0,class:"text-xs text-center opacity-80 text-white"},{default:u(()=>[f(p(e.message),1)]),_:1})):k("",!0),b(A(gn),{size:"sm",variant:"secondary",class:"mt-2",loading:h.value,onClick:w},{default:u(()=>[f(p(e.buttonText),1)]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})):k("",!0)}}}),[["__scopeId","data-v-3dc811c7"]]),dn=U(o({__name:"DesktopLayout",props:{title:{default:""},tabs:{default:()=>[]},activeTab:{default:""},allowScroll:{type:Boolean,default:!0},theme:{default:""}},emits:["tab-change"],setup(e,{emit:t}){const n=e,a=t,o=i(()=>n.theme?`theme-${n.theme}`:""),s=E(),I=i(()=>Boolean(s["desktop-sidebar"])),C=e=>{a("tab-change",e)};return(()=>{if(!n.tabs||0===n.tabs.length)return console.warn("[DesktopLayout] No tabs provided - navigation will be hidden"),!1;!n.tabs.some((e,t)=>n.tabs.findIndex(t=>t.id===e.id)!==t)||console.error("[DesktopLayout] Duplicate tab IDs detected - navigation may not work correctly")})(),(e,t)=>{const n=d,a=l;return g(),r(a,{class:c(["desktop-container",o.value])},{default:u(()=>[b(a,{class:"sidebar",role:"navigation","aria-label":"Main navigation"},{default:u(()=>[b(a,{class:"sidebar-header"},{default:u(()=>[b(n,{class:"brand-name"},{default:u(()=>[f("NeoHub")]),_:1}),b(n,{class:"brand-tagline"},{default:u(()=>[f("Miniapps")]),_:1})]),_:1}),b(a,{class:"sidebar-nav",role:"menubar","aria-label":"Navigation menu"},{default:u(()=>[(g(!0),h(v,null,w(e.tabs,t=>(g(),r(a,{key:t.id,class:c(["nav-item",e.activeTab===t.id&&"active"]),role:"menuitem",tabindex:e.activeTab===t.id?0:-1,"aria-label":t.label,"aria-current":e.activeTab===t.id?"page":void 0,onClick:e=>C(t.id),onKeydown:[m(e=>C(t.id),["enter"]),m(y(e=>C(t.id),["prevent"]),["space"])]},{default:u(()=>[b(a,{class:"nav-icon-wrapper"},{default:u(()=>[b(Dt,{name:t.icon,size:20},null,8,["name"])]),_:2},1024),b(n,{class:"nav-label"},{default:u(()=>[f(p(t.label),1)]),_:2},1024),e.activeTab===t.id?(g(),r(a,{key:0,class:"nav-indicator","aria-hidden":"true"})):k("",!0)]),_:2},1032,["class","tabindex","aria-label","aria-current","onClick","onKeydown"]))),128))]),_:1}),I.value?(g(),r(a,{key:0,class:"sidebar-panel",role:"complementary","aria-label":"Sidebar details"},{default:u(()=>[_(e.$slots,"desktop-sidebar",{},void 0,!0)]),_:3})):k("",!0),b(a,{class:"sidebar-footer"},{default:u(()=>[b(a,{class:"footer-status",role:"status","aria-live":"polite"},{default:u(()=>[b(a,{class:"status-dot online","aria-hidden":"true"}),b(n,{class:"status-text"},{default:u(()=>[f("Connected")]),_:1})]),_:1})]),_:1})]),_:3}),b(a,{class:"main-content-wrapper",role:"main"},{default:u(()=>[b(a,{class:"top-bar"},{default:u(()=>[b(a,{class:"top-bar-left"},{default:u(()=>[e.title?(g(),r(n,{key:0,class:"page-title"},{default:u(()=>[f(p(e.title),1)]),_:1})):k("",!0)]),_:1}),b(a,{class:"top-bar-right"},{default:u(()=>[_(e.$slots,"top-bar-actions",{},void 0,!0)]),_:3})]),_:3}),b(a,{class:c(["content-area",!e.allowScroll&&"no-scroll"]),tabindex:e.allowScroll?-1:0},{default:u(()=>[_(e.$slots,"default",{},void 0,!0)]),_:3},8,["class","tabindex"])]),_:3})]),_:3},8,["class"])}}}),[["__scopeId","data-v-a78cf158"]]),fn=o({__name:"ResponsiveLayout",props:{title:{default:""},tabs:{default:()=>[]},navItems:{default:()=>[]},activeTab:{default:""},allowScroll:{type:Boolean,default:!0},theme:{default:""},showTopNav:{type:Boolean,default:!1},showSidebar:{type:Boolean,default:!1},layout:{default:"default"},showBack:{type:Boolean,default:!1},desktopBreakpoint:{default:1024}},emits:["back","tab-change","navigate"],setup(e,{emit:o}){const l=e,s=o,c=t(!1),d=t(!1),f=()=>{if(!d.value)return;const e=window.innerWidth;c.value=e>=l.desktopBreakpoint};let p;const h=()=>{clearTimeout(p),p=window.setTimeout(()=>{f()},150)},v=i(()=>l.tabs&&l.tabs.length>0?l.tabs:l.navItems&&l.navItems.length>0?l.navItems.map(e=>({id:e.id??e.key??"",label:e.label,icon:e.icon})).filter(e=>Boolean(e.id)):[]),w=i(()=>c.value?dn:Vt),m=e=>{s("tab-change",e),s("navigate",e)};return T(c,(e,t)=>{t!==e&&d.value&&console.log(`[ResponsiveLayout] Layout mode changed: ${e?"desktop":"mobile"} (${window.innerWidth}px)`)}),n(()=>{d.value="undefined"!=typeof window,d.value&&(f(),window.addEventListener("resize",h))}),a(()=>{d.value&&(window.removeEventListener("resize",h),clearTimeout(p))}),(e,t)=>(g(),r(S(w.value),{title:e.title,tabs:v.value,"active-tab":e.activeTab,"allow-scroll":e.allowScroll,theme:e.theme,"show-top-nav":e.showTopNav,"show-back":e.showBack,onTabChange:m,onBack:t[0]||(t[0]=t=>e.$emit("back"))},{"top-bar-actions":u(()=>[_(e.$slots,"top-bar-actions")]),"desktop-sidebar":u(()=>[_(e.$slots,"desktop-sidebar")]),default:u(()=>[_(e.$slots,"default")]),_:3},40,["title","tabs","active-tab","allow-scroll","theme","show-top-nav","show-back"]))}}),pn=U(o({__name:"NeoCard",props:{title:{default:void 0},variant:{default:"default"},hoverable:{type:Boolean,default:!1},flat:{type:Boolean,default:!1}},emits:["click"],setup:e=>(e,t)=>{const n=d,a=l;return g(),r(a,{class:c(["neo-card",`neo-card--${e.variant}`,{"neo-card--hoverable":e.hoverable,"neo-card--flat":e.flat}]),role:e.hoverable?"button":void 0,tabindex:e.hoverable?0:void 0,onClick:t[0]||(t[0]=t=>e.hoverable&&e.$emit("click",t)),onKeydown:[t[1]||(t[1]=m(t=>e.hoverable&&e.$emit("click",t),["enter"])),t[2]||(t[2]=m(y(t=>e.hoverable&&e.$emit("click",t),["prevent"]),["space"]))]},{default:u(()=>[e.title||e.$slots.header?(g(),r(a,{key:0,class:"neo-card__header"},{default:u(()=>[e.title?(g(),r(n,{key:0,class:"neo-card__title"},{default:u(()=>[f(p(e.title),1)]),_:1})):k("",!0),_(e.$slots,"header",{},void 0,!0)]),_:3})):k("",!0),b(a,{class:"neo-card__body"},{default:u(()=>[_(e.$slots,"default",{},void 0,!0)]),_:3}),e.$slots.footer?(g(),r(a,{key:1,class:"neo-card__footer"},{default:u(()=>[_(e.$slots,"footer",{},void 0,!0)]),_:3})):k("",!0)]),_:3},8,["class","role","tabindex"])}}),[["__scopeId","data-v-3f370003"]]),gn=U(o({__name:"NeoButton",props:{variant:{default:"primary"},size:{default:"md"},block:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},ariaLabel:{default:void 0}},emits:["click"],setup:e=>(e,t)=>{const n=l,a=M;return g(),r(a,{class:c(["neo-btn",`neo-btn--${e.variant}`,`neo-btn--${e.size}`,{"neo-btn--block":e.block,"neo-btn--loading":e.loading}]),disabled:e.disabled||e.loading,"aria-busy":e.loading,"aria-disabled":e.disabled||e.loading,"aria-label":e.ariaLabel,onClick:t[0]||(t[0]=t=>e.$emit("click",t))},{default:u(()=>[e.loading?(g(),r(n,{key:0,class:"neo-btn__spinner"})):_(e.$slots,"default",{key:1},void 0,!0)]),_:3},8,["class","disabled","aria-busy","aria-disabled","aria-label"])}}),[["__scopeId","data-v-4b6100e3"]]),hn=U(o({__name:"NeoInput",props:{modelValue:{},type:{},label:{},placeholder:{},suffix:{},suffixIcon:{},hint:{},error:{},disabled:{type:Boolean}},emits:["update:modelValue","focus","blur"],setup(e){let t=0;const n="neo-input-"+ ++t;return(e,t)=>{const a=d,o=N,i=B,s=l;return g(),r(s,{class:c(["neo-input",{"neo-input--error":e.error,"neo-input--disabled":e.disabled}])},{default:u(()=>[e.label?(g(),r(a,{key:0,class:"neo-input__label"},{default:u(()=>[f(p(e.label),1)]),_:1})):k("",!0),b(s,{class:"neo-input__wrapper"},{default:u(()=>["textarea"===e.type?(g(),r(o,{key:0,value:e.modelValue,placeholder:e.placeholder,disabled:e.disabled,"aria-describedby":e.error?`${n}-error`:e.hint?`${n}-hint`:void 0,"aria-invalid":!!e.error,class:"neo-input__field neo-input__textarea",onInput:t[0]||(t[0]=t=>e.$emit("update:modelValue",t.target.value)),onFocus:t[1]||(t[1]=t=>e.$emit("focus",t)),onBlur:t[2]||(t[2]=t=>e.$emit("blur",t))},null,8,["value","placeholder","disabled","aria-describedby","aria-invalid"])):(g(),r(i,{key:1,value:e.modelValue,type:e.type,placeholder:e.placeholder,disabled:e.disabled,"aria-describedby":e.error?`${n}-error`:e.hint?`${n}-hint`:void 0,"aria-invalid":!!e.error,class:"neo-input__field",onInput:t[3]||(t[3]=t=>e.$emit("update:modelValue",t.target.value)),onFocus:t[4]||(t[4]=t=>e.$emit("focus",t)),onBlur:t[5]||(t[5]=t=>e.$emit("blur",t))},null,8,["value","type","placeholder","disabled","aria-describedby","aria-invalid"])),e.suffixIcon||e.suffix?(g(),r(s,{key:2,class:"neo-input__suffix"},{default:u(()=>[e.suffixIcon?(g(),r(A(Dt),{key:0,name:e.suffixIcon,size:18},null,8,["name"])):k("",!0),e.suffix?(g(),r(a,{key:1},{default:u(()=>[f(p(e.suffix),1)]),_:1})):k("",!0)]),_:1})):k("",!0)]),_:1}),e.error?(g(),r(a,{key:1,id:`${n}-error`,class:"neo-input__error",role:"alert"},{default:u(()=>[f(p(e.error),1)]),_:1},8,["id"])):e.hint?(g(),r(a,{key:2,id:`${n}-hint`,class:"neo-input__hint"},{default:u(()=>[f(p(e.hint),1)]),_:1},8,["id"])):k("",!0)]),_:1},8,["class"])}}}),[["__scopeId","data-v-fda1146f"]]),vn=U(o({__name:"NeoModal",props:{visible:{type:Boolean},title:{},variant:{},closeable:{type:Boolean}},emits:["close"],setup(e){const n=e,o=t(null);let i=null;return T(()=>n.visible,async e=>{var t,n,a,r;if(e){i="undefined"!=typeof document?document.activeElement:null,await R();null==(a=null==(n=(null==(t=o.value)?void 0:t.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'))||o.value)?void 0:n.focus)||a.call(n)}else i&&(null==(r=i.focus)||r.call(i),i=null)}),a(()=>{i=null}),(e,t)=>{const n=d,a=l;return e.visible?(g(),r(a,{key:0,class:"neo-modal",role:"dialog","aria-modal":"true","aria-label":e.title||"Dialog",onClick:t[3]||(t[3]=y(t=>e.closeable&&e.$emit("close"),["self"])),onKeydown:t[4]||(t[4]=m(t=>e.closeable&&e.$emit("close"),["escape"]))},{default:u(()=>[b(a,{ref_key:"contentRef",ref:o,class:c(["neo-modal__content",`neo-modal--${e.variant}`])},{default:u(()=>[e.title?(g(),r(a,{key:0,class:"neo-modal__header"},{default:u(()=>[b(n,{class:"neo-modal__title"},{default:u(()=>[f(p(e.title),1)]),_:1}),e.closeable?(g(),r(a,{key:0,class:"neo-modal__close",role:"button",tabindex:"0","aria-label":"Close dialog",onClick:t[0]||(t[0]=t=>e.$emit("close")),onKeydown:[t[1]||(t[1]=m(t=>e.$emit("close"),["enter"])),t[2]||(t[2]=m(y(t=>e.$emit("close"),["prevent"]),["space"]))]},{default:u(()=>[b(Dt,{name:"x",size:20})]),_:1})):k("",!0)]),_:1})):k("",!0),b(a,{class:"neo-modal__body"},{default:u(()=>[_(e.$slots,"default",{},void 0,!0)]),_:3}),e.$slots.footer?(g(),r(a,{key:1,class:"neo-modal__footer"},{default:u(()=>[_(e.$slots,"footer",{},void 0,!0)]),_:3})):k("",!0)]),_:3},8,["class"])]),_:3},8,["aria-label"])):k("",!0)}}}),[["__scopeId","data-v-53191fc6"]]),wn=new Set(["neo-n3","neo-n3-mainnet","neo-n3-testnet"]);function mn(e,t,n,a){const o=function(e){if("string"==typeof e)return e;const t=null==e?void 0:e.value;return"string"==typeof t?t:""}(e);if(wn.has(o))return!0;let i="";if(!i&&"function"==typeof t){const e=t("wrongChainMessage");i=e&&"wrongChainMessage"!==e?e:t("wrongChain")}i||(i="Wrong network");const r=globalThis.uni;return(null==r?void 0:r.showToast)&&r.showToast({title:i,icon:"none"}),!1}function yn(e){if(null==e)return null;if("object"==typeof e&&"type"in e){const t=e;switch(t.type){case"ByteArray":case"Buffer":case"InteropInterface":default:return t.value;case"Integer":return"string"==typeof t.value?t.value.startsWith("0x")?BigInt(t.value).toString():parseInt(t.value,10):Number(t.value);case"Array":case"Struct":return Array.isArray(t.value)?t.value.map(yn):t.value;case"Map":if(Array.isArray(t.value)){const e=new Map;for(const n of t.value)Array.isArray(n)&&2===n.length&&e.set(yn(n[0]),yn(n[1]));return Object.fromEntries(e)}return t.value;case"Boolean":return Boolean(t.value);case"String":case"Hash160":case"Hash256":return String(t.value)}}return Array.isArray(e)?e.map(yn):e}function bn(e){if(!e)return null;if("object"==typeof e&&null!==e){const t=e;return"stack"in t&&Array.isArray(t.stack)?0===t.stack.length?null:1===t.stack.length?yn(t.stack[0]):t.stack.map(yn):"state"in t?yn(t.state):"txid"in t||"txHash"in t?e:yn(e)}return"string"==typeof e||"number"==typeof e||"boolean"==typeof e?e:yn(e)}const kn=e=>{try{return BigInt(String(e??"0"))}catch{return 0n}},_n=e=>!0===e||"true"===e||1===e||"1"===e,In=e=>{try{const t=(new TextEncoder).encode(e);return btoa(String.fromCharCode(...t))}catch{return e}},Cn=e=>{const t=e.trim();if(!t)return 0;const n=t.includes("T")?t:t.replace(" ","T"),a=Date.parse(n);return Number.isNaN(a)?0:Math.floor(a/1e3)},An=U(o({__name:"EventCreateForm",props:{t:{type:Function},isCreating:{type:Boolean},form:{}},emits:["update:form","create"],setup(e,{emit:t}){const n=e,a=t,o=x({...n.form});T(()=>n.form,e=>{Object.assign(o,e)},{deep:!0}),T(o,e=>{a("update:form",{...e})},{deep:!0});const i=()=>{a("create")};return(e,t)=>{const n=l;return g(),r(A(pn),{variant:"erobo-neo"},{default:u(()=>[b(n,{class:"form-group"},{default:u(()=>[b(A(hn),{modelValue:o.name,"onUpdate:modelValue":t[0]||(t[0]=e=>o.name=e),label:e.t("eventName"),placeholder:e.t("eventNamePlaceholder")},null,8,["modelValue","label","placeholder"]),b(A(hn),{modelValue:o.venue,"onUpdate:modelValue":t[1]||(t[1]=e=>o.venue=e),label:e.t("eventVenue"),placeholder:e.t("eventVenuePlaceholder")},null,8,["modelValue","label","placeholder"]),b(A(hn),{modelValue:o.start,"onUpdate:modelValue":t[2]||(t[2]=e=>o.start=e),label:e.t("eventStart"),placeholder:e.t("eventStartPlaceholder")},null,8,["modelValue","label","placeholder"]),b(A(hn),{modelValue:o.end,"onUpdate:modelValue":t[3]||(t[3]=e=>o.end=e),label:e.t("eventEnd"),placeholder:e.t("eventEndPlaceholder")},null,8,["modelValue","label","placeholder"]),b(A(hn),{modelValue:o.maxSupply,"onUpdate:modelValue":t[4]||(t[4]=e=>o.maxSupply=e),type:"number",label:e.t("maxSupply"),placeholder:e.t("maxSupplyPlaceholder")},null,8,["modelValue","label","placeholder"]),b(A(hn),{modelValue:o.notes,"onUpdate:modelValue":t[5]||(t[5]=e=>o.notes=e),type:"textarea",label:e.t("notes"),placeholder:e.t("notesPlaceholder")},null,8,["modelValue","label","placeholder"]),b(A(gn),{variant:"primary",size:"lg",block:"",loading:e.isCreating,disabled:e.isCreating,onClick:i},{default:u(()=>[f(p(e.isCreating?e.t("creating"):e.t("createEvent")),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1})}}}),[["__scopeId","data-v-2d39d390"]]),En=U(o({__name:"EventDetails",props:{t:{type:Function},event:{},togglingId:{}},emits:["issue","toggle"],setup(e,{emit:t}){const n=e,a=(e,t)=>{if(!e||!t)return n.t("dateUnknown");const a=new Date(1e3*e),o=new Date(1e3*t);return`${a.toLocaleString()} - ${o.toLocaleString()}`};return(e,t)=>{const n=d,o=l;return g(),r(o,{class:"event-card"},{default:u(()=>[b(o,{class:"event-card__header"},{default:u(()=>[b(o,null,{default:u(()=>[b(n,{class:"event-title"},{default:u(()=>[f(p(e.event.name||`#${e.event.id}`),1)]),_:1}),b(n,{class:"event-subtitle"},{default:u(()=>[f(p(e.event.venue||e.t("venueFallback")),1)]),_:1})]),_:1}),b(n,{class:c(["status-pill",e.event.active?"active":"inactive"])},{default:u(()=>[f(p(e.event.active?e.t("statusActive"):e.t("statusInactive")),1)]),_:1},8,["class"])]),_:1}),b(o,{class:"event-meta"},{default:u(()=>[b(n,{class:"meta-label"},{default:u(()=>[f(p(e.t("eventSchedule")),1)]),_:1}),b(n,{class:"meta-value"},{default:u(()=>[f(p(a(e.event.startTime,e.event.endTime)),1)]),_:1})]),_:1}),b(o,{class:"event-metrics"},{default:u(()=>[b(o,null,{default:u(()=>[b(n,{class:"metric-label"},{default:u(()=>[f(p(e.t("minted")),1)]),_:1}),b(n,{class:"metric-value"},{default:u(()=>[f(p(e.event.minted.toString()),1)]),_:1})]),_:1}),b(o,null,{default:u(()=>[b(n,{class:"metric-label"},{default:u(()=>[f(p(e.t("maxSupply")),1)]),_:1}),b(n,{class:"metric-value"},{default:u(()=>[f(p(e.event.maxSupply.toString()),1)]),_:1})]),_:1})]),_:1}),b(o,{class:"event-actions"},{default:u(()=>[b(A(gn),{size:"sm",variant:"primary",disabled:!e.event.active||e.event.minted>=e.event.maxSupply,onClick:t[0]||(t[0]=t=>e.$emit("issue",e.event))},{default:u(()=>[f(p(e.event.minted>=e.event.maxSupply?e.t("soldOut"):e.t("issueTicket")),1)]),_:1},8,["disabled"]),b(A(gn),{size:"sm",variant:"secondary",loading:e.togglingId===e.event.id,onClick:t[1]||(t[1]=t=>e.$emit("toggle",e.event))},{default:u(()=>[f(p(e.event.active?e.t("deactivate"):e.t("activate")),1)]),_:1},8,["loading"])]),_:1})]),_:1})}}}),[["__scopeId","data-v-71abd6d8"]]),Tn=U(o({__name:"EventList",props:{t:{type:Function},address:{},events:{},isRefreshing:{type:Boolean},togglingId:{}},emits:["refresh","connect","issue","toggle"],setup:e=>(e,t)=>{const n=d,a=l;return g(),r(A(pn),{variant:"erobo",class:"event-list"},{default:u(()=>[b(a,{class:"events-header"},{default:u(()=>[b(n,{class:"section-title"},{default:u(()=>[f(p(e.t("yourEvents")),1)]),_:1}),b(A(gn),{size:"sm",variant:"secondary",loading:e.isRefreshing,onClick:t[0]||(t[0]=t=>e.$emit("refresh"))},{default:u(()=>[f(p(e.t("refresh")),1)]),_:1},8,["loading"])]),_:1}),e.address?0===e.events.length?(g(),r(a,{key:1,class:"empty-state"},{default:u(()=>[b(A(pn),{variant:"erobo",class:"p-6 text-center opacity-70"},{default:u(()=>[b(n,{class:"text-xs"},{default:u(()=>[f(p(e.t("emptyEvents")),1)]),_:1})]),_:1})]),_:1})):(g(),r(a,{key:2,class:"event-cards"},{default:u(()=>[(g(!0),h(v,null,w(e.events,n=>(g(),r(En,{key:`event-${n.id}`,event:n,t:e.t,"toggling-id":e.togglingId,onIssue:t[2]||(t[2]=t=>e.$emit("issue",t)),onToggle:t[3]||(t[3]=t=>e.$emit("toggle",t))},null,8,["event","t","toggling-id"]))),128))]),_:1})):(g(),r(a,{key:0,class:"empty-state"},{default:u(()=>[b(A(pn),{variant:"erobo",class:"p-6 text-center"},{default:u(()=>[b(n,{class:"text-sm block mb-3"},{default:u(()=>[f(p(e.t("walletNotConnected")),1)]),_:1}),b(A(gn),{size:"sm",variant:"primary",onClick:t[1]||(t[1]=t=>e.$emit("connect"))},{default:u(()=>[f(p(e.t("connectWallet")),1)]),_:1})]),_:1})]),_:1}))]),_:1})}}),[["__scopeId","data-v-591d0409"]]),Sn=U(o({__name:"TicketManagement",props:{t:{type:Function},address:{},tickets:{},ticketQrs:{},isRefreshing:{type:Boolean}},emits:["refresh","connect","copy"],setup(e,{emit:t}){const n=e,a=(e,t)=>{if(!e||!t)return n.t("dateUnknown");const a=new Date(1e3*e),o=new Date(1e3*t);return`${a.toLocaleString()} - ${o.toLocaleString()}`};return(e,t)=>{const n=d,o=l,i=P;return g(),h(v,null,[b(o,{class:"tickets-header"},{default:u(()=>[b(n,{class:"section-title"},{default:u(()=>[f(p(e.t("ticketsTab")),1)]),_:1}),b(A(gn),{size:"sm",variant:"secondary",loading:e.isRefreshing,onClick:t[0]||(t[0]=t=>e.$emit("refresh"))},{default:u(()=>[f(p(e.t("refresh")),1)]),_:1},8,["loading"])]),_:1}),e.address?0===e.tickets.length?(g(),r(o,{key:1,class:"empty-state"},{default:u(()=>[b(A(pn),{variant:"erobo",class:"p-6 text-center opacity-70"},{default:u(()=>[b(n,{class:"text-xs"},{default:u(()=>[f(p(e.t("emptyTickets")),1)]),_:1})]),_:1})]),_:1})):(g(),r(o,{key:2,class:"ticket-grid"},{default:u(()=>[(g(!0),h(v,null,w(e.tickets,t=>(g(),r(o,{key:`ticket-${t.tokenId}`,class:"ticket-card"},{default:u(()=>[b(o,{class:"ticket-card__header"},{default:u(()=>[b(o,null,{default:u(()=>[b(n,{class:"ticket-title"},{default:u(()=>[f(p(t.eventName||`#${t.eventId}`),1)]),_:2},1024),b(n,{class:"ticket-subtitle"},{default:u(()=>[f(p(t.venue||e.t("venueFallback")),1)]),_:2},1024)]),_:2},1024),b(n,{class:c(["status-pill",t.used?"used":"active"])},{default:u(()=>[f(p(t.used?e.t("ticketUsed"):e.t("ticketValid")),1)]),_:2},1032,["class"])]),_:2},1024),b(o,{class:"ticket-meta"},{default:u(()=>[b(n,{class:"meta-label"},{default:u(()=>[f(p(e.t("eventSchedule")),1)]),_:1}),b(n,{class:"meta-value"},{default:u(()=>[f(p(a(t.startTime,t.endTime)),1)]),_:2},1024)]),_:2},1024),b(o,{class:"ticket-body"},{default:u(()=>[e.ticketQrs[t.tokenId]?(g(),r(o,{key:0,class:"ticket-qr"},{default:u(()=>[b(i,{src:e.ticketQrs[t.tokenId],class:"ticket-qr__img",mode:"aspectFit",alt:e.t("ticketQrCode")},null,8,["src","alt"])]),_:2},1024)):k("",!0),b(o,{class:"ticket-details"},{default:u(()=>[b(n,{class:"detail-row"},{default:u(()=>[f(p(e.t("ticketSeat"))+": "+p(t.seat||e.t("seatFallback")),1)]),_:2},1024),b(n,{class:"detail-row"},{default:u(()=>[f(p(e.t("ticketTokenId"))+": "+p(t.tokenId),1)]),_:2},1024),b(A(gn),{size:"sm",variant:"secondary",class:"copy-btn",onClick:n=>e.$emit("copy",t.tokenId)},{default:u(()=>[f(p(e.t("copyTokenId")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(g(),r(o,{key:0,class:"empty-state"},{default:u(()=>[b(A(pn),{variant:"erobo",class:"p-6 text-center"},{default:u(()=>[b(n,{class:"text-sm block mb-3"},{default:u(()=>[f(p(e.t("walletNotConnected")),1)]),_:1}),b(A(gn),{size:"sm",variant:"primary",onClick:t[1]||(t[1]=t=>e.$emit("connect"))},{default:u(()=>[f(p(e.t("connectWallet")),1)]),_:1})]),_:1})]),_:1}))],64)}}}),[["__scopeId","data-v-11400e7f"]]),Mn=U(o({__name:"CheckinTab",props:{t:{type:Function},tokenId:{},lookup:{},isLookingUp:{type:Boolean},isCheckingIn:{type:Boolean},status:{}},emits:["update:tokenId","lookup","checkin"],setup(e,{emit:n}){const a=e,o=n,i=t(a.tokenId);T(()=>a.tokenId,e=>{i.value=e}),T(i,e=>{o("update:tokenId",e)});const s=(e,t)=>{if(!e||!t)return"-";const n=new Date(1e3*e),a=new Date(1e3*t);return`${n.toLocaleString()} - ${a.toLocaleString()}`};return(e,t)=>{const n=d,a=l;return g(),r(a,{class:"tab-content"},{default:u(()=>[e.status?(g(),r(A(pn),{key:0,variant:"error"===e.status.type?"danger":"success",class:"text-center"},{default:u(()=>[b(n,{class:"font-bold"},{default:u(()=>[f(p(e.status.msg),1)]),_:1})]),_:1},8,["variant"])):k("",!0),b(A(pn),{variant:"erobo-neo"},{default:u(()=>[b(a,{class:"form-group"},{default:u(()=>[b(A(hn),{modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=e=>i.value=e),label:e.t("checkinTokenId"),placeholder:e.t("checkinTokenIdPlaceholder")},null,8,["modelValue","label","placeholder"]),b(a,{class:"checkin-actions"},{default:u(()=>[b(A(gn),{size:"sm",variant:"secondary",loading:e.isLookingUp,onClick:t[1]||(t[1]=t=>e.$emit("lookup"))},{default:u(()=>[f(p(e.isLookingUp?e.t("lookingUp"):e.t("lookup")),1)]),_:1},8,["loading"]),b(A(gn),{size:"sm",variant:"primary",loading:e.isCheckingIn,onClick:t[2]||(t[2]=t=>e.$emit("checkin"))},{default:u(()=>[f(p(e.isCheckingIn?e.t("checkingIn"):e.t("checkIn")),1)]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1}),e.lookup?(g(),r(A(pn),{key:1,variant:"erobo",class:"lookup-card"},{default:u(()=>[b(a,{class:"ticket-card__header"},{default:u(()=>[b(a,null,{default:u(()=>[b(n,{class:"ticket-title"},{default:u(()=>[f(p(e.lookup.eventName||`#${e.lookup.eventId}`),1)]),_:1}),b(n,{class:"ticket-subtitle"},{default:u(()=>[f(p(e.lookup.venue||e.t("venueFallback")),1)]),_:1})]),_:1}),b(n,{class:c(["status-pill",e.lookup.used?"used":"active"])},{default:u(()=>[f(p(e.lookup.used?e.t("ticketUsed"):e.t("ticketValid")),1)]),_:1},8,["class"])]),_:1}),b(a,{class:"ticket-meta"},{default:u(()=>[b(n,{class:"meta-label"},{default:u(()=>[f(p(e.t("eventSchedule")),1)]),_:1}),b(n,{class:"meta-value"},{default:u(()=>[f(p(s(e.lookup.startTime,e.lookup.endTime)),1)]),_:1})]),_:1}),b(n,{class:"detail-row"},{default:u(()=>[f(p(e.t("ticketSeat"))+": "+p(e.lookup.seat||e.t("seatFallback")),1)]),_:1}),b(n,{class:"detail-row"},{default:u(()=>[f(p(e.t("ticketTokenId"))+": "+p(e.lookup.tokenId),1)]),_:1})]),_:1})):k("",!0)]),_:1})}}}),[["__scopeId","data-v-2bb7ec6c"]]),Nn=U(o({__name:"TicketIssueModal",props:{t:{type:Function},visible:{type:Boolean},recipient:{},seat:{},memo:{},isIssuing:{type:Boolean}},emits:["close","issue","update:recipient","update:seat","update:memo"],setup(e,{emit:n}){const a=e,o=n,i=t(a.recipient),s=t(a.seat),c=t(a.memo);return T(()=>a.recipient,e=>{i.value=e}),T(()=>a.seat,e=>{s.value=e}),T(()=>a.memo,e=>{c.value=e}),T(i,e=>o("update:recipient",e)),T(s,e=>o("update:seat",e)),T(c,e=>o("update:memo",e)),(e,t)=>{const n=l;return g(),r(A(vn),{visible:e.visible,title:e.t("issueTicketTitle"),closeable:!0,onClose:t[5]||(t[5]=t=>e.$emit("close"))},{footer:u(()=>[b(A(gn),{size:"sm",variant:"secondary",onClick:t[3]||(t[3]=t=>e.$emit("close"))},{default:u(()=>[f(p(e.t("cancel")),1)]),_:1}),b(A(gn),{size:"sm",variant:"primary",loading:e.isIssuing,onClick:t[4]||(t[4]=t=>e.$emit("issue"))},{default:u(()=>[f(p(e.isIssuing?e.t("issuing"):e.t("issue")),1)]),_:1},8,["loading"])]),default:u(()=>[b(n,{class:"form-group"},{default:u(()=>[b(A(hn),{modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=e=>i.value=e),label:e.t("issueRecipient"),placeholder:e.t("issueRecipientPlaceholder")},null,8,["modelValue","label","placeholder"]),b(A(hn),{modelValue:s.value,"onUpdate:modelValue":t[1]||(t[1]=e=>s.value=e),label:e.t("issueSeat"),placeholder:e.t("issueSeatPlaceholder")},null,8,["modelValue","label","placeholder"]),b(A(hn),{modelValue:c.value,"onUpdate:modelValue":t[2]||(t[2]=e=>c.value=e),label:e.t("issueMemo"),placeholder:e.t("issueMemoPlaceholder")},null,8,["modelValue","label","placeholder"])]),_:1})]),_:1},8,["visible","title"])}}}),[["__scopeId","data-v-baea5ddd"]]),Bn=U(o({__name:"index",setup(e){const{t:a}=O(),{address:o,connect:s,invokeContract:c,invokeRead:w,chainType:m,getContractAddress:y}=Lt(),_=t("create"),I=i(()=>[{id:"create",icon:"plus",label:a("createTab")},{id:"tickets",icon:"ticket",label:a("ticketsTab")},{id:"checkin",icon:"check",label:a("checkinTab")},{id:"docs",icon:"book",label:a("docs")}]),C=x({name:"",venue:"",start:"",end:"",maxSupply:"100",notes:""}),E=x({eventId:"",recipient:"",seat:"",memo:""}),S=x({tokenId:""}),M=t(null),N=t(!1),B=t(!1),R=t(!1),P=t(!1),L=t(!1),D=t(!1),U=t(!1),z=t(null),F=t(null),j=t([]),H=t([]),q=x({}),G=t(null),J=async()=>{if(!mn(m,a))throw new Error(a("wrongChain"));if(F.value||(F.value=await y()),!F.value)throw new Error(a("contractMissing"));return F.value},W=(e,t)=>{M.value={msg:e,type:t},setTimeout(()=>{var t;(null==(t=M.value)?void 0:t.msg)===e&&(M.value=null)},4e3)},Y=(e,t)=>e&&"object"==typeof e?{tokenId:t,eventId:String(e.eventId||""),eventName:String(e.eventName||""),venue:String(e.venue||""),startTime:Number.parseInt(String(e.startTime||"0"),10)||0,endTime:Number.parseInt(String(e.endTime||"0"),10)||0,seat:String(e.seat||""),memo:String(e.memo||""),issuedTime:Number.parseInt(String(e.issuedTime||"0"),10)||0,used:_n(e.used),usedTime:Number.parseInt(String(e.usedTime||"0"),10)||0}:null,Q=async e=>{const t=await J(),n=bn(await w({contractAddress:t,operation:"GetEventDetails",args:[{type:"Integer",value:e}]}));return o=e,(a=n)&&"object"==typeof a?{id:o,creator:String(a.creator||""),name:String(a.name||""),venue:String(a.venue||""),startTime:Number.parseInt(String(a.startTime||"0"),10)||0,endTime:Number.parseInt(String(a.endTime||"0"),10)||0,maxSupply:kn(a.maxSupply),minted:kn(a.minted),notes:String(a.notes||""),active:_n(a.active)}:null;var a,o},Z=async()=>{if(o.value&&!B.value)try{B.value=!0;const e=await(async e=>{const t=await J(),n=bn(await w({contractAddress:t,operation:"GetCreatorEvents",args:[{type:"Hash160",value:e},{type:"Integer",value:"0"},{type:"Integer",value:"20"}]}));return Array.isArray(n)?n.map(e=>String(e||"")).map(e=>Number.parseInt(e,10)).filter(e=>Number.isFinite(e)&&e>0).map(e=>String(e)):[]})(o.value),t=await Promise.all(e.map(Q));j.value=t.filter(Boolean)}catch(e){W(e.message||a("contractMissing"),"error")}finally{B.value=!1}},X=async()=>{if(o.value&&!R.value)try{R.value=!0;const e=await J(),t=bn(await w({contractAddress:e,operation:"TokensOf",args:[{type:"Hash160",value:o.value}]}));if(!Array.isArray(t))return void(H.value=[]);const n=t.map(e=>String(e||"")).filter(Boolean),a=await Promise.all(n.map(async t=>{const n=bn(await w({contractAddress:e,operation:"GetTicketDetails",args:[{type:"ByteArray",value:In(t)}]}));return Y(n,t)}));H.value=a.filter(Boolean),await Promise.all(H.value.map(async e=>{if(!q[e.tokenId])try{q[e.tokenId]=await K.toDataURL(e.tokenId,{margin:1})}catch{}}))}catch(e){W(e.message||a("contractMissing"),"error")}finally{R.value=!1}},ee=async()=>{try{await s(),o.value&&(await Z(),await X())}catch(e){W(e.message||a("walletNotConnected"),"error")}},te=async()=>{if(N.value)return;if(!mn(m,a))return;const e=C.name.trim();if(!e)return void W(a("nameRequired"),"error");const t=Cn(C.start),n=Cn(C.end);if(!t||!n||n<t)return void W(a("invalidTime"),"error");const i=kn(C.maxSupply);if(i<=0n)W(a("invalidSupply"),"error");else try{if(N.value=!0,o.value||await s(),!o.value)throw new Error(a("walletNotConnected"));const r=await J();await c({scriptHash:r,operation:"CreateEvent",args:[{type:"Hash160",value:o.value},{type:"String",value:e},{type:"String",value:C.venue.trim()},{type:"Integer",value:String(t)},{type:"Integer",value:String(n)},{type:"Integer",value:i.toString()},{type:"String",value:C.notes.trim()}]}),W(a("eventCreated"),"success"),C.name="",C.venue="",C.start="",C.end="",C.maxSupply="100",C.notes="",await Z()}catch(r){W(r.message||a("contractMissing"),"error")}finally{N.value=!1}},ne=e=>{E.eventId=e.id,E.recipient="",E.seat="",E.memo="",U.value=!0},ae=()=>{U.value=!1},oe=async()=>{if(P.value)return;if(!mn(m,a))return;const e=E.recipient.trim();if(e&&function(e){return e.startsWith("0x")?e:`0x${e}`}(e))try{if(P.value=!0,o.value||await s(),!o.value)throw new Error(a("walletNotConnected"));const t=await J();await c({scriptHash:t,operation:"IssueTicket",args:[{type:"Hash160",value:o.value},{type:"Hash160",value:e},{type:"Integer",value:E.eventId},{type:"String",value:E.seat.trim()},{type:"String",value:E.memo.trim()}]}),W(a("ticketIssued"),"success"),U.value=!1,await Z(),await X()}catch(t){W(t.message||a("contractMissing"),"error")}finally{P.value=!1}else W(a("invalidRecipient"),"error")},ie=async e=>{if(!z.value&&mn(m,a))try{if(z.value=e.id,o.value||await s(),!o.value)throw new Error(a("walletNotConnected"));const t=await J();await c({scriptHash:t,operation:"SetEventActive",args:[{type:"Hash160",value:o.value},{type:"Integer",value:e.id},{type:"Boolean",value:!e.active}]}),await Z()}catch(t){W(t.message||a("contractMissing"),"error")}finally{z.value=null}},re=async()=>{if(D.value)return;if(!mn(m,a))return;const e=S.tokenId.trim();if(e)try{D.value=!0;const t=await J(),n=bn(await w({contractAddress:t,operation:"GetTicketDetails",args:[{type:"ByteArray",value:In(e)}]})),o=Y(n,e);if(!o)return W(a("ticketNotFound"),"error"),void(G.value=null);G.value=o}catch(t){W(t.message||a("contractMissing"),"error")}finally{D.value=!1}else W(a("invalidTokenId"),"error")},le=async()=>{if(L.value)return;if(!mn(m,a))return;const e=S.tokenId.trim();if(e)try{if(L.value=!0,o.value||await s(),!o.value)throw new Error(a("walletNotConnected"));const t=await J();await c({scriptHash:t,operation:"CheckIn",args:[{type:"Hash160",value:o.value},{type:"ByteArray",value:In(e)}]}),W(a("checkinSuccess"),"success"),await re()}catch(t){W(t.message||a("contractMissing"),"error")}finally{L.value=!1}else W(a("invalidTokenId"),"error")},se=e=>{$({data:e,success:()=>{W(a("copied"),"success")}})},ce=async e=>{_.value=e,"tickets"===e&&await X(),"create"===e&&await Z()};return n(async()=>{await s(),o.value&&(await Z(),await X())}),T(o,async e=>{e?(await Z(),await X()):(j.value=[],H.value=[],G.value=null)}),(e,t)=>{const n=d,i=l;return g(),h(v,null,[b(A(fn),{"desktop-breakpoint":1024,class:"theme-event-ticket-pass",tabs:I.value,"active-tab":_.value,onTabChange:ce},{"desktop-sidebar":u(()=>[b(i,{class:"desktop-sidebar"},{default:u(()=>[b(n,{class:"sidebar-title"},{default:u(()=>[f(p(A(a)("overview")),1)]),_:1})]),_:1})]),default:u(()=>["create"===_.value?(g(),r(i,{key:0,class:"tab-content"},{default:u(()=>[b(A(un),{title:A(a)("wrongChain"),message:A(a)("wrongChainMessage"),"button-text":A(a)("switchToNeo")},null,8,["title","message","button-text"]),M.value?(g(),r(A(pn),{key:0,variant:"error"===M.value.type?"danger":"success",class:"mb-4 text-center"},{default:u(()=>[b(n,{class:"font-bold"},{default:u(()=>[f(p(M.value.msg),1)]),_:1})]),_:1},8,["variant"])):k("",!0),b(An,{t:A(a),form:C,"onUpdate:form":t[0]||(t[0]=e=>C=e),"is-creating":N.value,onCreate:te},null,8,["t","form","is-creating"]),b(Tn,{t:A(a),address:A(o),events:j.value,"is-refreshing":B.value,"toggling-id":z.value,onRefresh:Z,onConnect:ee,onIssue:ne,onToggle:ie},null,8,["t","address","events","is-refreshing","toggling-id"])]),_:1})):k("",!0),"tickets"===_.value?(g(),r(i,{key:1,class:"tab-content"},{default:u(()=>[b(Sn,{t:A(a),address:A(o),tickets:H.value,"ticket-qrs":q,"is-refreshing":R.value,onRefresh:X,onConnect:ee,onCopy:se},null,8,["t","address","tickets","ticket-qrs","is-refreshing"])]),_:1})):k("",!0),"checkin"===_.value?(g(),r(i,{key:2,class:"tab-content"},{default:u(()=>[b(Mn,{t:A(a),"token-id":S.tokenId,"onUpdate:tokenId":t[1]||(t[1]=e=>S.tokenId=e),lookup:G.value,"is-looking-up":D.value,"is-checking-in":L.value,status:M.value,onLookup:re,onCheckin:le},null,8,["t","token-id","lookup","is-looking-up","is-checking-in","status"])]),_:1})):k("",!0),"docs"===_.value?(g(),r(i,{key:3,class:"tab-content scrollable"},{default:u(()=>[b(A(V),{title:A(a)("title"),subtitle:A(a)("docSubtitle"),description:A(a)("docDescription"),steps:[A(a)("step1"),A(a)("step2"),A(a)("step3"),A(a)("step4")],features:[{name:A(a)("feature1Name"),desc:A(a)("feature1Desc")},{name:A(a)("feature2Name"),desc:A(a)("feature2Desc")},{name:A(a)("feature3Name"),desc:A(a)("feature3Desc")}]},null,8,["title","subtitle","description","steps","features"])]),_:1})):k("",!0)]),_:1},8,["tabs","active-tab"]),b(Nn,{t:A(a),visible:U.value,recipient:E.recipient,"onUpdate:recipient":t[2]||(t[2]=e=>E.recipient=e),seat:E.seat,"onUpdate:seat":t[3]||(t[3]=e=>E.seat=e),memo:E.memo,"onUpdate:memo":t[4]||(t[4]=e=>E.memo=e),"is-issuing":P.value,onClose:ae,onIssue:oe},null,8,["t","visible","recipient","seat","memo","is-issuing"])],64)}}}),[["__scopeId","data-v-322042c9"]]);export{Bn as default};
