import{D as e,C as t,O as a,E as s,d as i,a as n,G as o,r,f as c,w as l,u,e as d,g as _,i as p,j as f,t as m,h as v,n as g,k as h,H as y}from"./index-Dfj7vtok.js";import{u as b,_ as x}from"./NeoDoc.vue_vue_type_style_index_0_scoped_445ca862_lang.XC5HTcPu.js";import{N as j,b as k,_ as w}from"./MiniAppTemplate.vue_vue_type_style_index_0_scoped_cca95dd5_lang.CS9-QqtD.js";const C=(a=>(i,n=t())=>{!s&&e(a,i,n)})(a),N=x(i({__name:"index",setup(e){const{t:t,locale:a}=b(),s=n(""),i=n(!0),x=n(!1),N=n(null);n("");const A="undefined"!=typeof window&&["127.0.0.1","localhost"].includes(window.location.hostname),S={items:[{offchain_id:"101",title:"Developer Education Sprint",description:"Build a 6-week education sprint focused on secure NEO smart contract development.",proposer:"NfYhP6Yw5tM4oX2Qz7bR5mU8dC6jK9vW1Q",state:"active",votes_amount_accept:152340,votes_amount_reject:12340,discussion_url:"https://forum.grantshares.io/t/dev-education-sprint",offchain_creation_timestamp:"2026-01-30T08:12:00.000Z",onchain_id:57},{offchain_id:"102",title:"Neo Wallet UX Research",description:"Research and prototype better onboarding and transaction clarity for first-time users.",proposer:"NQf1fY3mP8jC2rL7nD4sX9aV6kW3mP5tYH",state:"review",votes_amount_accept:92340,votes_amount_reject:4560,discussion_url:"https://forum.grantshares.io/t/wallet-ux-research",offchain_creation_timestamp:"2026-02-01T13:20:00.000Z",onchain_id:58},{offchain_id:"103",title:"Cross-Chain Tooling Maintenance",description:"Maintain bridge and indexing tooling to improve reliability and incident response.",proposer:"NdR6mX4tW8qL2dP5sH9fV3bN1kJ7gC2qZT",state:"executed",votes_amount_accept:210340,votes_amount_reject:7830,discussion_url:"https://forum.grantshares.io/t/cross-chain-tooling-maintenance",offchain_creation_timestamp:"2025-12-18T10:45:00.000Z",onchain_id:54}]};function D(){y()}function R(e){try{return decodeURIComponent(escape(atob(e)))}catch{return e}}function T(e){return String(e||"").toLowerCase()}function U(e){return Number.isFinite(e)?e.toLocaleString():"0"}function I(e){if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const s="zh"===a.value?"zh-CN":"en-US";return t.toLocaleDateString(s,{month:"long",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})}return C(e=>{if(e&&e.id){s.value=e.id;try{const t=o("current_grant_detail");if(t&&String(t.id)===String(e.id))return N.value=t,void(i.value=!1)}catch(t){}!async function(e){i.value=!0,x.value=!1;try{let t=null;if(A){const a=S;Array.isArray(a.items)&&(t=a.items.find(t=>String(t.offchain_id||t.id||"")===String(e))||null)}if(t||(t=await new Promise((t,a)=>{r({url:`/api/grantshares/proposal?id=${e}`,success:e=>t((e=>{if("string"==typeof e)try{return JSON.parse(e)}catch{return null}return e})(e.data)),fail:e=>a(e)})})),t){const e=t;N.value={id:String(e.offchain_id||e.id||""),title:R(e.title||""),description:R(e.description||""),proposer:String(e.proposer||e.proposer_address||e.proposerAddress||""),state:T(e.state||""),votesAccept:Number(e.votes_amount_accept||e.votesAmountAccept||0),votesReject:Number(e.votes_amount_reject||e.votesAmountReject||0),discussionUrl:String(e.discussion_url||e.discussionUrl||""),createdAt:String(e.offchain_creation_timestamp||e.offchainCreationTimestamp||""),onchainId:e.onchain_id??e.onchainId??null}}else x.value=!0}catch(t){x.value=!0}finally{i.value=!1}}(e.id)}else x.value=!0,i.value=!1}),(e,a)=>{const s=p,n=v;return d(),c(u(w),{"desktop-breakpoint":1024,class:"theme-grant-share"},{default:l(()=>[_(s,{class:"app-container"},{default:l(()=>[_(s,{class:"nav-header mb-4"},{default:l(()=>[_(u(j),{size:"sm",variant:"secondary",onClick:D},{default:l(()=>[f(" â† "+m(u(t)("back")),1)]),_:1})]),_:1}),i.value?(d(),c(s,{key:0,class:"empty-state"},{default:l(()=>[_(n,{class:"empty-text"},{default:l(()=>[f(m(u(t)("loading")),1)]),_:1})]),_:1})):x.value?(d(),c(s,{key:1,class:"empty-state"},{default:l(()=>[_(n,{class:"empty-text"},{default:l(()=>[f(m(u(t)("loadFailed")),1)]),_:1})]),_:1})):N.value?(d(),c(s,{key:2,class:"grant-detail"},{default:l(()=>[_(u(k),{variant:"erobo-neo",class:"mb-4"},{default:l(()=>[_(s,{class:"header-section"},{default:l(()=>[_(n,{class:"grant-title-glass"},{default:l(()=>[f(m(N.value.title),1)]),_:1}),_(s,{class:"meta-row mt-2"},{default:l(()=>[_(n,{class:"grant-creator-glass"},{default:l(()=>[f(m(u(t)("by"))+" "+m(N.value.proposer),1)]),_:1}),_(s,{class:g(["grant-badge-glass",N.value.state])},{default:l(()=>[_(n,{class:"badge-text"},{default:l(()=>{return[f(m((e=N.value.state,{active:t("statusActive"),review:t("statusReview"),voting:t("statusVoting"),discussion:t("statusDiscussion"),executed:t("statusExecuted"),cancelled:t("statusCancelled"),rejected:t("statusRejected"),expired:t("statusExpired")}[T(e)]||e)),1)];var e}),_:1})]),_:1},8,["class"])]),_:1}),_(s,{class:"proposal-meta mt-2"},{default:l(()=>[null!==N.value.onchainId?(d(),c(n,{key:0,class:"meta-item"},{default:l(()=>[f("#"+m(N.value.onchainId),1)]),_:1})):h("",!0),N.value.createdAt?(d(),c(n,{key:1,class:"meta-item"},{default:l(()=>[f(m(I(N.value.createdAt)),1)]),_:1})):h("",!0)]),_:1})]),_:1})]),_:1}),_(u(k),{variant:"erobo-neo",class:"mb-4"},{default:l(()=>[_(s,{class:"section-title-glass"},{default:l(()=>[f(m(u(t)("details")),1)]),_:1}),_(s,{class:"description-content"},{default:l(()=>[_(n,{class:"desc-text"},{default:l(()=>[f(m(N.value.description||u(t)("noDescription")),1)]),_:1})]),_:1})]),_:1}),_(u(k),{variant:"erobo-neo",class:"mb-4"},{default:l(()=>[_(s,{class:"section-title-glass"},{default:l(()=>[f(m(u(t)("voting")),1)]),_:1}),_(s,{class:"proposal-stats"},{default:l(()=>[_(s,{class:"stat-chip accept"},{default:l(()=>[f(m(u(t)("votesFor"))+" "+m(U(N.value.votesAccept)),1)]),_:1}),_(s,{class:"stat-chip reject"},{default:l(()=>[f(m(u(t)("votesAgainst"))+" "+m(U(N.value.votesReject)),1)]),_:1})]),_:1}),_(s,{class:"mt-4 flex gap-2"},{default:l(()=>[_(u(j),{size:"sm",variant:"secondary",disabled:!N.value.discussionUrl,onClick:a[0]||(a[0]=e=>function(e){if(!e)return;const a=null==globalThis?void 0:globalThis.uni;(null==a?void 0:a.setClipboardData)&&a.setClipboardData({data:e,success:()=>{t("linkCopied")},fail:()=>{t("copyFailed")}})}(N.value.discussionUrl))},{default:l(()=>[f(m(N.value.discussionUrl?u(t)("discussionLink"):u(t)("noDiscussion")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})):h("",!0)]),_:1})]),_:1})}}}),[["__scopeId","data-v-e854f8ec"]]);export{N as default};
