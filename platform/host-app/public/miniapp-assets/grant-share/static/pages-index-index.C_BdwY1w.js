import{r as e,a as t,o as a,b as n,c as o,d as s,e as r,f as i,i as l,w as c,g as u,h as d,j as f,t as v,k as p,u as h,l as g,m as w,F as m,n as y,p as b,q as _,s as k,v as C,x as A,y as S,z as E,A as I,B as T}from"./index-CLIXR-PG.js";import{_ as M,u as N}from"./NeoDoc.vue_vue_type_style_index_0_scoped_b60f38ea_lang.CE-BkUkz.js";import{A as $,s as P,w as R,g as D,a as x,N as K,b as O,_ as j,u as L}from"./useStatusMessage.CmnHH-Ku.js";import{N as F}from"./NeoDoc.s6SNT_61.js";function G(e){return e instanceof Error?e:"string"==typeof e?new Error(e):new Error(String(e))}let W=class extends Error{constructor(e,t){super(e),this.statusCode=t,this.name="HttpError"}};const U={maxRetries:3,baseDelayMs:1e3,maxDelayMs:1e4};function q(e,t){return Math.min(t.baseDelayMs*Math.pow(2,e),t.maxDelayMs)*(.75+.5*Math.random())}function H(e,t){if(t&&t>=500)return!0;if(429===t)return!0;if(e instanceof Error){const t=e.message.toLowerCase();return t.includes("network")||t.includes("timeout")||t.includes("abort")}return!1}async function V(t,a){var n;if("undefined"!=typeof uni&&"function"==typeof e)return new Promise((n,o)=>{const s=(e=>{if(e){if(e instanceof Headers){const t={};return e.forEach((e,a)=>{t[a]=e}),t}return Array.isArray(e)?Object.fromEntries(e):e}})(a.headers),r=String((null==s?void 0:s["Content-Type"])||(null==s?void 0:s["content-type"])||"");let i=a.body;if("string"==typeof i&&r.includes("application/json"))try{i=JSON.parse(i)}catch{}e({url:t,method:a.method||"GET",data:i,header:s,success:e=>{if((e.statusCode??0)>=200&&(e.statusCode??0)<300)n(e.data);else{const t=e.data,a=null==t?void 0:t.error,n=("string"==typeof(null==a?void 0:a.message)?a.message:null)||`Request failed: ${e.statusCode}`;o(new W(n,e.statusCode??0))}},fail:e=>{o(new Error(e.errMsg||"Network error"))}})});const o="undefined"!=typeof window&&t.startsWith(window.location.origin),s=await fetch(t,{credentials:o?"include":"same-origin",...a});if(!s.ok){const e=await s.json().catch(()=>({}));throw new W((null==(n=e.error)?void 0:n.message)||`Request failed: ${t}`,s.status)}return s.json()}async function B(e){return async function(e,t={}){var a,n;const o=e.startsWith("http")?e:`${$}${e}`,s={...U,...t.retryConfig};let r=null;for(let l=0;l<=s.maxRetries;l++){if(null==(a=t.signal)?void 0:a.aborted)throw new Error("Request cancelled");try{return await V(o,t)}catch(i){r=i instanceof Error?i:new Error(String(i));const e=i instanceof W?i.statusCode:void 0;if(null==(n=t.signal)?void 0:n.aborted)throw r;if(l>=s.maxRetries)break;if(!H(i,e))break;const a=q(l,s);await new Promise(e=>setTimeout(e,a))}}throw r||new Error("Request failed")}(e,{method:"GET"})}let z=null,J=null;function X(){const e=t(null),o=t({}),s=t(null),r=t(null),i=t(null),l=t([]),c=t(!1),u=t(!1),d=t(null),f=t(!1),v=t(null),p=t=>{t.connected&&t.address?(e.value=t.address,c.value=!0):(e.value=null,c.value=!1),s.value=t.chainId??null,r.value=t.chainType??null,o.value=(e=>{if(!e)return{};if(e.balances&&Object.keys(e.balances).length>0)return{...e.balances};if(e.balance){const t={};return t[e.balance.nativeSymbol||("neo-n3"===e.chainType?"GAS":"NATIVE")]=e.balance.native||"0",(e.balance.governance||e.balance.governanceSymbol)&&(t[e.balance.governanceSymbol||("neo-n3"===e.chainType?"NEO":"GOV")]=e.balance.governance||"0"),t}return{}})(t)},h=e=>{e&&(i.value=e.chainId??null,l.value=Array.isArray(e.supportedChains)?e.supportedChains:[])},g=async()=>{var e;const t=await R(),a=null==(e=t.getConfig)?void 0:e.call(t);return h(a),a},w=async e=>{const t=await R();if(!t.wallet.switchChain)throw new Error("switchChain not supported by SDK");await t.wallet.switchChain(e),s.value=e};let m=null;return a(()=>{const t=x();p(t),m=P(e=>{p(e)});const a=D();(null==a?void 0:a.getConfig)&&h(a.getConfig()),a&&!c.value&&(e=>e?(z&&J!==e&&(z=null,J=null),z||(J=e,z=e.wallet.getAddress().then(e=>e||null).catch(e=>{const t=e instanceof Error?e.message:String(e);return console.debug("[MiniApp SDK] Fallback wallet connection failed:",t),null}).finally(()=>{z=null,J=null})),z):Promise.resolve(null))(a).then(t=>{var n;if(!c.value&&t){e.value=t,c.value=!0;const o=null==(n=a.getConfig)?void 0:n.call(a);s.value=(null==o?void 0:o.chainId)??null,r.value=(null==o?void 0:o.chainType)??null,h(o)}}),R().then(e=>{var t;return h(null==(t=e.getConfig)?void 0:t.call(e))}).catch(()=>{})}),n(()=>{m&&m()}),{address:e,chainId:s,chainType:r,appChainId:i,supportedChains:l,balances:o,isConnected:c,isLoading:u,error:d,showConnectionPrompt:f,connectionPromptMessage:v,connect:async()=>{var t;u.value=!0,d.value=null;try{const a=await R(),n=await a.wallet.getAddress();if(!n)throw new Error("wallet returned empty address");e.value=n,c.value=!0;const o=null==(t=a.getConfig)?void 0:t.call(a);s.value=(null==o?void 0:o.chainId)??null,r.value=(null==o?void 0:o.chainType)??null,h(o)}catch(a){d.value=G(a)}finally{u.value=!1}},invokeIntent:async e=>{var t;const a=D();if(!(null==(t=null==a?void 0:a.wallet)?void 0:t.invokeIntent))throw new Error("invokeIntent not available");return a.wallet.invokeIntent(e)},invokeContract:async e=>{var t;const a=await R(),n=null==(t=a.getConfig)?void 0:t.call(a),o=e.contractAddress||e.scriptHash||e.contractHash,s=e.method||e.operation;if(!o||!s)throw new Error("contract address and method required");return a.invoke("invokeFunction",{contract:o,method:s,args:e.args,chainId:null==n?void 0:n.chainId,chainType:null==n?void 0:n.chainType})},invokeRead:async e=>{var t;const a=await R(),n=null==(t=a.getConfig)?void 0:t.call(a),o=e.contractAddress||e.scriptHash||e.contractHash||(null==n?void 0:n.contractAddress),s=e.method||e.operation;if(!o)throw new Error("contract address not configured");if(!s)throw new Error("method required");return a.invoke("invokeRead",{contract:o,method:s,args:e.args||[],chainId:e.chainId||(null==n?void 0:n.chainId),chainType:e.chainType||(null==n?void 0:n.chainType)})},getContractAddress:async()=>{var e,t,a,n,o;const s=await R(),r=null==(e=s.getConfig)?void 0:e.call(s);if(null==r?void 0:r.contractAddress)return r.contractAddress;if((null==r?void 0:r.chainId)&&(null==(a=null==(t=null==r?void 0:r.chainContracts)?void 0:t[r.chainId])?void 0:a.address))return r.chainContracts[r.chainId].address||null;if(s.invoke)try{const e=await s.invoke("getConfig");if(null==e?void 0:e.contractAddress)return e.contractAddress;if((null==e?void 0:e.chainId)&&(null==(o=null==(n=null==e?void 0:e.chainContracts)?void 0:n[e.chainId])?void 0:o.address))return e.chainContracts[e.chainId].address||null}catch{}return null},getAppConfig:g,getAddress:async()=>(await R()).wallet.getAddress(),signMessage:async e=>{var t;const a=await R();if(!(null==(t=a.wallet)?void 0:t.signMessage))throw new Error("signMessage not available");return a.wallet.signMessage(e)},switchChain:w,switchToAppChain:async e=>{const t=await g(),a=(null==t?void 0:t.chainId)||(Array.isArray(null==t?void 0:t.supportedChains)&&t.supportedChains.length>0?t.supportedChains[0]:null)||e||null;if(!a)throw new Error("app chain not configured");await w(a)},getBalance:async e=>{var t;u.value=!0,d.value=null;try{const a=await R(),n=null==(t=a.getConfig)?void 0:t.call(a),r=(null==n?void 0:n.chainId)||s.value,i=r?`?chain_id=${encodeURIComponent(r)}`:"",l=await B(`/wallet-balance${i}`),c=(null==l?void 0:l.balances)??{};return o.value=c,e?c[e]||"0":c}catch(a){throw d.value=G(a),a}finally{u.value=!1}},getTransactions:async(e=20)=>{var t;u.value=!0,d.value=null;try{const a=Number.isNaN(e)||e<1?20:Math.min(e,100),n=await R(),o=null==(t=n.getConfig)?void 0:t.call(n),r=(null==o?void 0:o.chainId)||s.value,i=new URLSearchParams({limit:String(a)});r&&i.set("chain_id",r);const l=await B(`/wallet-transactions?${i.toString()}`);return(null==l?void 0:l.transactions)??[]}catch(a){throw d.value=G(a),a}finally{u.value=!1}},invoke:async(e,t)=>(await R()).invoke(e,t),requireConnection:(e={})=>{const{showPrompt:t=!0,errorMessage:a}=e;return!!c.value||(t&&(v.value=a||null,f.value=!0),!1)},closeConnectionPrompt:()=>{f.value=!1,v.value=null},clearError:()=>{d.value=null}}}function Y(){const{switchToAppChain:e}=X(),t=o(()=>!1),a=async()=>{try{await e()}catch(t){throw console.error("[useChainValidation] Failed to switch chain:",t),t}},n=o(()=>({show:t.value,onSwitch:a}));return{showWarning:t,switchToAppChain:a,chainWarningProps:n}}const Z=M(s({__name:"ChainWarning",props:{title:{default:"Wrong Network"},message:{default:"Switch to Neo N3 Mainnet to continue."},buttonText:{default:"Switch Network"},show:{type:Boolean,default:void 0}},emits:["switch","switch-complete","switch-error"],setup(e,{emit:a}){const n=e,s=a,{showWarning:g,switchToAppChain:w}=Y(),m=t(!1),y=o(()=>void 0!==n.show?n.show:g.value),b=async()=>{if(!m.value){m.value=!0,s("switch");try{await w(),s("switch-complete")}catch(e){const t=e instanceof Error?e:new Error(String(e));s("switch-error",t),console.error("[ChainWarning] Failed to switch chain:",t)}finally{m.value=!1}}};return(e,t)=>{const a=d,n=l;return y.value?(r(),i(n,{key:0,class:"chain-warning mb-4 px-4",role:"alert","aria-live":"assertive"},{default:c(()=>[u(h(O),{variant:"danger"},{default:c(()=>[u(n,{class:"flex flex-col items-center gap-2 py-1"},{default:c(()=>[u(a,{class:"text-center font-bold text-red-400"},{default:c(()=>[f(v(e.title),1)]),_:1}),e.message?(r(),i(a,{key:0,class:"text-center text-xs text-white opacity-80"},{default:c(()=>[f(v(e.message),1)]),_:1})):p("",!0),u(h(K),{size:"sm",variant:"secondary",class:"mt-2",loading:m.value,onClick:b},{default:c(()=>[f(v(e.buttonText),1)]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})):p("",!0)}}}),[["__scopeId","data-v-8876cefe"]]),Q=M(s({__name:"NeoStats",props:{stats:{}},setup:e=>(e,t)=>{const a=d,n=l;return r(),i(n,{class:"neo-stats",role:"list","aria-label":"Statistics"},{default:c(()=>[(r(!0),g(m,null,w(e.stats,e=>(r(),i(n,{key:e.label,class:y(["neo-stats__item",`neo-stats__item--${e.variant||"default"}`]),role:"listitem","aria-label":`${e.label}: ${e.value}`},{default:c(()=>[u(a,{class:"neo-stats__value","aria-hidden":"true"},{default:c(()=>[f(v(e.value),1)]),_:2},1024),u(a,{class:"neo-stats__label","aria-hidden":"true"},{default:c(()=>[f(v(e.label),1)]),_:2},1024)]),_:2},1032,["class","aria-label"]))),128))]),_:1})}}),[["__scopeId","data-v-46509ca9"]]),ee=M(s({__name:"ErrorBoundary",props:{showDetails:{type:Boolean,default:!1},onError:{},fallback:{}},emits:["retry","reset","error"],setup(e,{expose:a,emit:n}){const o=e,s=n,h=t(!1),g=t(null),w=t(""),m=e=>({errorTitle:"Something went wrong",retry:"Try Again",reset:"Reset"}[e]||e);b(e=>{var t;const a=e instanceof Error?e:new Error(String(e));return g.value=a,w.value=o.fallback||a.message||"An unexpected error occurred",h.value=!0,s("error",a),null==(t=o.onError)||t.call(o,a),!1});const y=()=>{h.value=!1,g.value=null,s("retry")},k=()=>{h.value=!1,g.value=null,w.value="",s("reset")};return a({setError:e=>{const t=e instanceof Error?e:new Error(e);g.value=t,w.value=t.message,h.value=!0,s("error",t)},clearError:k}),(e,t)=>{const a=d,n=l;return h.value?(r(),i(n,{key:0,class:"error-boundary",role:"alert","aria-live":"assertive"},{default:c(()=>[u(n,{class:"error-container"},{default:c(()=>[u(a,{class:"error-icon"},{default:c(()=>[f("âš ï¸")]),_:1}),u(a,{class:"error-title"},{default:c(()=>[f(v(m("errorTitle")||"Something went wrong"),1)]),_:1}),u(a,{class:"error-message"},{default:c(()=>[f(v(w.value),1)]),_:1}),u(n,{class:"error-actions"},{default:c(()=>[u(K,{variant:"primary",onClick:y},{default:c(()=>[f(v(m("retry")||"Try Again"),1)]),_:1}),u(K,{variant:"secondary",onClick:k},{default:c(()=>[f(v(m("reset")||"Reset"),1)]),_:1})]),_:1}),e.showDetails?(r(),i(n,{key:0,class:"error-details"},{default:c(()=>[u(a,{class:"error-stack"},{default:c(()=>{var e,t;return[f(v((null==(e=g.value)?void 0:e.stack)||(null==(t=g.value)?void 0:t.message)),1)]}),_:1})]),_:1})):p("",!0)]),_:1})]),_:1})):_(e.$slots,"default",{key:1},void 0,!0)}}}),[["__scopeId","data-v-34155aa3"]]),te=M(s({__name:"Fireworks",props:{active:{type:Boolean,default:!1},duration:{default:3e3}},emits:["complete"],setup(e,{emit:t}){const a=e,o=t;let s=null;const d=e=>{const t=["#ff6b6b","#ffd93d","#6bcb77","#4d96ff","#ff6bd6","#a855f7"];return{left:`${10+80*Math.random()}%`,top:`${10+60*Math.random()}%`,animationDelay:`${.5*Math.random()}s`,"--firework-color":t[(e-1)%t.length]}};return k(()=>a.active,e=>{e&&(s=setTimeout(()=>{o("complete")},a.duration))}),n(()=>{s&&clearTimeout(s)}),(e,t)=>{const a=l;return e.active?(r(),i(a,{key:0,class:"fireworks-container","aria-hidden":"true"},{default:c(()=>[(r(),g(m,null,w(12,e=>u(a,{key:e,class:y(`firework firework-${e}`),style:C(d(e))},{default:c(()=>[(r(),g(m,null,w(8,e=>u(a,{key:e,class:y(`spark spark-${e}`)},null,8,["class"])),64))]),_:2},1032,["class","style"])),64))]),_:1})):p("",!0)}}}),[["__scopeId","data-v-8a253f7e"]]),ae=M(s({__name:"SidebarPanel",props:{title:{default:""},description:{default:""},items:{default:()=>[]}},setup:e=>(e,t)=>{const a=d,n=l;return r(),i(n,{class:"sidebar-panel-content"},{default:c(()=>[e.title?(r(),i(a,{key:0,class:"sidebar-title"},{default:c(()=>[f(v(e.title),1)]),_:1})):p("",!0),e.description?(r(),i(a,{key:1,class:"sidebar-desc"},{default:c(()=>[f(v(e.description),1)]),_:1})):p("",!0),e.items.length?(r(),i(n,{key:2,class:"sidebar-items"},{default:c(()=>[(r(!0),g(m,null,w(e.items,e=>(r(),i(n,{key:e.label,class:"sidebar-item"},{default:c(()=>[u(a,{class:"sidebar-item-label"},{default:c(()=>[f(v(e.label),1)]),_:2},1024),u(a,{class:"sidebar-value"},{default:c(()=>[f(v(e.value),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})):p("",!0),_(e.$slots,"default",{},void 0,!0)]),_:3})}}),[["__scopeId","data-v-0f03dbb3"]]),ne=M(s({__name:"game-board",emits:["ready"],setup:e=>(e,t)=>{const a=l;return r(),i(a,{class:"game-board-slot"},{default:c(()=>[u(a,{class:"game-arena"},{default:c(()=>[_(e.$slots,"default",{},void 0,!0)]),_:3})]),_:3})}}),[["__scopeId","data-v-865ce7b3"]]),oe=M(s({__name:"market-list",emits:["ready"],setup:e=>(e,t)=>{const a=l;return r(),i(a,{class:"market-list-slot"},{default:c(()=>[e.$slots.filters?(r(),i(a,{key:0,class:"list-filters"},{default:c(()=>[_(e.$slots,"filters",{},void 0,!0)]),_:3})):p("",!0),u(a,{class:"list-container"},{default:c(()=>[_(e.$slots,"default",{},void 0,!0)]),_:3})]),_:3})}}),[["__scopeId","data-v-7bb016db"]]),se=M(s({__name:"form-panel",emits:["ready"],setup:e=>(e,t)=>{const a=l;return r(),i(a,{class:"form-panel-slot"},{default:c(()=>[u(a,{class:"form-card"},{default:c(()=>[_(e.$slots,"default",{},void 0,!0)]),_:3}),e.$slots.footer?(r(),i(a,{key:0,class:"form-footer"},{default:c(()=>[_(e.$slots,"footer",{},void 0,!0)]),_:3})):p("",!0)]),_:3})}}),[["__scopeId","data-v-dc99375e"]]),re=M(s({__name:"dashboard",emits:["ready"],setup:e=>(e,t)=>{const a=l;return r(),i(a,{class:"dashboard-slot"},{default:c(()=>[e.$slots.hero?(r(),i(a,{key:0,class:"dashboard-hero"},{default:c(()=>[_(e.$slots,"hero",{},void 0,!0)]),_:3})):p("",!0),u(a,{class:"dashboard-panels"},{default:c(()=>[_(e.$slots,"default",{},void 0,!0)]),_:3})]),_:3})}}),[["__scopeId","data-v-094f7c79"]]),ie=M(s({__name:"swap-interface",emits:["ready"],setup:e=>(e,t)=>{const a=l;return r(),i(a,{class:"swap-interface-slot"},{default:c(()=>[u(a,{class:"swap-container"},{default:c(()=>[_(e.$slots,"default",{},void 0,!0)]),_:3})]),_:3})}}),[["__scopeId","data-v-172c680c"]]),le=M(s({__name:"timer-hero",emits:["ready"],setup:e=>(e,t)=>{const a=l;return r(),i(a,{class:"timer-hero-slot"},{default:c(()=>[u(a,{class:"timer-display"},{default:c(()=>[_(e.$slots,"timer",{},void 0,!0)]),_:3}),u(a,{class:"timer-action"},{default:c(()=>[_(e.$slots,"default",{},void 0,!0)]),_:3})]),_:3})}}),[["__scopeId","data-v-b3a2b09d"]]),ce=M(s({__name:"two-column",emits:["ready"],setup(e){const t=A(),a=o(()=>!!t.operation);return(e,t)=>{const n=l;return r(),i(n,{class:y(["two-column-slot",{"single-column":!a.value}])},{default:c(()=>[u(n,{class:"two-column-info"},{default:c(()=>[_(e.$slots,"default",{},void 0,!0)]),_:3}),a.value?(r(),i(n,{key:0,class:"two-column-operation"},{default:c(()=>[_(e.$slots,"operation",{},void 0,!0)]),_:3})):p("",!0)]),_:3},8,["class"])}}}),[["__scopeId","data-v-34a617ab"]]),ue=M(s({__name:"MiniAppTemplate",props:{config:{},state:{},t:{type:Function},statusMessage:{},fireworksActive:{type:Boolean}},emits:["tab-change"],setup(e,{emit:a}){const n=e,s=a,y=A(),{showWarning:b}=Y(),k=o(()=>{var e;return!1!==(null==(e=n.config.features)?void 0:e.chainWarning)&&b.value}),C=o(()=>{var e;const t=n.config.tabs.find(e=>e.default);return(null==t?void 0:t.key)??(null==(e=n.config.tabs[0])?void 0:e.key)??""}),E=t(C.value),I=o(()=>n.config.tabs.map(e=>({id:e.key,label:n.t(e.labelKey),icon:e.icon??""}))),T=o(()=>n.config.tabs.filter(e=>e.key!==C.value)),M=e=>{E.value=e,s("tab-change",e)},N={"game-board":ne,"market-list":oe,"form-panel":se,dashboard:re,"swap-interface":ie,"timer-hero":le,"two-column":ce,custom:"view"},$=o(()=>N[n.config.contentType]??"view"),P=o(()=>{var e;return((null==(e=n.config.stats)?void 0:e.length)??0)>0}),R=(e,t)=>{const a=t??0;switch(e.format){case"currency":return`${Number(a).toFixed(2)} GAS`;case"percent":return`${Number(a).toFixed(1)}%`;case"duration":return String(a);default:return"number"==typeof a?a:Number(a)||0}},D=o(()=>(n.config.stats??[]).map(e=>({label:n.t(e.labelKey),value:R(e,n.state[e.valueKey]),variant:e.variant??"default"}))),x=o(()=>{var e;return null==(e=n.config.features)?void 0:e.docs}),K=o(()=>!!x.value),L=o(()=>{var e;return((null==(e=x.value)?void 0:e.stepKeys)??[]).map(e=>n.t(e))}),G=o(()=>{var e;return((null==(e=x.value)?void 0:e.featureKeys)??[]).map(e=>({name:n.t(e.nameKey),desc:n.t(e.descKey)}))}),W=o(()=>{var e;return!1!==(null==(e=n.config.features)?void 0:e.fireworks)}),U=o(()=>{var e;return!1!==(null==(e=n.config.features)?void 0:e.statusMessages)}),q=e=>!!y[e];return(e,t)=>{const a=d,n=l;return r(),i(h(j),{"desktop-breakpoint":1024,tabs:I.value,"active-tab":E.value,onTabChange:M},{"desktop-sidebar":c(()=>[_(e.$slots,"desktop-sidebar",{},void 0,!0)]),default:c(()=>[k.value?(r(),i(h(Z),{key:0,title:e.t("wrongChain"),message:e.t("wrongChainMessage"),"button-text":e.t("switchToNeo")},null,8,["title","message","button-text"])):p("",!0),U.value&&e.statusMessage?(r(),i(h(O),{key:1,variant:"error"===e.statusMessage.type?"danger":"erobo-neo",class:"template-status mb-4"},{default:c(()=>[u(a,{class:"text-center font-bold"},{default:c(()=>[f(v(e.statusMessage.msg),1)]),_:1})]),_:1},8,["variant"])):p("",!0),E.value===C.value?(r(),i(n,{key:2,class:"tab-content",role:"tabpanel",id:`tabpanel-${C.value}`,"aria-labelledby":`tab-${C.value}`},{default:c(()=>[(r(),i(S($.value),null,{operation:c(()=>[_(e.$slots,"operation",{},void 0,!0)]),default:c(()=>[_(e.$slots,"content",{},void 0,!0)]),_:3}))]),_:3},8,["id","aria-labelledby"])):p("",!0),(r(!0),g(m,null,w(T.value,t=>(r(),g(m,{key:t.key},[E.value===t.key?(r(),i(n,{key:0,class:"tab-content scrollable",role:"tabpanel",id:`tabpanel-${t.key}`,"aria-labelledby":`tab-${t.key}`},{default:c(()=>["stats"===t.key&&P.value&&!q("tab-stats")?(r(),i(h(O),{key:0,variant:"erobo"},{default:c(()=>[u(h(Q),{stats:D.value},null,8,["stats"])]),_:1})):"docs"===t.key&&K.value&&!q("tab-docs")?(r(),i(h(F),{key:1,title:e.t(x.value.titleKey),subtitle:x.value.subtitleKey?e.t(x.value.subtitleKey):void 0,steps:L.value,features:G.value},null,8,["title","subtitle","steps","features"])):_(e.$slots,`tab-${t.key}`,{key:2},void 0,!0)]),_:2},1032,["id","aria-labelledby"])):p("",!0)],64))),128)),W.value?(r(),i(te,{key:3,active:e.fireworksActive,duration:3e3},null,8,["active"])):p("",!0)]),_:3},8,["tabs","active-tab"])}}}),[["__scopeId","data-v-07ef5641"]]),de=5e3,fe=1e4,ve=100,pe=["https://neomini.app","https://miniapp.neo.org","https://testnet.miniapp.neo.org"];const he=new class{constructor(){this.dynamicOrigins=new Set,this.baseOrigins=new Set([...pe])}getSelfOrigin(){if("undefined"==typeof window)return null;try{const e=new URL(window.location.href);if("null"===e.origin)return null;if("http:"===e.protocol||"https:"===e.protocol)return e.origin}catch{}return null}getReferrerOrigin(){if("undefined"==typeof document||!document.referrer)return null;try{return new URL(document.referrer).origin}catch{return null}}getAllowedOrigins(){const e=new Set(this.baseOrigins);this.dynamicOrigins.forEach(t=>e.add(t));const t=this.getReferrerOrigin();t&&this.baseOrigins.has(t)&&e.add(t);const a=this.getSelfOrigin();if(a&&e.add(a),"undefined"!=typeof window){const t=window.location.hostname;"localhost"!==t&&"127.0.0.1"!==t||e.add(window.location.origin)}return e}isValid(e){return!(!e||"null"===e)&&this.getAllowedOrigins().has(e)}getTargetOrigin(){var e;const t=this.getReferrerOrigin();if(t&&this.baseOrigins.has(t))return t;try{if("undefined"!=typeof window&&window.parent!==window&&(null==(e=window.location.ancestorOrigins)?void 0:e.length)>0){const e=window.location.ancestorOrigins[0];if(this.baseOrigins.has(e))return e}}catch{}const a=this.getSelfOrigin();if(a)return a;if("undefined"!=typeof window){const e=window.location.hostname;if("localhost"===e||"127.0.0.1"===e)return window.location.origin}throw new Error("Cannot determine safe target origin - no valid origin found")}getSafeTargetOrigin(){try{const e=this.getTargetOrigin();if(e&&"null"!==e)return e}catch{}if("undefined"!=typeof window&&window.parent!==window){const e=window.__MINIAPP_PARENT_ORIGIN__;if("string"==typeof e&&e&&this.baseOrigins.has(e))return e;throw new Error("Cannot communicate securely with parent - origin unknown. Ensure host app sets __MINIAPP_PARENT_ORIGIN__ or uses a supported browser.")}throw new Error("Cannot determine safe target origin - origin is null or undefined")}addDynamicOrigin(e){e&&"null"!==e&&this.dynamicOrigins.add(e)}};let ge=null;function we(e){const t=null==e?void 0:e.layout;if("web"===t||"mobile"===t)return t;if("undefined"!=typeof window){const e=new URLSearchParams(window.location.search).get("layout");if("web"===e||"mobile"===e)return e;if(window.ReactNativeWebView)return"mobile"}return"web"}function me(e){if(!e||"object"!=typeof e)return!1;const t="function"==typeof e.invoke&&"function"==typeof e.getConfig,a="object"==typeof e.wallet||"object"==typeof e.payments;return t||a}function ye(e=de){return new Promise((t,a)=>{if("undefined"==typeof window)return void a(new Error("SDK not available in SSR"));if(window.MiniAppSDK)return me(window.MiniAppSDK)?void t(window.MiniAppSDK):void a(new Error("SDK validation failed"));const n=setTimeout(()=>{if(window.removeEventListener("miniapp-sdk-ready",o),window.parent!==window){const e=function(){const e=he.getSafeTargetOrigin();let t=0;const a=(a,...n)=>new Promise((o,s)=>{const r="undefined"!=typeof crypto&&crypto.getRandomValues?Array.from(crypto.getRandomValues(new Uint8Array(4)),e=>e.toString(16).padStart(2,"0")).join(""):Math.random().toString(36).slice(2,10),i=`sdk-${++t}-${Date.now()}-${r}`,l=setTimeout(()=>{window.removeEventListener("message",c),s(new Error("SDK invoke timeout"))},fe),c=e=>{var t,a;he.isValid(e.origin)&&e.source===window.parent&&"miniapp_sdk_response"===(null==(t=e.data)?void 0:t.type)&&(null==(a=e.data)?void 0:a.id)===i&&(clearTimeout(l),window.removeEventListener("message",c),e.data.ok?o(e.data.result):s(new Error(e.data.error||"SDK call failed")))};window.addEventListener("message",c),window.parent.postMessage({type:"miniapp_sdk_request",id:i,method:a,params:n},e)});return{invoke:a,getConfig:()=>ge?{...ge,layout:we(ge)}:"undefined"!=typeof window&&window.__MINIAPP_CONFIG__?(ge=window.__MINIAPP_CONFIG__,{...ge,layout:we(ge??void 0)}):{appId:"",contractAddress:null,chainId:null,chainType:void 0,supportedChains:[],layout:we(),debug:!1},getAddress:()=>a("getAddress"),wallet:{getAddress:()=>a("wallet.getAddress"),switchChain:e=>a("wallet.switchChain",e),invokeIntent:e=>a("wallet.invokeIntent",e),signMessage:e=>a("wallet.signMessage",e)},payments:{payGAS:(e,t,n)=>a("payments.payGAS",e,t,n),payGASAndInvoke:(e,t,n)=>a("payments.payGASAndInvoke",e,t,n)},governance:{vote:(e,t,n,o)=>a("governance.vote",e,t,n,o),voteAndInvoke:(e,t,n,o)=>a("governance.voteAndInvoke",e,t,n,o),getCandidates:()=>a("governance.getCandidates")},rng:{requestRandom:e=>a("rng.requestRandom",e)},datafeed:{getPrice:e=>a("datafeed.getPrice",e),getPrices:()=>a("datafeed.getPrices"),getNetworkStats:()=>a("datafeed.getNetworkStats"),getRecentTransactions:e=>a("datafeed.getRecentTransactions",e)},stats:{getMyUsage:(e,t)=>a("stats.getMyUsage",e,t)},events:{list:e=>a("events.list",e),emit:(e,t)=>a("events.emit",e,t)},transactions:{list:e=>a("transactions.list",e)},automation:{register:(e,t,n,o)=>a("automation.register",e,t,n,o),unregister:e=>a("automation.unregister",e),status:e=>a("automation.status",e),list:()=>a("automation.list"),update:(e,t,n)=>a("automation.update",e,t,n),enable:e=>a("automation.enable",e),disable:e=>a("automation.disable",e),logs:(e,t)=>a("automation.logs",e,t)},share:{openModal:e=>a("share.openModal",e),getUrl:e=>a("share.getUrl",e),copy:e=>a("share.copy",e)}}}();window.MiniAppSDK=e,e.invoke("getConfig").then(e=>{e&&"object"==typeof e&&(ge=e)}).catch(()=>{}),t(e)}else a(new Error("SDK timeout"))},e),o=()=>{if(clearTimeout(n),window.removeEventListener("miniapp-sdk-ready",o),window.MiniAppSDK){if(!me(window.MiniAppSDK))return void a(new Error("SDK validation failed"));t(window.MiniAppSDK)}else a(new Error("SDK not found"))};window.addEventListener("miniapp-sdk-ready",o)})}function be(){return"undefined"==typeof window?null:window.MiniAppSDK??null}const _e=new Set;let ke={connected:!1,address:null,balance:null},Ce=null,Ae=!1;function Se(e){return e instanceof Error?e:"string"==typeof e?new Error(e):new Error(String(e))}"undefined"!=typeof window&&("undefined"!=typeof window&&(Ae&&Ce||(Ce=e=>{if(e.source!==window.parent)return;if(!he.isValid(e.origin))return;const t=e.data;t&&"object"==typeof t&&("miniapp_config"!==t.type?"miniapp_wallet_state_change"===t.type&&(ke={connected:Boolean(t.connected),address:t.address||null,chainId:t.chainId??null,chainType:t.chainType??null,balance:t.balance||t.multiChainBalance||null,balances:t.balances||void 0},_e.forEach(e=>{try{e(ke)}catch(t){console.error("[MiniApp SDK] Wallet state listener error:",t)}})):t.config&&"object"==typeof t.config&&(ge=t.config))},window.addEventListener("message",Ce),Ae=!0)),setTimeout(function(){if("undefined"==typeof window)return;const e=he.getSafeTargetOrigin();try{window.parent.postMessage({type:"miniapp_ready"},e)}catch{}},ve));class Ee extends Error{constructor(e,t){super(e),this.statusCode=t,this.name="HttpError"}}const Ie={maxRetries:3,baseDelayMs:1e3,maxDelayMs:1e4};function Te(e,t){return Math.min(t.baseDelayMs*Math.pow(2,e),t.maxDelayMs)*(.75+.5*Math.random())}function Me(e,t){if(t&&t>=500)return!0;if(429===t)return!0;if(e instanceof Error){const t=e.message.toLowerCase();return t.includes("network")||t.includes("timeout")||t.includes("abort")}return!1}async function Ne(t,a){var n;if("undefined"!=typeof uni&&"function"==typeof e)return new Promise((n,o)=>{const s=(e=>{if(e){if(e instanceof Headers){const t={};return e.forEach((e,a)=>{t[a]=e}),t}return Array.isArray(e)?Object.fromEntries(e):e}})(a.headers),r=String((null==s?void 0:s["Content-Type"])||(null==s?void 0:s["content-type"])||"");let i=a.body;if("string"==typeof i&&r.includes("application/json"))try{i=JSON.parse(i)}catch{}e({url:t,method:a.method||"GET",data:i,header:s,success:e=>{if((e.statusCode??0)>=200&&(e.statusCode??0)<300)n(e.data);else{const t=e.data,a=null==t?void 0:t.error,n=("string"==typeof(null==a?void 0:a.message)?a.message:null)||`Request failed: ${e.statusCode}`;o(new Ee(n,e.statusCode??0))}},fail:e=>{o(new Error(e.errMsg||"Network error"))}})});const o="undefined"!=typeof window&&t.startsWith(window.location.origin),s=await fetch(t,{credentials:o?"include":"same-origin",...a});if(!s.ok){const e=await s.json().catch(()=>({}));throw new Ee((null==(n=e.error)?void 0:n.message)||`Request failed: ${t}`,s.status)}return s.json()}async function $e(e){return async function(e,t={}){var a,n;const o=e.startsWith("http")?e:`https://api.neo-service-layer.io${e}`,s={...Ie,...t.retryConfig};let r=null;for(let l=0;l<=s.maxRetries;l++){if(null==(a=t.signal)?void 0:a.aborted)throw new Error("Request cancelled");try{return await Ne(o,t)}catch(i){r=i instanceof Error?i:new Error(String(i));const e=i instanceof Ee?i.statusCode:void 0;if(null==(n=t.signal)?void 0:n.aborted)throw r;if(l>=s.maxRetries)break;if(!Me(i,e))break;const a=Te(l,s);await new Promise(e=>setTimeout(e,a))}}throw r||new Error("Request failed")}(e,{method:"GET"})}let Pe=null,Re=null;function De(){const e=t(null),o=t({}),s=t(null),r=t(null),i=t(null),l=t([]),c=t(!1),u=t(!1),d=t(null),f=t(!1),v=t(null),p=t=>{t.connected&&t.address?(e.value=t.address,c.value=!0):(e.value=null,c.value=!1),s.value=t.chainId??null,r.value=t.chainType??null,o.value=(e=>{if(!e)return{};if(e.balances&&Object.keys(e.balances).length>0)return{...e.balances};if(e.balance){const t={};return t[e.balance.nativeSymbol||("neo-n3"===e.chainType?"GAS":"NATIVE")]=e.balance.native||"0",(e.balance.governance||e.balance.governanceSymbol)&&(t[e.balance.governanceSymbol||("neo-n3"===e.chainType?"NEO":"GOV")]=e.balance.governance||"0"),t}return{}})(t)},h=e=>{e&&(i.value=e.chainId??null,l.value=Array.isArray(e.supportedChains)?e.supportedChains:[])},g=async()=>{var e;const t=await ye(),a=null==(e=t.getConfig)?void 0:e.call(t);return h(a),a},w=async e=>{const t=await ye();if(!t.wallet.switchChain)throw new Error("switchChain not supported by SDK");await t.wallet.switchChain(e),s.value=e};let m=null;return a(()=>{var t;p(ke),t=e=>{p(e)},_e.add(t),t(ke),m=()=>_e.delete(t);const a=be();(null==a?void 0:a.getConfig)&&h(a.getConfig()),a&&!c.value&&(e=>e?(Pe&&Re!==e&&(Pe=null,Re=null),Pe||(Re=e,Pe=e.wallet.getAddress().then(e=>e||null).catch(e=>{const t=e instanceof Error?e.message:String(e);return console.debug("[MiniApp SDK] Fallback wallet connection failed:",t),null}).finally(()=>{Pe=null,Re=null})),Pe):Promise.resolve(null))(a).then(t=>{var n;if(!c.value&&t){e.value=t,c.value=!0;const o=null==(n=a.getConfig)?void 0:n.call(a);s.value=(null==o?void 0:o.chainId)??null,r.value=(null==o?void 0:o.chainType)??null,h(o)}}),ye().then(e=>{var t;return h(null==(t=e.getConfig)?void 0:t.call(e))}).catch(()=>{})}),n(()=>{m&&m()}),{address:e,chainId:s,chainType:r,appChainId:i,supportedChains:l,balances:o,isConnected:c,isLoading:u,error:d,showConnectionPrompt:f,connectionPromptMessage:v,connect:async()=>{var t;u.value=!0,d.value=null;try{const a=await ye(),n=await a.wallet.getAddress();if(!n)throw new Error("wallet returned empty address");e.value=n,c.value=!0;const o=null==(t=a.getConfig)?void 0:t.call(a);s.value=(null==o?void 0:o.chainId)??null,r.value=(null==o?void 0:o.chainType)??null,h(o)}catch(a){d.value=Se(a)}finally{u.value=!1}},invokeIntent:async e=>{var t;const a=be();if(!(null==(t=null==a?void 0:a.wallet)?void 0:t.invokeIntent))throw new Error("invokeIntent not available");return a.wallet.invokeIntent(e)},invokeContract:async e=>{var t;const a=await ye(),n=null==(t=a.getConfig)?void 0:t.call(a),o=e.contractAddress||e.scriptHash||e.contractHash,s=e.method||e.operation;if(!o||!s)throw new Error("contract address and method required");return a.invoke("invokeFunction",{contract:o,method:s,args:e.args,chainId:null==n?void 0:n.chainId,chainType:null==n?void 0:n.chainType})},invokeRead:async e=>{var t;const a=await ye(),n=null==(t=a.getConfig)?void 0:t.call(a),o=e.contractAddress||e.scriptHash||e.contractHash||(null==n?void 0:n.contractAddress),s=e.method||e.operation;if(!o)throw new Error("contract address not configured");if(!s)throw new Error("method required");return a.invoke("invokeRead",{contract:o,method:s,args:e.args||[],chainId:e.chainId||(null==n?void 0:n.chainId),chainType:e.chainType||(null==n?void 0:n.chainType)})},getContractAddress:async()=>{var e,t,a,n,o;const s=await ye(),r=null==(e=s.getConfig)?void 0:e.call(s);if(null==r?void 0:r.contractAddress)return r.contractAddress;if((null==r?void 0:r.chainId)&&(null==(a=null==(t=null==r?void 0:r.chainContracts)?void 0:t[r.chainId])?void 0:a.address))return r.chainContracts[r.chainId].address||null;if(s.invoke)try{const e=await s.invoke("getConfig");if(null==e?void 0:e.contractAddress)return e.contractAddress;if((null==e?void 0:e.chainId)&&(null==(o=null==(n=null==e?void 0:e.chainContracts)?void 0:n[e.chainId])?void 0:o.address))return e.chainContracts[e.chainId].address||null}catch{}return null},getAppConfig:g,getAddress:async()=>(await ye()).wallet.getAddress(),signMessage:async e=>{var t;const a=await ye();if(!(null==(t=a.wallet)?void 0:t.signMessage))throw new Error("signMessage not available");return a.wallet.signMessage(e)},switchChain:w,switchToAppChain:async e=>{const t=await g(),a=(null==t?void 0:t.chainId)||(Array.isArray(null==t?void 0:t.supportedChains)&&t.supportedChains.length>0?t.supportedChains[0]:null)||e||null;if(!a)throw new Error("app chain not configured");await w(a)},getBalance:async e=>{var t;u.value=!0,d.value=null;try{const a=await ye(),n=null==(t=a.getConfig)?void 0:t.call(a),r=(null==n?void 0:n.chainId)||s.value,i=r?`?chain_id=${encodeURIComponent(r)}`:"",l=await $e(`/wallet-balance${i}`),c=(null==l?void 0:l.balances)??{};return o.value=c,e?c[e]||"0":c}catch(a){throw d.value=Se(a),a}finally{u.value=!1}},getTransactions:async(e=20)=>{var t;u.value=!0,d.value=null;try{const a=Number.isNaN(e)||e<1?20:Math.min(e,100),n=await ye(),o=null==(t=n.getConfig)?void 0:t.call(n),r=(null==o?void 0:o.chainId)||s.value,i=new URLSearchParams({limit:String(a)});r&&i.set("chain_id",r);const l=await $e(`/wallet-transactions?${i.toString()}`);return(null==l?void 0:l.transactions)??[]}catch(a){throw d.value=Se(a),a}finally{u.value=!1}},invoke:async(e,t)=>(await ye()).invoke(e,t),requireConnection:(e={})=>{const{showPrompt:t=!0,errorMessage:a}=e;return!!c.value||(t&&(v.value=a||null,f.value=!0),!1)},closeConnectionPrompt:()=>{f.value=!1,v.value=null},clearError:()=>{d.value=null}}}function xe(){const{t:s,locale:r}=N(),{chainType:i}=De(),l=t([]),c=t(0),u=t(!1),d=t(!1),f=t(window.innerWidth),v=o(()=>f.value<768),p=o(()=>f.value>=1024),h=()=>{f.value=window.innerWidth};a(()=>window.addEventListener("resize",h)),n(()=>window.removeEventListener("resize",h));const g="undefined"!=typeof window&&["127.0.0.1","localhost"].includes(window.location.hostname),w={total:3,items:[{offchain_id:"101",title:"Developer Education Sprint",proposer:"NfYhP6Yw5tM4oX2Qz7bR5mU8dC6jK9vW1Q",state:"active",votes_amount_accept:152340,votes_amount_reject:12340,discussion_url:"https://forum.grantshares.io/t/dev-education-sprint",offchain_creation_timestamp:"2026-01-30T08:12:00.000Z",offchain_comments_count:18,onchain_id:57,description:"Build a 6-week education sprint focused on secure NEO smart contract development."},{offchain_id:"102",title:"Neo Wallet UX Research",proposer:"NQf1fY3mP8jC2rL7nD4sX9aV6kW3mP5tYH",state:"review",votes_amount_accept:92340,votes_amount_reject:4560,discussion_url:"https://forum.grantshares.io/t/wallet-ux-research",offchain_creation_timestamp:"2026-02-01T13:20:00.000Z",offchain_comments_count:9,onchain_id:58,description:"Research and prototype better onboarding and transaction clarity for first-time users."},{offchain_id:"103",title:"Cross-Chain Tooling Maintenance",proposer:"NdR6mX4tW8qL2dP5sH9fV3bN1kJ7gC2qZT",state:"executed",votes_amount_accept:210340,votes_amount_reject:7830,discussion_url:"https://forum.grantshares.io/t/cross-chain-tooling-maintenance",offchain_creation_timestamp:"2025-12-18T10:45:00.000Z",offchain_comments_count:24,onchain_id:54,description:"Maintain bridge and indexing tooling to improve reliability and incident response."}]},m=o(()=>l.value.filter(e=>_(e.state)).length),y=o(()=>l.value.length);function b(e){return String(e||"").toLowerCase()}function _(e){const t=b(e);return["active","review","voting","discussion"].includes(t)}return{grants:l,totalProposals:c,loading:u,fetchError:d,activeProposals:m,displayedProposals:y,isMobile:v,isDesktop:p,windowWidth:f,chainType:i,fetchGrants:async function(){u.value=!0,d.value=!1;try{let t=null;g&&(t=w),t||(t=await new Promise((t,a)=>{e({url:"/api/grantshares/proposals",success:e=>t((e=>{if("string"==typeof e)try{return JSON.parse(e)}catch{return null}return e})(e.data)),fail:e=>a(e)})}));const a=t;if(a&&Array.isArray(a.items)){l.value=a.items.map(e=>{const t=function(e){try{return decodeURIComponent(escape(atob(e)))}catch{return e}}(String(e.title||""));return{id:String(e.offchain_id||e.id||""),title:t,proposer:String(e.proposer||e.proposer_address||e.proposerAddress||""),state:b(String(e.state||"")),votesAccept:Number(e.votes_amount_accept||e.votesAmountAccept||0),votesReject:Number(e.votes_amount_reject||e.votesAmountReject||0),discussionUrl:String(e.discussion_url||e.discussionUrl||""),createdAt:String(e.offchain_creation_timestamp||e.offchainCreationTimestamp||""),comments:Number(e.offchain_comments_count||e.offchainCommentsCount||0),onchainId:e.onchain_id??e.onchainId??null}}).filter(e=>e.id&&e.title);const e=Number(a.total??a.totalCount??l.value.length);c.value=Number.isFinite(e)?e:l.value.length}else l.value=[],c.value=0}catch(t){l.value=[],c.value=0,d.value=!0}finally{u.value=!1}},formatCount:function(e){return Number.isFinite(e)?e.toLocaleString():"0"},formatDate:function(e){if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const a="zh"===r.value?"zh-CN":"en-US";return t.toLocaleDateString(a,{month:"short",day:"numeric",year:"numeric"})},getStatusLabel:function(e){return{active:s("statusActive"),review:s("statusReview"),voting:s("statusVoting"),discussion:s("statusDiscussion"),executed:s("statusExecuted"),cancelled:s("statusCancelled"),rejected:s("statusRejected"),expired:s("statusExpired")}[b(e)]||e},normalizeState:b,isActiveState:_}}t("en");const Ke=M(s({__name:"ProposalGallery",props:{grants:{},loading:{type:Boolean},fetchError:{type:Boolean},t:{type:Function},formatCount:{type:Function},formatDate:{type:Function},getStatusLabel:{type:Function}},emits:["select","copyLink"],setup:e=>(e,t)=>{const a=d,n=l;return r(),i(n,{class:"proposal-gallery"},{default:c(()=>[e.loading?(r(),i(n,{key:0,class:"empty-state"},{default:c(()=>[u(a,{class:"empty-text"},{default:c(()=>[f(v(e.t("loading")),1)]),_:1})]),_:1})):e.fetchError?(r(),i(n,{key:1,class:"empty-state"},{default:c(()=>[u(a,{class:"empty-text"},{default:c(()=>[f(v(e.t("loadFailed")),1)]),_:1})]),_:1})):0===e.grants.length?(r(),i(n,{key:2,class:"empty-state"},{default:c(()=>[u(a,{class:"empty-text"},{default:c(()=>[f(v(e.t("noActiveGrants")),1)]),_:1})]),_:1})):(r(),i(n,{key:3,class:"grants-list"},{default:c(()=>[(r(!0),g(m,null,w(e.grants,o=>(r(),i(h(O),{key:o.id,variant:"erobo-neo",class:"grant-card-neo clickable",hoverable:"",onClick:t=>e.$emit("select",o)},{default:c(()=>[u(n,{class:"grant-card-header"},{default:c(()=>[u(n,{class:"grant-info"},{default:c(()=>[u(a,{class:"grant-title-glass"},{default:c(()=>[f(v(o.title),1)]),_:2},1024),o.proposer?(r(),i(a,{key:0,class:"grant-creator-glass"},{default:c(()=>[f(v(e.t("by"))+" "+v(o.proposer),1)]),_:2},1024)):p("",!0)]),_:2},1024),u(n,{class:y(["grant-badge-glass",o.state])},{default:c(()=>[u(a,{class:"badge-text"},{default:c(()=>[f(v(e.getStatusLabel(o.state)),1)]),_:2},1024)]),_:2},1032,["class"])]),_:2},1024),u(n,{class:"proposal-meta"},{default:c(()=>[null!==o.onchainId?(r(),i(a,{key:0,class:"meta-item"},{default:c(()=>[f("#"+v(o.onchainId),1)]),_:2},1024)):p("",!0),o.createdAt?(r(),i(a,{key:1,class:"meta-item"},{default:c(()=>[f(v(e.formatDate(o.createdAt)),1)]),_:2},1024)):p("",!0)]),_:2},1024),u(n,{class:"proposal-stats"},{default:c(()=>[u(n,{class:"stat-chip accept"},{default:c(()=>[f(v(e.t("votesFor"))+" "+v(e.formatCount(o.votesAccept)),1)]),_:2},1024),u(n,{class:"stat-chip reject"},{default:c(()=>[f(v(e.t("votesAgainst"))+" "+v(e.formatCount(o.votesReject)),1)]),_:2},1024),u(n,{class:"stat-chip comments"},{default:c(()=>[f(v(e.t("comments"))+" "+v(e.formatCount(o.comments)),1)]),_:2},1024)]),_:2},1024),u(n,{class:"proposal-actions"},{default:c(()=>[u(n,{onClick:t[0]||(t[0]=E(()=>{},["stop"]))},{default:c(()=>[u(h(K),{size:"sm",variant:"secondary",disabled:!o.discussionUrl,onClick:t=>e.$emit("copyLink",o.discussionUrl)},{default:c(()=>[f(v(o.discussionUrl?e.t("copyDiscussion"):e.t("noDiscussion")),1)]),_:2},1032,["disabled","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1}))]),_:1})}}),[["__scopeId","data-v-24ff82ec"]]),Oe=M(s({__name:"index",setup(e){const{t:n}=N(),{grants:s,totalProposals:d,loading:f,fetchError:v,activeProposals:p,displayedProposals:g,fetchGrants:w,formatCount:m,formatDate:y,getStatusLabel:b}=xe(),{statusMessage:_,statusType:k,copyLink:C}=function(){const{t:e}=N(),{status:t,setStatus:a}=L();return{statusMessage:o(()=>{var e;return(null==(e=t.value)?void 0:e.msg)??""}),statusType:o(()=>{var e;return(null==(e=t.value)?void 0:e.type)??"success"}),showStatus:a,copyLink:function(t){var n;if(!t)return;const o=null==globalThis?void 0:globalThis.uni;(null==o?void 0:o.setClipboardData)?o.setClipboardData({data:t,success:()=>a(e("linkCopied"),"success"),fail:()=>a(e("copyFailed"),"error")}):"undefined"!=typeof navigator&&(null==(n=navigator.clipboard)?void 0:n.writeText)?navigator.clipboard.writeText(t).then(()=>a(e("linkCopied"),"success")).catch(()=>a(e("copyFailed"),"error")):a(e("copyFailed"),"error")}}}(),A={contentType:"two-column",tabs:[{key:"main",labelKey:"tabGrants",icon:"ðŸ“‹",default:!0},{key:"docs",labelKey:"docs",icon:"ðŸ“–"}],features:{fireworks:!1,chainWarning:!0,statusMessages:!0,docs:{titleKey:"title",subtitleKey:"docSubtitle",stepKeys:["step1","step2","step3","step4"],featureKeys:[{nameKey:"feature1Name",descKey:"feature1Desc"},{nameKey:"feature2Name",descKey:"feature2Desc"}]}}},S=t("main"),E=o(()=>({totalProposals:d.value,activeProposals:p.value,displayedProposals:g.value})),M=o(()=>[{label:n("totalPool"),value:m(d.value)},{label:n("activeProjects"),value:m(p.value)},{label:n("yourShare"),value:m(g.value)}]),$=o(()=>[{label:n("totalPool"),value:m(d.value)},{label:n("activeProjects"),value:m(p.value)},{label:n("yourShare"),value:m(g.value),variant:"accent"}]),P=e=>{console.error("[grant-share] boundary error:",e)},R=async()=>{await w()};function D(e){try{I("current_grant_detail",e)}catch(t){}T({url:`/pages/detail/index?id=${e.id}`})}return a(()=>{w()}),(e,t)=>{const a=l;return r(),i(a,{class:"theme-grant-share"},{default:c(()=>[u(h(ue),{config:A,state:E.value,t:h(n),"status-message":h(_)?{msg:h(_),type:h(k)}:null,onTabChange:t[0]||(t[0]=e=>S.value=e)},{"desktop-sidebar":c(()=>[u(h(ae),{title:h(n)("overview"),items:M.value},null,8,["title","items"])]),content:c(()=>[u(h(ee),{onError:P,onRetry:R,"fallback-message":h(n)("errorFallback")},{default:c(()=>[u(Ke,{grants:h(s),loading:h(f),"fetch-error":h(v),t:h(n),"format-count":h(m),"format-date":h(y),"get-status-label":h(b),onSelect:D,onCopyLink:h(C)},null,8,["grants","loading","fetch-error","t","format-count","format-date","get-status-label","onCopyLink"])]),_:1},8,["fallback-message"])]),operation:c(()=>[u(h(Q),{stats:$.value},null,8,["stats"])]),_:1},8,["state","t","status-message"])]),_:1})}}}),[["__scopeId","data-v-7ca6839e"]]);export{Oe as default};
