import{r as e,a as t,o as n,b as a,d as o,c as i,e as r,f as s,i as l,n as c,g as u,w as d,h as f,j as h,t as p,k as g,l as v,F as w,m as y,p as b,q as m,s as _,u as k,v as C,x as I,y as E,z as A,A as S,B,C as T,D as N,E as z,G as O}from"./index-B9E8rTOf.js";const R=5e3,M=1e4,x=100,U=["https://neomini.app","https://miniapp.neo.org","https://testnet.miniapp.neo.org"];const L=new class{constructor(){this.dynamicOrigins=new Set,this.baseOrigins=new Set([...U])}getSelfOrigin(){if("undefined"==typeof window)return null;try{const e=new URL(window.location.href);if("null"===e.origin)return null;if("http:"===e.protocol||"https:"===e.protocol)return e.origin}catch{}return null}getReferrerOrigin(){if("undefined"==typeof document||!document.referrer)return null;try{return new URL(document.referrer).origin}catch{return null}}getAllowedOrigins(){const e=new Set(this.baseOrigins);this.dynamicOrigins.forEach(t=>e.add(t));const t=this.getReferrerOrigin();t&&this.baseOrigins.has(t)&&e.add(t);const n=this.getSelfOrigin();if(n&&e.add(n),"undefined"!=typeof window){const t=window.location.hostname;"localhost"!==t&&"127.0.0.1"!==t||e.add(window.location.origin)}return e}isValid(e){return!(!e||"null"===e)&&this.getAllowedOrigins().has(e)}getTargetOrigin(){var e;const t=this.getReferrerOrigin();if(t&&this.baseOrigins.has(t))return t;try{if("undefined"!=typeof window&&window.parent!==window&&(null==(e=window.location.ancestorOrigins)?void 0:e.length)>0){const e=window.location.ancestorOrigins[0];if(this.baseOrigins.has(e))return e}}catch{}const n=this.getSelfOrigin();if(n)return n;if("undefined"!=typeof window){const e=window.location.hostname;if("localhost"===e||"127.0.0.1"===e)return window.location.origin}throw new Error("Cannot determine safe target origin - no valid origin found")}getSafeTargetOrigin(){try{const e=this.getTargetOrigin();if(e&&"null"!==e)return e}catch{}if("undefined"!=typeof window&&window.parent!==window){const e=window.__MINIAPP_PARENT_ORIGIN__;if("string"==typeof e&&e&&this.baseOrigins.has(e))return e;throw new Error("Cannot communicate securely with parent - origin unknown. Ensure host app sets __MINIAPP_PARENT_ORIGIN__ or uses a supported browser.")}throw new Error("Cannot determine safe target origin - origin is null or undefined")}addDynamicOrigin(e){e&&"null"!==e&&this.dynamicOrigins.add(e)}};let P=null;function $(e){const t=null==e?void 0:e.layout;if("web"===t||"mobile"===t)return t;if("undefined"!=typeof window){const e=new URLSearchParams(window.location.search).get("layout");if("web"===e||"mobile"===e)return e;if(window.ReactNativeWebView)return"mobile"}return"web"}function D(e){if(!e||"object"!=typeof e)return!1;const t="function"==typeof e.invoke&&"function"==typeof e.getConfig,n="object"==typeof e.wallet||"object"==typeof e.payments;return t||n}function V(e=R){return new Promise((t,n)=>{if("undefined"==typeof window)return void n(new Error("SDK not available in SSR"));if(window.MiniAppSDK)return D(window.MiniAppSDK)?void t(window.MiniAppSDK):void n(new Error("SDK validation failed"));const a=setTimeout(()=>{if(window.removeEventListener("miniapp-sdk-ready",o),window.parent!==window){const e=function(){const e=L.getSafeTargetOrigin();let t=0;const n=(n,...a)=>new Promise((o,i)=>{const r="undefined"!=typeof crypto&&crypto.getRandomValues?Array.from(crypto.getRandomValues(new Uint8Array(4)),e=>e.toString(16).padStart(2,"0")).join(""):Math.random().toString(36).slice(2,10),s=`sdk-${++t}-${Date.now()}-${r}`,l=setTimeout(()=>{window.removeEventListener("message",c),i(new Error("SDK invoke timeout"))},M),c=e=>{var t,n;L.isValid(e.origin)&&e.source===window.parent&&"miniapp_sdk_response"===(null==(t=e.data)?void 0:t.type)&&(null==(n=e.data)?void 0:n.id)===s&&(clearTimeout(l),window.removeEventListener("message",c),e.data.ok?o(e.data.result):i(new Error(e.data.error||"SDK call failed")))};window.addEventListener("message",c),window.parent.postMessage({type:"miniapp_sdk_request",id:s,method:n,params:a},e)});return{invoke:n,getConfig:()=>P?{...P,layout:$(P)}:"undefined"!=typeof window&&window.__MINIAPP_CONFIG__?(P=window.__MINIAPP_CONFIG__,{...P,layout:$(P??void 0)}):{appId:"",contractAddress:null,chainId:null,chainType:void 0,supportedChains:[],layout:$(),debug:!1},getAddress:()=>n("getAddress"),wallet:{getAddress:()=>n("wallet.getAddress"),switchChain:e=>n("wallet.switchChain",e),invokeIntent:e=>n("wallet.invokeIntent",e),signMessage:e=>n("wallet.signMessage",e)},payments:{payGAS:(e,t,a)=>n("payments.payGAS",e,t,a),payGASAndInvoke:(e,t,a)=>n("payments.payGASAndInvoke",e,t,a)},governance:{vote:(e,t,a,o)=>n("governance.vote",e,t,a,o),voteAndInvoke:(e,t,a,o)=>n("governance.voteAndInvoke",e,t,a,o),getCandidates:()=>n("governance.getCandidates")},rng:{requestRandom:e=>n("rng.requestRandom",e)},datafeed:{getPrice:e=>n("datafeed.getPrice",e),getPrices:()=>n("datafeed.getPrices"),getNetworkStats:()=>n("datafeed.getNetworkStats"),getRecentTransactions:e=>n("datafeed.getRecentTransactions",e)},stats:{getMyUsage:(e,t)=>n("stats.getMyUsage",e,t)},events:{list:e=>n("events.list",e),emit:(e,t)=>n("events.emit",e,t)},transactions:{list:e=>n("transactions.list",e)},automation:{register:(e,t,a,o)=>n("automation.register",e,t,a,o),unregister:e=>n("automation.unregister",e),status:e=>n("automation.status",e),list:()=>n("automation.list"),update:(e,t,a)=>n("automation.update",e,t,a),enable:e=>n("automation.enable",e),disable:e=>n("automation.disable",e),logs:(e,t)=>n("automation.logs",e,t)},share:{openModal:e=>n("share.openModal",e),getUrl:e=>n("share.getUrl",e),copy:e=>n("share.copy",e)}}}();window.MiniAppSDK=e,e.invoke("getConfig").then(e=>{e&&"object"==typeof e&&(P=e)}).catch(()=>{}),t(e)}else n(new Error("SDK timeout"))},e),o=()=>{if(clearTimeout(a),window.removeEventListener("miniapp-sdk-ready",o),window.MiniAppSDK){if(!D(window.MiniAppSDK))return void n(new Error("SDK validation failed"));t(window.MiniAppSDK)}else n(new Error("SDK not found"))};window.addEventListener("miniapp-sdk-ready",o)})}function F(){return"undefined"==typeof window?null:window.MiniAppSDK??null}const K=new Set;let j={connected:!1,address:null,balance:null},W=null,G=!1;"undefined"!=typeof window&&("undefined"!=typeof window&&(G&&W||(W=e=>{if(e.source!==window.parent)return;if(!L.isValid(e.origin))return;const t=e.data;t&&"object"==typeof t&&("miniapp_config"!==t.type?"miniapp_wallet_state_change"===t.type&&(j={connected:Boolean(t.connected),address:t.address||null,chainId:t.chainId??null,chainType:t.chainType??null,balance:t.balance||t.multiChainBalance||null,balances:t.balances||void 0},K.forEach(e=>{try{e(j)}catch(t){console.error("[MiniApp SDK] Wallet state listener error:",t)}})):t.config&&"object"==typeof t.config&&(P=t.config))},window.addEventListener("message",W),G=!0)),setTimeout(function(){if("undefined"==typeof window)return;const e=L.getSafeTargetOrigin();try{window.parent.postMessage({type:"miniapp_ready"},e)}catch{}},x));let H=class extends Error{constructor(e,t){super(e),this.statusCode=t,this.name="HttpError"}};const q={maxRetries:3,baseDelayMs:1e3,maxDelayMs:1e4};function Y(e,t){return Math.min(t.baseDelayMs*Math.pow(2,e),t.maxDelayMs)*(.75+.5*Math.random())}function J(e,t){if(t&&t>=500)return!0;if(429===t)return!0;if(e instanceof Error){const t=e.message.toLowerCase();return t.includes("network")||t.includes("timeout")||t.includes("abort")}return!1}async function X(t,n){var a;if("undefined"!=typeof uni&&"function"==typeof e)return new Promise((a,o)=>{const i=(e=>{if(e){if(e instanceof Headers){const t={};return e.forEach((e,n)=>{t[n]=e}),t}return Array.isArray(e)?Object.fromEntries(e):e}})(n.headers),r=String((null==i?void 0:i["Content-Type"])||(null==i?void 0:i["content-type"])||"");let s=n.body;if("string"==typeof s&&r.includes("application/json"))try{s=JSON.parse(s)}catch{}e({url:t,method:n.method||"GET",data:s,header:i,success:e=>{var t,n;if((e.statusCode??0)>=200&&(e.statusCode??0)<300)a(e.data);else{const a=(null==(n=null==(t=e.data)?void 0:t.error)?void 0:n.message)||`Request failed: ${e.statusCode}`;o(new H(a,e.statusCode??0))}},fail:e=>{o(new Error(e.errMsg||"Network error"))}})});const o="undefined"!=typeof window&&t.startsWith(window.location.origin),i=await fetch(t,{credentials:o?"include":"same-origin",...n});if(!i.ok){const e=await i.json().catch(()=>({}));throw new H((null==(a=e.error)?void 0:a.message)||`Request failed: ${t}`,i.status)}return i.json()}async function Z(e){return async function(e,t={}){var n,a;const o=e.startsWith("http")?e:`https://api.neo-service-layer.io${e}`,i={...q,...t.retryConfig};let r=null;for(let l=0;l<=i.maxRetries;l++){if(null==(n=t.signal)?void 0:n.aborted)throw new Error("Request cancelled");try{return await X(o,t)}catch(s){r=s instanceof Error?s:new Error(String(s));const e=s instanceof H?s.statusCode:void 0;if(null==(a=t.signal)?void 0:a.aborted)throw r;if(l>=i.maxRetries)break;if(!J(s,e))break;const n=Y(l,i);await new Promise(e=>setTimeout(e,n))}}throw r||new Error("Request failed")}(e,{method:"GET"})}let Q=null;function ee(){const e=t(null),o=t({}),i=t(null),r=t(null),s=t(null),l=t([]),c=t(!1),u=t(!1),d=t(null),f=t(!1),h=t(null),p=t=>{t.connected&&t.address?(e.value=t.address,c.value=!0):(e.value=null,c.value=!1),i.value=t.chainId??null,r.value=t.chainType??null,o.value=(e=>{if(!e)return{};if(e.balances&&Object.keys(e.balances).length>0)return{...e.balances};if(e.balance){const t={};return t[e.balance.nativeSymbol||("neo-n3"===e.chainType?"GAS":"NATIVE")]=e.balance.native||"0",(e.balance.governance||e.balance.governanceSymbol)&&(t[e.balance.governanceSymbol||("neo-n3"===e.chainType?"NEO":"GOV")]=e.balance.governance||"0"),t}return{}})(t)},g=e=>{e&&(s.value=e.chainId??null,l.value=Array.isArray(e.supportedChains)?e.supportedChains:[])},v=async()=>{var e;const t=await V(),n=null==(e=t.getConfig)?void 0:e.call(t);return g(n),n},w=async e=>{const t=await V();if(!t.wallet.switchChain)throw new Error("switchChain not supported by SDK");await t.wallet.switchChain(e),i.value=e};let y=null;return n(()=>{var t;p(j),t=e=>{p(e)},K.add(t),t(j),y=()=>K.delete(t);const n=F();(null==n?void 0:n.getConfig)&&g(n.getConfig()),n&&!c.value&&(e=>e?(Q||(Q=e.wallet.getAddress().then(e=>e||null).catch(e=>{const t=e instanceof Error?e.message:String(e);return console.debug("[MiniApp SDK] Fallback wallet connection failed:",t),null}).finally(()=>{Q=null})),Q):Promise.resolve(null))(n).then(t=>{var a;if(!c.value&&t){e.value=t,c.value=!0;const o=null==(a=n.getConfig)?void 0:a.call(n);i.value=(null==o?void 0:o.chainId)??null,r.value=(null==o?void 0:o.chainType)??null,g(o)}}),V().then(e=>{var t;return g(null==(t=e.getConfig)?void 0:t.call(e))}).catch(()=>{})}),a(()=>{y&&y()}),{address:e,chainId:i,chainType:r,appChainId:s,supportedChains:l,balances:o,isConnected:c,isLoading:u,error:d,showConnectionPrompt:f,connectionPromptMessage:h,connect:async()=>{var t;u.value=!0,d.value=null;try{const n=await V(),a=await n.wallet.getAddress();if(!a)throw new Error("wallet returned empty address");e.value=a,c.value=!0;const o=null==(t=n.getConfig)?void 0:t.call(n);i.value=(null==o?void 0:o.chainId)??null,r.value=(null==o?void 0:o.chainType)??null,g(o)}catch(n){d.value=n}finally{u.value=!1}},invokeIntent:async e=>{var t;const n=F();if(!(null==(t=null==n?void 0:n.wallet)?void 0:t.invokeIntent))throw new Error("invokeIntent not available");return n.wallet.invokeIntent(e)},invokeContract:async e=>{var t;const n=await V(),a=null==(t=n.getConfig)?void 0:t.call(n),o=e.contractAddress||e.scriptHash||e.contractHash,i=e.method||e.operation;if(!o||!i)throw new Error("contract address and method required");return n.invoke("invokeFunction",{contract:o,method:i,args:e.args,chainId:null==a?void 0:a.chainId,chainType:null==a?void 0:a.chainType})},invokeRead:async e=>{var t;const n=await V(),a=null==(t=n.getConfig)?void 0:t.call(n),o=e.contractAddress||e.scriptHash||e.contractHash||(null==a?void 0:a.contractAddress),i=e.method||e.operation;if(!o)throw new Error("contract address not configured");if(!i)throw new Error("method required");return n.invoke("invokeRead",{contract:o,method:i,args:e.args||[],chainId:e.chainId||(null==a?void 0:a.chainId),chainType:e.chainType||(null==a?void 0:a.chainType)})},getContractAddress:async()=>{var e,t,n,a,o;const i=await V(),r=null==(e=i.getConfig)?void 0:e.call(i);if(null==r?void 0:r.contractAddress)return r.contractAddress;if((null==r?void 0:r.chainId)&&(null==(n=null==(t=null==r?void 0:r.chainContracts)?void 0:t[r.chainId])?void 0:n.address))return r.chainContracts[r.chainId].address||null;if(i.invoke)try{const e=await i.invoke("getConfig");if(null==e?void 0:e.contractAddress)return e.contractAddress;if((null==e?void 0:e.chainId)&&(null==(o=null==(a=null==e?void 0:e.chainContracts)?void 0:a[e.chainId])?void 0:o.address))return e.chainContracts[e.chainId].address||null}catch{}return null},getAppConfig:v,getAddress:async()=>(await V()).wallet.getAddress(),signMessage:async e=>{var t;const n=await V();if(!(null==(t=n.wallet)?void 0:t.signMessage))throw new Error("signMessage not available");return n.wallet.signMessage(e)},switchChain:w,switchToAppChain:async e=>{const t=await v(),n=(null==t?void 0:t.chainId)||(Array.isArray(null==t?void 0:t.supportedChains)&&t.supportedChains.length>0?t.supportedChains[0]:null)||e||null;if(!n)throw new Error("app chain not configured");await w(n)},getBalance:async e=>{var t;u.value=!0,d.value=null;try{const n=await V(),a=null==(t=n.getConfig)?void 0:t.call(n),r=(null==a?void 0:a.chainId)||i.value,s=r?`?chain_id=${encodeURIComponent(r)}`:"",l=await Z(`/wallet-balance${s}`),c=(null==l?void 0:l.balances)??{};return o.value=c,e?c[e]||"0":c}catch(n){throw d.value=n,n}finally{u.value=!1}},getTransactions:async(e=20)=>{var t;u.value=!0,d.value=null;try{const n=Number.isNaN(e)||e<1?20:Math.min(e,100),a=await V(),o=null==(t=a.getConfig)?void 0:t.call(a),r=(null==o?void 0:o.chainId)||i.value,s=new URLSearchParams({limit:String(n)});r&&s.set("chain_id",r);const l=await Z(`/wallet-transactions?${s.toString()}`);return(null==l?void 0:l.transactions)??[]}catch(n){throw d.value=n,n}finally{u.value=!1}},invoke:async(e,t)=>(await V()).invoke(e,t),requireConnection:(e={})=>{const{showPrompt:t=!0,errorMessage:n}=e;return!!c.value||(t&&(h.value=n||null,f.value=!0),!1)},closeConnectionPrompt:()=>{f.value=!1,h.value=null},clearError:()=>{d.value=null}}}t("en");for(var te={},ne={byteLength:function(e){var t=le(e),n=t[0],a=t[1];return 3*(n+a)/4-a},toByteArray:function(e){var t,n,a=le(e),o=a[0],i=a[1],r=new ie(function(e,t,n){return 3*(t+n)/4-n}(0,o,i)),s=0,l=i>0?o-4:o;for(n=0;n<l;n+=4)t=oe[e.charCodeAt(n)]<<18|oe[e.charCodeAt(n+1)]<<12|oe[e.charCodeAt(n+2)]<<6|oe[e.charCodeAt(n+3)],r[s++]=t>>16&255,r[s++]=t>>8&255,r[s++]=255&t;2===i&&(t=oe[e.charCodeAt(n)]<<2|oe[e.charCodeAt(n+1)]>>4,r[s++]=255&t);1===i&&(t=oe[e.charCodeAt(n)]<<10|oe[e.charCodeAt(n+1)]<<4|oe[e.charCodeAt(n+2)]>>2,r[s++]=t>>8&255,r[s++]=255&t);return r},fromByteArray:function(e){for(var t,n=e.length,a=n%3,o=[],i=16383,r=0,s=n-a;r<s;r+=i)o.push(ue(e,r,r+i>s?s:r+i));1===a?(t=e[n-1],o.push(ae[t>>2]+ae[t<<4&63]+"==")):2===a&&(t=(e[n-2]<<8)+e[n-1],o.push(ae[t>>10]+ae[t>>4&63]+ae[t<<2&63]+"="));return o.join("")}},ae=[],oe=[],ie="undefined"!=typeof Uint8Array?Uint8Array:Array,re="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",se=0;se<64;++se)ae[se]=re[se],oe[re.charCodeAt(se)]=se;function le(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function ce(e){return ae[e>>18&63]+ae[e>>12&63]+ae[e>>6&63]+ae[63&e]}function ue(e,t,n){for(var a,o=[],i=t;i<n;i+=3)a=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(255&e[i+2]),o.push(ce(a));return o.join("")}oe["-".charCodeAt(0)]=62,oe["_".charCodeAt(0)]=63;var de={
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
read:function(e,t,n,a,o){var i,r,s=8*o-a-1,l=(1<<s)-1,c=l>>1,u=-7,d=n?o-1:0,f=n?-1:1,h=e[t+d];for(d+=f,i=h&(1<<-u)-1,h>>=-u,u+=s;u>0;i=256*i+e[t+d],d+=f,u-=8);for(r=i&(1<<-u)-1,i>>=-u,u+=a;u>0;r=256*r+e[t+d],d+=f,u-=8);if(0===i)i=1-c;else{if(i===l)return r?NaN:1/0*(h?-1:1);r+=Math.pow(2,a),i-=c}return(h?-1:1)*r*Math.pow(2,i-a)},write:function(e,t,n,a,o,i){var r,s,l,c=8*i-o-1,u=(1<<c)-1,d=u>>1,f=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=a?0:i-1,p=a?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,r=u):(r=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-r))<1&&(r--,l*=2),(t+=r+d>=1?f/l:f*Math.pow(2,1-d))*l>=2&&(r++,l/=2),r+d>=u?(s=0,r=u):r+d>=1?(s=(t*l-1)*Math.pow(2,o),r+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,o),r=0));o>=8;e[n+h]=255&s,h+=p,s/=256,o-=8);for(r=r<<o|s,c+=o;c>0;e[n+h]=255&r,h+=p,r/=256,c-=8);e[n+h-p]|=128*g}};
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
!function(e){const t=ne,n=de,a="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=c,e.SlowBuffer=function(e){+e!=e&&(e=0);return c.alloc(+e)},e.INSPECT_MAX_BYTES=50;const o=2147483647;e.kMaxLength=o;const{Uint8Array:i,ArrayBuffer:r,SharedArrayBuffer:s}=globalThis;function l(e){if(e>o)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new i(e);return Object.setPrototypeOf(t,c.prototype),t}function c(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return f(e)}return u(e,t,n)}function u(e,t,n){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!c.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const n=0|v(e,t);let a=l(n);const o=a.write(e,t);o!==n&&(a=a.slice(0,o));return a}(e,t);if(r.isView(e))return function(e){if(J(e,i)){const t=new i(e);return p(t.buffer,t.byteOffset,t.byteLength)}return h(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(J(e,r)||e&&J(e.buffer,r))return p(e,t,n);if(void 0!==s&&(J(e,s)||e&&J(e.buffer,s)))return p(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const a=e.valueOf&&e.valueOf();if(null!=a&&a!==e)return c.from(a,t,n);const o=function(e){if(c.isBuffer(e)){const t=0|g(e.length),n=l(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!=typeof e.length||X(e.length)?l(0):h(e);if("Buffer"===e.type&&Array.isArray(e.data))return h(e.data)}(e);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return c.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function d(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function f(e){return d(e),l(e<0?0:0|g(e))}function h(e){const t=e.length<0?0:0|g(e.length),n=l(t);for(let a=0;a<t;a+=1)n[a]=255&e[a];return n}function p(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let a;return a=void 0===t&&void 0===n?new i(e):void 0===n?new i(e,t):new i(e,t,n),Object.setPrototypeOf(a,c.prototype),a}function g(e){if(e>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|e}function v(e,t){if(c.isBuffer(e))return e.length;if(r.isView(e)||J(e,r))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const n=e.length,a=arguments.length>2&&!0===arguments[2];if(!a&&0===n)return 0;let o=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return H(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return q(e).length;default:if(o)return a?-1:H(e).length;t=(""+t).toLowerCase(),o=!0}}function w(e,t,n){let a=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return z(this,t,n);case"utf8":case"utf-8":return S(this,t,n);case"ascii":return T(this,t,n);case"latin1":case"binary":return N(this,t,n);case"base64":return A(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,n);default:if(a)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),a=!0}}function y(e,t,n){const a=e[t];e[t]=e[n],e[n]=a}function b(e,t,n,a,o){if(0===e.length)return-1;if("string"==typeof n?(a=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),X(n=+n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof t&&(t=c.from(t,a)),c.isBuffer(t))return 0===t.length?-1:m(e,t,n,a,o);if("number"==typeof t)return t&=255,"function"==typeof i.prototype.indexOf?o?i.prototype.indexOf.call(e,t,n):i.prototype.lastIndexOf.call(e,t,n):m(e,[t],n,a,o);throw new TypeError("val must be string, number or Buffer")}function m(e,t,n,a,o){let i,r=1,s=e.length,l=t.length;if(void 0!==a&&("ucs2"===(a=String(a).toLowerCase())||"ucs-2"===a||"utf16le"===a||"utf-16le"===a)){if(e.length<2||t.length<2)return-1;r=2,s/=2,l/=2,n/=2}function c(e,t){return 1===r?e[t]:e.readUInt16BE(t*r)}if(o){let a=-1;for(i=n;i<s;i++)if(c(e,i)===c(t,-1===a?0:i-a)){if(-1===a&&(a=i),i-a+1===l)return a*r}else-1!==a&&(i-=i-a),a=-1}else for(n+l>s&&(n=s-l),i=n;i>=0;i--){let n=!0;for(let a=0;a<l;a++)if(c(e,i+a)!==c(t,a)){n=!1;break}if(n)return i}return-1}function _(e,t,n,a){n=Number(n)||0;const o=e.length-n;a?(a=Number(a))>o&&(a=o):a=o;const i=t.length;let r;for(a>i/2&&(a=i/2),r=0;r<a;++r){const a=parseInt(t.substr(2*r,2),16);if(X(a))return r;e[n+r]=a}return r}function k(e,t,n,a){return Y(H(t,e.length-n),e,n,a)}function C(e,t,n,a){return Y(function(e){const t=[];for(let n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,a)}function I(e,t,n,a){return Y(q(t),e,n,a)}function E(e,t,n,a){return Y(function(e,t){let n,a,o;const i=[];for(let r=0;r<e.length&&!((t-=2)<0);++r)n=e.charCodeAt(r),a=n>>8,o=n%256,i.push(o),i.push(a);return i}(t,e.length-n),e,n,a)}function A(e,n,a){return 0===n&&a===e.length?t.fromByteArray(e):t.fromByteArray(e.slice(n,a))}function S(e,t,n){n=Math.min(e.length,n);const a=[];let o=t;for(;o<n;){const t=e[o];let i=null,r=t>239?4:t>223?3:t>191?2:1;if(o+r<=n){let n,a,s,l;switch(r){case 1:t<128&&(i=t);break;case 2:n=e[o+1],128==(192&n)&&(l=(31&t)<<6|63&n,l>127&&(i=l));break;case 3:n=e[o+1],a=e[o+2],128==(192&n)&&128==(192&a)&&(l=(15&t)<<12|(63&n)<<6|63&a,l>2047&&(l<55296||l>57343)&&(i=l));break;case 4:n=e[o+1],a=e[o+2],s=e[o+3],128==(192&n)&&128==(192&a)&&128==(192&s)&&(l=(15&t)<<18|(63&n)<<12|(63&a)<<6|63&s,l>65535&&l<1114112&&(i=l))}}null===i?(i=65533,r=1):i>65535&&(i-=65536,a.push(i>>>10&1023|55296),i=56320|1023&i),a.push(i),o+=r}return function(e){const t=e.length;if(t<=B)return String.fromCharCode.apply(String,e);let n="",a=0;for(;a<t;)n+=String.fromCharCode.apply(String,e.slice(a,a+=B));return n}(a)}c.TYPED_ARRAY_SUPPORT=function(){try{const e=new i(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,i.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),c.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),c.poolSize=8192,c.from=function(e,t,n){return u(e,t,n)},Object.setPrototypeOf(c.prototype,i.prototype),Object.setPrototypeOf(c,i),c.alloc=function(e,t,n){return function(e,t,n){return d(e),e<=0?l(e):void 0!==t?"string"==typeof n?l(e).fill(t,n):l(e).fill(t):l(e)}(e,t,n)},c.allocUnsafe=function(e){return f(e)},c.allocUnsafeSlow=function(e){return f(e)},c.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==c.prototype},c.compare=function(e,t){if(J(e,i)&&(e=c.from(e,e.offset,e.byteLength)),J(t,i)&&(t=c.from(t,t.offset,t.byteLength)),!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,a=t.length;for(let o=0,i=Math.min(n,a);o<i;++o)if(e[o]!==t[o]){n=e[o],a=t[o];break}return n<a?-1:a<n?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);let n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;const a=c.allocUnsafe(t);let o=0;for(n=0;n<e.length;++n){let t=e[n];if(J(t,i))o+t.length>a.length?(c.isBuffer(t)||(t=c.from(t)),t.copy(a,o)):i.prototype.set.call(a,t,o);else{if(!c.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(a,o)}o+=t.length}return a},c.byteLength=v,c.prototype._isBuffer=!0,c.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)y(this,t,t+1);return this},c.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},c.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},c.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?S(this,0,e):w.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){let t="";const n=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"},a&&(c.prototype[a]=c.prototype.inspect),c.prototype.compare=function(e,t,n,a,o){if(J(e,i)&&(e=c.from(e,e.offset,e.byteLength)),!c.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===a&&(a=0),void 0===o&&(o=this.length),t<0||n>e.length||a<0||o>this.length)throw new RangeError("out of range index");if(a>=o&&t>=n)return 0;if(a>=o)return-1;if(t>=n)return 1;if(this===e)return 0;let r=(o>>>=0)-(a>>>=0),s=(n>>>=0)-(t>>>=0);const l=Math.min(r,s),u=this.slice(a,o),d=e.slice(t,n);for(let i=0;i<l;++i)if(u[i]!==d[i]){r=u[i],s=d[i];break}return r<s?-1:s<r?1:0},c.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},c.prototype.indexOf=function(e,t,n){return b(this,e,t,n,!0)},c.prototype.lastIndexOf=function(e,t,n){return b(this,e,t,n,!1)},c.prototype.write=function(e,t,n,a){if(void 0===t)a="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)a=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===a&&(a="utf8")):(a=n,n=void 0)}const o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");a||(a="utf8");let i=!1;for(;;)switch(a){case"hex":return _(this,e,t,n);case"utf8":case"utf-8":return k(this,e,t,n);case"ascii":case"latin1":case"binary":return C(this,e,t,n);case"base64":return I(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,e,t,n);default:if(i)throw new TypeError("Unknown encoding: "+a);a=(""+a).toLowerCase(),i=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const B=4096;function T(e,t,n){let a="";n=Math.min(e.length,n);for(let o=t;o<n;++o)a+=String.fromCharCode(127&e[o]);return a}function N(e,t,n){let a="";n=Math.min(e.length,n);for(let o=t;o<n;++o)a+=String.fromCharCode(e[o]);return a}function z(e,t,n){const a=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>a)&&(n=a);let o="";for(let i=t;i<n;++i)o+=Z[e[i]];return o}function O(e,t,n){const a=e.slice(t,n);let o="";for(let i=0;i<a.length-1;i+=2)o+=String.fromCharCode(a[i]+256*a[i+1]);return o}function R(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function M(e,t,n,a,o,i){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw new RangeError('"value" argument is out of bounds');if(n+a>e.length)throw new RangeError("Index out of range")}function x(e,t,n,a,o){K(t,a,o,e,n,7);let i=Number(t&BigInt(4294967295));e[n++]=i,i>>=8,e[n++]=i,i>>=8,e[n++]=i,i>>=8,e[n++]=i;let r=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=r,r>>=8,e[n++]=r,r>>=8,e[n++]=r,r>>=8,e[n++]=r,n}function U(e,t,n,a,o){K(t,a,o,e,n,7);let i=Number(t&BigInt(4294967295));e[n+7]=i,i>>=8,e[n+6]=i,i>>=8,e[n+5]=i,i>>=8,e[n+4]=i;let r=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=r,r>>=8,e[n+2]=r,r>>=8,e[n+1]=r,r>>=8,e[n]=r,n+8}function L(e,t,n,a,o,i){if(n+a>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function P(e,t,a,o,i){return t=+t,a>>>=0,i||L(e,0,a,4),n.write(e,t,a,o,23,4),a+4}function $(e,t,a,o,i){return t=+t,a>>>=0,i||L(e,0,a,8),n.write(e,t,a,o,52,8),a+8}c.prototype.slice=function(e,t){const n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);const a=this.subarray(e,t);return Object.setPrototypeOf(a,c.prototype),a},c.prototype.readUintLE=c.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||R(e,t,this.length);let a=this[e],o=1,i=0;for(;++i<t&&(o*=256);)a+=this[e+i]*o;return a},c.prototype.readUintBE=c.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||R(e,t,this.length);let a=this[e+--t],o=1;for(;t>0&&(o*=256);)a+=this[e+--t]*o;return a},c.prototype.readUint8=c.prototype.readUInt8=function(e,t){return e>>>=0,t||R(e,1,this.length),this[e]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(e,t){return e>>>=0,t||R(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(e,t){return e>>>=0,t||R(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(e,t){return e>>>=0,t||R(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(e,t){return e>>>=0,t||R(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readBigUInt64LE=Q(function(e){j(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||W(e,this.length-8);const a=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,o=this[++e]+256*this[++e]+65536*this[++e]+n*2**24;return BigInt(a)+(BigInt(o)<<BigInt(32))}),c.prototype.readBigUInt64BE=Q(function(e){j(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||W(e,this.length-8);const a=t*2**24+65536*this[++e]+256*this[++e]+this[++e],o=this[++e]*2**24+65536*this[++e]+256*this[++e]+n;return(BigInt(a)<<BigInt(32))+BigInt(o)}),c.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||R(e,t,this.length);let a=this[e],o=1,i=0;for(;++i<t&&(o*=256);)a+=this[e+i]*o;return o*=128,a>=o&&(a-=Math.pow(2,8*t)),a},c.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||R(e,t,this.length);let a=t,o=1,i=this[e+--a];for(;a>0&&(o*=256);)i+=this[e+--a]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i},c.prototype.readInt8=function(e,t){return e>>>=0,t||R(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){e>>>=0,t||R(e,2,this.length);const n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(e,t){e>>>=0,t||R(e,2,this.length);const n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(e,t){return e>>>=0,t||R(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return e>>>=0,t||R(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readBigInt64LE=Q(function(e){j(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||W(e,this.length-8);const a=this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24);return(BigInt(a)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)}),c.prototype.readBigInt64BE=Q(function(e){j(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||W(e,this.length-8);const a=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(a)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+n)}),c.prototype.readFloatLE=function(e,t){return e>>>=0,t||R(e,4,this.length),n.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return e>>>=0,t||R(e,4,this.length),n.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return e>>>=0,t||R(e,8,this.length),n.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return e>>>=0,t||R(e,8,this.length),n.read(this,e,!1,52,8)},c.prototype.writeUintLE=c.prototype.writeUIntLE=function(e,t,n,a){if(e=+e,t>>>=0,n>>>=0,!a){M(this,e,t,n,Math.pow(2,8*n)-1,0)}let o=1,i=0;for(this[t]=255&e;++i<n&&(o*=256);)this[t+i]=e/o&255;return t+n},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(e,t,n,a){if(e=+e,t>>>=0,n>>>=0,!a){M(this,e,t,n,Math.pow(2,8*n)-1,0)}let o=n-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+n},c.prototype.writeUint8=c.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,1,255,0),this[t]=255&e,t+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeBigUInt64LE=Q(function(e,t=0){return x(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeBigUInt64BE=Q(function(e,t=0){return U(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeIntLE=function(e,t,n,a){if(e=+e,t>>>=0,!a){const a=Math.pow(2,8*n-1);M(this,e,t,n,a-1,-a)}let o=0,i=1,r=0;for(this[t]=255&e;++o<n&&(i*=256);)e<0&&0===r&&0!==this[t+o-1]&&(r=1),this[t+o]=(e/i|0)-r&255;return t+n},c.prototype.writeIntBE=function(e,t,n,a){if(e=+e,t>>>=0,!a){const a=Math.pow(2,8*n-1);M(this,e,t,n,a-1,-a)}let o=n-1,i=1,r=0;for(this[t+o]=255&e;--o>=0&&(i*=256);)e<0&&0===r&&0!==this[t+o+1]&&(r=1),this[t+o]=(e/i|0)-r&255;return t+n},c.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},c.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeBigInt64LE=Q(function(e,t=0){return x(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeBigInt64BE=Q(function(e,t=0){return U(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeFloatLE=function(e,t,n){return P(this,e,t,!0,n)},c.prototype.writeFloatBE=function(e,t,n){return P(this,e,t,!1,n)},c.prototype.writeDoubleLE=function(e,t,n){return $(this,e,t,!0,n)},c.prototype.writeDoubleBE=function(e,t,n){return $(this,e,t,!1,n)},c.prototype.copy=function(e,t,n,a){if(!c.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),a||0===a||(a=this.length),t>=e.length&&(t=e.length),t||(t=0),a>0&&a<n&&(a=n),a===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(a<0)throw new RangeError("sourceEnd out of bounds");a>this.length&&(a=this.length),e.length-t<a-n&&(a=e.length-t+n);const o=a-n;return this===e&&"function"==typeof i.prototype.copyWithin?this.copyWithin(t,n,a):i.prototype.set.call(e,this.subarray(n,a),t),o},c.prototype.fill=function(e,t,n,a){if("string"==typeof e){if("string"==typeof t?(a=t,t=0,n=this.length):"string"==typeof n&&(a=n,n=this.length),void 0!==a&&"string"!=typeof a)throw new TypeError("encoding must be a string");if("string"==typeof a&&!c.isEncoding(a))throw new TypeError("Unknown encoding: "+a);if(1===e.length){const t=e.charCodeAt(0);("utf8"===a&&t<128||"latin1"===a)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;let o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{const i=c.isBuffer(e)?e:c.from(e,a),r=i.length;if(0===r)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=i[o%r]}return this};const D={};function V(e,t,n){D[e]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function F(e){let t="",n=e.length;const a="-"===e[0]?1:0;for(;n>=a+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function K(e,t,n,a,o,i){if(e>n||e<t){const n="bigint"==typeof t?"n":"";let a;throw a=0===t||t===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(i+1)}${n}`:`>= -(2${n} ** ${8*(i+1)-1}${n}) and < 2 ** ${8*(i+1)-1}${n}`,new D.ERR_OUT_OF_RANGE("value",a,e)}!function(e,t,n){j(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||W(t,e.length-(n+1))}(a,o,i)}function j(e,t){if("number"!=typeof e)throw new D.ERR_INVALID_ARG_TYPE(t,"number",e)}function W(e,t,n){if(Math.floor(e)!==e)throw j(e,n),new D.ERR_OUT_OF_RANGE("offset","an integer",e);if(t<0)throw new D.ERR_BUFFER_OUT_OF_BOUNDS;throw new D.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${t}`,e)}V("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),V("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError),V("ERR_OUT_OF_RANGE",function(e,t,n){let a=`The value of "${e}" is out of range.`,o=n;return Number.isInteger(n)&&Math.abs(n)>2**32?o=F(String(n)):"bigint"==typeof n&&(o=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(o=F(o)),o+="n"),a+=` It must be ${t}. Received ${o}`,a},RangeError);const G=/[^+/0-9A-Za-z-_]/g;function H(e,t){let n;t=t||1/0;const a=e.length;let o=null;const i=[];for(let r=0;r<a;++r){if(n=e.charCodeAt(r),n>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(r+1===a){(t-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function q(e){return t.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(G,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function Y(e,t,n,a){let o;for(o=0;o<a&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}function J(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function X(e){return e!=e}const Z=function(){const e="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){const a=16*n;for(let o=0;o<16;++o)t[a+o]=e[n]+e[o]}return t}();function Q(e){return"undefined"==typeof BigInt?ee:e}function ee(){throw new Error("BigInt not supported")}}(te);const fe=te.Buffer;const he={docBadge:{en:"Documentation",zh:"文档"},docFooter:{en:"NeoHub MiniApp Protocol v2.4.0",zh:"NeoHub MiniApp Protocol v2.4.0"}};function pe(e){const n={...he,...e},a=t("undefined"==typeof window?"en":(navigator.language||navigator.userLanguage||"en").toLowerCase().startsWith("zh")?"zh":"en"),o=(e,t)=>{const o=n[e];if(!o)return String(e);let i="";return i="string"==typeof o?o:o[a.value]||o.en||o.zh||String(e),t?((e,t)=>e.replace(/\{(\w+)\}/g,(e,n)=>String(t[n]??`{${n}}`)))(i,t):i},i=e=>{a.value=(e=>e&&e.toLowerCase().startsWith("zh")?"zh":"en")(e)};if("undefined"!=typeof window){window.addEventListener("languageChange",e=>{var t;const n=null==(t=e.detail)?void 0:t.language;n&&i(n)});const e=(()=>{try{if(window.parent!==window&&document.referrer)return new URL(document.referrer).origin}catch{}return window.location.origin})();window.addEventListener("message",t=>{const n=t.source===window.parent;if(!(t.origin===e||t.origin===window.location.origin||n&&("null"===t.origin||"null"===e)))return;const a=t.data;if(!a||"object"!=typeof a)return;if("language-change"!==a.type)return;const o=String(a.language||a.locale||a.lang||"").trim();o&&i(o)})}return()=>({locale:a,t:o,setLocale:i})}const ge=pe({wrongChain:{en:"Wrong Network",zh:"网络错误"},wrongChainMessage:{en:"Switch to Neo N3 Mainnet to continue.",zh:"切换到 Neo N3 主网以继续。"},switchToNeo:{en:"Switch Network",zh:"切换网络"},connectWalletPrompt:{en:"Please connect your wallet",zh:"请连接钱包"},contractUnavailable:{en:"Contract unavailable",zh:"合约不可用"},transactionFailed:{en:"Transaction failed",zh:"交易失败"},insufficientBalance:{en:"Insufficient balance",zh:"余额不足"},loading:{en:"Loading...",zh:"加载中..."},error:{en:"Error",zh:"错误"},main:{en:"Main",zh:"主页"},game:{en:"Game",zh:"游戏"},games:{en:"Games",zh:"游戏"},stats:{en:"Stats",zh:"统计"},docsTab:{en:"Docs",zh:"文档"},settings:{en:"Settings",zh:"设置"},about:{en:"About",zh:"关于"},docSubtitle:{en:"Documentation",zh:"文档"},docDescription:{en:"Learn how to use this miniapp",zh:"了解如何使用此迷你应用"},docWhatItIs:{en:"What is it?",zh:"这是什么？"},docHowToUse:{en:"How to use",zh:"如何使用"},docOnChainFeatures:{en:"On-Chain Features",zh:"链上特性"},confirm:{en:"Confirm",zh:"确认"},cancel:{en:"Cancel",zh:"取消"},close:{en:"Close",zh:"关闭"},continue:{en:"Continue",zh:"继续"},retry:{en:"Retry",zh:"重试"},back:{en:"Back",zh:"返回"},walletRequired:{en:"Wallet Required",zh:"需要钱包"},walletDescription:{en:"Please connect your wallet to continue.",zh:"请连接钱包以继续。"},connectWallet:{en:"Connect Wallet",zh:"连接钱包"},wpTitle:{en:"Wallet Required",zh:"需要钱包"},wpDescription:{en:"Please connect your wallet to continue.",zh:"请连接钱包以继续。"},wpConnect:{en:"Connect Wallet",zh:"连接钱包"},wpCancel:{en:"Cancel",zh:"取消"},success:{en:"Success",zh:"成功"},failed:{en:"Failed",zh:"失败"},pending:{en:"Pending",zh:"处理中"},completed:{en:"Completed",zh:"已完成"},buy:{en:"Buy",zh:"购买"},sell:{en:"Sell",zh:"出售"},swap:{en:"Swap",zh:"交换"},transfer:{en:"Transfer",zh:"转账"},claim:{en:"Claim",zh:"领取"},enterAmount:{en:"Enter amount",zh:"请输入数量"},selectOption:{en:"Select an option",zh:"请选择"},search:{en:"Search",zh:"搜索"},docBadge:{en:"Documentation",zh:"文档"},docFooter:{en:"NeoHub MiniApp Protocol v2.4.0",zh:"NeoHub MiniApp Protocol v2.4.0"}}),ve=pe({error:{en:"Error",zh:"错误"},vote:{en:"Vote",zh:"投票"},info:{en:"Info",zh:"信息"},title:{en:"Candidate Vote",zh:"候选人投票"},subtitle:{en:"Neo Governance Voting",zh:"Neo 治理投票"},networkStats:{en:"Network Stats",zh:"网络统计"},totalCandidates:{en:"Candidates",zh:"候选人数"},totalNetworkVotes:{en:"Total Votes",zh:"总票数"},blockHeight:{en:"Block Height",zh:"区块高度"},castVote:{en:"Cast Your Vote",zh:"投出您的票"},voteNow:{en:"Vote Now",zh:"立即投票"},processing:{en:"Processing...",zh:"处理中..."},voteSuccess:{en:"Vote submitted successfully!",zh:"投票提交成功！"},voteFailed:{en:"Vote failed",zh:"投票失败"},connectWallet:{en:"Connect wallet to vote",zh:"连接钱包以投票"},failedToLoad:{en:"Failed to load candidates",zh:"加载候选人失败"},selectCandidate:{en:"Select Candidate",zh:"选择候选人"},loadingCandidates:{en:"Loading candidates...",zh:"加载候选人中..."},noCandidates:{en:"No candidates available",zh:"暂无候选人"},votes:{en:"votes",zh:"票"},votingFor:{en:"Voting for",zh:"投票给"},selectCandidateFirst:{en:"Please select a candidate above",zh:"请先在上方选择候选人"},docs:{en:"Docs",zh:"文档"},docSubtitle:{en:"Vote for Neo N3 consensus node candidates",zh:"为 Neo N3 共识节点候选人投票"},docDescription:{en:"Vote for Neo N3 consensus node candidates using the native governance contract. Your NEO balance determines voting power, and results update on-chain with each vote.",zh:"通过原生治理合约为 Neo N3 共识节点候选人投票。您的 NEO 余额决定投票权重，每次投票都会在链上更新结果。"},step1:{en:"Connect your Neo wallet.",zh:"连接您的 Neo 钱包。"},step2:{en:"Browse and select a candidate.",zh:"浏览并选择候选人。"},step3:{en:"Click Vote Now to cast your vote.",zh:"点击立即投票来投出您的票。"},step4:{en:"Your NEO balance is your voting power.",zh:"您的 NEO 余额就是您的投票权重。"},feature1Name:{en:"On-Chain Voting",zh:"链上投票"},feature1Desc:{en:"Votes are recorded directly on the Neo blockchain.",zh:"投票直接记录在 Neo 区块链上。"},feature2Name:{en:"NEO-Based Power",zh:"基于 NEO 的权重"},feature2Desc:{en:"Your voting power equals your NEO holdings.",zh:"您的投票权重等于您持有的 NEO 数量。"},feature3Name:{en:"Candidate Insights",zh:"候选人信息"},feature3Desc:{en:"Review candidate details and vote totals before voting.",zh:"投票前可查看候选人详情与票数。"},wrongChain:{en:"Wrong Network",zh:"网络错误"},wrongChainMessage:{en:"This app requires Neo N3 network.",zh:"此应用需要 Neo N3 网络。"},switchToNeo:{en:"Switch to Neo N3",zh:"切换到 Neo N3"},aboutVoting:{en:"About Voting",zh:"关于投票"},votingDescription:{en:"Neo uses a delegated Byzantine Fault Tolerance (dBFT) consensus mechanism. NEO holders can vote for consensus node candidates to participate in network governance. Your voting power is determined by your NEO balance.",zh:"Neo 使用委托拜占庭容错 (dBFT) 共识机制。NEO 持有者可以为共识节点候选人投票参与网络治理。您的投票权重由您的 NEO 余额决定。"},howItWorks:{en:"How It Works",zh:"工作原理"},yourWallet:{en:"Your Wallet",zh:"您的钱包"},wallet:{en:"Wallet",zh:"钱包"},notConnected:{en:"Not Connected",zh:"未连接"},votingPower:{en:"Voting Power",zh:"投票权重"},basedOnNeo:{en:"Based on NEO balance",zh:"基于 NEO 余额"},candidateDetails:{en:"Candidate Details",zh:"候选人详情"},candidateLogo:{en:"Candidate logo",zh:"候选人标志"},name:{en:"Name",zh:"名称"},anonymous:{en:"Anonymous",zh:"匿名"},address:{en:"Address",zh:"地址"},publicKey:{en:"Public Key",zh:"公钥"},totalVotes:{en:"Total Votes",zh:"总票数"},status:{en:"Status",zh:"状态"},activeValidator:{en:"Active Validator",zh:"活跃验证者"},standby:{en:"Standby",zh:"待命"},voteForCandidate:{en:"Vote for This Candidate",zh:"投票给此候选人"},alreadyVotedFor:{en:"You have voted for this candidate",zh:"您已投票给此候选人"},yourVote:{en:"Your Vote",zh:"您的投票"},description:{en:"Description",zh:"简介"},location:{en:"Location",zh:"地点"},links:{en:"Links",zh:"链接"},website:{en:"Website",zh:"官网"},twitter:{en:"X / Twitter",zh:"X / 推特"},github:{en:"GitHub",zh:"GitHub"},telegram:{en:"Telegram",zh:"Telegram"},discord:{en:"Discord",zh:"Discord"},email:{en:"Email",zh:"邮箱"},openGovernance:{en:"Open governance portal",zh:"打开治理门户"},notAvailable:{en:"Not available",zh:"暂无"},wpTitle:{en:"Wallet Required",zh:"需要钱包"},wpDescription:{en:"Please connect your wallet to continue.",zh:"请连接钱包以继续。"},wpConnect:{en:"Connect Wallet",zh:"连接钱包"},wpCancel:{en:"Cancel",zh:"取消"},docWhatItIs:{en:"What is it?",zh:"这是什么？"},docHowToUse:{en:"How to use",zh:"如何使用"},docOnChainFeatures:{en:"On-Chain Features",zh:"链上特性"}});function we(e){if(null==e)return null;if("object"==typeof e&&"type"in e){const t=e;switch(t.type){case"ByteArray":case"Buffer":case"InteropInterface":default:return t.value;case"Integer":return"string"==typeof t.value?t.value.startsWith("0x")?BigInt(t.value).toString():parseInt(t.value,10):Number(t.value);case"Array":case"Struct":return Array.isArray(t.value)?t.value.map(we):t.value;case"Map":if(Array.isArray(t.value)){const e=new Map;for(const n of t.value)Array.isArray(n)&&2===n.length&&e.set(we(n[0]),we(n[1]));return Object.fromEntries(e)}return t.value;case"Boolean":return Boolean(t.value);case"String":case"Hash160":case"Hash256":return String(t.value)}}return Array.isArray(e)?e.map(we):e}const ye=new Set(["neo-n3","neo-n3-mainnet","neo-n3-testnet"]);function be(e,t,n,a){const o=function(e){if("string"==typeof e)return e;const t=null==e?void 0:e.value;return"string"==typeof t?t:""}(e);if(ye.has(o))return!0;let i="";if(!i&&"function"==typeof t){const e=t("wrongChainMessage");i=e&&"wrongChainMessage"!==e?e:t("wrongChain")}i||(i="Wrong network");const r=globalThis.uni;return(null==r?void 0:r.showToast)&&r.showToast({title:i,icon:"none"}),!1}const me=(e,t)=>{const n=e.__vccOpts||e;for(const[a,o]of t)n[a]=o;return n},_e=me(o({__name:"AppIcon",props:{name:{},size:{default:20},label:{},decorative:{type:Boolean,default:!0}},setup(e){const t=e,a={home:"🏠",settings:"⚙️",user:"👤",wallet:"💼",book:"📖",trophy:"🏆",star:"⭐",heart:"❤️",check:"✓",clock:"🕐",plus:"➕",add:"➕",close:"✕",x:"✕",menu:"☰",activity:"📡",award:"🏅",archive:"🗄️",rocket:"🚀",cart:"🛒",ticket:"🎟️",bag:"👜",trending:"📈",chart:"📊",calendar:"📅",search:"🔍",filter:"🔽",edit:"✏️",delete:"🗑️",copy:"📋",share:"📤",download:"⬇️",upload:"⬆️",success:"✓",error:"✕",warning:"⚠️",info:"ℹ️",loading:"⏳",neo:"💎",gas:"⛽",contract:"📜",chain:"⛓️",block:"🧱",helpful:"🤝",generous:"🎁",verified:"✓",contributor:"⭐",champion:"🏆",legend:"👑",game:"🎮",stats:"📊",docs:"📄",about:"ℹ️",contact:"✉️"},o={logout:"↪",back:"←",forward:"→",arrowUp:"↑",arrowDown:"↓",arrowLeft:"←",arrowRight:"→",refresh:"↻"},g=i(()=>{if(!t.label)return t.decorative?"true":void 0}),v=i(()=>t.decorative?"presentation":void 0),w=i(()=>t.label?t.label:t.decorative?void 0:`${t.name} icon`),y=i(()=>t.size<=16?"icon-sm":t.size<=20?"icon-md":t.size<=24?"icon-lg":"icon-xl"),b=i(()=>{if(!y.value||"icon-md"===y.value)return{};const e=t.size;return{width:`${e}px`,height:`${e}px`,fontSize:.6*e+"px"}}),m=i(()=>a[t.name]),_=i(()=>o[t.name]);return n(()=>{const e=t.name in a,n=t.name in o;e||n||console.warn(`[AppIcon] Unknown icon name "${t.name}". Using fallback (first letter). Available icons: ${[...Object.keys(a),...Object.keys(o)].sort().join(", ")}`)}),(e,t)=>{const n=f,a=l;return r(),s(a,{class:u(["app-icon",`icon-${e.name}`,y.value]),style:c(b.value),"aria-hidden":g.value,"aria-label":w.value,role:v.value},{default:d(()=>[m.value?(r(),s(n,{key:0,class:"icon-emoji","aria-hidden":!0},{default:d(()=>[h(p(m.value),1)]),_:1})):_.value?(r(),s(n,{key:1,class:"icon-text","aria-hidden":!0},{default:d(()=>[h(p(_.value),1)]),_:1})):(r(),s(n,{key:2,class:"icon-fallback","aria-label":`Icon: ${e.name}`},{default:d(()=>[h(p(e.name.charAt(0).toUpperCase()),1)]),_:1},8,["aria-label"]))]),_:1},8,["class","style","aria-hidden","aria-label","role"])}}}),[["__scopeId","data-v-07cee3d4"]]),ke=me(o({__name:"NavBar",props:{tabs:{},activeTab:{}},emits:["change"],setup(e,{emit:t}){const a=e,o=t,i=e=>{o("change",e)};return n(()=>{if(!a.tabs||0===a.tabs.length)return void console.warn("[NavBar] No tabs provided - navigation will be empty");a.tabs.some((e,t)=>a.tabs.findIndex(t=>t.id===e.id)!==t)&&console.error("[NavBar] Duplicate tab IDs detected - navigation may not work correctly");!a.tabs.some(e=>e.id===a.activeTab)&&a.activeTab&&console.warn(`[NavBar] Active tab "${a.activeTab}" not found in tabs array. Available tabs: ${a.tabs.map(e=>e.id).join(", ")}`)}),(e,t)=>{const n=l,a=f;return r(),s(n,{class:"navbar",role:"navigation","aria-label":"Bottom navigation"},{default:d(()=>[(r(!0),g(w,null,v(e.tabs,t=>(r(),s(n,{key:t.id,class:u(["nav-item",e.activeTab===t.id&&"active"]),role:"menuitem",tabindex:e.activeTab===t.id?0:-1,"aria-label":t.label,"aria-selected":e.activeTab===t.id,onClick:e=>i(t.id),onKeydown:[y(e=>i(t.id),["enter"]),y(b(e=>i(t.id),["prevent"]),["space"])]},{default:d(()=>[m(n,{class:"nav-icon","aria-hidden":"true"},{default:d(()=>[m(_e,{name:t.icon,size:22},null,8,["name"])]),_:2},1024),m(a,{class:"nav-label"},{default:d(()=>[h(p(t.label),1)]),_:2},1024)]),_:2},1032,["class","tabindex","aria-label","aria-selected","onClick","onKeydown"]))),128))]),_:1})}}}),[["__scopeId","data-v-80051b5c"]]),Ce=me(o({__name:"TopNavBar",props:{title:{},showBack:{type:Boolean}},emits:["back"],setup:e=>(e,t)=>{const n=l,a=f;return r(),s(n,{class:"top-navbar",role:"navigation","aria-label":e.title},{default:d(()=>[m(n,{class:"nav-left"},{default:d(()=>[e.showBack?(r(),s(n,{key:0,class:"nav-btn",role:"button",tabindex:"0","aria-label":"Go back",onClick:t[0]||(t[0]=t=>e.$emit("back")),onKeydown:[t[1]||(t[1]=y(t=>e.$emit("back"),["enter"])),t[2]||(t[2]=y(b(t=>e.$emit("back"),["prevent"]),["space"]))]},{default:d(()=>[m(_e,{name:"arrow-left",size:20})]),_:1})):_("",!0)]),_:1}),m(n,{class:"nav-center"},{default:d(()=>[m(a,{class:"nav-title"},{default:d(()=>[h(p(e.title),1)]),_:1})]),_:1}),m(n,{class:"nav-right"},{default:d(()=>[k(e.$slots,"right",{},void 0,!0)]),_:3})]),_:3},8,["aria-label"])}}),[["__scopeId","data-v-eddb2273"]]),Ie=me(o({__name:"AppLayout",props:{title:{default:""},showTopNav:{type:Boolean,default:!1},showBack:{type:Boolean,default:!1},tabs:{default:()=>[]},activeTab:{default:""},allowScroll:{type:Boolean,default:!0},theme:{default:""}},emits:["back","tab-change"],setup(e,{emit:a}){const o=t(!1),c=e,f=a,h=i(()=>c.activeTab||""),p=()=>{f("back");const e=C();e&&e.length>1&&I({delta:1})};return n(()=>{if(o.value="undefined"!=typeof window&&"1"===new URLSearchParams(window.location.search).get("embedded"),c.tabs&&c.tabs.length>0&&c.activeTab){c.tabs.some(e=>e.id===c.activeTab)||console.warn(`[AppLayout] Active tab "${c.activeTab}" not found in tabs array. Available tabs: ${c.tabs.map(e=>e.id).join(", ")}`)}o.value&&console.log("[AppLayout] Running in embedded mode")}),(e,t)=>{const n=l;return r(),s(n,{class:u(["mobile-container",o.value&&"embedded"])},{default:d(()=>[m(n,{class:"aspect-wrapper"},{default:d(()=>[m(n,{class:"app-layout",role:"application","aria-label":"Application layout"},{default:d(()=>[e.showTopNav?(r(),s(Ce,{key:0,title:e.title??"","show-back":e.showBack,onBack:p},null,8,["title","show-back"])):_("",!0),m(n,{class:u(["app-content",!e.allowScroll&&"no-scroll"]),tabindex:e.allowScroll?-1:0},{default:d(()=>[k(e.$slots,"default",{},void 0,!0)]),_:3},8,["class","tabindex"]),e.tabs&&e.tabs.length>0?(r(),s(ke,{key:1,tabs:e.tabs,"active-tab":h.value,onChange:t[0]||(t[0]=t=>e.$emit("tab-change",t))},null,8,["tabs","active-tab"])):_("",!0)]),_:3})]),_:3})]),_:3},8,["class"])}}}),[["__scopeId","data-v-2af4ca89"]]),Ee=5e3,Ae=1e4,Se=100,Be=["https://neomini.app","https://miniapp.neo.org","https://testnet.miniapp.neo.org"];const Te=new class{constructor(){this.dynamicOrigins=new Set,this.baseOrigins=new Set([...Be])}getSelfOrigin(){if("undefined"==typeof window)return null;try{const e=new URL(window.location.href);if("null"===e.origin)return null;if("http:"===e.protocol||"https:"===e.protocol)return e.origin}catch{}return null}getReferrerOrigin(){if("undefined"==typeof document||!document.referrer)return null;try{return new URL(document.referrer).origin}catch{return null}}getAllowedOrigins(){const e=new Set(this.baseOrigins);this.dynamicOrigins.forEach(t=>e.add(t));const t=this.getReferrerOrigin();t&&this.baseOrigins.has(t)&&e.add(t);const n=this.getSelfOrigin();if(n&&e.add(n),"undefined"!=typeof window){const t=window.location.hostname;"localhost"!==t&&"127.0.0.1"!==t||e.add(window.location.origin)}return e}isValid(e){return!(!e||"null"===e)&&this.getAllowedOrigins().has(e)}getTargetOrigin(){var e;const t=this.getReferrerOrigin();if(t&&this.baseOrigins.has(t))return t;try{if("undefined"!=typeof window&&window.parent!==window&&(null==(e=window.location.ancestorOrigins)?void 0:e.length)>0){const e=window.location.ancestorOrigins[0];if(this.baseOrigins.has(e))return e}}catch{}const n=this.getSelfOrigin();if(n)return n;if("undefined"!=typeof window){const e=window.location.hostname;if("localhost"===e||"127.0.0.1"===e)return window.location.origin}throw new Error("Cannot determine safe target origin - no valid origin found")}getSafeTargetOrigin(){try{const e=this.getTargetOrigin();if(e&&"null"!==e)return e}catch{}if("undefined"!=typeof window&&window.parent!==window){const e=window.__MINIAPP_PARENT_ORIGIN__;if("string"==typeof e&&e&&this.baseOrigins.has(e))return e;throw new Error("Cannot communicate securely with parent - origin unknown. Ensure host app sets __MINIAPP_PARENT_ORIGIN__ or uses a supported browser.")}throw new Error("Cannot determine safe target origin - origin is null or undefined")}addDynamicOrigin(e){e&&"null"!==e&&this.dynamicOrigins.add(e)}};let Ne=null;function ze(e){const t=null==e?void 0:e.layout;if("web"===t||"mobile"===t)return t;if("undefined"!=typeof window){const e=new URLSearchParams(window.location.search).get("layout");if("web"===e||"mobile"===e)return e;if(window.ReactNativeWebView)return"mobile"}return"web"}function Oe(e){if(!e||"object"!=typeof e)return!1;const t="function"==typeof e.invoke&&"function"==typeof e.getConfig,n="object"==typeof e.wallet||"object"==typeof e.payments;return t||n}function Re(e=Ee){return new Promise((t,n)=>{if("undefined"==typeof window)return void n(new Error("SDK not available in SSR"));if(window.MiniAppSDK)return Oe(window.MiniAppSDK)?void t(window.MiniAppSDK):void n(new Error("SDK validation failed"));const a=setTimeout(()=>{if(window.removeEventListener("miniapp-sdk-ready",o),window.parent!==window){const e=function(){const e=Te.getSafeTargetOrigin();let t=0;const n=(n,...a)=>new Promise((o,i)=>{const r="undefined"!=typeof crypto&&crypto.getRandomValues?Array.from(crypto.getRandomValues(new Uint8Array(4)),e=>e.toString(16).padStart(2,"0")).join(""):Math.random().toString(36).slice(2,10),s=`sdk-${++t}-${Date.now()}-${r}`,l=setTimeout(()=>{window.removeEventListener("message",c),i(new Error("SDK invoke timeout"))},Ae),c=e=>{var t,n;Te.isValid(e.origin)&&e.source===window.parent&&"miniapp_sdk_response"===(null==(t=e.data)?void 0:t.type)&&(null==(n=e.data)?void 0:n.id)===s&&(clearTimeout(l),window.removeEventListener("message",c),e.data.ok?o(e.data.result):i(new Error(e.data.error||"SDK call failed")))};window.addEventListener("message",c),window.parent.postMessage({type:"miniapp_sdk_request",id:s,method:n,params:a},e)});return{invoke:n,getConfig:()=>Ne?{...Ne,layout:ze(Ne)}:"undefined"!=typeof window&&window.__MINIAPP_CONFIG__?(Ne=window.__MINIAPP_CONFIG__,{...Ne,layout:ze(Ne??void 0)}):{appId:"",contractAddress:null,chainId:null,chainType:void 0,supportedChains:[],layout:ze(),debug:!1},getAddress:()=>n("getAddress"),wallet:{getAddress:()=>n("wallet.getAddress"),switchChain:e=>n("wallet.switchChain",e),invokeIntent:e=>n("wallet.invokeIntent",e),signMessage:e=>n("wallet.signMessage",e)},payments:{payGAS:(e,t,a)=>n("payments.payGAS",e,t,a),payGASAndInvoke:(e,t,a)=>n("payments.payGASAndInvoke",e,t,a)},governance:{vote:(e,t,a,o)=>n("governance.vote",e,t,a,o),voteAndInvoke:(e,t,a,o)=>n("governance.voteAndInvoke",e,t,a,o),getCandidates:()=>n("governance.getCandidates")},rng:{requestRandom:e=>n("rng.requestRandom",e)},datafeed:{getPrice:e=>n("datafeed.getPrice",e),getPrices:()=>n("datafeed.getPrices"),getNetworkStats:()=>n("datafeed.getNetworkStats"),getRecentTransactions:e=>n("datafeed.getRecentTransactions",e)},stats:{getMyUsage:(e,t)=>n("stats.getMyUsage",e,t)},events:{list:e=>n("events.list",e),emit:(e,t)=>n("events.emit",e,t)},transactions:{list:e=>n("transactions.list",e)},automation:{register:(e,t,a,o)=>n("automation.register",e,t,a,o),unregister:e=>n("automation.unregister",e),status:e=>n("automation.status",e),list:()=>n("automation.list"),update:(e,t,a)=>n("automation.update",e,t,a),enable:e=>n("automation.enable",e),disable:e=>n("automation.disable",e),logs:(e,t)=>n("automation.logs",e,t)},share:{openModal:e=>n("share.openModal",e),getUrl:e=>n("share.getUrl",e),copy:e=>n("share.copy",e)}}}();window.MiniAppSDK=e,e.invoke("getConfig").then(e=>{e&&"object"==typeof e&&(Ne=e)}).catch(()=>{}),t(e)}else n(new Error("SDK timeout"))},e),o=()=>{if(clearTimeout(a),window.removeEventListener("miniapp-sdk-ready",o),window.MiniAppSDK){if(!Oe(window.MiniAppSDK))return void n(new Error("SDK validation failed"));t(window.MiniAppSDK)}else n(new Error("SDK not found"))};window.addEventListener("miniapp-sdk-ready",o)})}function Me(){return"undefined"==typeof window?null:window.MiniAppSDK??null}const xe=new Set;let Ue={connected:!1,address:null,balance:null},Le=null,Pe=!1;"undefined"!=typeof window&&("undefined"!=typeof window&&(Pe&&Le||(Le=e=>{if(e.source!==window.parent)return;if(!Te.isValid(e.origin))return;const t=e.data;t&&"object"==typeof t&&("miniapp_config"!==t.type?"miniapp_wallet_state_change"===t.type&&(Ue={connected:Boolean(t.connected),address:t.address||null,chainId:t.chainId??null,chainType:t.chainType??null,balance:t.balance||t.multiChainBalance||null,balances:t.balances||void 0},xe.forEach(e=>{try{e(Ue)}catch(t){console.error("[MiniApp SDK] Wallet state listener error:",t)}})):t.config&&"object"==typeof t.config&&(Ne=t.config))},window.addEventListener("message",Le),Pe=!0)),setTimeout(function(){if("undefined"==typeof window)return;const e=Te.getSafeTargetOrigin();try{window.parent.postMessage({type:"miniapp_ready"},e)}catch{}},Se));class $e extends Error{constructor(e,t){super(e),this.statusCode=t,this.name="HttpError"}}const De={maxRetries:3,baseDelayMs:1e3,maxDelayMs:1e4};function Ve(e,t){return Math.min(t.baseDelayMs*Math.pow(2,e),t.maxDelayMs)*(.75+.5*Math.random())}function Fe(e,t){if(t&&t>=500)return!0;if(429===t)return!0;if(e instanceof Error){const t=e.message.toLowerCase();return t.includes("network")||t.includes("timeout")||t.includes("abort")}return!1}async function Ke(t,n){var a;if("undefined"!=typeof uni&&"function"==typeof e)return new Promise((a,o)=>{const i=(e=>{if(e){if(e instanceof Headers){const t={};return e.forEach((e,n)=>{t[n]=e}),t}return Array.isArray(e)?Object.fromEntries(e):e}})(n.headers),r=String((null==i?void 0:i["Content-Type"])||(null==i?void 0:i["content-type"])||"");let s=n.body;if("string"==typeof s&&r.includes("application/json"))try{s=JSON.parse(s)}catch{}e({url:t,method:n.method||"GET",data:s,header:i,success:e=>{var t,n;if((e.statusCode??0)>=200&&(e.statusCode??0)<300)a(e.data);else{const a=(null==(n=null==(t=e.data)?void 0:t.error)?void 0:n.message)||`Request failed: ${e.statusCode}`;o(new $e(a,e.statusCode??0))}},fail:e=>{o(new Error(e.errMsg||"Network error"))}})});const o="undefined"!=typeof window&&t.startsWith(window.location.origin),i=await fetch(t,{credentials:o?"include":"same-origin",...n});if(!i.ok){const e=await i.json().catch(()=>({}));throw new $e((null==(a=e.error)?void 0:a.message)||`Request failed: ${t}`,i.status)}return i.json()}async function je(e){return async function(e,t={}){var n,a;const o=e.startsWith("http")?e:`https://api.neo-service-layer.io${e}`,i={...De,...t.retryConfig};let r=null;for(let l=0;l<=i.maxRetries;l++){if(null==(n=t.signal)?void 0:n.aborted)throw new Error("Request cancelled");try{return await Ke(o,t)}catch(s){r=s instanceof Error?s:new Error(String(s));const e=s instanceof $e?s.statusCode:void 0;if(null==(a=t.signal)?void 0:a.aborted)throw r;if(l>=i.maxRetries)break;if(!Fe(s,e))break;const n=Ve(l,i);await new Promise(e=>setTimeout(e,n))}}throw r||new Error("Request failed")}(e,{method:"GET"})}let We=null;function Ge(){const e=t(null),o=t({}),i=t(null),r=t(null),s=t(null),l=t([]),c=t(!1),u=t(!1),d=t(null),f=t(!1),h=t(null),p=t=>{t.connected&&t.address?(e.value=t.address,c.value=!0):(e.value=null,c.value=!1),i.value=t.chainId??null,r.value=t.chainType??null,o.value=(e=>{if(!e)return{};if(e.balances&&Object.keys(e.balances).length>0)return{...e.balances};if(e.balance){const t={};return t[e.balance.nativeSymbol||("neo-n3"===e.chainType?"GAS":"NATIVE")]=e.balance.native||"0",(e.balance.governance||e.balance.governanceSymbol)&&(t[e.balance.governanceSymbol||("neo-n3"===e.chainType?"NEO":"GOV")]=e.balance.governance||"0"),t}return{}})(t)},g=e=>{e&&(s.value=e.chainId??null,l.value=Array.isArray(e.supportedChains)?e.supportedChains:[])},v=async()=>{var e;const t=await Re(),n=null==(e=t.getConfig)?void 0:e.call(t);return g(n),n},w=async e=>{const t=await Re();if(!t.wallet.switchChain)throw new Error("switchChain not supported by SDK");await t.wallet.switchChain(e),i.value=e};let y=null;return n(()=>{var t;p(Ue),t=e=>{p(e)},xe.add(t),t(Ue),y=()=>xe.delete(t);const n=Me();(null==n?void 0:n.getConfig)&&g(n.getConfig()),n&&!c.value&&(e=>e?(We||(We=e.wallet.getAddress().then(e=>e||null).catch(e=>{const t=e instanceof Error?e.message:String(e);return console.debug("[MiniApp SDK] Fallback wallet connection failed:",t),null}).finally(()=>{We=null})),We):Promise.resolve(null))(n).then(t=>{var a;if(!c.value&&t){e.value=t,c.value=!0;const o=null==(a=n.getConfig)?void 0:a.call(n);i.value=(null==o?void 0:o.chainId)??null,r.value=(null==o?void 0:o.chainType)??null,g(o)}}),Re().then(e=>{var t;return g(null==(t=e.getConfig)?void 0:t.call(e))}).catch(()=>{})}),a(()=>{y&&y()}),{address:e,chainId:i,chainType:r,appChainId:s,supportedChains:l,balances:o,isConnected:c,isLoading:u,error:d,showConnectionPrompt:f,connectionPromptMessage:h,connect:async()=>{var t;u.value=!0,d.value=null;try{const n=await Re(),a=await n.wallet.getAddress();if(!a)throw new Error("wallet returned empty address");e.value=a,c.value=!0;const o=null==(t=n.getConfig)?void 0:t.call(n);i.value=(null==o?void 0:o.chainId)??null,r.value=(null==o?void 0:o.chainType)??null,g(o)}catch(n){d.value=n}finally{u.value=!1}},invokeIntent:async e=>{var t;const n=Me();if(!(null==(t=null==n?void 0:n.wallet)?void 0:t.invokeIntent))throw new Error("invokeIntent not available");return n.wallet.invokeIntent(e)},invokeContract:async e=>{var t;const n=await Re(),a=null==(t=n.getConfig)?void 0:t.call(n),o=e.contractAddress||e.scriptHash||e.contractHash,i=e.method||e.operation;if(!o||!i)throw new Error("contract address and method required");return n.invoke("invokeFunction",{contract:o,method:i,args:e.args,chainId:null==a?void 0:a.chainId,chainType:null==a?void 0:a.chainType})},invokeRead:async e=>{var t;const n=await Re(),a=null==(t=n.getConfig)?void 0:t.call(n),o=e.contractAddress||e.scriptHash||e.contractHash||(null==a?void 0:a.contractAddress),i=e.method||e.operation;if(!o)throw new Error("contract address not configured");if(!i)throw new Error("method required");return n.invoke("invokeRead",{contract:o,method:i,args:e.args||[],chainId:e.chainId||(null==a?void 0:a.chainId),chainType:e.chainType||(null==a?void 0:a.chainType)})},getContractAddress:async()=>{var e,t,n,a,o;const i=await Re(),r=null==(e=i.getConfig)?void 0:e.call(i);if(null==r?void 0:r.contractAddress)return r.contractAddress;if((null==r?void 0:r.chainId)&&(null==(n=null==(t=null==r?void 0:r.chainContracts)?void 0:t[r.chainId])?void 0:n.address))return r.chainContracts[r.chainId].address||null;if(i.invoke)try{const e=await i.invoke("getConfig");if(null==e?void 0:e.contractAddress)return e.contractAddress;if((null==e?void 0:e.chainId)&&(null==(o=null==(a=null==e?void 0:e.chainContracts)?void 0:a[e.chainId])?void 0:o.address))return e.chainContracts[e.chainId].address||null}catch{}return null},getAppConfig:v,getAddress:async()=>(await Re()).wallet.getAddress(),signMessage:async e=>{var t;const n=await Re();if(!(null==(t=n.wallet)?void 0:t.signMessage))throw new Error("signMessage not available");return n.wallet.signMessage(e)},switchChain:w,switchToAppChain:async e=>{const t=await v(),n=(null==t?void 0:t.chainId)||(Array.isArray(null==t?void 0:t.supportedChains)&&t.supportedChains.length>0?t.supportedChains[0]:null)||e||null;if(!n)throw new Error("app chain not configured");await w(n)},getBalance:async e=>{var t;u.value=!0,d.value=null;try{const n=await Re(),a=null==(t=n.getConfig)?void 0:t.call(n),r=(null==a?void 0:a.chainId)||i.value,s=r?`?chain_id=${encodeURIComponent(r)}`:"",l=await je(`/wallet-balance${s}`),c=(null==l?void 0:l.balances)??{};return o.value=c,e?c[e]||"0":c}catch(n){throw d.value=n,n}finally{u.value=!1}},getTransactions:async(e=20)=>{var t;u.value=!0,d.value=null;try{const n=Number.isNaN(e)||e<1?20:Math.min(e,100),a=await Re(),o=null==(t=a.getConfig)?void 0:t.call(a),r=(null==o?void 0:o.chainId)||i.value,s=new URLSearchParams({limit:String(n)});r&&s.set("chain_id",r);const l=await je(`/wallet-transactions?${s.toString()}`);return(null==l?void 0:l.transactions)??[]}catch(n){throw d.value=n,n}finally{u.value=!1}},invoke:async(e,t)=>(await Re()).invoke(e,t),requireConnection:(e={})=>{const{showPrompt:t=!0,errorMessage:n}=e;return!!c.value||(t&&(h.value=n||null,f.value=!0),!1)},closeConnectionPrompt:()=>{f.value=!1,h.value=null},clearError:()=>{d.value=null}}}t("en");const He=me(o({__name:"ChainWarning",props:{title:{default:"Wrong Network"},message:{default:"Switch to Neo N3 Mainnet to continue."},buttonText:{default:"Switch Network"},show:{type:Boolean,default:void 0}},emits:["switch","switch-complete","switch-error"],setup(e,{emit:n}){const a=e,o=n,{showWarning:c,switchToAppChain:u}=function(){const{switchToAppChain:e}=Ge();return{showWarning:i(()=>!1),switchToAppChain:async()=>{try{await e()}catch(t){throw console.error("[useChainValidation] Failed to switch chain:",t),t}}}}(),g=t(!1),v=i(()=>void 0!==a.show?a.show:c.value),w=async()=>{if(!g.value){g.value=!0,o("switch");try{await u(),o("switch-complete")}catch(e){const t=e instanceof Error?e:new Error(String(e));o("switch-error",t),console.error("[ChainWarning] Failed to switch chain:",t)}finally{g.value=!1}}};return(e,t)=>{const n=f,a=l;return v.value?(r(),s(a,{key:0,class:"chain-warning px-4 mb-4"},{default:d(()=>[m(E(Je),{variant:"danger"},{default:d(()=>[m(a,{class:"flex flex-col items-center gap-2 py-1"},{default:d(()=>[m(n,{class:"text-center font-bold text-red-400"},{default:d(()=>[h(p(e.title),1)]),_:1}),e.message?(r(),s(n,{key:0,class:"text-xs text-center opacity-80 text-white"},{default:d(()=>[h(p(e.message),1)]),_:1})):_("",!0),m(E(Xe),{size:"sm",variant:"secondary",class:"mt-2",loading:g.value,onClick:w},{default:d(()=>[h(p(e.buttonText),1)]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})):_("",!0)}}}),[["__scopeId","data-v-3dc811c7"]]),qe=me(o({__name:"DesktopLayout",props:{title:{default:""},tabs:{default:()=>[]},activeTab:{default:""},allowScroll:{type:Boolean,default:!0},theme:{default:""}},emits:["tab-change"],setup(e,{emit:t}){const n=e,a=t,o=i(()=>n.theme?`theme-${n.theme}`:""),c=A(),C=i(()=>Boolean(c["desktop-sidebar"])),I=e=>{a("tab-change",e)};return(()=>{if(!n.tabs||0===n.tabs.length)return console.warn("[DesktopLayout] No tabs provided - navigation will be hidden"),!1;!n.tabs.some((e,t)=>n.tabs.findIndex(t=>t.id===e.id)!==t)||console.error("[DesktopLayout] Duplicate tab IDs detected - navigation may not work correctly")})(),(e,t)=>{const n=f,a=l;return r(),s(a,{class:u(["desktop-container",o.value])},{default:d(()=>[m(a,{class:"sidebar",role:"navigation","aria-label":"Main navigation"},{default:d(()=>[m(a,{class:"sidebar-header"},{default:d(()=>[m(n,{class:"brand-name"},{default:d(()=>[h("NeoHub")]),_:1}),m(n,{class:"brand-tagline"},{default:d(()=>[h("Miniapps")]),_:1})]),_:1}),m(a,{class:"sidebar-nav",role:"menubar","aria-label":"Navigation menu"},{default:d(()=>[(r(!0),g(w,null,v(e.tabs,t=>(r(),s(a,{key:t.id,class:u(["nav-item",e.activeTab===t.id&&"active"]),role:"menuitem",tabindex:e.activeTab===t.id?0:-1,"aria-label":t.label,"aria-current":e.activeTab===t.id?"page":void 0,onClick:e=>I(t.id),onKeydown:[y(e=>I(t.id),["enter"]),y(b(e=>I(t.id),["prevent"]),["space"])]},{default:d(()=>[m(a,{class:"nav-icon-wrapper"},{default:d(()=>[m(_e,{name:t.icon,size:20},null,8,["name"])]),_:2},1024),m(n,{class:"nav-label"},{default:d(()=>[h(p(t.label),1)]),_:2},1024),e.activeTab===t.id?(r(),s(a,{key:0,class:"nav-indicator","aria-hidden":"true"})):_("",!0)]),_:2},1032,["class","tabindex","aria-label","aria-current","onClick","onKeydown"]))),128))]),_:1}),C.value?(r(),s(a,{key:0,class:"sidebar-panel",role:"complementary","aria-label":"Sidebar details"},{default:d(()=>[k(e.$slots,"desktop-sidebar",{},void 0,!0)]),_:3})):_("",!0),m(a,{class:"sidebar-footer"},{default:d(()=>[m(a,{class:"footer-status",role:"status","aria-live":"polite"},{default:d(()=>[m(a,{class:"status-dot online","aria-hidden":"true"}),m(n,{class:"status-text"},{default:d(()=>[h("Connected")]),_:1})]),_:1})]),_:1})]),_:3}),m(a,{class:"main-content-wrapper",role:"main"},{default:d(()=>[m(a,{class:"top-bar"},{default:d(()=>[m(a,{class:"top-bar-left"},{default:d(()=>[e.title?(r(),s(n,{key:0,class:"page-title"},{default:d(()=>[h(p(e.title),1)]),_:1})):_("",!0)]),_:1}),m(a,{class:"top-bar-right"},{default:d(()=>[k(e.$slots,"top-bar-actions",{},void 0,!0)]),_:3})]),_:3}),m(a,{class:u(["content-area",!e.allowScroll&&"no-scroll"]),tabindex:e.allowScroll?-1:0},{default:d(()=>[k(e.$slots,"default",{},void 0,!0)]),_:3},8,["class","tabindex"])]),_:3})]),_:3},8,["class"])}}}),[["__scopeId","data-v-a78cf158"]]),Ye=o({__name:"ResponsiveLayout",props:{title:{default:""},tabs:{default:()=>[]},navItems:{default:()=>[]},activeTab:{default:""},allowScroll:{type:Boolean,default:!0},theme:{default:""},showTopNav:{type:Boolean,default:!1},showSidebar:{type:Boolean,default:!1},layout:{default:"default"},showBack:{type:Boolean,default:!1},desktopBreakpoint:{default:1024}},emits:["back","tab-change","navigate"],setup(e,{emit:o}){const l=e,c=o,u=t(!1),f=t(!1),h=()=>{if(!f.value)return;const e=window.innerWidth;u.value=e>=l.desktopBreakpoint};let p;const g=()=>{clearTimeout(p),p=window.setTimeout(()=>{h()},150)},v=i(()=>l.tabs&&l.tabs.length>0?l.tabs:l.navItems&&l.navItems.length>0?l.navItems.map(e=>({id:e.id??e.key??"",label:e.label,icon:e.icon})).filter(e=>Boolean(e.id)):[]),w=i(()=>u.value?qe:Ie),y=e=>{c("tab-change",e),c("navigate",e)};return S(u,(e,t)=>{t!==e&&f.value&&console.log(`[ResponsiveLayout] Layout mode changed: ${e?"desktop":"mobile"} (${window.innerWidth}px)`)}),n(()=>{f.value="undefined"!=typeof window,f.value&&(h(),window.addEventListener("resize",g))}),a(()=>{f.value&&(window.removeEventListener("resize",g),clearTimeout(p))}),(e,t)=>(r(),s(B(w.value),{title:e.title,tabs:v.value,"active-tab":e.activeTab,"allow-scroll":e.allowScroll,theme:e.theme,"show-top-nav":e.showTopNav,"show-back":e.showBack,onTabChange:y,onBack:t[0]||(t[0]=t=>e.$emit("back"))},{"top-bar-actions":d(()=>[k(e.$slots,"top-bar-actions")]),"desktop-sidebar":d(()=>[k(e.$slots,"desktop-sidebar")]),default:d(()=>[k(e.$slots,"default")]),_:3},40,["title","tabs","active-tab","allow-scroll","theme","show-top-nav","show-back"]))}}),Je=me(o({__name:"NeoCard",props:{title:{default:void 0},variant:{default:"default"},hoverable:{type:Boolean,default:!1},flat:{type:Boolean,default:!1}},emits:["click"],setup:e=>(e,t)=>{const n=f,a=l;return r(),s(a,{class:u(["neo-card",`neo-card--${e.variant}`,{"neo-card--hoverable":e.hoverable,"neo-card--flat":e.flat}]),role:e.hoverable?"button":void 0,tabindex:e.hoverable?0:void 0,onClick:t[0]||(t[0]=t=>e.hoverable&&e.$emit("click",t)),onKeydown:[t[1]||(t[1]=y(t=>e.hoverable&&e.$emit("click",t),["enter"])),t[2]||(t[2]=y(b(t=>e.hoverable&&e.$emit("click",t),["prevent"]),["space"]))]},{default:d(()=>[e.title||e.$slots.header?(r(),s(a,{key:0,class:"neo-card__header"},{default:d(()=>[e.title?(r(),s(n,{key:0,class:"neo-card__title"},{default:d(()=>[h(p(e.title),1)]),_:1})):_("",!0),k(e.$slots,"header",{},void 0,!0)]),_:3})):_("",!0),m(a,{class:"neo-card__body"},{default:d(()=>[k(e.$slots,"default",{},void 0,!0)]),_:3}),e.$slots.footer?(r(),s(a,{key:1,class:"neo-card__footer"},{default:d(()=>[k(e.$slots,"footer",{},void 0,!0)]),_:3})):_("",!0)]),_:3},8,["class","role","tabindex"])}}),[["__scopeId","data-v-3f370003"]]),Xe=me(o({__name:"NeoButton",props:{variant:{default:"primary"},size:{default:"md"},block:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},ariaLabel:{default:void 0}},emits:["click"],setup:e=>(e,t)=>{const n=l,a=T;return r(),s(a,{class:u(["neo-btn",`neo-btn--${e.variant}`,`neo-btn--${e.size}`,{"neo-btn--block":e.block,"neo-btn--loading":e.loading}]),disabled:e.disabled||e.loading,"aria-busy":e.loading,"aria-disabled":e.disabled||e.loading,"aria-label":e.ariaLabel,onClick:t[0]||(t[0]=t=>e.$emit("click",t))},{default:d(()=>[e.loading?(r(),s(n,{key:0,class:"neo-btn__spinner"})):k(e.$slots,"default",{key:1},void 0,!0)]),_:3},8,["class","disabled","aria-busy","aria-disabled","aria-label"])}}),[["__scopeId","data-v-4b6100e3"]]),Ze=me(o({__name:"ScrollReveal",props:{animation:{default:"fade-up"},delay:{default:0},duration:{default:800},threshold:{default:.1},offset:{default:-50},reversible:{type:Boolean,default:!1}},setup(e,{expose:o}){const i=e,f=t(!1),h=z();let p=null;return n(()=>{setTimeout(()=>{h&&(setTimeout(()=>{f.value||(f.value=!0)},500),p=N(h),p.relativeToViewport({bottom:i.offset}).observe(".scroll-reveal",e=>{e.intersectionRatio>0?(f.value=!0,i.reversible||p.disconnect()):i.reversible&&(f.value=!1)}))},100)}),o({isVisible:f}),a(()=>{p&&p.disconnect()}),(e,t)=>{const n=l;return r(),s(n,{class:u(["scroll-reveal",[e.animation,{"is-visible":f.value}]]),style:c({transitionDelay:e.delay+"ms",transitionDuration:e.duration+"ms"})},{default:d(()=>[k(e.$slots,"default",{},void 0,!0)]),_:3},8,["class","style"])}}}),[["__scopeId","data-v-0c69cb0a"]]),Qe=me(o({__name:"NeoDoc",props:{title:{},subtitle:{},description:{},steps:{},features:{}},setup(e){const{t:t}=ge();return(e,n)=>{const a=l,o=f;return r(),s(a,{class:"neo-doc"},{default:d(()=>[m(a,{class:"doc-header"},{default:d(()=>[m(Ze,{animation:"fade-down",duration:1e3},{default:d(()=>[m(a,{class:"title-row"},{default:d(()=>[m(a,{class:"doc-badge"},{default:d(()=>[h(p(E(t)("docBadge")),1)]),_:1})]),_:1}),m(o,{class:"doc-title"},{default:d(()=>[h(p(e.title),1)]),_:1}),m(o,{class:"doc-subtitle"},{default:d(()=>[h(p(e.subtitle),1)]),_:1})]),_:1})]),_:1}),m(a,{class:"doc-content"},{default:d(()=>[m(a,{class:"doc-section"},{default:d(()=>[m(Ze,{animation:"fade-up",delay:200},{default:d(()=>[m(o,{class:"section-label"},{default:d(()=>[h(p(E(t)("docWhatItIs")),1)]),_:1}),m(o,{class:"section-text"},{default:d(()=>[h(p(e.description),1)]),_:1})]),_:1})]),_:1}),m(a,{class:"doc-section"},{default:d(()=>[m(Ze,{animation:"fade-up",delay:300},{default:d(()=>[m(o,{class:"section-label"},{default:d(()=>[h(p(E(t)("docHowToUse")),1)]),_:1})]),_:1}),m(a,{class:"steps-list"},{default:d(()=>[(r(!0),g(w,null,v(e.steps,(e,t)=>(r(),s(Ze,{key:t,delay:400+100*t,animation:"slide-left"},{default:d(()=>[m(a,{class:"step-item"},{default:d(()=>[m(a,{class:"step-number"},{default:d(()=>[h(p(t+1),1)]),_:2},1024),m(o,{class:"step-text"},{default:d(()=>[h(p(e),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["delay"]))),128))]),_:1})]),_:1}),m(a,{class:"doc-section"},{default:d(()=>[m(Ze,{animation:"fade-up",delay:400},{default:d(()=>[m(o,{class:"section-label"},{default:d(()=>[h(p(E(t)("docOnChainFeatures")),1)]),_:1})]),_:1}),m(a,{class:"features-grid"},{default:d(()=>[(r(!0),g(w,null,v(e.features,(e,t)=>(r(),s(Ze,{key:e.name,delay:500+100*t,animation:"scale-in",reversible:""},{default:d(()=>[m(a,{class:"feature-card"},{default:d(()=>[m(o,{class:"feature-name"},{default:d(()=>[h(p(e.name),1)]),_:2},1024),m(o,{class:"feature-desc"},{default:d(()=>[h(p(e.desc),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["delay"]))),128))]),_:1})]),_:1})]),_:1}),m(a,{class:"doc-footer"},{default:d(()=>[m(Ze,{animation:"fade-up",delay:800},{default:d(()=>[m(o,{class:"footer-text"},{default:d(()=>[h(p(E(t)("docFooter")),1)]),_:1})]),_:1})]),_:1})]),_:1})}}}),[["__scopeId","data-v-445ca862"]]),et=me(o({__name:"NeoStats",props:{stats:{}},setup:e=>(e,t)=>{const n=f,a=l;return r(),s(a,{class:"neo-stats"},{default:d(()=>[(r(!0),g(w,null,v(e.stats,e=>(r(),s(a,{key:e.label,class:u(["neo-stats__item",`neo-stats__item--${e.variant||"default"}`])},{default:d(()=>[m(n,{class:"neo-stats__value"},{default:d(()=>[h(p(e.value),1)]),_:2},1024),m(n,{class:"neo-stats__label"},{default:d(()=>[h(p(e.label),1)]),_:2},1024)]),_:2},1032,["class"]))),128))]),_:1})}}),[["__scopeId","data-v-87f21c51"]]),tt=me(o({__name:"CandidateList",props:{candidates:{},selectedCandidate:{},userVotedPublicKey:{},totalVotes:{},isLoading:{type:Boolean}},emits:["select","view-details"],setup(e,{emit:t}){const{t:n}=ve(),a=e,o=t,c=i(()=>[...a.candidates].sort((e,t)=>{const n=k(e.votes),a=k(t.votes);return n===a?0:a>n?1:-1})),y=e=>!e||e.length<12?e:`${e.slice(0,6)}...${e.slice(-4)}`,k=e=>{try{return BigInt(e||"0")}catch{return BigInt(0)}},C=e=>String(e||"").replace(/^0x/i,""),I=e=>!!a.userVotedPublicKey&&C(e.publicKey)===C(a.userVotedPublicKey),A=e=>{const t=k(e);return t>=BigInt(1e12)?(Number(t/BigInt(1e10))/100).toFixed(2)+"T":t>=BigInt(1e9)?(Number(t/BigInt(1e7))/100).toFixed(2)+"B":t>=BigInt(1e6)?(Number(t/BigInt(1e4))/100).toFixed(2)+"M":t>=BigInt(1e3)?(Number(t/BigInt(10))/100).toFixed(2)+"K":e},S=e=>0===e?"rank-gold":1===e?"rank-silver":2===e?"rank-bronze":"";return(e,t)=>{const a=f,i=l;return r(),s(E(Je),{variant:"erobo-neo",class:"candidate-list-card"},{default:d(()=>[e.isLoading?(r(),s(i,{key:0,class:"loading-state"},{default:d(()=>[m(a,{class:"loading-text"},{default:d(()=>[h(p(E(n)("loadingCandidates")),1)]),_:1})]),_:1})):0===e.candidates.length?(r(),s(i,{key:1,class:"empty-state"},{default:d(()=>[m(a,{class:"empty-icon"},{default:d(()=>[h("🗳️")]),_:1}),m(a,{class:"empty-text"},{default:d(()=>[h(p(E(n)("noCandidates")),1)]),_:1})]),_:1})):(r(),s(i,{key:2,class:"candidate-list"},{default:d(()=>[(r(!0),g(w,null,v(c.value,(t,l)=>{var c;return r(),s(i,{key:t.publicKey,class:u(["candidate-item",{selected:(null==(c=e.selectedCandidate)?void 0:c.publicKey)===t.publicKey,"user-voted":I(t)}]),onClick:e=>(e=>{o("select",e)})(t)},{default:d(()=>[m(i,{class:u(["rank-badge",S(l)])},{default:d(()=>[m(a,{class:"rank-number"},{default:d(()=>[h("#"+p(l+1),1)]),_:2},1024)]),_:2},1032,["class"]),m(i,{class:"candidate-info"},{default:d(()=>[m(i,{class:"name-row"},{default:d(()=>[m(a,{class:"candidate-name"},{default:d(()=>[h(p(t.name||y(t.address)),1)]),_:2},1024),I(t)?(r(),s(i,{key:0,class:"your-vote-badge"},{default:d(()=>[m(a,{class:"your-vote-text"},{default:d(()=>[h(p(E(n)("yourVote")),1)]),_:1})]),_:1})):_("",!0)]),_:2},1024),m(a,{class:"candidate-address"},{default:d(()=>[h(p(y(t.publicKey)),1)]),_:2},1024)]),_:2},1024),m(i,{class:"candidate-votes"},{default:d(()=>[m(a,{class:"votes-value"},{default:d(()=>[h(p(A(t.votes)),1)]),_:2},1024),m(a,{class:"votes-label"},{default:d(()=>[h(p(E(n)("votes")),1)]),_:1})]),_:2},1024),m(i,{class:"action-buttons"},{default:d(()=>{var n;return[(null==(n=e.selectedCandidate)?void 0:n.publicKey)===t.publicKey?(r(),s(i,{key:0,class:"selected-indicator"},{default:d(()=>[m(a,{class:"check-icon"},{default:d(()=>[h("✓")]),_:1})]),_:1})):_("",!0),m(i,{class:"info-btn",onClick:b(e=>((e,t)=>{o("view-details",e,t+1)})(t,l),["stop"])},{default:d(()=>[m(a,{class:"info-icon"},{default:d(()=>[h("ℹ")]),_:1})]),_:2},1032,["onClick"])]}),_:2},1024)]),_:2},1032,["class","onClick"])}),128))]),_:1})),e.totalVotes?(r(),s(i,{key:3,class:"total-votes-footer"},{default:d(()=>[m(a,{class:"total-label"},{default:d(()=>[h(p(E(n)("totalNetworkVotes"))+":",1)]),_:1}),m(a,{class:"total-value"},{default:d(()=>[h(p(A(e.totalVotes)),1)]),_:1})]),_:1})):_("",!0)]),_:1})}}}),[["__scopeId","data-v-871daf43"]]),nt=me(o({__name:"CandidateDetailModal",props:{candidate:{},rank:{},totalVotes:{},isUserVoted:{type:Boolean},canVote:{type:Boolean},governancePortalUrl:{}},emits:["close","vote"],setup(e){const{t:t}=ve(),n=e,a=i(()=>{if(!n.candidate||!n.totalVotes)return"0.00";const e=o(n.totalVotes||"1"),t=o(n.candidate.votes||"0");return e===BigInt(0)?"0.00":(Number(t)/Number(e)*100).toFixed(2)}),o=e=>{try{return BigInt(e||"0")}catch{return BigInt(0)}},c=e=>{const t=o(e||"0");return t>=BigInt(1e12)?(Number(t/BigInt(1e10))/100).toFixed(2)+"T":t>=BigInt(1e9)?(Number(t/BigInt(1e7))/100).toFixed(2)+"B":t>=BigInt(1e6)?(Number(t/BigInt(1e4))/100).toFixed(2)+"M":t>=BigInt(1e3)?(Number(t/BigInt(10))/100).toFixed(2)+"K":e||"0"},g=i(()=>{const e=n.candidate;return!!e&&Boolean(e.website||e.twitter||e.github||e.telegram||e.discord||e.email)});function v(e){var t;if(!e)return;const n=/^https?:\/\//i.test(e)||e.startsWith("mailto:")?e:`https://${e}`,a=null==globalThis?void 0:globalThis.uni;if(null==a?void 0:a.openURL)return void a.openURL({url:n});const o=null==globalThis?void 0:globalThis.plus;(null==(t=null==o?void 0:o.runtime)?void 0:t.openURL)?o.runtime.openURL(n):"undefined"!=typeof window&&window.open?window.open(n,"_blank","noopener,noreferrer"):"undefined"!=typeof window&&(window.location.href=n)}return(e,n)=>{const o=f,i=l,w=O;return e.candidate?(r(),s(i,{key:0,class:"modal-overlay",onClick:n[9]||(n[9]=b(t=>e.$emit("close"),["self"]))},{default:d(()=>[m(i,{class:"modal-content"},{default:d(()=>[m(i,{class:"modal-header"},{default:d(()=>[m(o,{class:"modal-title"},{default:d(()=>[h(p(E(t)("candidateDetails")),1)]),_:1}),m(i,{class:"close-btn",onClick:n[0]||(n[0]=t=>e.$emit("close"))},{default:d(()=>[m(o,{class:"close-icon"},{default:d(()=>[h("×")]),_:1})]),_:1})]),_:1}),m(i,{class:"modal-body"},{default:d(()=>[m(i,{class:"rank-section"},{default:d(()=>{return[m(i,{class:u(["rank-badge-large",(n=e.rank,1===n?"rank-gold":2===n?"rank-silver":3===n?"rank-bronze":"")])},{default:d(()=>[m(o,{class:"rank-text"},{default:d(()=>[h("#"+p(e.rank),1)]),_:1})]),_:1},8,["class"]),e.isUserVoted?(r(),s(i,{key:0,class:"voted-badge"},{default:d(()=>[m(o,{class:"voted-text"},{default:d(()=>[h(p(E(t)("yourVote")),1)]),_:1})]),_:1})):_("",!0)];var n}),_:1}),e.candidate.logo?(r(),s(i,{key:0,class:"logo-wrap"},{default:d(()=>[m(w,{class:"candidate-logo",src:e.candidate.logo,mode:"widthFix",alt:e.candidate.name||E(t)("candidateLogo")},null,8,["src","alt"])]),_:1})):_("",!0),m(i,{class:"info-section"},{default:d(()=>[m(o,{class:"info-label"},{default:d(()=>[h(p(E(t)("name")),1)]),_:1}),m(o,{class:"info-value name-value"},{default:d(()=>[h(p(e.candidate.name||E(t)("anonymous")),1)]),_:1})]),_:1}),m(i,{class:"info-section"},{default:d(()=>[m(o,{class:"info-label"},{default:d(()=>[h(p(E(t)("address")),1)]),_:1}),m(o,{class:"info-value mono"},{default:d(()=>[h(p(e.candidate.address||E(t)("notAvailable")),1)]),_:1})]),_:1}),m(i,{class:"info-section"},{default:d(()=>[m(o,{class:"info-label"},{default:d(()=>[h(p(E(t)("publicKey")),1)]),_:1}),m(o,{class:"info-value mono small"},{default:d(()=>[h(p(e.candidate.publicKey||E(t)("notAvailable")),1)]),_:1})]),_:1}),e.candidate.location?(r(),s(i,{key:1,class:"info-section"},{default:d(()=>[m(o,{class:"info-label"},{default:d(()=>[h(p(E(t)("location")),1)]),_:1}),m(o,{class:"info-value"},{default:d(()=>[h(p(e.candidate.location),1)]),_:1})]),_:1})):_("",!0),e.candidate.description?(r(),s(i,{key:2,class:"info-section"},{default:d(()=>[m(o,{class:"info-label"},{default:d(()=>[h(p(E(t)("description")),1)]),_:1}),m(o,{class:"info-value description"},{default:d(()=>[h(p(e.candidate.description),1)]),_:1})]),_:1})):_("",!0),g.value?(r(),s(i,{key:3,class:"info-section"},{default:d(()=>[m(o,{class:"info-label"},{default:d(()=>[h(p(E(t)("links")),1)]),_:1}),m(i,{class:"link-grid"},{default:d(()=>[e.candidate.website?(r(),s(o,{key:0,class:"link-item",onClick:n[1]||(n[1]=t=>v(e.candidate.website))},{default:d(()=>[h(p(E(t)("website")),1)]),_:1})):_("",!0),e.candidate.twitter?(r(),s(o,{key:1,class:"link-item",onClick:n[2]||(n[2]=t=>v(e.candidate.twitter))},{default:d(()=>[h(p(E(t)("twitter")),1)]),_:1})):_("",!0),e.candidate.github?(r(),s(o,{key:2,class:"link-item",onClick:n[3]||(n[3]=t=>v(e.candidate.github))},{default:d(()=>[h(p(E(t)("github")),1)]),_:1})):_("",!0),e.candidate.telegram?(r(),s(o,{key:3,class:"link-item",onClick:n[4]||(n[4]=t=>v(e.candidate.telegram))},{default:d(()=>[h(p(E(t)("telegram")),1)]),_:1})):_("",!0),e.candidate.discord?(r(),s(o,{key:4,class:"link-item",onClick:n[5]||(n[5]=t=>v(e.candidate.discord))},{default:d(()=>[h(p(E(t)("discord")),1)]),_:1})):_("",!0),e.candidate.email?(r(),s(o,{key:5,class:"link-item",onClick:n[6]||(n[6]=t=>v(`mailto:${e.candidate.email}`))},{default:d(()=>[h(p(E(t)("email")),1)]),_:1})):_("",!0)]),_:1})]),_:1})):_("",!0),m(i,{class:"info-section"},{default:d(()=>[m(o,{class:"info-label"},{default:d(()=>[h(p(E(t)("totalVotes")),1)]),_:1}),m(i,{class:"votes-display"},{default:d(()=>[m(o,{class:"votes-value"},{default:d(()=>[h(p(c(e.candidate.votes)),1)]),_:1}),m(o,{class:"votes-percentage"},{default:d(()=>[h("("+p(a.value)+"%)",1)]),_:1})]),_:1})]),_:1}),m(i,{class:"info-section"},{default:d(()=>[m(o,{class:"info-label"},{default:d(()=>[h(p(E(t)("status")),1)]),_:1}),m(i,{class:u(["status-badge",e.candidate.active?"active":"inactive"])},{default:d(()=>[m(o,{class:"status-text"},{default:d(()=>[h(p(e.candidate.active?E(t)("activeValidator"):E(t)("standby")),1)]),_:1})]),_:1},8,["class"])]),_:1})]),_:1}),m(i,{class:"modal-footer"},{default:d(()=>[e.governancePortalUrl?(r(),s(i,{key:0,class:"portal-link",onClick:n[7]||(n[7]=t=>v(e.governancePortalUrl))},{default:d(()=>[h(p(E(t)("openGovernance")),1)]),_:1})):_("",!0),e.isUserVoted?(r(),s(E(Je),{key:2,variant:"erobo-neo",flat:"",class:"text-center"},{default:d(()=>[m(o,{class:"notice-text"},{default:d(()=>[h(p(E(t)("alreadyVotedFor")),1)]),_:1})]),_:1})):(r(),s(E(Xe),{key:1,variant:"primary",size:"lg",block:"",disabled:!e.canVote,onClick:n[8]||(n[8]=t=>e.$emit("vote",e.candidate))},{default:d(()=>[h(p(E(t)("voteForCandidate")),1)]),_:1},8,["disabled"]))]),_:1})]),_:1})]),_:1})):_("",!0)}}}),[["__scopeId","data-v-2bf20ab1"]]);function at(e,t=6,n=4){const a=(e??"").trim();return a?a.length<=t+n+3?a:`${a.slice(0,t)}...${a.slice(-n)}`:"--"}function ot(e){const t=e.replace(/^0x/i,"").trim();if(!t)return new Uint8Array;const n=t.length%2==0?t:`0${t}`,a=new Uint8Array(n.length/2);for(let o=0;o<a.length;o+=1)a[o]=Number.parseInt(n.slice(2*o,2*o+2),16);return a}function it(e){return Array.from(e,e=>e.toString(16).padStart(2,"0")).join("")}const rt=me(o({__name:"InfoTab",props:{address:{}},setup(e){const{t:t}=ve(),n=e,a=i(()=>[{label:t("wallet"),value:n.address?at(n.address):t("notConnected")},{label:t("votingPower"),value:n.address?t("basedOnNeo"):"--"}]);return(e,n)=>{const o=f,i=l;return r(),s(i,{class:"tab-content scrollable"},{default:d(()=>[m(E(Je),{title:E(t)("aboutVoting"),variant:"erobo-neo",class:"mb-4"},{default:d(()=>[m(i,{class:"info-section"},{default:d(()=>[m(o,{class:"info-text"},{default:d(()=>[h(p(E(t)("votingDescription")),1)]),_:1})]),_:1})]),_:1},8,["title"]),m(E(Je),{title:E(t)("howItWorks"),variant:"erobo-neo",class:"mb-4"},{default:d(()=>[m(i,{class:"steps-list"},{default:d(()=>[m(i,{class:"step-item"},{default:d(()=>[m(i,{class:"step-number"},{default:d(()=>[h("1")]),_:1}),m(o,{class:"step-text"},{default:d(()=>[h(p(E(t)("step1")),1)]),_:1})]),_:1}),m(i,{class:"step-item"},{default:d(()=>[m(i,{class:"step-number"},{default:d(()=>[h("2")]),_:1}),m(o,{class:"step-text"},{default:d(()=>[h(p(E(t)("step2")),1)]),_:1})]),_:1}),m(i,{class:"step-item"},{default:d(()=>[m(i,{class:"step-number"},{default:d(()=>[h("3")]),_:1}),m(o,{class:"step-text"},{default:d(()=>[h(p(E(t)("step3")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["title"]),m(E(Je),{title:E(t)("yourWallet"),variant:"erobo-neo"},{default:d(()=>[m(E(et),{stats:a.value},null,8,["stats"])]),_:1},8,["title"])]),_:1})}}}),[["__scopeId","data-v-e78a0924"]]),st={},lt=e=>new Uint8Array(st.createHash("sha256").update(fe.from(e)).digest()),ct={"0248a37e04c7a5fb9fdc9f0323b2955a94cbb2296d2ad1feacea24ec774a87c4a4":"Neo News Today","035d574cc6a904e82dfd82d7f6fc9c2ca042d4410a4910ecc8c07a07db49dc6513":"Everstake","023e9b32ea892944b2bd6dc757b3bf93781e6b8a8b13996f2648fb166c3c552099":"Binance Staking","020f2887f41474cfeb11fd23a5990269774b375d685526cd5825bb8d479153592b":"Neo SPCC","021033e0811e56994cf41777271891d17d50d0327f2f114c023d53ba50c37077e5":"COZ"},ut={mainnet:{rpcUrl:"https://n3seed2.ngd.network:10332",committeeInfoContract:"0xb776afb6ad0c11565e70f8ee1dd898da43e51be1"},testnet:{rpcUrl:"https://n3seed2.ngd.network:40332",committeeInfoContract:"0x6177bfcef0f51b5dd21b183ff89e301b9c66d71c"}},dt=/^((http|https|ftp):\/\/)/i,ft=async(t,n,a=[])=>{const o={jsonrpc:"2.0",method:n,params:a,id:1},i=await(async(t,n)=>{if("undefined"!=typeof uni&&"function"==typeof e)return new Promise((a,o)=>{e({url:t,method:"POST",data:n,timeout:12e3,header:{"content-type":"application/json"},success:e=>{e.statusCode&&e.statusCode>=200&&e.statusCode<300?a(e.data):o(new Error(`Request failed: ${e.statusCode??"unknown"}`))},fail:e=>{o(e)}})});const a=await fetch(t,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(n)});if(!a.ok)throw new Error(`Request failed: ${a.status}`);return a.json()})(t,o);if(null==i?void 0:i.error)throw new Error(i.error.message||"RPC error");return null==i?void 0:i.result},ht=e=>{const t=String(e??"").trim();return t?t.replace(/^0x/i,""):""},pt=e=>{const t=String(e??"").trim();return t?t.replace(/^0x/i,"").toLowerCase():""},gt=e=>{if(!e)return;const t=String(e).trim();return t?/^https?:\/\//i.test(t)?t:t.startsWith("www.")?`https://${t}`:t:void 0},vt=(e,t)=>{if(!e)return;const n=String(e).trim();return n?/^https?:\/\//i.test(n)?n:n.startsWith("@")?`${t}${n.slice(1)}`:`${t}${n}`:void 0},wt=e=>{const t=String(e??"").trim();if(!t)return new Uint8Array;const n=t.replace(/[\r\n\s]/g,""),a=null==globalThis?void 0:globalThis.Buffer;if(null==a?void 0:a.from)return Uint8Array.from(a.from(n,"base64"));const o=null==globalThis?void 0:globalThis.atob;if("function"==typeof o){const e=o(n),t=new Uint8Array(e.length);for(let n=0;n<e.length;n+=1)t[n]=e.charCodeAt(n);return t}return new Uint8Array},yt=e=>(e=>{if(!e.length)return"";if("undefined"!=typeof TextDecoder)return new TextDecoder("utf-8",{fatal:!1}).decode(e);let t="";for(const n of e)t+=String.fromCharCode(n);return t})(wt(e)),bt=e=>{if(!e)return"";const t=ot(e);return it(Uint8Array.from(t).reverse())},mt=e=>{const t=lt(lt(e)).slice(0,4),n=new Uint8Array(e.length+4);return n.set(e,0),n.set(t,e.length),(e=>{if(!e.length)return"";const t=[0];for(const n of e){let e=n;for(let n=0;n<t.length;n+=1){const a=256*t[n]+e;t[n]=a%58,e=Math.floor(a/58)}for(;e;)t.push(e%58),e=Math.floor(e/58)}for(const n of e){if(0!==n)break;t.push(0)}return t.reverse().map(e=>"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"[e]).join("")})(n)},_t=e=>{const t=pt(e);if(!t)return"";const n=ot(t);if(!n.length)return"";const a=new Uint8Array(1+n.length);return a[0]=53,a.set(Uint8Array.from(n).reverse(),1),mt(a)},kt=e=>{const t=ht(e);if(!/^[0-9a-fA-F]{66}$/.test(t))return"";const n=ot(`0c21${t}4156e7b327`),a=lt(n),o=(i=a,new Uint8Array(st.createHash("ripemd160").update(fe.from(i)).digest()));var i;return bt(it(o))},Ct=e=>{const t=Array.isArray(null==e?void 0:e.value)?e.value:Array.isArray(e)?e:null;if(!t||0===t.length)return null;const n=e=>{var n,a;return(null==(n=t[e])?void 0:n.value)??(null==(a=t[e])?void 0:a.Value)??""},a=(o=n(0),it(wt(o)));var o;const i=pt(bt(a));if(!i)return null;const r=yt(n(1)).trim(),s=yt(n(2)).trim(),l=yt(n(3)).trim(),c=yt(n(4)).trim(),u=yt(n(5)).trim(),d=yt(n(6)).trim(),f=yt(n(7)).trim(),h=yt(n(8)).trim(),p=yt(n(9)).trim();let g;return p&&(g=dt.test(p)?p:`https://filesend.ngd.network/gate/get/CeeroywT8ppGE4HGjhpzocJkdb2yu3wD5qCGFTjkw1Cc/${p}`),{scriptHash:i,address:_t(i),entity:r||void 0,location:s||void 0,website:gt(l),email:c||void 0,github:vt(u,"https://github.com/"),telegram:vt(d,"https://t.me/"),twitter:vt(f,"https://twitter.com/"),description:h||void 0,logo:g}},It=async e=>{const t=ut["neo-n3-testnet"===e?"testnet":"mainnet"],[n,a,o,i]=await Promise.allSettled([ft(t.rpcUrl,"getstateheight"),ft(t.rpcUrl,"getcandidates"),ft(t.rpcUrl,"getcommittee"),ft(t.rpcUrl,"invokefunction",[t.committeeInfoContract,"getAllInfo",[],[]])]);if("fulfilled"!==a.status)throw a.reason||new Error("Failed to fetch candidates from governance RPC");const r=Array.isArray(a.value)?a.value:[],s="fulfilled"===o.status?(l=o.value,Array.isArray(l)?l:l&&"object"==typeof l&&Array.isArray(l.committee)?l.committee:[]):[];var l;const c=new Set(s.map(e=>ht(e)).filter(Boolean)),u="fulfilled"===i.status?(e=>{var t,n;if(!e||"object"!=typeof e)return[];const a=e,o=a.stack||(null==(t=a.result)?void 0:t.stack)||[];if(!Array.isArray(o)||0===o.length)return[];const i=(null==(n=o[0])?void 0:n.value)??[];if(!Array.isArray(i))return[];const r=[];for(const s of i){const e=Ct(s);e&&r.push(e)}return r})(i.value):[],d=new Map(u.map(e=>[e.scriptHash,e])),f=r.map(e=>{const t=ht(e.publickey??e.publicKey??e.key??"");if(!t)return null;const n=(e=>{if(null==e)return"0";if("bigint"==typeof e)return e.toString();if("number"==typeof e)return Math.floor(e).toString();const t=String(e).replace(/,/g,"").trim();if(!t)return"0";if(/^\d+$/.test(t))return t;if(/^\d+\.\d+$/.test(t))return t.split(".")[0];const n=Number(t);return Number.isFinite(n)?Math.floor(n).toString():t})(e.votes??e.vote??e.totalVotes),a=(o=e.active??e.isActive,i=c.has(t),"boolean"==typeof o?o:"number"==typeof o?o>0:"string"==typeof o?"true"===o.toLowerCase()||"1"===o:i);var o,i;const r=kt(t),s=r?d.get(r):void 0;return{publicKey:t,address:(null==s?void 0:s.address)||(r?_t(r):t),name:(null==s?void 0:s.entity)||Et(t)||void 0,votes:n,active:a,logo:null==s?void 0:s.logo,website:null==s?void 0:s.website,email:null==s?void 0:s.email,location:null==s?void 0:s.location,description:null==s?void 0:s.description,twitter:null==s?void 0:s.twitter,telegram:null==s?void 0:s.telegram,github:null==s?void 0:s.github}}).filter(e=>Boolean(e)),h=f.reduce((e,t)=>e+BigInt(t.votes||"0"),BigInt(0)).toString(),p="fulfilled"===n.status?(e=>{if(!e||"object"!=typeof e)return 0;const t=e,n=t.blockheight??t.blockHeight??t.localrootindex??t.validatedrootindex,a=Number(n);return Number.isFinite(a)?a:0})(n.value):0;return{candidates:f,totalVotes:h,blockHeight:p}},Et=e=>ct[ht(e)],At="0xef4073a0f2b305a38ec4050e4d3d28bc40ea63f5",St=me(o({__name:"index",setup(e){const{t:a}=ve(),o=i(()=>[a("step1"),a("step2"),a("step3"),a("step4")]),c=i(()=>[{name:a("feature1Name"),desc:a("feature1Desc")},{name:a("feature2Name"),desc:a("feature2Desc")}]),{address:u,connect:g,invokeContract:v,invokeRead:w,chainType:y,chainId:b,appChainId:k}=ee(),C=i(()=>[{id:"vote",icon:"checkbox",label:a("vote")},{id:"info",icon:"info",label:a("info")},{id:"docs",icon:"book",label:a("docs")}]),I=t("vote"),A=t(!1),B=t(null),T=t([]),N=t(null),z=t("0"),R=t(0),M=t(!1),x=t(!1),U=t(null),L=t(1),P=t(null),$=i(()=>k.value||b.value||"neo-n3-testnet"),D=i(()=>"neo-n3-testnet"===$.value?"https://governance.neo.org/testnet#/":"https://governance.neo.org/#/"),V=(e,t)=>{B.value={msg:e,type:t},setTimeout(()=>B.value=null,5e3)},F=e=>String(e||"").replace(/^0x/i,""),K=i(()=>F(P.value)||null),j=e=>{N.value=e},W=(e,t)=>{U.value=e,L.value=t,x.value=!0},G=()=>{x.value=!1,U.value=null},H=async e=>{N.value=e,G(),await J()},q=async()=>{if(be(y,a))if(u.value)try{const e=function(e){if(!e)return null;if("object"==typeof e&&null!==e){const t=e;return"stack"in t&&Array.isArray(t.stack)?0===t.stack.length?null:1===t.stack.length?we(t.stack[0]):t.stack.map(we):"state"in t?we(t.state):"txid"in t||"txHash"in t?e:we(e)}return"string"==typeof e||"number"==typeof e||"boolean"==typeof e?e:we(e)}(await w({scriptHash:At,operation:"GetAccountState",args:[{type:"Hash160",value:u.value}]}));let t=null;if(Array.isArray(e))t=e[2];else if(e&&"object"==typeof e){const n=e;t=n.voteTo??n.VoteTo??n.vote_to}const n=F(t);P.value=n||null}catch(e){P.value=null}else P.value=null},Y=async(e=!1)=>{const t=(e=>`candidate_vote_candidates_cache_${e}`)("neo-n3-testnet"===$.value?"testnet":"mainnet");try{const n=(e=>{const t=null==globalThis?void 0:globalThis.uni;return(null==t?void 0:t.getStorageSync)?t.getStorageSync(e):"undefined"!=typeof localStorage?localStorage.getItem(e):null})(t);if(n){const t=JSON.parse(n);T.value=t.candidates||[],z.value=t.totalVotes||"0";const a=t.timestamp||0,o=Date.now();if(!e&&o-a<3e5&&T.value.length>0)return}}catch{}M.value=!0;try{const e="neo-n3-testnet"===$.value?"neo-n3-testnet":"neo-n3-mainnet",n=await It(e);if(T.value=n.candidates,z.value=n.totalVotes||"0",R.value=n.blockHeight||0,N.value){const e=T.value.find(e=>{var t;return F(e.publicKey)===F(null==(t=N.value)?void 0:t.publicKey)});N.value=e||null}((e,t)=>{const n=null==globalThis?void 0:globalThis.uni;(null==n?void 0:n.setStorageSync)?n.setStorageSync(e,t):"undefined"!=typeof localStorage&&localStorage.setItem(e,t)})(t,JSON.stringify({candidates:T.value,totalVotes:z.value,blockHeight:R.value,timestamp:Date.now()}))}catch(n){0===T.value.length&&V(a("failedToLoad")||"Failed to load candidates","error")}finally{M.value=!1}},J=async()=>{if(!A.value&&N.value&&be(y,a))if(u.value||await g(),u.value){A.value=!0;try{await v({scriptHash:At,operation:"Vote",args:[{type:"Hash160",value:u.value},{type:"PublicKey",value:N.value.publicKey}]}),V(a("voteSuccess"),"success"),await Promise.all([Y(!0),q()])}catch(e){V(e.message||a("voteFailed"),"error")}finally{A.value=!1}}else V(a("connectWallet"),"error")};return n(async()=>{await Promise.all([Y(),q()])}),S(u,()=>{q()}),S($,()=>{Y(),q()}),(e,t)=>{const n=f,i=l,g=O;return r(),s(E(Ye),{"desktop-breakpoint":1024,class:"theme-candidate-vote",tabs:C.value,"active-tab":I.value,onTabChange:t[0]||(t[0]=e=>I.value=e)},{"desktop-sidebar":d(()=>[m(i,{class:"desktop-sidebar"},{default:d(()=>[m(n,{class:"sidebar-title"},{default:d(()=>[h(p(E(a)("overview")),1)]),_:1})]),_:1})]),default:d(()=>[m(E(He),{title:E(a)("wrongChain"),message:E(a)("wrongChainMessage"),"button-text":E(a)("switchToNeo")},null,8,["title","message","button-text"]),"vote"===I.value?(r(),s(i,{key:0,class:"tab-content scrollable"},{default:d(()=>[B.value?(r(),s(E(Je),{key:0,variant:"error"===B.value.type?"danger":"success",class:"mb-4 text-center font-bold"},{default:d(()=>[m(n,null,{default:d(()=>[h(p(B.value.msg),1)]),_:1})]),_:1},8,["variant"])):_("",!0),m(tt,{candidates:T.value,"selected-candidate":N.value,"user-voted-public-key":K.value,"total-votes":z.value,"is-loading":M.value,onSelect:j,onViewDetails:W},null,8,["candidates","selected-candidate","user-voted-public-key","total-votes","is-loading"]),m(E(Je),{variant:"erobo-neo"},{default:d(()=>[m(i,{class:"vote-form"},{default:d(()=>[N.value?(r(),s(E(Je),{key:0,variant:"erobo-neo",flat:"",class:"selected-candidate-card glass-panel"},{default:d(()=>[m(n,{class:"selected-label"},{default:d(()=>[h(p(E(a)("votingFor")),1)]),_:1}),m(i,{class:"candidate-badge"},{default:d(()=>[m(i,{class:"logo-name-row"},{default:d(()=>[N.value.logo?(r(),s(g,{key:0,class:"candidate-logo-sm",src:N.value.logo,mode:"aspectFit",alt:N.value.name||E(a)("candidateLogo")},null,8,["src","alt"])):_("",!0),m(n,{class:"candidate-name"},{default:d(()=>[h(p(N.value.name||N.value.address),1)]),_:1})]),_:1}),N.value.description?(r(),s(n,{key:0,class:"candidate-desc"},{default:d(()=>[h(p(N.value.description),1)]),_:1})):_("",!0),m(i,{class:"details-grid"},{default:d(()=>[m(i,{class:"detail-item"},{default:d(()=>[m(n,{class:"detail-label"},{default:d(()=>[h(p(E(a)("publicKey")),1)]),_:1}),m(n,{class:"detail-value mono"},{default:d(()=>[h(p(N.value.publicKey),1)]),_:1})]),_:1}),m(i,{class:"detail-item"},{default:d(()=>[m(n,{class:"detail-label"},{default:d(()=>[h(p(E(a)("address")),1)]),_:1}),m(n,{class:"detail-value mono"},{default:d(()=>[h(p(N.value.address),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):(r(),s(E(Je),{key:1,variant:"warning",flat:"",class:"no-candidate-card"},{default:d(()=>[m(n,{class:"warning-text text-center"},{default:d(()=>[h(p(E(a)("selectCandidateFirst")),1)]),_:1})]),_:1})),m(E(Xe),{variant:"primary",size:"lg",block:"",disabled:!N.value||!E(u)||A.value,loading:A.value,onClick:J},{default:d(()=>[h(p(E(a)("voteNow")),1)]),_:1},8,["disabled","loading"]),E(u)?_("",!0):(r(),s(i,{key:2,class:"connect-hint"},{default:d(()=>[m(n,{class:"hint-text"},{default:d(()=>[h(p(E(a)("connectWallet")),1)]),_:1})]),_:1}))]),_:1})]),_:1})]),_:1})):_("",!0),"info"===I.value?(r(),s(rt,{key:1,address:E(u)},null,8,["address"])):_("",!0),"docs"===I.value?(r(),s(i,{key:2,class:"tab-content scrollable"},{default:d(()=>[m(E(Qe),{title:E(a)("title"),subtitle:E(a)("docSubtitle"),description:E(a)("docDescription"),steps:o.value,features:c.value},null,8,["title","subtitle","description","steps","features"])]),_:1})):_("",!0),x.value?(r(),s(nt,{key:3,candidate:U.value,rank:L.value,"total-votes":z.value,"is-user-voted":!!U.value&&F(U.value.publicKey)===K.value,"can-vote":!!E(u)&&!A.value,"governance-portal-url":D.value,onClose:G,onVote:H},null,8,["candidate","rank","total-votes","is-user-voted","can-vote","governance-portal-url"])):_("",!0)]),_:1},8,["tabs","active-tab"])}}}),[["__scopeId","data-v-59365330"]]);export{St as default};
