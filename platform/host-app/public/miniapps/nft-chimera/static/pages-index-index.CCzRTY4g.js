import{r as a,d as e,c as l,a as s,w as t,i as n,o as u,b as i,e as c,f as o,g as d,n as r,t as f,h as v,u as m,j as p,F as _,k as y}from"./index-BSHghhJA.js";function w(e){const l=a(!1),s=a(null);return{isLoading:l,error:s,payGAS:async(a,t)=>{l.value=!0,s.value=null;try{const l=await function(a=5e3){return new Promise((e,l)=>{if(window.MiniAppSDK)return void e(window.MiniAppSDK);const s=setTimeout(()=>{l(new Error("SDK timeout"))},a),t=()=>{clearTimeout(s),window.removeEventListener("miniapp-sdk-ready",t),window.MiniAppSDK?e(window.MiniAppSDK):l(new Error("SDK not found"))};window.addEventListener("miniapp-sdk-ready",t)})}();return await l.payments.payGAS(e,a,t)}catch(n){throw s.value=n,n}finally{l.value=!1}}}}const g=((a,e)=>{const l=a.__vccOpts||a;for(const[s,t]of e)l[s]=t;return l})(e({__name:"index",setup(e){const{payGAS:g,isLoading:k}=w("miniapp-nftchimera"),F=a([{id:"1",name:"Fire Dragon",icon:"ðŸ‰"},{id:"2",name:"Ice Phoenix",icon:"ðŸ¦…"},{id:"3",name:"Earth Golem",icon:"ðŸ—¿"},{id:"4",name:"Wind Spirit",icon:"ðŸŒªï¸"}]),S=a([null,null]),h=a(0),C=a(null),A=l(()=>S.value[0]&&S.value[1]&&!k.value),D=a=>{h.value=a},T=()=>{var a,e;const l=[null==(a=S.value[0])?void 0:a.icon,null==(e=S.value[1])?void 0:e.icon];return l.includes("ðŸ‰")&&l.includes("ðŸ¦…")?"ðŸ¦–":"âœ¨"},E=async()=>{if(A.value)try{C.value={msg:"Fusing NFTs...",type:"loading"},await g("10",`fuse:${S.value[0].id}:${S.value[1].id}`);const a={id:Date.now().toString(),name:"Chimera Beast",icon:T()};F.value=F.value.filter(a=>a.id!==S.value[0].id&&a.id!==S.value[1].id),F.value.push(a),C.value={msg:`Created ${a.name}!`,type:"success"},S.value=[null,null]}catch(a){C.value={msg:a.message||"Error",type:"error"}}};return(a,e)=>{const l=o,w=n;return u(),s(w,{class:"app-container"},{default:t(()=>[i(w,{class:"header"},{default:t(()=>[i(l,{class:"title"},{default:t(()=>[d("NFT Chimera")]),_:1}),i(l,{class:"subtitle"},{default:t(()=>[d("Fuse NFTs to create new ones")]),_:1})]),_:1}),C.value?(u(),s(w,{key:0,class:r(["status-msg",C.value.type])},{default:t(()=>[i(l,null,{default:t(()=>[d(f(C.value.msg),1)]),_:1})]),_:1},8,["class"])):c("",!0),i(w,{class:"card"},{default:t(()=>[i(l,{class:"card-title"},{default:t(()=>[d("Select NFTs to Fuse")]),_:1}),i(w,{class:"fusion-slots"},{default:t(()=>[i(w,{class:"slot",onClick:e[0]||(e[0]=a=>D(0))},{default:t(()=>[S.value[0]?(u(),s(l,{key:0,class:"slot-icon"},{default:t(()=>[d(f(S.value[0].icon),1)]),_:1})):(u(),s(l,{key:1,class:"slot-empty"},{default:t(()=>[d("+")]),_:1}))]),_:1}),i(l,{class:"fusion-symbol"},{default:t(()=>[d("âš¡")]),_:1}),i(w,{class:"slot",onClick:e[1]||(e[1]=a=>D(1))},{default:t(()=>[S.value[1]?(u(),s(l,{key:0,class:"slot-icon"},{default:t(()=>[d(f(S.value[1].icon),1)]),_:1})):(u(),s(l,{key:1,class:"slot-empty"},{default:t(()=>[d("+")]),_:1}))]),_:1})]),_:1}),S.value[0]&&S.value[1]?(u(),s(w,{key:0,class:"fusion-result"},{default:t(()=>[i(l,{class:"result-label"},{default:t(()=>[d("Result Preview")]),_:1}),i(l,{class:"result-icon"},{default:t(()=>[d(f(T()),1)]),_:1}),i(l,{class:"result-name"},{default:t(()=>[d(f("Chimera Beast"),1)]),_:1})]),_:1})):c("",!0),i(w,{class:"fuse-btn",onClick:E,style:v({opacity:A.value?1:.5})},{default:t(()=>[i(l,null,{default:t(()=>[d(f(m(k)?"Fusing...":"Fuse NFTs (10 GAS)"),1)]),_:1})]),_:1},8,["style"])]),_:1}),i(w,{class:"card"},{default:t(()=>[i(l,{class:"card-title"},{default:t(()=>[d("Your NFTs")]),_:1}),i(w,{class:"nft-grid"},{default:t(()=>[(u(!0),p(_,null,y(F.value,a=>(u(),s(w,{key:a.id,class:"nft-card",onClick:e=>(a=>{S.value.includes(a)||(S.value[h.value]=a,h.value=0===h.value?1:0)})(a)},{default:t(()=>[i(l,{class:"nft-icon"},{default:t(()=>[d(f(a.icon),1)]),_:2},1024),i(l,{class:"nft-name"},{default:t(()=>[d(f(a.name),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1})}}}),[["__scopeId","data-v-cddc9301"]]);export{g as default};
