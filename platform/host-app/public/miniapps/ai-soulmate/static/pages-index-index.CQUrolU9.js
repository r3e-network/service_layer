import{r as e,d as a,c as t,w as s,i as l,a as i,o as n,b as o,e as u,f as r,g as d,n as c,t as m,h as p,F as f,j as w,u as v}from"./index-D2Nehgo5.js";function y(a){const t=e(!1),s=e(null);return{isLoading:t,error:s,payGAS:async(e,l)=>{t.value=!0,s.value=null;try{const t=await function(e=5e3){return new Promise((a,t)=>{if(window.MiniAppSDK)return void a(window.MiniAppSDK);const s=setTimeout(()=>{t(new Error("SDK timeout"))},e),l=()=>{clearTimeout(s),window.removeEventListener("miniapp-sdk-ready",l),window.MiniAppSDK?a(window.MiniAppSDK):t(new Error("SDK not found"))};window.addEventListener("miniapp-sdk-ready",l)})}();return await t.payments.payGAS(a,e,l)}catch(i){throw s.value=i,i}finally{t.value=!1}}}}const g=((e,a)=>{const t=e.__vccOpts||e;for(const[s,l]of a)t[s]=l;return t})(a({__name:"index",setup(a){const{payGAS:g,isLoading:_}=y("miniapp-aisoulmate"),S=e(""),h=e(null),x=e([{id:"1",from:"user",text:"Hello!",time:"10:30"},{id:"2",from:"ai",text:"Hi! How are you today?",time:"10:31"},{id:"3",from:"user",text:"Great! Tell me a story",time:"10:32"}]),D=async()=>{if(S.value.trim()&&!_.value)try{const e=S.value;x.value.push({id:Date.now().toString(),from:"user",text:e,time:(new Date).toLocaleTimeString().slice(0,5)}),S.value="",await g("0.1",`chat:${e.slice(0,20)}`),setTimeout(()=>{x.value.push({id:(Date.now()+1).toString(),from:"ai",text:"That's interesting! Tell me more...",time:(new Date).toLocaleTimeString().slice(0,5)})},1e3),h.value={msg:"Message sent!",type:"success"}}catch(e){h.value={msg:e.message||"Error",type:"error"}}};return(e,a)=>{const y=r,g=l,A=i("uni-easyinput");return n(),t(g,{class:"app-container"},{default:s(()=>[o(g,{class:"header"},{default:s(()=>[o(y,{class:"title"},{default:s(()=>[d("AI Soulmate")]),_:1}),o(y,{class:"subtitle"},{default:s(()=>[d("Your AI companion")]),_:1})]),_:1}),h.value?(n(),t(g,{key:0,class:c(["status-msg",h.value.type])},{default:s(()=>[o(y,null,{default:s(()=>[d(m(h.value.msg),1)]),_:1})]),_:1},8,["class"])):u("",!0),o(g,{class:"card"},{default:s(()=>[o(y,{class:"card-title"},{default:s(()=>[d("Chat History")]),_:1}),(n(!0),p(f,null,w(x.value,e=>(n(),t(g,{key:e.id,class:c(["message",e.from])},{default:s(()=>[o(y,{class:"msg-text"},{default:s(()=>[d(m(e.text),1)]),_:2},1024),o(y,{class:"msg-time"},{default:s(()=>[d(m(e.time),1)]),_:2},1024)]),_:2},1032,["class"]))),128))]),_:1}),o(g,{class:"card"},{default:s(()=>[o(y,{class:"card-title"},{default:s(()=>[d("Send Message")]),_:1}),o(A,{modelValue:S.value,"onUpdate:modelValue":a[0]||(a[0]=e=>S.value=e),placeholder:"Type your message..."},null,8,["modelValue"]),o(g,{class:"action-btn",onClick:D},{default:s(()=>[o(y,null,{default:s(()=>[d(m(v(_)?"Sending...":"Send Message"),1)]),_:1})]),_:1})]),_:1})]),_:1})}}}),[["__scopeId","data-v-218c48dc"]]);export{g as default};
