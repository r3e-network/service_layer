import{r as a,d as e,c as s,w as t,i as n,a as l,o as i,b as u,e as o,f as r,g as d,n as c,t as f,h as m,F as p,j as v,u as _}from"./index-D5FIDJPP.js";function y(e){const s=a(!1),t=a(null);return{isLoading:s,error:t,payGAS:async(a,n)=>{s.value=!0,t.value=null;try{const s=await function(a=5e3){return new Promise((e,s)=>{if(window.MiniAppSDK)return void e(window.MiniAppSDK);const t=setTimeout(()=>{s(new Error("SDK timeout"))},a),n=()=>{clearTimeout(t),window.removeEventListener("miniapp-sdk-ready",n),window.MiniAppSDK?e(window.MiniAppSDK):s(new Error("SDK not found"))};window.addEventListener("miniapp-sdk-ready",n)})}();return await s.payments.payGAS(e,a,n)}catch(l){throw t.value=l,l}finally{s.value=!1}}}}const w=((a,e)=>{const s=a.__vccOpts||a;for(const[t,n]of e)s[t]=n;return s})(e({__name:"index",setup(e){const{payGAS:w,isLoading:g}=y("miniapp-darkradio"),S=a(""),h=a(null),k=a(null),A=a([{id:"1",name:"Midnight Whispers",listeners:42},{id:"2",name:"Shadow Frequency",listeners:28},{id:"3",name:"Anonymous Echo",listeners:15}]),D=async()=>{if(S.value.trim()&&!g.value)try{await w("0.5",`broadcast:${S.value.slice(0,20)}`),h.value={msg:"Message broadcasted anonymously!",type:"success"},S.value=""}catch(a){h.value={msg:a.message||"Error",type:"error"}}};return(a,e)=>{const y=r,w=n,M=l("uni-easyinput");return i(),s(w,{class:"app-container"},{default:t(()=>[u(w,{class:"header"},{default:t(()=>[u(y,{class:"title"},{default:t(()=>[d("Dark Radio")]),_:1}),u(y,{class:"subtitle"},{default:t(()=>[d("Anonymous broadcasts")]),_:1})]),_:1}),h.value?(i(),s(w,{key:0,class:c(["status-msg",h.value.type])},{default:t(()=>[u(y,null,{default:t(()=>[d(f(h.value.msg),1)]),_:1})]),_:1},8,["class"])):o("",!0),u(w,{class:"card"},{default:t(()=>[u(y,{class:"card-title"},{default:t(()=>[d("Live Stations")]),_:1}),(i(!0),m(p,null,v(A.value,a=>(i(),s(w,{key:a.id,class:"station-item",onClick:e=>(a=>{k.value=a,h.value={msg:`Tuned to ${a.name}`,type:"success"}})(a)},{default:t(()=>{var e;return[u(w,{class:"station-icon"},{default:t(()=>[d("ðŸ“»")]),_:1}),u(w,{class:"station-info"},{default:t(()=>[u(y,{class:"station-name"},{default:t(()=>[d(f(a.name),1)]),_:2},1024),u(y,{class:"station-listeners"},{default:t(()=>[d(f(a.listeners)+" listening",1)]),_:2},1024)]),_:2},1024),u(w,{class:c(["station-status",{active:(null==(e=k.value)?void 0:e.id)===a.id}])},{default:t(()=>[u(y,null,{default:t(()=>{var e;return[d(f((null==(e=k.value)?void 0:e.id)===a.id?"ðŸ”Š":"â–¶ï¸"),1)]}),_:2},1024)]),_:2},1032,["class"])]}),_:2},1032,["onClick"]))),128))]),_:1}),u(w,{class:"card"},{default:t(()=>[u(y,{class:"card-title"},{default:t(()=>[d("Broadcast Message")]),_:1}),u(M,{modelValue:S.value,"onUpdate:modelValue":e[0]||(e[0]=a=>S.value=a),placeholder:"Your anonymous message..."},null,8,["modelValue"]),u(w,{class:"action-btn",onClick:D},{default:t(()=>[u(y,null,{default:t(()=>[d(f(_(g)?"Broadcasting...":"Broadcast"),1)]),_:1})]),_:1})]),_:1})]),_:1})}}}),[["__scopeId","data-v-5ff3fa83"]]);export{w as default};
