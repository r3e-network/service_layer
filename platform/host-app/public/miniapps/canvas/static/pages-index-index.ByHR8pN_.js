import{r as a,d as e,c as s,w as l,i as t,o as n,a as r,b as i,e as c,f as u,n as o,t as d,g as f,F as p,h as v,j as y,u as _}from"./index-CtEdsP83.js";function w(e){const s=a(!1),l=a(null);return{isLoading:s,error:l,payGAS:async(a,t)=>{s.value=!0,l.value=null;try{const s=await function(a=5e3){return new Promise((e,s)=>{if(window.MiniAppSDK)return void e(window.MiniAppSDK);const l=setTimeout(()=>{s(new Error("SDK timeout"))},a),t=()=>{clearTimeout(l),window.removeEventListener("miniapp-sdk-ready",t),window.MiniAppSDK?e(window.MiniAppSDK):s(new Error("SDK not found"))};window.addEventListener("miniapp-sdk-ready",t)})}();return await s.payments.payGAS(e,a,t)}catch(n){throw l.value=n,n}finally{s.value=!1}}}}const m=((a,e)=>{const s=a.__vccOpts||a;for(const[l,t]of e)s[l]=t;return s})(e({__name:"index",setup(e){const{payGAS:m,isLoading:k}=w("miniapp-canvas"),g=a(Array(256).fill("#1a1a2e")),A=a("#00ff88"),C=["#00ff88","#ff0055","#ffaa00","#00aaff","#ff00ff","#ffffff"],S=a(null),b=a([{id:"1",name:"Sunset",author:"Alice",price:"15"},{id:"2",name:"Ocean",author:"Bob",price:"20"},{id:"3",name:"Forest",author:"Carol",price:"12"}]),h=()=>{g.value=Array(256).fill("#1a1a2e"),S.value={msg:"Canvas cleared",type:"success"}},D=async()=>{if(!k.value)try{S.value={msg:"Minting NFT...",type:"loading"},await m("10",`mint:${Date.now()}`),S.value={msg:"Canvas minted as NFT!",type:"success"}}catch(a){S.value={msg:a.message||"Error",type:"error"}}};return(a,e)=>{const w=c,m=t;return n(),s(m,{class:"app-container"},{default:l(()=>[r(m,{class:"header"},{default:l(()=>[r(w,{class:"title"},{default:l(()=>[u("Pixel Canvas")]),_:1}),r(w,{class:"subtitle"},{default:l(()=>[u("Collaborative pixel art creation")]),_:1})]),_:1}),S.value?(n(),s(m,{key:0,class:o(["status-msg",S.value.type])},{default:l(()=>[r(w,null,{default:l(()=>[u(d(S.value.msg),1)]),_:1})]),_:1},8,["class"])):i("",!0),r(m,{class:"card"},{default:l(()=>[r(w,{class:"card-title"},{default:l(()=>[u("Canvas Grid")]),_:1}),r(m,{class:"canvas-grid"},{default:l(()=>[(n(!0),f(p,null,v(g.value,(a,e)=>(n(),s(m,{key:e,class:"pixel",style:y({background:a}),onClick:a=>(a=>{g.value[a]=A.value})(e)},null,8,["style","onClick"]))),128))]),_:1}),r(m,{class:"color-palette"},{default:l(()=>[(n(),f(p,null,v(C,a=>r(m,{key:a,class:o(["color-btn",{active:A.value===a}]),style:y({background:a}),onClick:e=>A.value=a},null,8,["class","style","onClick"])),64))]),_:1})]),_:1}),r(m,{class:"card"},{default:l(()=>[r(w,{class:"card-title"},{default:l(()=>[u("Actions")]),_:1}),r(m,{class:"action-btns"},{default:l(()=>[r(m,{class:"btn-primary",onClick:D,style:y({opacity:_(k)?.6:1})},{default:l(()=>[r(w,null,{default:l(()=>[u(d(_(k)?"Minting...":"Mint as NFT (10 GAS)"),1)]),_:1})]),_:1},8,["style"]),r(m,{class:"btn-secondary",onClick:h},{default:l(()=>[r(w,null,{default:l(()=>[u("Clear Canvas")]),_:1})]),_:1})]),_:1})]),_:1}),r(m,{class:"card"},{default:l(()=>[r(w,{class:"card-title"},{default:l(()=>[u("Recent Artworks")]),_:1}),r(m,{class:"artworks-list"},{default:l(()=>[(n(!0),f(p,null,v(b.value,a=>(n(),s(m,{key:a.id,class:"artwork-item"},{default:l(()=>[r(w,{class:"artwork-icon"},{default:l(()=>[u("ðŸŽ¨")]),_:1}),r(m,{class:"artwork-info"},{default:l(()=>[r(w,{class:"artwork-name"},{default:l(()=>[u(d(a.name),1)]),_:2},1024),r(w,{class:"artwork-author"},{default:l(()=>[u("by "+d(a.author),1)]),_:2},1024)]),_:2},1024),r(w,{class:"artwork-price"},{default:l(()=>[u(d(a.price)+" GAS",1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})}}}),[["__scopeId","data-v-182cc20a"]]);export{m as default};
