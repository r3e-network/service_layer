import{r as a,d as e,c as l,a as t,w as s,i as n,o as r,b as i,e as d,f as u,g as c,n as o,t as p,h as f,F as m,j as g,k as v,u as w}from"./index-BW5h80Kk.js";function _(e){const l=a(!1),t=a(null);return{isLoading:l,error:t,payGAS:async(a,s)=>{l.value=!0,t.value=null;try{const l=await function(a=5e3){return new Promise((e,l)=>{if(window.MiniAppSDK)return void e(window.MiniAppSDK);const t=setTimeout(()=>{l(new Error("SDK timeout"))},a),s=()=>{clearTimeout(t),window.removeEventListener("miniapp-sdk-ready",s),window.MiniAppSDK?e(window.MiniAppSDK):l(new Error("SDK not found"))};window.addEventListener("miniapp-sdk-ready",s)})}();return await l.payments.payGAS(e,a,s)}catch(n){throw t.value=n,n}finally{l.value=!1}}}}const y=((a,e)=>{const l=a.__vccOpts||a;for(const[t,s]of e)l[t]=s;return l})(e({__name:"index",setup(e){const{payGAS:y,isLoading:h}=_("miniapp-gardenofneo"),k=a([{id:"1",plant:{icon:"ðŸŒ»",name:"Sunflower",growth:80}},{id:"2",plant:{icon:"ðŸŒ¹",name:"Rose",growth:60}},{id:"3",plant:null},{id:"4",plant:null},{id:"5",plant:{icon:"ðŸŒ·",name:"Tulip",growth:100}},{id:"6",plant:null}]),S=a([{id:"1",name:"Sunflower",icon:"ðŸŒ»",price:"3",growTime:24},{id:"2",name:"Rose",icon:"ðŸŒ¹",price:"5",growTime:48},{id:"3",name:"Tulip",icon:"ðŸŒ·",price:"4",growTime:36},{id:"4",name:"Orchid",icon:"ðŸŒº",price:"8",growTime:72}]),b=a(null),A=a(12),G=a(null),T=l(()=>k.value.filter(a=>a.plant).length),E=l(()=>k.value.filter(a=>a.plant&&a.plant.growth>=100).length),D=async()=>{if(!h.value)try{b.value={msg:"Watering garden...",type:"loading"},await y("2",`water:${Date.now()}`),k.value.forEach(a=>{a.plant&&a.plant.growth<100&&(a.plant.growth=Math.min(100,a.plant.growth+20))}),b.value={msg:"Garden watered!",type:"success"}}catch(a){b.value={msg:a.message||"Error",type:"error"}}},C=a=>{!a.plant||a.plant.growth<100||(b.value={msg:`Harvested ${a.plant.name}!`,type:"success"},a.plant=null,A.value++)},K=()=>{let a=0;k.value.forEach(e=>{e.plant&&e.plant.growth>=100&&(e.plant=null,a++)}),a>0?(A.value+=a,b.value={msg:`Harvested ${a} plants!`,type:"success"}):b.value={msg:"No plants ready to harvest",type:"error"}};return(a,e)=>{const l=u,_=n;return r(),t(_,{class:"app-container"},{default:s(()=>[i(_,{class:"header"},{default:s(()=>[i(l,{class:"title"},{default:s(()=>[c("Garden of Neo")]),_:1}),i(l,{class:"subtitle"},{default:s(()=>[c("Grow and trade virtual garden NFTs")]),_:1})]),_:1}),b.value?(r(),t(_,{key:0,class:o(["status-msg",b.value.type])},{default:s(()=>[i(l,null,{default:s(()=>[c(p(b.value.msg),1)]),_:1})]),_:1},8,["class"])):d("",!0),i(_,{class:"card"},{default:s(()=>[i(l,{class:"card-title"},{default:s(()=>[c("Your Garden")]),_:1}),i(_,{class:"garden-grid"},{default:s(()=>[(r(!0),f(m,null,g(k.value,a=>(r(),t(_,{key:a.id,class:o(["plot",{empty:!a.plant}]),onClick:e=>(a=>{G.value=a,a.plant&&a.plant.growth>=100&&C(a)})(a)},{default:s(()=>[a.plant?(r(),t(l,{key:0,class:"plant-icon"},{default:s(()=>[c(p(a.plant.icon),1)]),_:2},1024)):(r(),t(l,{key:1,class:"empty-icon"},{default:s(()=>[c("ðŸŒ±")]),_:1})),a.plant?(r(),t(_,{key:2,class:"growth-bar"},{default:s(()=>[i(_,{class:"growth-fill",style:v({width:a.plant.growth+"%"})},null,8,["style"])]),_:2},1024)):d("",!0)]),_:2},1032,["class","onClick"]))),128))]),_:1})]),_:1}),i(_,{class:"card"},{default:s(()=>[i(l,{class:"card-title"},{default:s(()=>[c("Available Seeds")]),_:1}),i(_,{class:"seeds-list"},{default:s(()=>[(r(!0),f(m,null,g(S.value,a=>(r(),t(_,{key:a.id,class:"seed-item",onClick:e=>(async a=>{const e=k.value.find(a=>!a.plant);if(e){if(!h.value)try{b.value={msg:"Planting seed...",type:"loading"},await y(a.price,`plant:${a.id}`),e.plant={icon:a.icon,name:a.name,growth:0},b.value={msg:`${a.name} planted!`,type:"success"}}catch(l){b.value={msg:l.message||"Error",type:"error"}}}else b.value={msg:"No empty plots available",type:"error"}})(a)},{default:s(()=>[i(l,{class:"seed-icon"},{default:s(()=>[c(p(a.icon),1)]),_:2},1024),i(_,{class:"seed-info"},{default:s(()=>[i(l,{class:"seed-name"},{default:s(()=>[c(p(a.name),1)]),_:2},1024),i(l,{class:"seed-time"},{default:s(()=>[c(p(a.growTime)+"h to grow",1)]),_:2},1024)]),_:2},1024),i(l,{class:"seed-price"},{default:s(()=>[c(p(a.price)+" GAS",1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1}),i(_,{class:"card"},{default:s(()=>[i(l,{class:"card-title"},{default:s(()=>[c("Actions")]),_:1}),i(_,{class:"action-btns"},{default:s(()=>[i(_,{class:"btn-primary",onClick:D,style:v({opacity:w(h)?.6:1})},{default:s(()=>[i(l,null,{default:s(()=>[c(p(w(h)?"Watering...":"Water All (2 GAS)"),1)]),_:1})]),_:1},8,["style"]),i(_,{class:"btn-secondary",onClick:K},{default:s(()=>[i(l,null,{default:s(()=>[c("Harvest Ready Plants")]),_:1})]),_:1})]),_:1})]),_:1}),i(_,{class:"card"},{default:s(()=>[i(l,{class:"card-title"},{default:s(()=>[c("Garden Stats")]),_:1}),i(_,{class:"stats-grid"},{default:s(()=>[i(_,{class:"stat-item"},{default:s(()=>[i(l,{class:"stat-value"},{default:s(()=>[c(p(T.value),1)]),_:1}),i(l,{class:"stat-label"},{default:s(()=>[c("Plants")]),_:1})]),_:1}),i(_,{class:"stat-item"},{default:s(()=>[i(l,{class:"stat-value"},{default:s(()=>[c(p(E.value),1)]),_:1}),i(l,{class:"stat-label"},{default:s(()=>[c("Ready")]),_:1})]),_:1}),i(_,{class:"stat-item"},{default:s(()=>[i(l,{class:"stat-value"},{default:s(()=>[c(p(A.value),1)]),_:1}),i(l,{class:"stat-label"},{default:s(()=>[c("Harvested")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}}),[["__scopeId","data-v-fe4388bf"]]);export{y as default};
