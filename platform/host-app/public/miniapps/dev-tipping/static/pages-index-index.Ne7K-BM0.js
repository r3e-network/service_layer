import{r as e,d as a,c as l,w as s,i as t,a as n,o as u,b as i,e as d,f as o,g as c,n as r,t as p,h as v,F as m,j as f,u as _}from"./index-BZPAFYBA.js";function y(a){const l=e(!1),s=e(null);return{isLoading:l,error:s,payGAS:async(e,t)=>{l.value=!0,s.value=null;try{const l=await function(e=5e3){return new Promise((a,l)=>{if(window.MiniAppSDK)return void a(window.MiniAppSDK);const s=setTimeout(()=>{l(new Error("SDK timeout"))},e),t=()=>{clearTimeout(s),window.removeEventListener("miniapp-sdk-ready",t),window.MiniAppSDK?a(window.MiniAppSDK):l(new Error("SDK not found"))};window.addEventListener("miniapp-sdk-ready",t)})}();return await l.payments.payGAS(a,e,t)}catch(n){throw s.value=n,n}finally{l.value=!1}}}}const w=((e,a)=>{const l=e.__vccOpts||e;for(const[s,t]of a)l[s]=t;return l})(a({__name:"index",setup(a){const{payGAS:w,isLoading:S}=y("miniapp-devtipping"),g=e(""),A=e(""),h=e(""),D=e(null),V=e([{id:"1",name:"Alice.neo",projects:12,tips:"150"},{id:"2",name:"Bob.neo",projects:8,tips:"89"},{id:"3",name:"Charlie.neo",projects:5,tips:"45"}]),j=async()=>{if(g.value&&A.value&&!S.value)try{await w(A.value,`tip:${g.value.slice(0,10)}`),D.value={msg:"Tip sent successfully!",type:"success"},g.value="",A.value="",h.value=""}catch(e){D.value={msg:e.message||"Error",type:"error"}}};return(e,a)=>{const y=o,w=t,T=n("uni-easyinput");return u(),l(w,{class:"app-container"},{default:s(()=>[i(w,{class:"header"},{default:s(()=>[i(y,{class:"title"},{default:s(()=>[c("Dev Tipping")]),_:1}),i(y,{class:"subtitle"},{default:s(()=>[c("Support developers")]),_:1})]),_:1}),D.value?(u(),l(w,{key:0,class:r(["status-msg",D.value.type])},{default:s(()=>[i(y,null,{default:s(()=>[c(p(D.value.msg),1)]),_:1})]),_:1},8,["class"])):d("",!0),i(w,{class:"card"},{default:s(()=>[i(y,{class:"card-title"},{default:s(()=>[c("Top Developers")]),_:1}),(u(!0),v(m,null,f(V.value,e=>(u(),l(w,{key:e.id,class:"dev-item",onClick:a=>(e=>{g.value=`N${e.name.slice(0,3)}...xyz`,D.value={msg:`Selected ${e.name}`,type:"success"}})(e)},{default:s(()=>[i(w,{class:"dev-avatar"},{default:s(()=>[c("ðŸ‘¨â€ðŸ’»")]),_:1}),i(w,{class:"dev-info"},{default:s(()=>[i(y,{class:"dev-name"},{default:s(()=>[c(p(e.name),1)]),_:2},1024),i(y,{class:"dev-projects"},{default:s(()=>[c(p(e.projects)+" projects",1)]),_:2},1024)]),_:2},1024),i(y,{class:"dev-tips"},{default:s(()=>[c(p(e.tips)+" GAS",1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1}),i(w,{class:"card"},{default:s(()=>[i(y,{class:"card-title"},{default:s(()=>[c("Send Tip")]),_:1}),i(T,{modelValue:g.value,"onUpdate:modelValue":a[0]||(a[0]=e=>g.value=e),placeholder:"Developer address"},null,8,["modelValue"]),i(T,{modelValue:A.value,"onUpdate:modelValue":a[1]||(a[1]=e=>A.value=e),type:"number",placeholder:"Tip amount (GAS)"},null,8,["modelValue"]),i(T,{modelValue:h.value,"onUpdate:modelValue":a[2]||(a[2]=e=>h.value=e),placeholder:"Optional message"},null,8,["modelValue"]),i(w,{class:"action-btn",onClick:j},{default:s(()=>[i(y,null,{default:s(()=>[c(p(_(S)?"Sending...":"Send Tip"),1)]),_:1})]),_:1})]),_:1})]),_:1})}}}),[["__scopeId","data-v-c243b95f"]]);export{w as default};
