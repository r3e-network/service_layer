import{r as a,d as e,c as s,w as t,i as l,o,a as n,b as u,e as c,f as i,n as r,t as d,g as f,F as p,h as m}from"./index-BbAlceq7.js";function _(e){const s=a(!1),t=a(null);return{isLoading:s,error:t,payGAS:async(a,l)=>{s.value=!0,t.value=null;try{const s=await function(a=5e3){return new Promise((e,s)=>{if(window.MiniAppSDK)return void e(window.MiniAppSDK);const t=setTimeout(()=>{s(new Error("SDK timeout"))},a),l=()=>{clearTimeout(t),window.removeEventListener("miniapp-sdk-ready",l),window.MiniAppSDK?e(window.MiniAppSDK):s(new Error("SDK not found"))};window.addEventListener("miniapp-sdk-ready",l)})}();return await s.payments.payGAS(e,a,l)}catch(o){throw t.value=o,o}finally{s.value=!1}}}}const v=((a,e)=>{const s=a.__vccOpts||a;for(const[t,l]of e)s[t]=l;return s})(e({__name:"index",setup(e){const{payGAS:v,isLoading:w}=_("miniapp-masquerade-dao"),y=a(3),g=a(85),k=a(5),b=a(0),S=a(null),A=a([{icon:"ðŸŽ­",name:"Shadow",power:100},{icon:"ðŸ‘º",name:"Demon",power:250},{icon:"ðŸ¦Š",name:"Fox",power:150}]),V=a([{id:1,title:"Increase treasury allocation",forVotes:450,againstVotes:120},{id:2,title:"New governance model",forVotes:380,againstVotes:200}]),h=async()=>{if(!w.value)try{S.value={msg:"Creating mask...",type:"loading"},await v("1","create-mask"),y.value++,S.value={msg:"Mask created!",type:"success"}}catch(a){S.value={msg:a.message||"Error",type:"error"}}},C=async(a,e)=>{if(null!==b.value)try{S.value={msg:"Voting...",type:"loading"},await v("0.1",`vote:${a}:${e}`),S.value={msg:"Vote cast!",type:"success"}}catch(s){S.value={msg:s.message||"Error",type:"error"}}else S.value={msg:"Select a mask first",type:"error"}};return(a,e)=>{const _=c,v=l;return o(),s(v,{class:"app-container"},{default:t(()=>[n(v,{class:"header"},{default:t(()=>[n(_,{class:"title"},{default:t(()=>[i("Masquerade DAO")]),_:1}),n(_,{class:"subtitle"},{default:t(()=>[i("Vote behind the mask")]),_:1})]),_:1}),S.value?(o(),s(v,{key:0,class:r(["status-msg",S.value.type])},{default:t(()=>[n(_,null,{default:t(()=>[i(d(S.value.msg),1)]),_:1})]),_:1},8,["class"])):u("",!0),n(v,{class:"card"},{default:t(()=>[n(v,{class:"stats-grid"},{default:t(()=>[n(v,{class:"stat-box"},{default:t(()=>[n(_,{class:"stat-value"},{default:t(()=>[i(d(y.value),1)]),_:1}),n(_,{class:"stat-label"},{default:t(()=>[i("Masks")]),_:1})]),_:1}),n(v,{class:"stat-box"},{default:t(()=>[n(_,{class:"stat-value"},{default:t(()=>[i(d(g.value),1)]),_:1}),n(_,{class:"stat-label"},{default:t(()=>[i("Rep")]),_:1})]),_:1}),n(v,{class:"stat-box"},{default:t(()=>[n(_,{class:"stat-value"},{default:t(()=>[i(d(k.value),1)]),_:1}),n(_,{class:"stat-label"},{default:t(()=>[i("Active")]),_:1})]),_:1})]),_:1})]),_:1}),n(v,{class:"card"},{default:t(()=>[n(_,{class:"card-title"},{default:t(()=>[i("Your Masks")]),_:1}),n(v,{class:"masks-grid"},{default:t(()=>[(o(!0),f(p,null,m(A.value,(a,e)=>(o(),s(v,{key:e,class:r(["mask-item",b.value===e&&"active"]),onClick:a=>b.value=e},{default:t(()=>[n(_,{class:"mask-icon"},{default:t(()=>[i(d(a.icon),1)]),_:2},1024),n(_,{class:"mask-name"},{default:t(()=>[i(d(a.name),1)]),_:2},1024),n(_,{class:"mask-power"},{default:t(()=>[i(d(a.power)+" VP",1)]),_:2},1024)]),_:2},1032,["class","onClick"]))),128))]),_:1}),n(v,{class:"create-btn",onClick:h},{default:t(()=>[n(_,null,{default:t(()=>[i("+ Create New Mask")]),_:1})]),_:1})]),_:1}),n(v,{class:"card"},{default:t(()=>[n(_,{class:"card-title"},{default:t(()=>[i("Proposals")]),_:1}),n(v,{class:"proposals-list"},{default:t(()=>[(o(!0),f(p,null,m(V.value,(a,e)=>(o(),s(v,{key:e,class:"proposal-item"},{default:t(()=>[n(_,{class:"proposal-title"},{default:t(()=>[i(d(a.title),1)]),_:2},1024),n(v,{class:"vote-options"},{default:t(()=>[n(v,{class:"vote-btn yes",onClick:e=>C(a.id,!0)},{default:t(()=>[n(_,null,{default:t(()=>[i("For "+d(a.forVotes),1)]),_:2},1024)]),_:2},1032,["onClick"]),n(v,{class:"vote-btn no",onClick:e=>C(a.id,!1)},{default:t(()=>[n(_,null,{default:t(()=>[i("Against "+d(a.againstVotes),1)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})}}}),[["__scopeId","data-v-3b146cc7"]]);export{v as default};
