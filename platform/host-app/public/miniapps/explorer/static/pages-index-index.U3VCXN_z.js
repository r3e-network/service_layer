import{d as a,r as e,o as t,c as l,w as s,a as u,i as c,b as d,e as n,f as r,g as o,h as f,t as i,I as _,n as v,j as h,F as m,k}from"./index-DAgyR3_U.js";const y="/api/explorer",g=((a,e)=>{const t=a.__vccOpts||a;for(const[l,s]of e)t[l]=s;return t})(a({__name:"index",setup(a){const g=e(""),x=e("testnet"),b=e(!1),w=e(null),p=e(null),C=e([]),S=e({mainnet:{height:0,txCount:0},testnet:{height:0,txCount:0}}),T=a=>function(a,e=2){return a>=1e6?(a/1e6).toFixed(e)+"M":a>=1e3?(a/1e3).toFixed(e)+"K":a.toFixed(e)}(a,0),F=a=>new Date(a).toLocaleString(),$=a=>a?`${a.slice(0,10)}...${a.slice(-8)}`:"",G=async()=>{try{const a=await u({url:`${y}/stats`,method:"GET"});200===a.statusCode&&a.data&&(S.value=a.data)}catch(a){console.error("Failed to fetch stats:",a)}},I=async()=>{const a=g.value.trim();if(a){b.value=!0,p.value=null,w.value=null;try{const e=await u({url:`${y}/search?q=${encodeURIComponent(a)}&network=${x.value}`,method:"GET"});200===e.statusCode&&e.data?p.value=e.data:w.value={msg:"No results found",type:"error"}}catch(e){w.value={msg:e.message||"Search failed",type:"error"}}finally{b.value=!1}}else w.value={msg:"Please enter a search query",type:"error"}},A=a=>{g.value=a,I()};return t(()=>{G(),(async()=>{try{const a=await u({url:`${y}/recent?network=${x.value}&limit=10`,method:"GET"});200===a.statusCode&&a.data&&(C.value=a.data.transactions||[])}catch(a){console.error("Failed to fetch recent txs:",a)}})(),setInterval(G,15e3)}),(a,e)=>{const t=o,u=c,y=_;return d(),l(u,{class:"app-container"},{default:s(()=>[n(u,{class:"header"},{default:s(()=>[n(t,{class:"title"},{default:s(()=>[f("Neo Explorer")]),_:1}),n(t,{class:"subtitle"},{default:s(()=>[f("Search transactions, addresses, contracts")]),_:1})]),_:1}),n(u,{class:"stats-grid"},{default:s(()=>[n(u,{class:"network-card mainnet"},{default:s(()=>[n(t,{class:"network-label"},{default:s(()=>[f("Mainnet")]),_:1}),n(u,{class:"network-stats"},{default:s(()=>[n(u,{class:"stat-item"},{default:s(()=>[n(t,{class:"stat-value"},{default:s(()=>[f(i(T(S.value.mainnet.height)),1)]),_:1}),n(t,{class:"stat-label"},{default:s(()=>[f("Block Height")]),_:1})]),_:1}),n(u,{class:"stat-item"},{default:s(()=>[n(t,{class:"stat-value"},{default:s(()=>[f(i(T(S.value.mainnet.txCount)),1)]),_:1}),n(t,{class:"stat-label"},{default:s(()=>[f("Transactions")]),_:1})]),_:1})]),_:1})]),_:1}),n(u,{class:"network-card testnet"},{default:s(()=>[n(t,{class:"network-label"},{default:s(()=>[f("Testnet")]),_:1}),n(u,{class:"network-stats"},{default:s(()=>[n(u,{class:"stat-item"},{default:s(()=>[n(t,{class:"stat-value"},{default:s(()=>[f(i(T(S.value.testnet.height)),1)]),_:1}),n(t,{class:"stat-label"},{default:s(()=>[f("Block Height")]),_:1})]),_:1}),n(u,{class:"stat-item"},{default:s(()=>[n(t,{class:"stat-value"},{default:s(()=>[f(i(T(S.value.testnet.txCount)),1)]),_:1}),n(t,{class:"stat-label"},{default:s(()=>[f("Transactions")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),n(u,{class:"search-section"},{default:s(()=>[n(u,{class:"search-box"},{default:s(()=>[n(y,{modelValue:g.value,"onUpdate:modelValue":e[0]||(e[0]=a=>g.value=a),class:"search-input",placeholder:"Search tx hash, address, or contract...",onConfirm:I},null,8,["modelValue"]),n(u,{class:"search-btn",onClick:I},{default:s(()=>[n(t,null,{default:s(()=>[f("Search")]),_:1})]),_:1})]),_:1}),n(u,{class:"network-toggle"},{default:s(()=>[n(u,{class:v(["toggle-btn","mainnet"===x.value&&"active"]),onClick:e[1]||(e[1]=a=>x.value="mainnet")},{default:s(()=>[n(t,null,{default:s(()=>[f("Mainnet")]),_:1})]),_:1},8,["class"]),n(u,{class:v(["toggle-btn","testnet"===x.value&&"active"]),onClick:e[2]||(e[2]=a=>x.value="testnet")},{default:s(()=>[n(t,null,{default:s(()=>[f("Testnet")]),_:1})]),_:1},8,["class"])]),_:1})]),_:1}),w.value?(d(),l(u,{key:0,class:v(["status-msg",w.value.type])},{default:s(()=>[n(t,null,{default:s(()=>[f(i(w.value.msg),1)]),_:1})]),_:1},8,["class"])):r("",!0),b.value?(d(),l(u,{key:1,class:"loading"},{default:s(()=>[n(t,null,{default:s(()=>[f("Searching...")]),_:1})]),_:1})):r("",!0),p.value?(d(),l(u,{key:2,class:"result-section"},{default:s(()=>[n(t,{class:"section-title"},{default:s(()=>[f("Search Result")]),_:1}),"transaction"===p.value.type?(d(),l(u,{key:0,class:"result-card"},{default:s(()=>[n(u,{class:"result-header"},{default:s(()=>[n(t,{class:"result-type"},{default:s(()=>[f("Transaction")]),_:1}),n(t,{class:v(["vm-state",p.value.data.vmState])},{default:s(()=>[f(i(p.value.data.vmState),1)]),_:1},8,["class"])]),_:1}),n(u,{class:"result-row"},{default:s(()=>[n(t,{class:"label"},{default:s(()=>[f("Hash:")]),_:1}),n(t,{class:"value hash"},{default:s(()=>[f(i(p.value.data.hash),1)]),_:1})]),_:1}),n(u,{class:"result-row"},{default:s(()=>[n(t,{class:"label"},{default:s(()=>[f("Block:")]),_:1}),n(t,{class:"value"},{default:s(()=>[f(i(p.value.data.blockIndex),1)]),_:1})]),_:1}),n(u,{class:"result-row"},{default:s(()=>[n(t,{class:"label"},{default:s(()=>[f("Time:")]),_:1}),n(t,{class:"value"},{default:s(()=>[f(i(F(p.value.data.blockTime)),1)]),_:1})]),_:1}),n(u,{class:"result-row"},{default:s(()=>[n(t,{class:"label"},{default:s(()=>[f("Sender:")]),_:1}),n(t,{class:"value addr"},{default:s(()=>[f(i(p.value.data.sender),1)]),_:1})]),_:1}),n(u,{class:"result-row"},{default:s(()=>[n(t,{class:"label"},{default:s(()=>[f("System Fee:")]),_:1}),n(t,{class:"value"},{default:s(()=>[f(i(p.value.data.systemFee)+" GAS",1)]),_:1})]),_:1}),n(u,{class:"result-row"},{default:s(()=>[n(t,{class:"label"},{default:s(()=>[f("Network Fee:")]),_:1}),n(t,{class:"value"},{default:s(()=>[f(i(p.value.data.networkFee)+" GAS",1)]),_:1})]),_:1})]),_:1})):"address"===p.value.type?(d(),l(u,{key:1,class:"result-card"},{default:s(()=>{var a;return[n(u,{class:"result-header"},{default:s(()=>[n(t,{class:"result-type"},{default:s(()=>[f("Address")]),_:1})]),_:1}),n(u,{class:"result-row"},{default:s(()=>[n(t,{class:"label"},{default:s(()=>[f("Address:")]),_:1}),n(t,{class:"value addr"},{default:s(()=>[f(i(p.value.data.address),1)]),_:1})]),_:1}),n(u,{class:"result-row"},{default:s(()=>[n(t,{class:"label"},{default:s(()=>[f("Transactions:")]),_:1}),n(t,{class:"value"},{default:s(()=>[f(i(p.value.data.txCount),1)]),_:1})]),_:1}),(null==(a=p.value.data.transactions)?void 0:a.length)?(d(),l(u,{key:0,class:"tx-list"},{default:s(()=>[n(t,{class:"list-title"},{default:s(()=>[f("Recent Transactions")]),_:1}),(d(!0),h(m,null,k(p.value.data.transactions,a=>(d(),l(u,{key:a.hash,class:"tx-item",onClick:e=>A(a.hash)},{default:s(()=>[n(t,{class:"tx-hash"},{default:s(()=>[f(i($(a.hash)),1)]),_:2},1024),n(t,{class:"tx-time"},{default:s(()=>[f(i(F(a.blockTime)),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})):r("",!0)]}),_:1})):r("",!0)]),_:1})):r("",!0),!p.value&&C.value.length?(d(),l(u,{key:3,class:"recent-section"},{default:s(()=>[n(t,{class:"section-title"},{default:s(()=>[f("Recent Transactions")]),_:1}),(d(!0),h(m,null,k(C.value,a=>(d(),l(u,{key:a.hash,class:"tx-item",onClick:e=>A(a.hash)},{default:s(()=>[n(u,{class:"tx-info"},{default:s(()=>[n(t,{class:"tx-hash"},{default:s(()=>[f(i($(a.hash)),1)]),_:2},1024),n(t,{class:v(["vm-state-small",a.vmState])},{default:s(()=>[f(i(a.vmState),1)]),_:2},1032,["class"])]),_:2},1024),n(t,{class:"tx-time"},{default:s(()=>[f(i(F(a.blockTime)),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})):r("",!0)]),_:1})}}}),[["__scopeId","data-v-e874332f"]]);export{g as default};
