import{r as e,d as a,c as l,w as t,i as s,a as u,o as n,b as d,e as r,f as o,g as i,n as c,t as f,u as v}from"./index-PENg49Y2.js";function p(a){const l=e(!1),t=e(null);return{isLoading:l,error:t,payGAS:async(e,s)=>{l.value=!0,t.value=null;try{const l=await function(e=5e3){return new Promise((a,l)=>{if(window.MiniAppSDK)return void a(window.MiniAppSDK);const t=setTimeout(()=>{l(new Error("SDK timeout"))},e),s=()=>{clearTimeout(t),window.removeEventListener("miniapp-sdk-ready",s),window.MiniAppSDK?a(window.MiniAppSDK):l(new Error("SDK not found"))};window.addEventListener("miniapp-sdk-ready",s)})}();return await l.payments.payGAS(a,e,s)}catch(u){throw t.value=u,u}finally{l.value=!1}}}}const m="0.015",_=((e,a)=>{const l=e.__vccOpts||e;for(const[t,s]of a)l[t]=s;return l})(a({__name:"index",setup(a){const{payGAS:_,isLoading:w}=p("miniapp-ai-trader"),y=e({winRate:57,roi30d:12.4,maxDD:6.8,refreshMins:5}),g=e("Mean Reversion"),M=e("Medium"),S=e("50"),D=e(null),A=async()=>{if(w.value)return;const e=parseFloat(S.value);if(e>0)try{await _(m,`ai:${g.value}:${M.value}:${e}`),D.value={msg:`Deployed: ${g.value} (${M.value})`,type:"success"}}catch(a){D.value={msg:(null==a?void 0:a.message)||"Payment failed",type:"error"}}else D.value={msg:"Enter a valid allocation",type:"error"}};return(e,a)=>{const p=o,_=s,h=u("uni-easyinput");return n(),l(_,{class:"app-container"},{default:t(()=>[d(_,{class:"header"},{default:t(()=>[d(p,{class:"title"},{default:t(()=>[i("AI Trader")]),_:1}),d(p,{class:"subtitle"},{default:t(()=>[i("Model-driven execution")]),_:1})]),_:1}),D.value?(n(),l(_,{key:0,class:c(["status-msg",D.value.type])},{default:t(()=>[d(p,null,{default:t(()=>[i(f(D.value.msg),1)]),_:1})]),_:1},8,["class"])):r("",!0),d(_,{class:"card"},{default:t(()=>[d(p,{class:"card-title"},{default:t(()=>[i("Performance")]),_:1}),d(_,{class:"row"},{default:t(()=>[d(p,null,{default:t(()=>[i("Win rate")]),_:1}),d(p,{class:"v"},{default:t(()=>[i(f(y.value.winRate)+"%",1)]),_:1})]),_:1}),d(_,{class:"row"},{default:t(()=>[d(p,null,{default:t(()=>[i("30d ROI")]),_:1}),d(p,{class:"v"},{default:t(()=>[i(f(y.value.roi30d)+"%",1)]),_:1})]),_:1}),d(_,{class:"row"},{default:t(()=>[d(p,null,{default:t(()=>[i("Max drawdown")]),_:1}),d(p,{class:"v"},{default:t(()=>[i(f(y.value.maxDD)+"%",1)]),_:1})]),_:1})]),_:1}),d(_,{class:"card"},{default:t(()=>[d(p,{class:"card-title"},{default:t(()=>[i("Strategy")]),_:1}),d(_,{class:"row"},{default:t(()=>[d(p,null,{default:t(()=>[i("Selected")]),_:1}),d(p,{class:"v"},{default:t(()=>[i(f(g.value||"Mean Reversion"),1)]),_:1})]),_:1}),d(_,{class:"row"},{default:t(()=>[d(p,null,{default:t(()=>[i("Risk")]),_:1}),d(p,{class:"v"},{default:t(()=>[i(f(M.value||"Medium"),1)]),_:1})]),_:1}),d(_,{class:"row"},{default:t(()=>[d(p,null,{default:t(()=>[i("Signal refresh")]),_:1}),d(p,{class:"v"},{default:t(()=>[i(f(y.value.refreshMins)+"m",1)]),_:1})]),_:1})]),_:1}),d(_,{class:"card"},{default:t(()=>[d(p,{class:"card-title"},{default:t(()=>[i("Deploy")]),_:1}),d(h,{modelValue:g.value,"onUpdate:modelValue":a[0]||(a[0]=e=>g.value=e),placeholder:"Strategy (e.g., Momentum)"},null,8,["modelValue"]),d(h,{modelValue:M.value,"onUpdate:modelValue":a[1]||(a[1]=e=>M.value=e),placeholder:"Risk (Low/Medium/High)"},null,8,["modelValue"]),d(h,{modelValue:S.value,"onUpdate:modelValue":a[2]||(a[2]=e=>S.value=e),type:"number",placeholder:"Allocation (GAS)"},null,8,["modelValue"]),d(_,{class:"action-btn",onClick:A},{default:t(()=>[d(p,null,{default:t(()=>[i(f(v(w)?"Processing...":"Deploy AI Trader"),1)]),_:1})]),_:1}),d(p,{class:"note"},{default:t(()=>[i("Mock compute fee: "+f(m)+" GAS")]),_:1})]),_:1})]),_:1})}}}),[["__scopeId","data-v-a042c6a7"]]);export{_ as default};
