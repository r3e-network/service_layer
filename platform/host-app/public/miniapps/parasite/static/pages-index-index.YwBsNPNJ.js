import{r as e,d as a,c as t,w as s,i as l,o as i,a as n,b as o,e as r,f as c,n as u,t as d,g as f,F as m,h as v,j as p,u as y}from"./index-DnZdAz6o.js";function _(a){const t=e(!1),s=e(null);return{isLoading:t,error:s,payGAS:async(e,l)=>{t.value=!0,s.value=null;try{const t=await function(e=5e3){return new Promise((a,t)=>{if(window.MiniAppSDK)return void a(window.MiniAppSDK);const s=setTimeout(()=>{t(new Error("SDK timeout"))},e),l=()=>{clearTimeout(s),window.removeEventListener("miniapp-sdk-ready",l),window.MiniAppSDK?a(window.MiniAppSDK):t(new Error("SDK not found"))};window.addEventListener("miniapp-sdk-ready",l)})}();return await t.payments.payGAS(a,e,l)}catch(i){throw s.value=i,i}finally{t.value=!1}}}}const h=((e,a)=>{const t=e.__vccOpts||e;for(const[s,l]of a)t[s]=l;return t})(a({__name:"index",setup(a){const{payGAS:h,isLoading:w}=_("miniapp-parasite"),g=e([{id:"1",name:"Shadow Leech",icon:"ðŸ¦ ",level:3,energy:65,victims:8},{id:"2",name:"Void Tick",icon:"ðŸ•·ï¸",level:2,energy:40,victims:4}]),A=e([{id:"1",name:"Golden Dragon",icon:"ðŸ‰",owner:"Alice",value:"50"},{id:"2",name:"Crystal Phoenix",icon:"ðŸ¦…",owner:"Bob",value:"35"},{id:"3",name:"Mystic Wolf",icon:"ðŸº",owner:"Carol",value:"28"},{id:"4",name:"Ancient Tree",icon:"ðŸŒ³",owner:"Dave",value:"42"}]),S=e(null),M=async()=>{if(!w.value)try{S.value={msg:"Minting parasite...",type:"loading"},await h("8",`mint:${Date.now()}`);const e=["Shadow Leech","Void Tick","Dark Mite","Chaos Worm"],a=["ðŸ¦ ","ðŸ•·ï¸","ðŸ›","ðŸª±"],t=Math.floor(Math.random()*e.length);g.value.push({id:Date.now().toString(),name:e[t],icon:a[t],level:1,energy:100,victims:0}),S.value={msg:"Parasite minted!",type:"success"}}catch(e){S.value={msg:e.message||"Error",type:"error"}}};return(e,a)=>{const _=r,k=l;return i(),t(k,{class:"app-container"},{default:s(()=>[n(k,{class:"header"},{default:s(()=>[n(_,{class:"title"},{default:s(()=>[c("Parasite NFT")]),_:1}),n(_,{class:"subtitle"},{default:s(()=>[c("NFTs that feed on others")]),_:1})]),_:1}),S.value?(i(),t(k,{key:0,class:u(["status-msg",S.value.type])},{default:s(()=>[n(_,null,{default:s(()=>[c(d(S.value.msg),1)]),_:1})]),_:1},8,["class"])):o("",!0),n(k,{class:"card"},{default:s(()=>[n(_,{class:"card-title"},{default:s(()=>[c("Your Parasites")]),_:1}),(i(!0),f(m,null,v(g.value,e=>(i(),t(k,{key:e.id,class:"parasite-item"},{default:s(()=>[n(_,{class:"parasite-icon"},{default:s(()=>[c(d(e.icon),1)]),_:2},1024),n(k,{class:"parasite-info"},{default:s(()=>[n(_,{class:"parasite-name"},{default:s(()=>[c(d(e.name),1)]),_:2},1024),n(_,{class:"parasite-level"},{default:s(()=>[c("Level "+d(e.level),1)]),_:2},1024),n(k,{class:"energy-bar"},{default:s(()=>[n(k,{class:"energy-fill",style:p({width:e.energy+"%"})},null,8,["style"])]),_:2},1024)]),_:2},1024),n(k,{class:"parasite-stats"},{default:s(()=>[n(_,{class:"stat-text"},{default:s(()=>[c(d(e.victims)+" victims",1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),n(k,{class:"mint-btn",onClick:M,style:p({opacity:y(w)?.6:1})},{default:s(()=>[n(_,null,{default:s(()=>[c(d(y(w)?"Minting...":"Mint Parasite (8 GAS)"),1)]),_:1})]),_:1},8,["style"])]),_:1}),n(k,{class:"card"},{default:s(()=>[n(_,{class:"card-title"},{default:s(()=>[c("Available Hosts")]),_:1}),n(k,{class:"hosts-list"},{default:s(()=>[(i(!0),f(m,null,v(A.value,e=>(i(),t(k,{key:e.id,class:"host-item",onClick:a=>(async e=>{if(0!==g.value.length){if(!w.value)try{S.value={msg:"Attaching parasite...",type:"loading"},await h("3",`attach:${e.id}`);const a=g.value[0];a.victims++,a.energy=Math.min(100,a.energy+20),a.victims%5==0&&a.level++,S.value={msg:`Attached to ${e.name}!`,type:"success"}}catch(a){S.value={msg:a.message||"Error",type:"error"}}}else S.value={msg:"You need a parasite first",type:"error"}})(e)},{default:s(()=>[n(_,{class:"host-icon"},{default:s(()=>[c(d(e.icon),1)]),_:2},1024),n(k,{class:"host-info"},{default:s(()=>[n(_,{class:"host-name"},{default:s(()=>[c(d(e.name),1)]),_:2},1024),n(_,{class:"host-owner"},{default:s(()=>[c("Owner: "+d(e.owner),1)]),_:2},1024)]),_:2},1024),n(_,{class:"host-value"},{default:s(()=>[c(d(e.value)+" GAS",1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1}),n(k,{class:"card"},{default:s(()=>[n(_,{class:"card-title"},{default:s(()=>[c("How It Works")]),_:1}),n(k,{class:"info-section"},{default:s(()=>[n(_,{class:"info-text"},{default:s(()=>[c("1. Mint a Parasite NFT")]),_:1}),n(_,{class:"info-text"},{default:s(()=>[c("2. Attach it to other NFTs as a host")]),_:1}),n(_,{class:"info-text"},{default:s(()=>[c("3. Drain energy over time to level up")]),_:1}),n(_,{class:"info-text"},{default:s(()=>[c("4. Higher levels = more drain power")]),_:1})]),_:1})]),_:1})]),_:1})}}}),[["__scopeId","data-v-5d3d6df7"]]);export{h as default};
