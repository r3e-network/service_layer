import{r as e,d as a,c as l,w as t,i as s,a as o,o as u,b as i,e as n,f as d,g as r,n as c,t as p,h as m,F as y,j as f,u as v}from"./index-YQ_NfdED.js";function _(a){const l=e(!1),t=e(null);return{isLoading:l,error:t,payGAS:async(e,s)=>{l.value=!0,t.value=null;try{const l=await function(e=5e3){return new Promise((a,l)=>{if(window.MiniAppSDK)return void a(window.MiniAppSDK);const t=setTimeout(()=>{l(new Error("SDK timeout"))},e),s=()=>{clearTimeout(t),window.removeEventListener("miniapp-sdk-ready",s),window.MiniAppSDK?a(window.MiniAppSDK):l(new Error("SDK not found"))};window.addEventListener("miniapp-sdk-ready",s)})}();return await l.payments.payGAS(a,e,s)}catch(o){throw t.value=o,o}finally{l.value=!1}}}}const w=((e,a)=>{const l=e.__vccOpts||e;for(const[t,s]of a)l[t]=s;return l})(a({__name:"index",setup(a){const{payGAS:w,isLoading:h}=_("miniapp-exfiles"),g=e(""),S=e(""),M=e(null),k=e([{id:"1",title:"First Date",type:"photo",date:"2023-06-15"},{id:"2",title:"Love Letter",type:"text",date:"2023-08-20"},{id:"3",title:"Anniversary",type:"photo",date:"2024-06-15"}]),A=async()=>{if(g.value&&S.value&&!h.value)try{await w("0.5",`upload:${g.value.slice(0,20)}`),M.value={msg:"Memory uploaded securely!",type:"success"},g.value="",S.value=""}catch(e){M.value={msg:e.message||"Error",type:"error"}}};return(e,a)=>{const _=d,w=s,D=o("uni-easyinput");return u(),l(w,{class:"app-container"},{default:t(()=>[i(w,{class:"header"},{default:t(()=>[i(_,{class:"title"},{default:t(()=>[r("Ex Files")]),_:1}),i(_,{class:"subtitle"},{default:t(()=>[r("Shared memories vault")]),_:1})]),_:1}),M.value?(u(),l(w,{key:0,class:c(["status-msg",M.value.type])},{default:t(()=>[i(_,null,{default:t(()=>[r(p(M.value.msg),1)]),_:1})]),_:1},8,["class"])):n("",!0),i(w,{class:"card"},{default:t(()=>[i(_,{class:"card-title"},{default:t(()=>[r("Shared Memories")]),_:1}),(u(!0),m(y,null,f(k.value,e=>(u(),l(w,{key:e.id,class:"memory-item",onClick:a=>(e=>{M.value={msg:`Viewing: ${e.title}`,type:"success"}})(e)},{default:t(()=>[i(w,{class:"memory-icon"},{default:t(()=>[r(p("photo"===e.type?"ðŸ“·":"ðŸ“"),1)]),_:2},1024),i(w,{class:"memory-info"},{default:t(()=>[i(_,{class:"memory-title"},{default:t(()=>[r(p(e.title),1)]),_:2},1024),i(_,{class:"memory-date"},{default:t(()=>[r(p(e.date),1)]),_:2},1024)]),_:2},1024),i(w,{class:"memory-lock"},{default:t(()=>[r("ðŸ”’")]),_:1})]),_:2},1032,["onClick"]))),128))]),_:1}),i(w,{class:"card"},{default:t(()=>[i(_,{class:"card-title"},{default:t(()=>[r("Upload Memory")]),_:1}),i(D,{modelValue:g.value,"onUpdate:modelValue":a[0]||(a[0]=e=>g.value=e),placeholder:"Memory title"},null,8,["modelValue"]),i(D,{modelValue:S.value,"onUpdate:modelValue":a[1]||(a[1]=e=>S.value=e),placeholder:"Content or URL"},null,8,["modelValue"]),i(w,{class:"action-btn",onClick:A},{default:t(()=>[i(_,null,{default:t(()=>[r(p(v(h)?"Uploading...":"Upload Memory"),1)]),_:1})]),_:1})]),_:1})]),_:1})}}}),[["__scopeId","data-v-8a9d310a"]]);export{w as default};
