import{r as e,d as a,c as l,w as t,i as s,a as u,o as n,b as i,e as r,f as c,g as d,n as o,t as f,h as v,F as m,j as p,k as y,u as _}from"./index-B5mkEfq2.js";function w(a){const l=e(!1),t=e(null);return{isLoading:l,error:t,payGAS:async(e,s)=>{l.value=!0,t.value=null;try{const l=await function(e=5e3){return new Promise((a,l)=>{if(window.MiniAppSDK)return void a(window.MiniAppSDK);const t=setTimeout(()=>{l(new Error("SDK timeout"))},e),s=()=>{clearTimeout(t),window.removeEventListener("miniapp-sdk-ready",s),window.MiniAppSDK?a(window.MiniAppSDK):l(new Error("SDK not found"))};window.addEventListener("miniapp-sdk-ready",s)})}();return await l.payments.payGAS(a,e,s)}catch(u){throw t.value=u,u}finally{l.value=!1}}}}const b=((e,a)=>{const l=e.__vccOpts||e;for(const[t,s]of a)l[t]=s;return l})(a({__name:"index",setup(a){const{payGAS:b,isLoading:g}=w("miniapp-heritagetrust"),h=e([{id:"1",name:"Family Fund",beneficiary:"NXXx...abc",value:100,icon:"ðŸ‘¨â€ðŸ‘©â€ðŸ‘§"},{id:"2",name:"Charity",beneficiary:"NXXx...def",value:50,icon:"â¤ï¸"}]),S=e({name:"",beneficiary:"",value:""}),A=e(null),T=async()=>{if(!g.value&&S.value.name&&S.value.beneficiary&&S.value.value)try{A.value={msg:"Creating trust...",type:"loading"},await b(S.value.value,`trust:${Date.now()}`),h.value.push({id:Date.now().toString(),name:S.value.name,beneficiary:S.value.beneficiary,value:parseFloat(S.value.value),icon:"ðŸ“œ"}),A.value={msg:"Trust created!",type:"success"},S.value={name:"",beneficiary:"",value:""}}catch(e){A.value={msg:e.message||"Error",type:"error"}}};return(e,a)=>{const w=c,b=s,D=u("uni-easyinput");return n(),l(b,{class:"app-container"},{default:t(()=>[i(b,{class:"header"},{default:t(()=>[i(w,{class:"title"},{default:t(()=>[d("Heritage Trust")]),_:1}),i(w,{class:"subtitle"},{default:t(()=>[d("Digital inheritance system")]),_:1})]),_:1}),A.value?(n(),l(b,{key:0,class:o(["status-msg",A.value.type])},{default:t(()=>[i(w,null,{default:t(()=>[d(f(A.value.msg),1)]),_:1})]),_:1},8,["class"])):r("",!0),i(b,{class:"card"},{default:t(()=>[i(w,{class:"card-title"},{default:t(()=>[d("Your Trusts")]),_:1}),(n(!0),v(m,null,p(h.value,e=>(n(),l(b,{key:e.id,class:"trust-item"},{default:t(()=>[i(w,{class:"trust-icon"},{default:t(()=>[d(f(e.icon),1)]),_:2},1024),i(b,{class:"trust-info"},{default:t(()=>[i(w,{class:"trust-name"},{default:t(()=>[d(f(e.name),1)]),_:2},1024),i(w,{class:"trust-beneficiary"},{default:t(()=>[d("To: "+f(e.beneficiary),1)]),_:2},1024)]),_:2},1024),i(b,{class:"trust-value"},{default:t(()=>[i(w,null,{default:t(()=>[d(f(e.value)+" GAS",1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),i(b,{class:"card"},{default:t(()=>[i(w,{class:"card-title"},{default:t(()=>[d("Create Trust")]),_:1}),i(D,{modelValue:S.value.name,"onUpdate:modelValue":a[0]||(a[0]=e=>S.value.name=e),placeholder:"Trust name",class:"input-field"},null,8,["modelValue"]),i(D,{modelValue:S.value.beneficiary,"onUpdate:modelValue":a[1]||(a[1]=e=>S.value.beneficiary=e),placeholder:"Beneficiary address",class:"input-field"},null,8,["modelValue"]),i(D,{modelValue:S.value.value,"onUpdate:modelValue":a[2]||(a[2]=e=>S.value.value=e),type:"number",placeholder:"Amount (GAS)",class:"input-field"},null,8,["modelValue"]),i(b,{class:"info-row"},{default:t(()=>[i(w,{class:"info-icon"},{default:t(()=>[d("â„¹ï¸")]),_:1}),i(w,{class:"info-text"},{default:t(()=>[d("Trust activates after 90 days of inactivity")]),_:1})]),_:1}),i(b,{class:"create-btn",onClick:T,style:y({opacity:_(g)?.6:1})},{default:t(()=>[i(w,null,{default:t(()=>[d(f(_(g)?"Creating...":"Create Trust"),1)]),_:1})]),_:1},8,["style"])]),_:1})]),_:1})}}}),[["__scopeId","data-v-fbbf38f6"]]);export{b as default};
