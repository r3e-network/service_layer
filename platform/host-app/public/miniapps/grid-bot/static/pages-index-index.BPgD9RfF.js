import{r as e,d as a,c as l,w as t,i as s,a as u,o as r,b as d,e as n,f as i,g as o,n as c,t as p,u as f}from"./index-CQU_XbqJ.js";function v(a){const l=e(!1),t=e(null);return{isLoading:l,error:t,payGAS:async(e,s)=>{l.value=!0,t.value=null;try{const l=await function(e=5e3){return new Promise((a,l)=>{if(window.MiniAppSDK)return void a(window.MiniAppSDK);const t=setTimeout(()=>{l(new Error("SDK timeout"))},e),s=()=>{clearTimeout(t),window.removeEventListener("miniapp-sdk-ready",s),window.MiniAppSDK?a(window.MiniAppSDK):l(new Error("SDK not found"))};window.addEventListener("miniapp-sdk-ready",s)})}();return await l.payments.payGAS(a,e,s)}catch(u){throw t.value=u,u}finally{l.value=!1}}}}const _="0.020",m=((e,a)=>{const l=e.__vccOpts||e;for(const[t,s]of a)l[t]=s;return l})(a({__name:"index",setup(a){const{payGAS:m,isLoading:w}=v("miniapp-grid-bot"),y=e({pair:"NEO/GAS",lastPrice:12.384,volatility:3.2}),g=e({estDaily:.42}),S=e("10"),A=e("14"),G=e("20"),b=e(null),V=(e,a=2)=>function(e,a=2){return e>=1e6?(e/1e6).toFixed(a)+"M":e>=1e3?(e/1e3).toFixed(a)+"K":e.toFixed(a)}(e,a),h=async()=>{if(w.value)return;const e=parseFloat(S.value),a=parseFloat(A.value),l=parseInt(G.value,10);if(e>0&&a>e&&l>=5&&l<=200)try{await m(_,`gridbot:${y.value.pair}:${e}-${a}:${l}`),b.value={msg:`Grid bot started (${l} grids)`,type:"success"}}catch(t){b.value={msg:(null==t?void 0:t.message)||"Payment failed",type:"error"}}else b.value={msg:"Invalid range or grid levels",type:"error"}};return(e,a)=>{const v=i,m=s,D=u("uni-easyinput");return r(),l(m,{class:"app-container"},{default:t(()=>[d(m,{class:"header"},{default:t(()=>[d(v,{class:"title"},{default:t(()=>[o("Grid Bot")]),_:1}),d(v,{class:"subtitle"},{default:t(()=>[o("Automated range trading")]),_:1})]),_:1}),b.value?(r(),l(m,{key:0,class:c(["status-msg",b.value.type])},{default:t(()=>[d(v,null,{default:t(()=>[o(p(b.value.msg),1)]),_:1})]),_:1},8,["class"])):n("",!0),d(m,{class:"card"},{default:t(()=>[d(v,{class:"card-title"},{default:t(()=>[o("Market")]),_:1}),d(m,{class:"row"},{default:t(()=>[d(v,null,{default:t(()=>[o("Pair")]),_:1}),d(v,{class:"v"},{default:t(()=>[o(p(y.value.pair),1)]),_:1})]),_:1}),d(m,{class:"row"},{default:t(()=>[d(v,null,{default:t(()=>[o("Last price")]),_:1}),d(v,{class:"v"},{default:t(()=>[o(p(V(y.value.lastPrice,3)),1)]),_:1})]),_:1}),d(m,{class:"row"},{default:t(()=>[d(v,null,{default:t(()=>[o("Volatility")]),_:1}),d(v,{class:"v"},{default:t(()=>[o(p(y.value.volatility)+"%",1)]),_:1})]),_:1})]),_:1}),d(m,{class:"card"},{default:t(()=>[d(v,{class:"card-title"},{default:t(()=>[o("Bot Snapshot")]),_:1}),d(m,{class:"row"},{default:t(()=>[d(v,null,{default:t(()=>[o("Range")]),_:1}),d(v,{class:"v"},{default:t(()=>[o(p(S.value||"10")+"â€“"+p(A.value||"14"),1)]),_:1})]),_:1}),d(m,{class:"row"},{default:t(()=>[d(v,null,{default:t(()=>[o("Grids")]),_:1}),d(v,{class:"v"},{default:t(()=>[o(p(G.value||"20"),1)]),_:1})]),_:1}),d(m,{class:"row"},{default:t(()=>[d(v,null,{default:t(()=>[o("Est. daily")]),_:1}),d(v,{class:"v"},{default:t(()=>[o(p(V(g.value.estDaily,2))+" GAS",1)]),_:1})]),_:1})]),_:1}),d(m,{class:"card"},{default:t(()=>[d(v,{class:"card-title"},{default:t(()=>[o("Create Bot")]),_:1}),d(D,{modelValue:S.value,"onUpdate:modelValue":a[0]||(a[0]=e=>S.value=e),type:"number",placeholder:"Low price"},null,8,["modelValue"]),d(D,{modelValue:A.value,"onUpdate:modelValue":a[1]||(a[1]=e=>A.value=e),type:"number",placeholder:"High price"},null,8,["modelValue"]),d(D,{modelValue:G.value,"onUpdate:modelValue":a[2]||(a[2]=e=>G.value=e),type:"number",placeholder:"Grid levels"},null,8,["modelValue"]),d(m,{class:"action-btn",onClick:h},{default:t(()=>[d(v,null,{default:t(()=>[o(p(f(w)?"Processing...":"Start Grid Bot"),1)]),_:1})]),_:1}),d(v,{class:"note"},{default:t(()=>[o("Mock execution fee: "+p(_)+" GAS")]),_:1})]),_:1})]),_:1})}}}),[["__scopeId","data-v-6b1448d2"]]);export{m as default};
