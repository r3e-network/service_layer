import{r as e,d as a,c as l,w as t,i as n,a as s,o as u,b as r,e as i,f as o,g as c,n as d,t as v,h as p,j as f,v as m}from"./index-Xa9iHsS7.js";function w(e=5e3){return new Promise((a,l)=>{if(window.MiniAppSDK)return void a(window.MiniAppSDK);const t=setTimeout(()=>{l(new Error("SDK timeout"))},e),n=()=>{clearTimeout(t),window.removeEventListener("miniapp-sdk-ready",n),window.MiniAppSDK?a(window.MiniAppSDK):l(new Error("SDK not found"))};window.addEventListener("miniapp-sdk-ready",n)})}const _="miniapp-dicegame",y=((e,a)=>{const l=e.__vccOpts||e;for(const[t,n]of a)l[t]=n;return l})(a({__name:"index",setup(a){const{payGAS:y}=function(a){const l=e(!1),t=e(null);return{isLoading:l,error:t,payGAS:async(e,n)=>{l.value=!0,t.value=null;try{const l=await w();return await l.payments.payGAS(a,e,n)}catch(s){throw t.value=s,s}finally{l.value=!1}}}}(_),{requestRandom:g}=function(a){const l=e(!1),t=e(null);return{isLoading:l,error:t,requestRandom:async()=>{l.value=!0,t.value=null;try{const e=await w();return await e.rng.requestRandom(a)}catch(e){throw t.value=e,e}finally{l.value=!1}}}}(_),h=e("1"),S=e(7),b=e("over"),A=e(null),D=e(!1),R=e(null),k=async()=>{if(!D.value){D.value=!0;try{await y(h.value,`dice:${b.value}:${S.value}`);const e=await g(),a=parseInt(e.randomness.slice(0,2),16)%6+1,l=parseInt(e.randomness.slice(2,4),16)%6+1;A.value=a+l;const t="over"===b.value?A.value>S.value:A.value<S.value;R.value={msg:t?`Won! Rolled ${A.value}`:`Lost. Rolled ${A.value}`,type:t?"success":"error"}}catch(e){R.value={msg:e.message||"Error",type:"error"}}finally{D.value=!1}}};return(e,a)=>{const w=o,_=n,y=s("uni-easyinput");return u(),l(_,{class:"app-container"},{default:t(()=>[r(_,{class:"header"},{default:t(()=>[r(w,{class:"title"},{default:t(()=>[c("Dice Game")]),_:1}),r(w,{class:"subtitle"},{default:t(()=>[c("Roll the dice, win big")]),_:1})]),_:1}),R.value?(u(),l(_,{key:0,class:d(["status-msg",R.value.type])},{default:t(()=>[r(w,null,{default:t(()=>[c(v(R.value.msg),1)]),_:1})]),_:1},8,["class"])):i("",!0),r(_,{class:"card"},{default:t(()=>[r(_,{class:"dice-display"},{default:t(()=>[r(w,{class:"dice"},{default:t(()=>[c("ðŸŽ² "+v(A.value||"?"),1)]),_:1})]),_:1}),r(w,{class:"card-title"},{default:t(()=>[c("Predict: Over/Under")]),_:1}),r(_,{class:"target-row"},{default:t(()=>[r(w,null,{default:t(()=>[c("Target: "+v(S.value),1)]),_:1}),p(f("uni-slider",{"onUpdate:modelValue":a[0]||(a[0]=e=>S.value=e),min:2,max:12},null,512),[[m,S.value]])]),_:1}),r(_,{class:"choice-row"},{default:t(()=>[r(_,{class:d(["choice-btn","over"===b.value&&"active"]),onClick:a[1]||(a[1]=e=>b.value="over")},{default:t(()=>[r(w,null,{default:t(()=>[c("Over "+v(S.value),1)]),_:1})]),_:1},8,["class"]),r(_,{class:d(["choice-btn","under"===b.value&&"active"]),onClick:a[2]||(a[2]=e=>b.value="under")},{default:t(()=>[r(w,null,{default:t(()=>[c("Under "+v(S.value),1)]),_:1})]),_:1},8,["class"])]),_:1}),r(y,{modelValue:h.value,"onUpdate:modelValue":a[3]||(a[3]=e=>h.value=e),type:"number",placeholder:"Bet (GAS)"},null,8,["modelValue"]),r(_,{class:"roll-btn",onClick:k},{default:t(()=>[r(w,null,{default:t(()=>[c(v(D.value?"Rolling...":"Roll Dice"),1)]),_:1})]),_:1})]),_:1})]),_:1})}}}),[["__scopeId","data-v-9abdad22"]]);export{y as default};
