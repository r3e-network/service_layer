import{r as e,d as a,c as l,w as t,i as s,o as u,a as i,b as n,e as o,f as c,n as r,t as d,g as f,F as y,h as p,j as v}from"./index-BOPLpLmn.js";function k(a){const l=e(!1),t=e(null);return{isLoading:l,error:t,payGAS:async(e,s)=>{l.value=!0,t.value=null;try{const l=await function(e=5e3){return new Promise((a,l)=>{if(window.MiniAppSDK)return void a(window.MiniAppSDK);const t=setTimeout(()=>{l(new Error("SDK timeout"))},e),s=()=>{clearTimeout(t),window.removeEventListener("miniapp-sdk-ready",s),window.MiniAppSDK?a(window.MiniAppSDK):l(new Error("SDK not found"))};window.addEventListener("miniapp-sdk-ready",s)})}();return await l.payments.payGAS(a,e,s)}catch(u){throw t.value=u,u}finally{l.value=!1}}}}const _=((e,a)=>{const l=e.__vccOpts||e;for(const[t,s]of a)l[t]=s;return l})(a({__name:"index",setup(a){k("miniapp-world-piano");const _=e(42),m=e(1337),w=e(89),b=e(null),q=e(null),A=[{key:"C",label:"C",freq:261.63},{key:"D",label:"D",freq:293.66},{key:"E",label:"E",freq:329.63},{key:"F",label:"F",freq:349.23},{key:"G",label:"G",freq:392},{key:"A",label:"A",freq:440},{key:"B",label:"B",freq:493.88}],g=[{key:"C#",freq:277.18,position:"10%"},{key:"D#",freq:311.13,position:"24%"},{key:"F#",freq:369.99,position:"52%"},{key:"G#",freq:415.3,position:"66%"},{key:"A#",freq:466.16,position:"80%"}],D=e([{user:"Player#1234",note:"C",time:2},{user:"Player#5678",note:"E",time:5},{user:"Player#9012",note:"G",time:8}]),S=e=>{b.value=e.key,m.value++,q.value={msg:`Played ${e.key} (${e.freq.toFixed(2)} Hz)`,type:"success"},D.value.unshift({user:"You",note:e.key,time:0}),D.value.length>5&&D.value.pop(),setTimeout(()=>{b.value=null},300)};return(e,a)=>{const k=o,h=s;return u(),l(h,{class:"app-container"},{default:t(()=>[i(h,{class:"header"},{default:t(()=>[i(k,{class:"title"},{default:t(()=>[c("World Piano")]),_:1}),i(k,{class:"subtitle"},{default:t(()=>[c("Play together, create music")]),_:1})]),_:1}),q.value?(u(),l(h,{key:0,class:r(["status-msg",q.value.type])},{default:t(()=>[i(k,null,{default:t(()=>[c(d(q.value.msg),1)]),_:1})]),_:1},8,["class"])):n("",!0),i(h,{class:"card"},{default:t(()=>[i(h,{class:"stats-row"},{default:t(()=>[i(h,{class:"stat"},{default:t(()=>[i(k,{class:"stat-value"},{default:t(()=>[c(d(_.value),1)]),_:1}),i(k,{class:"stat-label"},{default:t(()=>[c("Online")]),_:1})]),_:1}),i(h,{class:"stat"},{default:t(()=>[i(k,{class:"stat-value"},{default:t(()=>[c(d(m.value),1)]),_:1}),i(k,{class:"stat-label"},{default:t(()=>[c("Notes")]),_:1})]),_:1}),i(h,{class:"stat"},{default:t(()=>[i(k,{class:"stat-value"},{default:t(()=>[c(d(w.value),1)]),_:1}),i(k,{class:"stat-label"},{default:t(()=>[c("Songs")]),_:1})]),_:1})]),_:1})]),_:1}),i(h,{class:"card"},{default:t(()=>[i(k,{class:"card-title"},{default:t(()=>[c("Piano Keyboard")]),_:1}),i(h,{class:"keyboard"},{default:t(()=>[(u(),f(y,null,p(A,e=>i(h,{key:e.key,class:r(["key","white",b.value===e.key&&"active"]),onClick:a=>S(e)},{default:t(()=>[i(k,{class:"note-label"},{default:t(()=>[c(d(e.label),1)]),_:2},1024)]),_:2},1032,["class","onClick"])),64))]),_:1}),i(h,{class:"black-keys"},{default:t(()=>[(u(),f(y,null,p(g,e=>i(h,{key:e.key,class:r(["key","black",b.value===e.key&&"active"]),style:v({left:e.position}),onClick:a=>S(e)},null,8,["class","style","onClick"])),64))]),_:1})]),_:1}),i(h,{class:"card"},{default:t(()=>[i(k,{class:"card-title"},{default:t(()=>[c("Recent Activity")]),_:1}),(u(!0),f(y,null,p(D.value,(e,a)=>(u(),l(h,{key:a,class:"activity-item"},{default:t(()=>[i(k,{class:"activity-user"},{default:t(()=>[c(d(e.user),1)]),_:2},1024),i(k,{class:"activity-note"},{default:t(()=>[c("played "+d(e.note),1)]),_:2},1024),i(k,{class:"activity-time"},{default:t(()=>[c(d(e.time)+"s ago",1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})}}}),[["__scopeId","data-v-40b34504"]]);export{_ as default};
