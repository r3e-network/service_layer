import{r as e,d as a,c as t,w as s,i as l,a as o,o as n,b as i,e as u,f as c,g as r,n as d,t as p,h as f,F as m,j as _,u as v}from"./index-jFbGniS6.js";function y(a){const t=e(!1),s=e(null);return{isLoading:t,error:s,payGAS:async(e,l)=>{t.value=!0,s.value=null;try{const t=await function(e=5e3){return new Promise((a,t)=>{if(window.MiniAppSDK)return void a(window.MiniAppSDK);const s=setTimeout(()=>{t(new Error("SDK timeout"))},e),l=()=>{clearTimeout(s),window.removeEventListener("miniapp-sdk-ready",l),window.MiniAppSDK?a(window.MiniAppSDK):t(new Error("SDK not found"))};window.addEventListener("miniapp-sdk-ready",l)})}();return await t.payments.payGAS(a,e,l)}catch(o){throw s.value=o,o}finally{t.value=!1}}}}const w=((e,a)=>{const t=e.__vccOpts||e;for(const[s,l]of a)t[s]=l;return t})(a({__name:"index",setup(a){const{payGAS:w,isLoading:h}=y("miniapp-geospotlight"),g=e(""),k=e(null),S=e([{id:"1",author:"Anonymous",content:"Great coffee shop!",distance:50,likes:12,time:"5m ago"},{id:"2",author:"Local",content:"Free WiFi here",distance:120,likes:8,time:"15m ago"},{id:"3",author:"Traveler",content:"Beautiful sunset spot",distance:200,likes:24,time:"1h ago"}]),A=async()=>{if(g.value.trim()&&!h.value)try{await w("0.2",`post:${g.value.slice(0,20)}`),k.value={msg:"Post created at your location!",type:"success"},g.value=""}catch(e){k.value={msg:e.message||"Error",type:"error"}}};return(e,a)=>{const y=c,w=l,L=o("uni-easyinput");return n(),t(w,{class:"app-container"},{default:s(()=>[i(w,{class:"header"},{default:s(()=>[i(y,{class:"title"},{default:s(()=>[r("Geo Spotlight")]),_:1}),i(y,{class:"subtitle"},{default:s(()=>[r("Location-based content")]),_:1})]),_:1}),k.value?(n(),t(w,{key:0,class:d(["status-msg",k.value.type])},{default:s(()=>[i(y,null,{default:s(()=>[r(p(k.value.msg),1)]),_:1})]),_:1},8,["class"])):u("",!0),i(w,{class:"card"},{default:s(()=>[i(y,{class:"card-title"},{default:s(()=>[r("Nearby Posts")]),_:1}),(n(!0),f(m,null,_(S.value,e=>(n(),t(w,{key:e.id,class:"post-item",onClick:a=>(e=>{k.value={msg:`Viewing post by ${e.author}`,type:"success"}})(e)},{default:s(()=>[i(w,{class:"post-header"},{default:s(()=>[i(y,{class:"post-author"},{default:s(()=>[r(p(e.author),1)]),_:2},1024),i(y,{class:"post-distance"},{default:s(()=>[r(p(e.distance)+"m away",1)]),_:2},1024)]),_:2},1024),i(y,{class:"post-content"},{default:s(()=>[r(p(e.content),1)]),_:2},1024),i(w,{class:"post-footer"},{default:s(()=>[i(y,{class:"post-likes"},{default:s(()=>[r("❤️ "+p(e.likes),1)]),_:2},1024),i(y,{class:"post-time"},{default:s(()=>[r(p(e.time),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1}),i(w,{class:"card"},{default:s(()=>[i(y,{class:"card-title"},{default:s(()=>[r("Create Post")]),_:1}),i(L,{modelValue:g.value,"onUpdate:modelValue":a[0]||(a[0]=e=>g.value=e),placeholder:"What's happening here?"},null,8,["modelValue"]),i(w,{class:"action-btn",onClick:A},{default:s(()=>[i(y,null,{default:s(()=>[r(p(v(h)?"Posting...":"Post to Location"),1)]),_:1})]),_:1})]),_:1})]),_:1})}}}),[["__scopeId","data-v-5a5591ef"]]);export{w as default};
