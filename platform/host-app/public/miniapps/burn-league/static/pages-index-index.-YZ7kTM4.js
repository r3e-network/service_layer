import{r as a,d as e,c as s,a as l,w as t,i as u,b as r,o as n,e as d,f as i,g as o,h as c,n as f,t as p,j as _,u as v,k as m,F as w,l as b}from"./index-CstzjXX-.js";function y(e){const s=a(!1),l=a(null);return{isLoading:s,error:l,payGAS:async(a,t)=>{s.value=!0,l.value=null;try{const s=await function(a=5e3){return new Promise((e,s)=>{if(window.MiniAppSDK)return void e(window.MiniAppSDK);const l=setTimeout(()=>{s(new Error("SDK timeout"))},a),t=()=>{clearTimeout(l),window.removeEventListener("miniapp-sdk-ready",t),window.MiniAppSDK?e(window.MiniAppSDK):s(new Error("SDK not found"))};window.addEventListener("miniapp-sdk-ready",t)})}();return await s.payments.payGAS(e,a,t)}catch(u){throw l.value=u,u}finally{s.value=!1}}}}const g=((a,e)=>{const s=a.__vccOpts||a;for(const[l,t]of e)s[l]=t;return s})(e({__name:"index",setup(e){const{payGAS:g,isLoading:k}=y("miniapp-burn-league"),x=a("10"),S=a(5e4),h=a(250),A=a(15),B=a(null),K=a([{rank:1,address:"0x1a2b...3c4d",burned:5e3,isUser:!1},{rank:2,address:"0x5e6f...7g8h",burned:3500,isUser:!1},{rank:3,address:"0x9i0j...1k2l",burned:2800,isUser:!1},{rank:15,address:"You",burned:250,isUser:!0}]),D=s(()=>10*parseFloat(x.value||"0")),E=a=>function(a,e=2){return a>=1e6?(a/1e6).toFixed(e)+"M":a>=1e3?(a/1e3).toFixed(e)+"K":a.toFixed(e)}(a,0),F=async()=>{if(k.value)return;const a=parseFloat(x.value);if(a<1)B.value={msg:"Min burn: 1 GAS",type:"error"};else try{B.value={msg:"Burning tokens...",type:"loading"},await g(x.value,"burn"),h.value+=a,S.value+=a,B.value={msg:`Burned ${a} GAS! +${D.value} points`,type:"success"}}catch(e){B.value={msg:e.message||"Error",type:"error"}}};return(a,e)=>{const s=o,y=u,g=r("uni-easyinput");return n(),l(y,{class:"app-container"},{default:t(()=>[d(y,{class:"header"},{default:t(()=>[d(s,{class:"title"},{default:t(()=>[c("Burn League")]),_:1}),d(s,{class:"subtitle"},{default:t(()=>[c("Burn tokens, earn rewards")]),_:1})]),_:1}),B.value?(n(),l(y,{key:0,class:f(["status-msg",B.value.type])},{default:t(()=>[d(s,null,{default:t(()=>[c(p(B.value.msg),1)]),_:1})]),_:1},8,["class"])):i("",!0),d(y,{class:"card"},{default:t(()=>[d(y,{class:"stats-grid"},{default:t(()=>[d(y,{class:"stat-box"},{default:t(()=>[d(s,{class:"stat-value"},{default:t(()=>[c(p(E(S.value)),1)]),_:1}),d(s,{class:"stat-label"},{default:t(()=>[c("Total Burned")]),_:1})]),_:1}),d(y,{class:"stat-box"},{default:t(()=>[d(s,{class:"stat-value"},{default:t(()=>[c(p(E(h.value)),1)]),_:1}),d(s,{class:"stat-label"},{default:t(()=>[c("You Burned")]),_:1})]),_:1}),d(y,{class:"stat-box"},{default:t(()=>[d(s,{class:"stat-value"},{default:t(()=>[c("#"+p(A.value),1)]),_:1}),d(s,{class:"stat-label"},{default:t(()=>[c("Rank")]),_:1})]),_:1})]),_:1})]),_:1}),d(y,{class:"card"},{default:t(()=>[d(s,{class:"card-title"},{default:t(()=>[c("Burn Tokens")]),_:1}),d(g,{modelValue:x.value,"onUpdate:modelValue":e[0]||(e[0]=a=>x.value=a),type:"number",placeholder:"Amount to burn"},null,8,["modelValue"]),d(y,{class:"reward-info"},{default:t(()=>[d(s,{class:"reward-label"},{default:t(()=>[c("Estimated Rewards")]),_:1}),d(s,{class:"reward-value"},{default:t(()=>[c(p(E(D.value))+" Points",1)]),_:1})]),_:1}),d(y,{class:"burn-btn",onClick:F,style:_({opacity:v(k)?.6:1})},{default:t(()=>[d(s,null,{default:t(()=>[c(p(v(k)?"Burning...":"Burn Now"),1)]),_:1})]),_:1},8,["style"])]),_:1}),d(y,{class:"card"},{default:t(()=>[d(s,{class:"card-title"},{default:t(()=>[c("Leaderboard")]),_:1}),d(y,{class:"leaderboard-list"},{default:t(()=>[(n(!0),m(w,null,b(K.value,(a,e)=>(n(),l(y,{key:e,class:f(["leader-item",a.isUser&&"highlight"])},{default:t(()=>[d(s,{class:"leader-rank"},{default:t(()=>[c("#"+p(a.rank),1)]),_:2},1024),d(s,{class:"leader-addr"},{default:t(()=>[c(p(a.address),1)]),_:2},1024),d(s,{class:"leader-burned"},{default:t(()=>[c(p(E(a.burned)),1)]),_:2},1024)]),_:2},1032,["class"]))),128))]),_:1})]),_:1})]),_:1})}}}),[["__scopeId","data-v-2ea834c9"]]);export{g as default};
