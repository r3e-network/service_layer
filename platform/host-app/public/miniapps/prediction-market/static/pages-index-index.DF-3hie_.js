import{r as e,d as a,c as s,w as t,i as l,a as n,o as u,b as d,e as o,f as i,g as r,n as c,t as f,h as p,F as _,j as m,k as y}from"./index-Cbz1sSDc.js";function v(a){const s=e(!1),t=e(null);return{isLoading:s,error:t,payGAS:async(e,l)=>{s.value=!0,t.value=null;try{const s=await function(e=5e3){return new Promise((a,s)=>{if(window.MiniAppSDK)return void a(window.MiniAppSDK);const t=setTimeout(()=>{s(new Error("SDK timeout"))},e),l=()=>{clearTimeout(t),window.removeEventListener("miniapp-sdk-ready",l),window.MiniAppSDK?a(window.MiniAppSDK):s(new Error("SDK not found"))};window.addEventListener("miniapp-sdk-ready",l)})}();return await s.payments.payGAS(a,e,l)}catch(n){throw t.value=n,n}finally{s.value=!1}}}}const b=((e,a)=>{const s=e.__vccOpts||e;for(const[t,l]of a)s[t]=l;return s})(a({__name:"index",setup(a){const{payGAS:b,isLoading:w}=v("miniapp-prediction-market"),k=e(125e3),g=e(50),S=e(4),h=e(null),A=e(["1","1","1","1"]),x=e([{id:1,question:"Will GAS reach $50 by end of Q1?",yesPercent:65},{id:2,question:"Will Neo N4 launch in 2026?",yesPercent:82},{id:3,question:"Will BTC hit $150k this year?",yesPercent:45}]),M=e=>function(e,a=2){return e>=1e6?(e/1e6).toFixed(a)+"M":e>=1e3?(e/1e3).toFixed(a)+"K":e.toFixed(a)}(e,0),P=async(e,a,s)=>{if(w.value)return;const t=parseFloat(A.value[s]);if(t<.1)h.value={msg:"Min bet: 0.1 GAS",type:"error"};else try{h.value={msg:"Placing bet...",type:"loading"},await b(String(t),`bet:${e}:${a?"yes":"no"}`),g.value-=t,h.value={msg:`Bet placed on ${a?"Yes":"No"}!`,type:"success"}}catch(l){h.value={msg:l.message||"Error",type:"error"}}};return(e,a)=>{const v=i,b=l,w=n("uni-easyinput");return u(),s(b,{class:"app-container"},{default:t(()=>[d(b,{class:"header"},{default:t(()=>[d(v,{class:"title"},{default:t(()=>[r("Prediction Market")]),_:1}),d(v,{class:"subtitle"},{default:t(()=>[r("Bet on future outcomes")]),_:1})]),_:1}),h.value?(u(),s(b,{key:0,class:c(["status-msg",h.value.type])},{default:t(()=>[d(v,null,{default:t(()=>[r(f(h.value.msg),1)]),_:1})]),_:1},8,["class"])):o("",!0),d(b,{class:"card"},{default:t(()=>[d(b,{class:"stats-grid"},{default:t(()=>[d(b,{class:"stat-box"},{default:t(()=>[d(v,{class:"stat-value"},{default:t(()=>[r(f(M(k.value)),1)]),_:1}),d(v,{class:"stat-label"},{default:t(()=>[r("Volume")]),_:1})]),_:1}),d(b,{class:"stat-box"},{default:t(()=>[d(v,{class:"stat-value"},{default:t(()=>[r(f(M(g.value)),1)]),_:1}),d(v,{class:"stat-label"},{default:t(()=>[r("Balance")]),_:1})]),_:1}),d(b,{class:"stat-box"},{default:t(()=>[d(v,{class:"stat-value"},{default:t(()=>[r(f(S.value),1)]),_:1}),d(v,{class:"stat-label"},{default:t(()=>[r("Markets")]),_:1})]),_:1})]),_:1})]),_:1}),d(b,{class:"card"},{default:t(()=>[d(v,{class:"card-title"},{default:t(()=>[r("Active Markets")]),_:1}),d(b,{class:"markets-list"},{default:t(()=>[(u(!0),p(_,null,m(x.value,(e,a)=>(u(),s(b,{key:a,class:"market-item"},{default:t(()=>[d(v,{class:"market-question"},{default:t(()=>[r(f(e.question),1)]),_:2},1024),d(b,{class:"market-odds"},{default:t(()=>[d(b,{class:"odds-bar"},{default:t(()=>[d(b,{class:"odds-yes",style:y({width:e.yesPercent+"%"})},null,8,["style"])]),_:2},1024),d(b,{class:"odds-labels"},{default:t(()=>[d(v,{class:"odds-label"},{default:t(()=>[r("Yes "+f(e.yesPercent)+"%",1)]),_:2},1024),d(v,{class:"odds-label"},{default:t(()=>[r("No "+f(100-e.yesPercent)+"%",1)]),_:2},1024)]),_:2},1024)]),_:2},1024),d(b,{class:"bet-row"},{default:t(()=>[d(w,{modelValue:A.value[a],"onUpdate:modelValue":e=>A.value[a]=e,type:"number",placeholder:"Amount",class:"bet-input"},null,8,["modelValue","onUpdate:modelValue"]),d(b,{class:"bet-btn yes",onClick:s=>P(e.id,!0,a)},{default:t(()=>[d(v,null,{default:t(()=>[r("Yes")]),_:1})]),_:2},1032,["onClick"]),d(b,{class:"bet-btn no",onClick:s=>P(e.id,!1,a)},{default:t(()=>[d(v,null,{default:t(()=>[r("No")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})}}}),[["__scopeId","data-v-f6f6b386"]]);export{b as default};
