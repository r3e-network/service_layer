import{d as e,l as a,m as l,c as t,w as s,i as u,o,a as d,b as c,e as n,p as r,f as i,t as v,u as p,I as f,q as m,g as _,v as k,h as g,F as b,r as h,j as y,x as C}from"./index-CFRpd7m-.js";import{u as V,P as w}from"./piggy.0UabnB5s.js";import{u as T,_ as A}from"./_plugin-vue_export-helper.BHIM12RF.js";const x=A(e({__name:"create",setup(e){const{t:A}=T(),x=V(),j=a(!1),D=a(""),U=a(!1),I=a(""),P=l(()=>x.getAllTokens()),S=l(()=>{const e=new Date;return e.setDate(e.getDate()+1),e.toISOString().split("T")[0]}),B=a(w.ETH),F=a({name:"",purpose:"",targetAmount:"",date:""}),q=l(()=>F.value.name&&F.value.targetAmount&&F.value.date&&B.value),E=e=>{F.value.date=e.detail.value},H=async()=>{if(D.value){U.value=!0,I.value="";try{const e=await x.lookupToken(D.value);e?(B.value=e,j.value=!1,D.value=""):I.value="Token not found or invalid address"}catch(e){I.value=e.message||"Failed to lookup token"}finally{U.value=!1}}},O=()=>r(),W=()=>{if(!q.value||!B.value)return;const e=new Date(F.value.date).getTime();x.createPiggyBank(F.value.name,F.value.purpose,F.value.targetAmount,B.value,e),C({title:"Piggy Bank Created!",icon:"success"}),setTimeout(()=>{r()},500)};return(e,a)=>{const l=n,r=u,C=f,V=m,w=_;return o(),t(r,{class:"container"},{default:s(()=>[d(r,{class:"nav"},{default:s(()=>[d(l,{class:"back-btn",onClick:O},{default:s(()=>[i("â†")]),_:1}),d(l,{class:"page-title"},{default:s(()=>[i(v(p(A)("create.create_btn")),1)]),_:1})]),_:1}),d(r,{class:"form-container"},{default:s(()=>[d(r,{class:"form-group"},{default:s(()=>[d(l,{class:"label"},{default:s(()=>[i(v(p(A)("create.name_label")),1)]),_:1}),d(C,{class:"input-field",modelValue:F.value.name,"onUpdate:modelValue":a[0]||(a[0]=e=>F.value.name=e),placeholder:p(A)("create.name_placeholder"),"placeholder-class":"placeholder"},null,8,["modelValue","placeholder"])]),_:1}),d(r,{class:"form-group"},{default:s(()=>[d(l,{class:"label"},{default:s(()=>[i(v(p(A)("create.purpose_label")),1)]),_:1}),d(C,{class:"input-field",modelValue:F.value.purpose,"onUpdate:modelValue":a[1]||(a[1]=e=>F.value.purpose=e),placeholder:"What are you saving for?","placeholder-class":"placeholder"},null,8,["modelValue"])]),_:1}),d(r,{class:"form-group"},{default:s(()=>[d(l,{class:"label"},{default:s(()=>[i(v(p(A)("create.target_label")),1)]),_:1}),d(r,{class:"target-row"},{default:s(()=>[d(C,{class:"input-field target-input",type:"digit",modelValue:F.value.targetAmount,"onUpdate:modelValue":a[2]||(a[2]=e=>F.value.targetAmount=e),placeholder:"0.0","placeholder-class":"placeholder"},null,8,["modelValue"]),d(r,{class:"token-dropdown",onClick:a[3]||(a[3]=e=>j.value=!0)},{default:s(()=>[d(l,{class:"token-icon"},{default:s(()=>{var e;return[i(v((null==(e=B.value)?void 0:e.icon)||"ðŸª™"),1)]}),_:1}),d(l,{class:"token-symbol"},{default:s(()=>{var e;return[i(v((null==(e=B.value)?void 0:e.symbol)||"Select"),1)]}),_:1}),d(l,{class:"dropdown-arrow"},{default:s(()=>[i("â–¼")]),_:1})]),_:1})]),_:1})]),_:1}),d(r,{class:"form-group"},{default:s(()=>[d(l,{class:"label"},{default:s(()=>[i(v(p(A)("create.date_label")),1)]),_:1}),d(V,{mode:"date",start:S.value,value:F.value.date,onChange:E},{default:s(()=>[d(r,{class:"picker-view"},{default:s(()=>[i(v(F.value.date||p(A)("create.select_date")),1)]),_:1})]),_:1},8,["start","value"])]),_:1}),d(r,{class:"spacer"}),d(w,{class:"submit-btn",onClick:W,disabled:!q.value},{default:s(()=>[i(v(p(A)("create.create_btn")),1)]),_:1},8,["disabled"])]),_:1}),j.value?(o(),t(r,{key:0,class:"modal-overlay",onClick:a[6]||(a[6]=e=>j.value=!1)},{default:s(()=>[d(r,{class:"modal-content",onClick:a[5]||(a[5]=k(()=>{},["stop"]))},{default:s(()=>[d(l,{class:"modal-title"},{default:s(()=>[i(v(p(A)("create.select_token")),1)]),_:1}),d(r,{class:"custom-token-section"},{default:s(()=>[d(l,{class:"section-label"},{default:s(()=>[i(v(p(A)("create.custom_token")),1)]),_:1}),d(r,{class:"custom-input-row"},{default:s(()=>[d(C,{class:"address-input",modelValue:D.value,"onUpdate:modelValue":a[4]||(a[4]=e=>D.value=e),placeholder:"0x...","placeholder-class":"placeholder"},null,8,["modelValue"]),d(w,{class:"lookup-btn",onClick:H,disabled:U.value},{default:s(()=>[i(v(U.value?"...":"ðŸ”"),1)]),_:1},8,["disabled"])]),_:1}),I.value?(o(),t(l,{key:0,class:"lookup-error"},{default:s(()=>[i(v(I.value),1)]),_:1})):c("",!0)]),_:1}),d(l,{class:"section-label"},{default:s(()=>[i(v(p(A)("create.popular_tokens")),1)]),_:1}),d(r,{class:"token-list"},{default:s(()=>[(o(!0),g(b,null,h(P.value,e=>{var a;return o(),t(r,{key:e.address,class:y(["token-row",{active:(null==(a=B.value)?void 0:a.address)===e.address}]),onClick:a=>(e=>{B.value=e,j.value=!1})(e)},{default:s(()=>[d(l,{class:"token-icon-lg"},{default:s(()=>[i(v(e.icon),1)]),_:2},1024),d(r,{class:"token-info"},{default:s(()=>[d(l,{class:"token-name"},{default:s(()=>[i(v(e.name),1)]),_:2},1024),d(l,{class:"token-sym"},{default:s(()=>[i(v(e.symbol),1)]),_:2},1024)]),_:2},1024),e.isCustom?(o(),t(l,{key:0,class:"custom-badge"},{default:s(()=>[i("Custom")]),_:1})):c("",!0)]),_:2},1032,["class","onClick"])}),128))]),_:1})]),_:1})]),_:1})):c("",!0)]),_:1})}}}),[["__scopeId","data-v-5f2bb3f3"]]);export{x as default};
