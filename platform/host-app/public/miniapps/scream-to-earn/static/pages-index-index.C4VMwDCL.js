import{r as a,d as e,o as l,c as t,w as s,i as u,a as r,b as n,e as d,f as c,g as i,n as o,t as v,h as f}from"./index-BwRDbgEQ.js";function _(e){const l=a(!1),t=a(null);return{isLoading:l,error:t,payGAS:async(a,s)=>{l.value=!0,t.value=null;try{const l=await function(a=5e3){return new Promise((e,l)=>{if(window.MiniAppSDK)return void e(window.MiniAppSDK);const t=setTimeout(()=>{l(new Error("SDK timeout"))},a),s=()=>{clearTimeout(t),window.removeEventListener("miniapp-sdk-ready",s),window.MiniAppSDK?e(window.MiniAppSDK):l(new Error("SDK not found"))};window.addEventListener("miniapp-sdk-ready",s)})}();return await l.payments.payGAS(e,a,s)}catch(u){throw t.value=u,u}finally{l.value=!1}}}}const p=((a,e)=>{const l=a.__vccOpts||a;for(const[t,s]of e)l[t]=s;return l})(e({__name:"index",setup(e){_("miniapp-scream-to-earn");const p=a(0),m=a(0),w=a(0),S=a(0),y=a(0),M=a(!1),b=a(null),h=a(null);let A=null;const g=()=>{const a=Math.floor(40*Math.random())+60;if(S.value=a,y.value=Math.min((a-60)/40*100,100),a>w.value&&(w.value=a),a>85){const e=parseFloat((.01*(a-85)).toFixed(2));p.value=parseFloat((p.value+e).toFixed(2)),b.value=e,h.value={msg:`${a} dB! Earned ${e} GAS`,type:"success"}}},x=()=>{M.value?(A&&(clearInterval(A),A=null),M.value=!1,S.value=0,y.value=0,m.value++):(M.value=!0,b.value=null,A=setInterval(g,200))};return l(()=>{A&&clearInterval(A)}),(a,e)=>{const l=c,_=u;return r(),t(_,{class:"app-container"},{default:s(()=>[n(_,{class:"header"},{default:s(()=>[n(l,{class:"title"},{default:s(()=>[i("Scream to Earn")]),_:1}),n(l,{class:"subtitle"},{default:s(()=>[i("Louder = More rewards")]),_:1})]),_:1}),h.value?(r(),t(_,{key:0,class:o(["status-msg",h.value.type])},{default:s(()=>[n(l,null,{default:s(()=>[i(v(h.value.msg),1)]),_:1})]),_:1},8,["class"])):d("",!0),n(_,{class:"card"},{default:s(()=>[n(_,{class:"stats-row"},{default:s(()=>[n(_,{class:"stat"},{default:s(()=>[n(l,{class:"stat-value"},{default:s(()=>[i(v(p.value),1)]),_:1}),n(l,{class:"stat-label"},{default:s(()=>[i("GAS Earned")]),_:1})]),_:1}),n(_,{class:"stat"},{default:s(()=>[n(l,{class:"stat-value"},{default:s(()=>[i(v(m.value),1)]),_:1}),n(l,{class:"stat-label"},{default:s(()=>[i("Screams")]),_:1})]),_:1}),n(_,{class:"stat"},{default:s(()=>[n(l,{class:"stat-value"},{default:s(()=>[i(v(w.value),1)]),_:1}),n(l,{class:"stat-label"},{default:s(()=>[i("Max dB")]),_:1})]),_:1})]),_:1})]),_:1}),n(_,{class:"card"},{default:s(()=>[n(l,{class:"card-title"},{default:s(()=>[i("Voice Meter")]),_:1}),n(_,{class:"meter-display"},{default:s(()=>[n(_,{class:"meter-bar"},{default:s(()=>[n(_,{class:"meter-fill",style:f({width:`${y.value}%`})},null,8,["style"])]),_:1}),n(l,{class:"decibel-text"},{default:s(()=>[i(v(S.value)+" dB",1)]),_:1})]),_:1}),n(_,{class:"scream-icon"},{default:s(()=>[i(v(M.value?"ðŸ”Š":"ðŸŽ¤"),1)]),_:1}),n(_,{class:"scream-btn",onClick:x},{default:s(()=>[n(l,null,{default:s(()=>[i(v(M.value?"Stop Screaming":"Start Screaming"),1)]),_:1})]),_:1})]),_:1}),b.value?(r(),t(_,{key:1,class:"reward-card"},{default:s(()=>[n(l,{class:"reward-text"},{default:s(()=>[i("Earned "+v(b.value)+" GAS!",1)]),_:1}),n(l,{class:"reward-hint"},{default:s(()=>[i("Keep screaming for more")]),_:1})]),_:1})):d("",!0)]),_:1})}}}),[["__scopeId","data-v-a42e154b"]]);export{p as default};
