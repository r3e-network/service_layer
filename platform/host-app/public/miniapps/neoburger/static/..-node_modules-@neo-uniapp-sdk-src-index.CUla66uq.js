import{r as a,w as e,d as t,c as s,o as l,x as n,a as o,e as r,k as c,m as i,l as d,t as u,i as f,b as v,j as h,y as p,z as m,n as _,A as g,f as y,h as w,F as M,p as b}from"./index-pxmpo1os.js";import{C as S,B as k,g as x,D}from"./index-pxmpo1os.js";import{_ as I}from"./index.E62M_Flx.js";import{u as C}from"./index.E62M_Flx.js";function A(t){const s=a(!1),l=a(null);return{isLoading:s,error:l,payGAS:async(a,n)=>{s.value=!0,l.value=null;try{const s=await e();return await s.payments.payGAS(t,a,n)}catch(o){throw l.value=o,o}finally{s.value=!1}}}}function j(t){const s=a(!1),l=a(null);return{isLoading:s,error:l,vote:async(a,n,o)=>{s.value=!0,l.value=null;try{const s=await e();return await s.governance.vote(t,a,n,o)}catch(r){throw l.value=r,r}finally{s.value=!1}},getCandidates:async()=>{s.value=!0,l.value=null;try{const a=await e();return await a.governance.getCandidates()}catch(a){throw l.value=a,a}finally{s.value=!1}}}}function K(t){const s=a(!1),l=a(null);return{isLoading:s,error:l,requestRandom:async()=>{s.value=!0,l.value=null;try{const a=await e();return await a.rng.requestRandom(t)}catch(a){throw l.value=a,a}finally{s.value=!1}}}}function T(){const t=a(!1),s=a(null);return{isLoading:t,error:s,getPrice:async a=>{t.value=!0,s.value=null;try{const t=await e();return await t.datafeed.getPrice(a)}catch(l){throw s.value=l,l}finally{t.value=!1}}}}function E(){const t=a(!1),s=a(null);return{isLoading:t,error:s,list:async(a={})=>{var l;t.value=!0,s.value=null;try{const t=await e();if(!(null==(l=t.events)?void 0:l.list))throw new Error("events.list not available");return await t.events.list(a)}catch(n){throw s.value=n,n}finally{t.value=!1}}}}const L="https://api.neo-service-layer.io";function N(){const e=a(!1),t=a(null);return{isLoading:e,error:t,checkEligibility:async()=>{var a;e.value=!0,t.value=null;try{const e=await fetch(`${L}/gas-sponsor-check`,{method:"GET",credentials:"include"});if(!e.ok){const t=await e.json();throw new Error((null==(a=t.error)?void 0:a.message)||"Check failed")}return await e.json()}catch(s){throw t.value=s,s}finally{e.value=!1}},requestSponsorship:async a=>{var s;e.value=!0,t.value=null;try{const e=await fetch(`${L}/gas-sponsor-request`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({amount:a})});if(!e.ok){const a=await e.json();throw new Error((null==(s=a.error)?void 0:s.message)||"Request failed")}return await e.json()}catch(l){throw t.value=l,l}finally{e.value=!1}}}}const P=()=>`mock-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,G={wallet:{getAddress:async()=>(console.log("[MockSDK] getAddress called"),"NXV7ZhHiyM1aHXwpVsRZC6BwNFP2jghXAq"),invokeIntent:async a=>(console.log("[MockSDK] invokeIntent:",a),{txid:P()})},payments:{payGAS:async(a,e,t)=>(console.log("[MockSDK] payGAS:",{appId:a,amount:e,memo:t}),await new Promise(a=>setTimeout(a,800)),{request_id:P(),user_id:"mock-user",intent:"payments",constraints:{settlement:"GAS_ONLY"},invocation:{contract:"0x0bb8f09e6d3611bc5c8adbd79ff8af1e34f73193",method:"transfer",args:[e,t]}})},governance:{vote:async(a,e,t,s)=>(console.log("[MockSDK] vote:",{appId:a,proposalId:e,amount:t,support:s}),await new Promise(a=>setTimeout(a,800)),{request_id:P(),user_id:"mock-user",intent:"governance",constraints:{governance:"BNEO_ONLY"},invocation:{contract:"0xc8f3bbe1c205c932aab00b28f7df99f9bc788a05",method:"vote",args:[e,t,s]}}),getCandidates:async()=>(console.log("[MockSDK] getCandidates called"),await new Promise(a=>setTimeout(a,500)),{candidates:[{address:"NNShaEBGVBfmGWzGs6W5sCneKPBwmCA3Br",publicKey:"02a1",name:"NeoEconoLabs",votes:"5000000",active:!0},{address:"NdUL5oDPD159KeFpD5A9zw5xNF1xLX6nLT",publicKey:"03b2",name:"COZ",votes:"4500000",active:!0},{address:"NKuyBkoGdZZSLyPbJEetheRhMjeznFZszf",publicKey:"02c3",name:"AxLabs",votes:"3200000",active:!0}],totalVotes:"12700000",blockHeight:1234567})},rng:{async requestRandom(a){console.log("[MockSDK] requestRandom:",a),await new Promise(a=>setTimeout(a,500));const e=Array.from({length:32},()=>Math.floor(256*Math.random()).toString(16).padStart(2,"0")).join("");return{request_id:P(),app_id:a,randomness:e}}},datafeed:{async getPrice(a){console.log("[MockSDK] getPrice:",a);return{feed_id:P(),pair:a,price:{"NEO-USD":"12.45","GAS-USD":"4.32","BTC-USD":"43250.00","ETH-USD":"2280.50"}[a]||"100.00",decimals:8,timestamp:(new Date).toISOString(),sources:["mock"]}}}};function F(){"undefined"!=typeof window&&(window.MiniAppSDK=G,console.log("[MockSDK] Installed on window.MiniAppSDK"),window.dispatchEvent(new Event("miniapp-sdk-ready")))}function B(){const a=Date.now()+36e5+72e5*Math.random();return{type:"live_countdown",refreshInterval:1,endTime:Math.floor(a/1e3),jackpot:(1e3+9e3*Math.random()).toFixed(2),ticketsSold:Math.floor(100+500*Math.random()),ticketPrice:"0.1"}}function V(){return{type:"live_multiplier",refreshInterval:.1,currentMultiplier:1+5*Math.random(),status:["waiting","running","crashed"][Math.floor(3*Math.random())],playersCount:Math.floor(10+50*Math.random()),totalBets:(100+900*Math.random()).toFixed(2)}}function q(){return{type:"live_canvas",refreshInterval:5,pixels:O(32,32),width:32,height:32,activeUsers:Math.floor(5+20*Math.random())}}function O(a,e){const t=["#10b981","#3b82f6","#ec4899","#f59e0b","#8b5cf6"];let s="";for(let l=0;l<a*e;l++)s+=t[Math.floor(Math.random()*t.length)].slice(1);return s}function R(){return{type:"live_stats",refreshInterval:10,stats:[{label:"Available",value:String(Math.floor(5+20*Math.random())),icon:"ðŸ§§"},{label:"Total GAS",value:(50+200*Math.random()).toFixed(1),change:12.5},{label:"Claimed",value:String(Math.floor(100+500*Math.random()))}]}}function U(){const a=Math.floor(1e3+5e3*Math.random()),e=Math.floor(a*(.3+.5*Math.random()));return{type:"live_voting",refreshInterval:30,proposalTitle:"Increase staking rewards",yesVotes:e,noVotes:a-e,totalVotes:a,endTime:Math.floor((Date.now()+2592e5)/1e3)}}function $(){const a=10+5*Math.random();return{type:"live_price",refreshInterval:5,symbol:"NEO-USD",price:a.toFixed(2),change24h:10*Math.random()-5,sparkline:Array.from({length:24},()=>a*(.95+.1*Math.random()))}}const z=I(t({__name:"CardCountdown",props:{data:{}},setup(e){const t=e,h=a(Math.floor(Date.now()/1e3));let p;const m=s(()=>Math.max(0,t.data.endTime-h.value)),_=s(()=>String(Math.floor(m.value/3600)).padStart(2,"0")),g=s(()=>String(Math.floor(m.value%3600/60)).padStart(2,"0")),y=s(()=>String(m.value%60).padStart(2,"0")),w=s(()=>t.data.jackpot),M=s(()=>t.data.ticketsSold);return l(()=>{p=setInterval(()=>{h.value=Math.floor(Date.now()/1e3)},1e3)}),n(()=>clearInterval(p)),(a,e)=>{const t=i,s=f;return v(),o(s,{class:"card-countdown"},{default:r(()=>[c(s,{class:"countdown-timer"},{default:r(()=>[c(t,{class:"time-value"},{default:r(()=>[d(u(_.value),1)]),_:1}),c(t,{class:"time-sep"},{default:r(()=>[d(":")]),_:1}),c(t,{class:"time-value"},{default:r(()=>[d(u(g.value),1)]),_:1}),c(t,{class:"time-sep"},{default:r(()=>[d(":")]),_:1}),c(t,{class:"time-value"},{default:r(()=>[d(u(y.value),1)]),_:1})]),_:1}),c(s,{class:"jackpot"},{default:r(()=>[c(t,{class:"jackpot-label"},{default:r(()=>[d("Jackpot")]),_:1}),c(t,{class:"jackpot-value"},{default:r(()=>[d(u(w.value)+" GAS",1)]),_:1})]),_:1}),c(s,{class:"tickets"},{default:r(()=>[c(t,null,{default:r(()=>[d(u(M.value)+" tickets sold",1)]),_:1})]),_:1})]),_:1})}}}),[["__scopeId","data-v-cb3ef45a"]]),Z=I(t({__name:"CardMultiplier",props:{data:{}},setup(a){const e=a,t=s(()=>e.data.currentMultiplier.toFixed(2)),l=s(()=>({waiting:"Starting...",running:"LIVE",crashed:"Crashed!"}[e.data.status]));return(a,e)=>{const s=i,n=f;return v(),o(n,{class:h(["card-multiplier",a.data.status])},{default:r(()=>[c(n,{class:"multiplier-display"},{default:r(()=>[c(s,{class:"multiplier-value"},{default:r(()=>[d(u(t.value)+"x",1)]),_:1}),c(s,{class:"status-badge"},{default:r(()=>[d(u(l.value),1)]),_:1})]),_:1}),c(n,{class:"game-info"},{default:r(()=>[c(s,null,{default:r(()=>[d(u(a.data.playersCount)+" players",1)]),_:1}),c(s,null,{default:r(()=>[d(u(a.data.totalBets)+" GAS",1)]),_:1})]),_:1})]),_:1},8,["class"])}}}),[["__scopeId","data-v-4d4c6070"]]),H=I(t({__name:"CardCanvas",props:{data:{}},setup(e){const t=e,s=a(120);function n(){const a=g("preview-canvas"),{pixels:e,width:l,height:n}=t.data,o=s.value/l;for(let t=0;t<e.length/6;t++){const s="#"+e.slice(6*t,6*t+6),n=t%l*o,r=Math.floor(t/l)*o;a.setFillStyle(s),a.fillRect(n,r,o,o)}a.draw()}return l(()=>n()),p(()=>t.data.pixels,n),(a,e)=>{const t=m,l=f,n=i;return v(),o(l,{class:"card-canvas"},{default:r(()=>[c(l,{class:"canvas-preview"},{default:r(()=>[c(t,{"canvas-id":"preview-canvas",class:"preview-canvas",style:_({width:s.value+"px",height:s.value+"px"})},null,8,["style"])]),_:1}),c(l,{class:"canvas-info"},{default:r(()=>[c(n,{class:"active-users"},{default:r(()=>[d("ðŸŽ¨ "+u(a.data.activeUsers)+" active",1)]),_:1}),c(n,{class:"canvas-size"},{default:r(()=>[d(u(a.data.width)+"Ã—"+u(a.data.height),1)]),_:1})]),_:1})]),_:1})}}}),[["__scopeId","data-v-85b6f59e"]]),X=I(t({__name:"CardStats",props:{data:{}},setup:a=>(a,e)=>{const t=i,s=f;return v(),o(s,{class:"card-stats"},{default:r(()=>[(v(!0),y(M,null,w(a.data.stats,(a,e)=>(v(),o(s,{key:e,class:"stat-item"},{default:r(()=>[a.icon?(v(),o(t,{key:0,class:"stat-icon"},{default:r(()=>[d(u(a.icon),1)]),_:2},1024)):b("",!0),c(s,{class:"stat-content"},{default:r(()=>[c(t,{class:"stat-value"},{default:r(()=>[d(u(a.value),1)]),_:2},1024),c(t,{class:"stat-label"},{default:r(()=>[d(u(a.label),1)]),_:2},1024)]),_:2},1024),a.change?(v(),o(t,{key:1,class:h(["stat-change",a.change>0?"up":"down"])},{default:r(()=>[d(u(a.change>0?"+":"")+u(a.change.toFixed(1))+"% ",1)]),_:2},1032,["class"])):b("",!0)]),_:2},1024))),128))]),_:1})}}),[["__scopeId","data-v-c3e3c1b2"]]),J=I(t({__name:"CardVoting",props:{data:{}},setup(a){const e=a,t=s(()=>Math.round(e.data.yesVotes/e.data.totalVotes*100)),l=s(()=>100-t.value),n=s(()=>{const a=e.data.endTime-Math.floor(Date.now()/1e3);if(a<=0)return"Ended";const t=Math.floor(a/86400);return t>0?`${t}d left`:`${Math.floor(a/3600)}h left`});return(a,e)=>{const s=i,h=f;return v(),o(h,{class:"card-voting"},{default:r(()=>[c(s,{class:"proposal-title"},{default:r(()=>[d(u(a.data.proposalTitle),1)]),_:1}),c(h,{class:"vote-bars"},{default:r(()=>[c(h,{class:"vote-bar yes"},{default:r(()=>[c(h,{class:"bar-fill",style:_({width:t.value+"%"})},null,8,["style"]),c(s,{class:"bar-label"},{default:r(()=>[d("Yes "+u(t.value)+"%",1)]),_:1})]),_:1}),c(h,{class:"vote-bar no"},{default:r(()=>[c(h,{class:"bar-fill",style:_({width:l.value+"%"})},null,8,["style"]),c(s,{class:"bar-label"},{default:r(()=>[d("No "+u(l.value)+"%",1)]),_:1})]),_:1})]),_:1}),c(h,{class:"vote-footer"},{default:r(()=>[c(s,null,{default:r(()=>[d(u(a.data.totalVotes)+" votes",1)]),_:1}),c(s,null,{default:r(()=>[d(u(n.value),1)]),_:1})]),_:1})]),_:1})}}}),[["__scopeId","data-v-ae1a2b5a"]]),W=I(t({__name:"CardPrice",props:{data:{}},setup(a){const e=a,t=s(()=>{const{sparkline:a}=e.data,t=Math.min(...a),s=Math.max(...a)-t||1;return a.map(a=>20+(a-t)/s*80)});return(a,e)=>{const s=i,l=f;return v(),o(l,{class:"card-price"},{default:r(()=>[c(l,{class:"price-header"},{default:r(()=>[c(s,{class:"symbol"},{default:r(()=>[d(u(a.data.symbol),1)]),_:1}),c(s,{class:h(["change",a.data.change24h>=0?"up":"down"])},{default:r(()=>[d(u(a.data.change24h>=0?"+":"")+u(a.data.change24h.toFixed(2))+"% ",1)]),_:1},8,["class"])]),_:1}),c(s,{class:"price-value"},{default:r(()=>[d("$"+u(a.data.price),1)]),_:1}),c(l,{class:"sparkline"},{default:r(()=>[(v(!0),y(M,null,w(t.value,(e,t)=>(v(),o(l,{key:t,class:h(["spark-bar",a.data.change24h>=0?"up":"down"]),style:_({height:e+"%"})},null,8,["style","class"]))),128))]),_:1})]),_:1})}}}),[["__scopeId","data-v-4bc5fda9"]]);export{H as CardCanvas,z as CardCountdown,Z as CardMultiplier,W as CardPrice,X as CardStats,J as CardVoting,S as callBridge,k as createH5Bridge,x as getSDKSync,F as installMockSDK,q as mockCanvasData,B as mockCountdownData,V as mockMultiplierData,$ as mockPriceData,G as mockSDK,R as mockStatsData,U as mockVotingData,T as useDatafeed,E as useEvents,N as useGasSponsor,j as useGovernance,D as useI18n,A as usePayments,K as useRNG,C as useWallet,e as waitForSDK};
