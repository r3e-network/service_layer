# Production Environment Configuration
# MarbleRun runs with full SGX protection (no --insecure flag)

# Environment
MARBLE_ENV=production

# MarbleRun Coordinator
COORDINATOR_CLIENT_ADDR=coordinator.marblerun.svc.cluster.local:4433
# NOTE: Public gateway is Supabase Edge Functions (outside the cluster). Select
# a Marble service at runtime using SERVICE_TYPE=...

# MarbleRun Mode (SGX Required)
MARBLERUN_INSECURE=false

# Neo N3 Network (MainNet)
NEO_RPC_URL=https://mainnet1.neo.coz.io:443
NEO_NETWORK_MAGIC=860833102

# MiniApp platform contracts (mainnet)
CONTRACT_PAYMENT_HUB_ADDRESS=0xc700fa6001a654efcd63e15a3833fbea7baaa3a3
CONTRACT_GOVERNANCE_ADDRESS=0x705615e903d92abf8f6f459086b83f51096aa413
CONTRACT_PRICE_FEED_ADDRESS=0x9e889922d2f64fa0c06a28d179c60fe1af915d27
CONTRACT_RANDOMNESS_LOG_ADDRESS=0x66493b8a2dee9f9b74a16cf01e443c3fe7452c25
CONTRACT_APP_REGISTRY_ADDRESS=0x583cabba8beff13e036230de844c2fb4118ee38c
CONTRACT_AUTOMATION_ANCHOR_ADDRESS=0x0fd51557facee54178a5d48181dcfa1b61956144
CONTRACT_SERVICE_GATEWAY_ADDRESS=0x7f73ae3036c1ca57cad0d4e4291788653b0fa7d7
TXPROXY_ALLOWLIST='{"contracts":{"0xc700fa6001a654efcd63e15a3833fbea7baaa3a3":["pay"],"0x705615e903d92abf8f6f459086b83f51096aa413":["stake","unstake","vote"],"0x9e889922d2f64fa0c06a28d179c60fe1af915d27":["update"],"0x66493b8a2dee9f9b74a16cf01e443c3fe7452c25":["record"],"0x0fd51557facee54178a5d48181dcfa1b61956144":["markExecuted"],"0x7f73ae3036c1ca57cad0d4e4291788653b0fa7d7":["fulfillRequest"]}}'

# Supabase (Production Instance)
# These values are injected by MarbleRun from manifest secrets
SUPABASE_URL=${SUPABASE_PROD_URL}
SUPABASE_SERVICE_KEY=${SUPABASE_PROD_SERVICE_KEY}
SUPABASE_REST_PREFIX=/rest/v1
SUPABASE_ALLOW_INSECURE=false

# Service Ports
NEOFEEDS_PORT=8083
NEOFLOW_PORT=8084
NEOACCOUNTS_PORT=8085
NEOCOMPUTE_PORT=8086
NEOVRF_PORT=8087
ORACLE_PORT=8088
TXPROXY_PORT=8090
GLOBALSIGNER_PORT=8092
NEOGASBANK_PORT=8091
NEOSIMULATION_PORT=8093
NEOREQUESTS_MAX_RESULT_BYTES=800
NEOREQUESTS_MAX_ERROR_LEN=256
NEOREQUESTS_RNG_RESULT_MODE=raw
NEOREQUESTS_TX_WAIT=true
TXPROXY_TIMEOUT=90s
NEOREQUESTS_ENFORCE_APPREGISTRY=true
NEOREQUESTS_APPREGISTRY_CACHE_SECONDS=60
TOPUP_ENABLED=false
NEOACCOUNTS_ALLOW_EPHEMERAL_MASTER_KEY=false
NEOACCOUNTS_DELETE_RETIRING_ACCOUNTS=false

# Logging
LOG_LEVEL=info
LOG_FORMAT=json

# Security (Production - Strict)
JWT_EXPIRY=15m
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=1m
CORS_ORIGINS=https://neomini.app,https://www.neomini.app,https://app.service-layer.r3e.network

# NeoOracle outbound URL allowlist (required in production/SGX mode)
ORACLE_HTTP_ALLOWLIST=https://api.binance.com,https://api.coinbase.com

# Database
DB_MAX_CONNECTIONS=50
DB_IDLE_TIMEOUT=10m

# Production Features
ENABLE_PROFILING=false
ENABLE_DEBUG_ENDPOINTS=false
TEST_MODE=false

# Monitoring
METRICS_ENABLED=true
METRICS_PORT=9090
TRACING_ENABLED=true
TRACING_ENDPOINT=http://jaeger-collector:14268/api/traces
